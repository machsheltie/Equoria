
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js __tests__/integration/email-verification.test.mjs __tests__/unit/emailVerificationService.test.mjs

(node:39660) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS __tests__/integration/email-verification.test.mjs (7.946 s)
  ‚óè Console

    console.log
      [2025-11-20 08:34:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-20 08:34:53] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser_1763645693551@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=01aefd2dc2408ecb064e51e4b3861f457665a54b24a04f6000cfae21bda87b9e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:53] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:53] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser2_1763645694062@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5c22e4cce444f9d7743d876cf7a47d703e0ce313be633cb4c6505ffe8afa0d33

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:54] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: devuser_1763645694478@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c869abfc97e86cd2c47c5bd142f6ffdec8cbc094ff54b6b2036e6e734ecba5db

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:54] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [GET] /api/auth/verify-email?token=7f1e868fa2b2a9aaf6f3bc7cab786364b5ae42bb0bfbe5fd447aa815dd27fbea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:54] info: [GET] /api/auth/verify-email?token=7f1e868fa2b2a9aaf6f3bc7cab786364b5ae42bb0bfbe5fd447aa815dd27fbea - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=352621f31b728ffc0a85705d954fca3886c48220c5530a2a7d21da7347e39172

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=352621f31b728ffc0a85705d954fca3886c48220c5530a2a7d21da7347e39172 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=86ca876d1f11e6156d1d9a97b27a2fe49e384cfa469c5f5ea73eb0d7ac7fe525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=86ca876d1f11e6156d1d9a97b27a2fe49e384cfa469c5f5ea73eb0d7ac7fe525 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: [GET] /api/auth/verify-email - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=invalid_token_here

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: [GET] /api/auth/verify-email?token=invalid_token_here - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=invalid_token_here - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=d1938518d3a33c585581e52e0d07c17a1fabd09836878a3780e7c6a0cb4b7659

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] error: [authController.verifyEmail] Error verifying email: Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: [GET] /api/auth/verify-email?token=d1938518d3a33c585581e52e0d07c17a1fabd09836878a3780e7c6a0cb4b7659 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: Error Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=d1938518d3a33c585581e52e0d07c17a1fabd09836878a3780e7c6a0cb4b7659 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=b5cc815883dde8ac6a00c1d3fc51a9265f3783d135399677a2e1f0a3592f2327

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=b5cc815883dde8ac6a00c1d3fc51a9265f3783d135399677a2e1f0a3592f2327 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=b5cc815883dde8ac6a00c1d3fc51a9265f3783d135399677a2e1f0a3592f2327

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: [GET] /api/auth/verify-email?token=b5cc815883dde8ac6a00c1d3fc51a9265f3783d135399677a2e1f0a3592f2327 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=b5cc815883dde8ac6a00c1d3fc51a9265f3783d135399677a2e1f0a3592f2327 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=c8390eadd811bdf0edf75b18d1386d56093eb37865cfab728a9d0c9dffbaaf43

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [GET] /api/auth/verify-email?token=c8390eadd811bdf0edf75b18d1386d56093eb37865cfab728a9d0c9dffbaaf43 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:55] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [auth] Authenticated user 53ec6ccf-6909-48a6-9d20-85c3ad0fc219 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763645695849@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8dbdaecb1819639f15527c9ce6c7abc8860e8ba9b4d0e8ab5c2aa50cdb402090

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] warn: [auth] Missing token for POST /resend-verification from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [auth] Authenticated user c4d1dba0-b50c-4d56-aa0f-022cac1f2adc for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: [authController.resendVerification] Error resending verification: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: Error Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [auth] Authenticated user 8cdfb80a-6602-42d8-b0b3-b2dc2978d96c for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763645696486@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2dd130d9b7c01d79ac9106339680fb2ee7300f6378db5f99a4bd13b630108328

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [auth] Authenticated user 8cdfb80a-6602-42d8-b0b3-b2dc2978d96c for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] error: Error Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [auth] Authenticated user aaadc4bd-4c63-43fc-ac18-05c688e6605e for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763645696738@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=dab664a1bd772dec627ed49f78e0f4b3633a05bbb596df441a60025172f6761f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:56] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [auth] Authenticated user e59c625b-a404-4d5e-9c8c-d057782418e8 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [auth] Authenticated user ee8a1c12-9122-4407-a065-6792720d8ee7 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] warn: [auth] Missing token for GET /verification-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [auth] Authenticated user 5b0760ac-f57c-4c64-88b4-94b5517f40a6 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:57] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: workflow_1763645697842@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d0aa1eeb9234f30eaa312519fa48c675deb0993046ee5c1f82cd95b2aacaac25

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=d0aa1eeb9234f30eaa312519fa48c675deb0993046ee5c1f82cd95b2aacaac25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=d0aa1eeb9234f30eaa312519fa48c675deb0993046ee5c1f82cd95b2aacaac25 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [auth] Authenticated user 960cdf7b-ef36-4a37-8063-8fd7ebce7947 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [auth] Authenticated user 960cdf7b-ef36-4a37-8063-8fd7ebce7947 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763645698218@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=86ac7bb32f5ae988e5e3a91efde6a88dd4f934a8ed15dd3fb4ae336a5671812c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-20 08:34:58] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=86ac7bb32f5ae988e5e3a91efde6a88dd4f934a8ed15dd3fb4ae336a5671812c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=86ac7bb32f5ae988e5e3a91efde6a88dd4f934a8ed15dd3fb4ae336a5671812c - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [auth] Authenticated user 960cdf7b-ef36-4a37-8063-8fd7ebce7947 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=1fa641a87d85d92e3f862d7f11c9d6e75525da85f3f13fd573b7d17986890c25 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=7790e901f1d090ca5f66b1ee38056d10e75d2ef59e9b686a43c327924960fca8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=7790e901f1d090ca5f66b1ee38056d10e75d2ef59e9b686a43c327924960fca8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=7790e901f1d090ca5f66b1ee38056d10e75d2ef59e9b686a43c327924960fca8 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: [GET] /api/auth/verify-email?token=7790e901f1d090ca5f66b1ee38056d10e75d2ef59e9b686a43c327924960fca8 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=7790e901f1d090ca5f66b1ee38056d10e75d2ef59e9b686a43c327924960fca8 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:58] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-20 08:34:59] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-20 08:34:59] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)


Test Suites: 1 passed, 1 total
Tests:       26 passed, 26 total
Snapshots:   0 total
Time:        8.261 s
Ran all test suites matching /__tests__\\integration\\email-verification.test.mjs|__tests__\\unit\\emailVerificationService.test.mjs/i.
üßπ Running global teardown...
‚úÖ Global teardown completed successfully
