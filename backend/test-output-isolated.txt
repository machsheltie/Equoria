
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js

(node:43256) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/trainingController.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] warn: [trainingController.canTrain] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:53] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:53] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:53] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Training failed: Failed to log training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [xpLogModel.logXpEvent] Logging XP event: User xp-test-player, Amount: 5, Reason: Trained horse XP Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Stat gain: intelligence +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: XP system unavailable

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.canTrain] Error checking training eligibility: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.getTrainingStatus] Error getting training status: Training eligibility check failed: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Stat gain: stamina +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] User test-player-123 has no horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user non-existent-player

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.getTrainableHorses] User non-existent-player not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.getTrainableHorses] Error getting trainable horses: Player database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Stat gain: precision +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Horse 1 has traits: intelligent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Trait XP modifier applied: 25.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Stat gain chance modified by traits: 30.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 6, Reason: Trained horse Intelligent Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Training cooldown reduced by trait effects to 6 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/atBirthTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/resultModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully created new result for horse 3 in show 2 with score 65.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [resultModel.saveResult] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:350:61)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully updated placeholder result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByHorse] Found 2 results for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByHorse] Found 0 results for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [resultModel.getResultsByHorse] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:551:63)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByShow] Found 2 results for show 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByShow] Found 0 results for show 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [resultModel.getResultsByShow] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:623:63)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultById] Successfully found result: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [resultModel.getResultById] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:681:65)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByUser] Retrieved 1 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] error: [resultModel.getResultsByUser] Error getting results for user user123: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByHorse] Found 0 results for horse 123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:54] info: [resultModel.getResultsByShow] Found 0 results for show 456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomHiringWorkflow.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.error
      Error testing speciality foalCare: JestAssertionError: expect(jest.fn()).toHaveBeenCalledWith(...expected)
      
      Expected: 201
      Received: 400
      
      Number of calls: 1
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomHiringWorkflow.test.mjs:347:30) {
        matcherResult: {
          message: 'expect(jest.fn()).toHaveBeenCalledWith(...expected)\n' +
            '\n' +
            'Expected: 201\n' +
            'Received: 400\n' +
            '\n' +
            'Number of calls: 1',
          pass: false
        }
      }

    [0m [90m 355 |[39m           )[33m;[39m
     [90m 356 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 357 |[39m           console[33m.[39merror([32m`Error testing speciality ${speciality}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 358 |[39m         }
     [90m 359 |[39m       }
     [90m 360 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/groomHiringWorkflow.test.mjs:357:19)

PASS tests/competitionScore.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.8%, adjustment: -18.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Final score: 191 (base: 210, trait: +0, luck: -18.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.9%, adjustment: 3.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:55] info: [calculateCompetitionScore] Horse Test Horse: Final score: 214 (base: 210, trait: +0, luck: 3.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -10.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 200 (base: 210, trait: +0, luck: -10.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -17.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 210, trait: +0, luck: -17.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -15.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -15.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -26.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -26.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -10.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -10.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.3%, adjustment: 6.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 6.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -3.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 297 (base: 300, trait: +0, luck: -3.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.1%, adjustment: 15.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 15.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.0%, adjustment: 5.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 306 (base: 300, trait: +0, luck: 5.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -16.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -16.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 25.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 325 (base: 300, trait: +0, luck: 25.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.4%, adjustment: 16.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 16.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.4%, adjustment: -7.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -7.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -24.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 276 (base: 300, trait: +0, luck: -24.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.3%, adjustment: 9.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 9.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -9.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -9.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 14.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.5%, adjustment: -7.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -7.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.7%, adjustment: -11.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -11.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 11.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 11.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -15.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -15.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.6%, adjustment: -13.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -13.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.9%, adjustment: -5.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -5.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 23.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 323 (base: 300, trait: +0, luck: 23.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.6%, adjustment: 16.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 317 (base: 300, trait: +0, luck: 16.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.8%, adjustment: 8.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 14.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 14.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 7.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.9%, adjustment: 26.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 26.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -9.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 291 (base: 300, trait: +0, luck: -9.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.5%, adjustment: 16.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 317 (base: 300, trait: +0, luck: 16.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 11.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 312 (base: 300, trait: +0, luck: 11.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -16.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -16.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 25.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 325 (base: 300, trait: +0, luck: 25.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 14.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 14.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 11.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 11.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.2%, adjustment: -0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 299 (base: 300, trait: +0, luck: -0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.8%, adjustment: 26.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 26.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.6%, adjustment: -1.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 298 (base: 300, trait: +0, luck: -1.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 8.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 8.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.4%, adjustment: 13.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 313 (base: 300, trait: +0, luck: 13.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.4%, adjustment: -22.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -22.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.5%, adjustment: -13.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -13.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 19.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 19.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.3%, adjustment: -6.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 293 (base: 300, trait: +0, luck: -6.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.2%, adjustment: 0.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 300 (base: 300, trait: +0, luck: 0.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 13.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 13.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.2%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 3.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 83 (base: 80, trait: +0, luck: 3.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.7%, adjustment: 11.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +0, luck: 11.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 6.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 6.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.9%, adjustment: 9.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +0, luck: 9.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:40:56] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.6%, adjustment: 13.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 194 (base: 180, trait: +0, luck: 13.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.3%, adjustment: -11.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 180, trait: +0, luck: -11.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:56] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:57] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/training.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:40:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:40:59] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:40:59] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10386 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10386 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10386 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10386

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10386 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10386 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10385 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10385 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10385 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10385 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10385 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10385 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Test Adult Horse (ID: 10385)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10385 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10385 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10385 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10385 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10385: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Test Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 546, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10385 in Dressage (Log ID: 763, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10388 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10388 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10388 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10388

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10388 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10388 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10388

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10388 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Score Test Horse (ID: 10388)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10388 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10388 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 764

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10388 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10388 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10388: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10388

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Score Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 547, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10388 in Show Jumping (Log ID: 764, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10389 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10389 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10389 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10389

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10389 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10389 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10389

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10389 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Accumulation Test Horse 1 (ID: 10389)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10389 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10389 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 765

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 10389 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 10389 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 10389: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 10389

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Accumulation Test Horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 548, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10389 in Cross Country (Log ID: 765, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10387 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10387 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10387 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10387

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10387 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10387 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10387: Fri Nov 21 2025 17:40:59 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10387 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10391 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10391 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10391 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10391

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10391 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10391 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10391: Thu Nov 13 2025 17:41:00 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10391 is eligible to train in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Old Trained Horse (ID: 10391)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10391 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10391 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 767

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Endurance score for horse 10391 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Endurance score for horse 10391 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Endurance score for horse 10391: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Endurance score for horse 10391

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Old Trained Horse in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 549, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10391 in Endurance (Log ID: 767, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10392 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10392 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10392 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10392

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10392 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10392 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10392

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10392 is eligible to train in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: XP Test Horse (ID: 10392)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10392 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10392 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 768

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Trail score for horse 10392 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Trail score for horse 10392 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Trail score for horse 10392: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Trail score for horse 10392

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse XP Test Horse in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 550, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10392 in Trail (Log ID: 768, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10393 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10393 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10393 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10393

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10393 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10393 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10393

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10393 is eligible to train in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Log Test Horse (ID: 10393)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10393 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10393 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 769

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Reining score for horse 10393 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Reining score for horse 10393 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Reining score for horse 10393: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Reining score for horse 10393

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Log Test Horse in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 551, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10393 in Reining (Log ID: 769, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainRouteHandler] Training request for horse 10394 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Attempting to train horse 10394 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Checking training eligibility for horse 10394 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Getting age for horse 10394

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getHorseAge] Horse 10394 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10394 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10394

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.canTrain] Horse 10394 is eligible to train in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.getHorseById] Successfully found horse: Date Test Horse (ID: 10394)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Horse 10394 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Logging training session for horse 10394 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 770

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Incrementing Driving score for horse 10394 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Updating Driving score for horse 10394 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.updateDisciplineScore] Successfully updated Driving score for horse 10394: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Driving score for horse 10394

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Logging XP event: User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5, Reason: Trained horse Date Test Horse in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 552, User 369f243c-7236-4475-b1aa-60e145664632, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Awarded 5 XP to user 369f243c-7236-4475-b1aa-60e145664632 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [trainingController.trainHorse] Successfully trained horse 10394 in Driving (Log ID: 770, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/trainingController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:01] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10395 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10395 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10395 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10396 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10396 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10397

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10397 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10397 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Getting training status for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10400 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10400 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10400 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] No training records found for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Training status retrieved for horse 10400: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10400 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10400 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 10400)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Horse 10400 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 772

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 10400 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 10400 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 10400: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Logging XP event: User b454b526-0ee9-48b9-b7b6-c4d35c7a9f16, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 553, User b454b526-0ee9-48b9-b7b6-c4d35c7a9f16, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Awarded 5 XP to user b454b526-0ee9-48b9-b7b6-c4d35c7a9f16 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Successfully trained horse 10400 in Racing (Log ID: 772, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Getting training status for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10400 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10400: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10400 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10400 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 10400 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Last training date for horse 10400 in Racing: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10400: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Training status retrieved for horse 10400: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10396 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10396 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10397

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10397 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10397 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10395 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Getting training status for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10395 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10395 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10395 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10395 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] No training records found for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10395 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Training status retrieved for horse 10395: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Getting training status for horse 10397 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10397 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10397

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10397 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10397 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10397

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10397 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 10397 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Last training date for horse 10397 in Racing: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Training status retrieved for horse 10397: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Getting training status for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainingStatus] Training status retrieved for horse 99999: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainableHorses] Getting trainable horses for user b454b526-0ee9-48b9-b7b6-c4d35c7a9f161

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.getTrainableHorses] User b454b526-0ee9-48b9-b7b6-c4d35c7a9f161 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainableHorses] Getting trainable horses for user b454b526-0ee9-48b9-b7b6-c4d35c7a9f16

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10398 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10398

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10400 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10400: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user b454b526-0ee9-48b9-b7b6-c4d35c7a9f16

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10395 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10395 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10395 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 10395)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Horse 10395 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10395 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 773

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10395 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10395 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10395: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Logging XP event: User a690a4d8-0006-4293-9e48-aaaafbbe28e5, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 554, User a690a4d8-0006-4293-9e48-aaaafbbe28e5, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Awarded 5 XP to user a690a4d8-0006-4293-9e48-aaaafbbe28e5 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Successfully trained horse 10395 in Dressage (Log ID: 773, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainableHorses] Getting trainable horses for user a690a4d8-0006-4293-9e48-aaaafbbe28e5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10395 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10395: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user a690a4d8-0006-4293-9e48-aaaafbbe28e5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainRouteHandler] Training request for horse 10401 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10401 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10401 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10401 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10401 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10401 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 10401)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Horse 10401 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Logging training session for horse 10401 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 774

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10401 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10401 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10401: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Logging XP event: User a690a4d8-0006-4293-9e48-aaaafbbe28e5, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 555, User a690a4d8-0006-4293-9e48-aaaafbbe28e5, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Awarded 5 XP to user a690a4d8-0006-4293-9e48-aaaafbbe28e5 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Successfully trained horse 10401 in Show Jumping (Log ID: 774, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainRouteHandler] Training request for horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10396 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10396 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10396 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainRouteHandler] Training request for horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 10397 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 10397

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 10397 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10397 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10397: Fri Nov 21 2025 17:41:01 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Horse 10397 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainRouteHandler] Training request for horse 10395 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] info: [trainingController.trainHorse] Attempting to train horse 10395 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:01] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

FAIL __tests__/integration/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:02] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:02] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] error: [authController.refreshToken] Error refreshing token: Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] error: Error Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] error: [authController.refreshToken] Error refreshing token: Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] error: Error Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [auth] Missing token for POST /logout from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/cleanup-tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: 404 - Route not found: POST /api/auth/cleanup-tokens from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/cleanup-tokens - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:05] error: [authController.refreshToken] Error refreshing token: Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] error: Error Invalid or expired refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:05] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:06] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:06] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:06] info: [POST] /api/auth/refresh-token - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Basic Token Rotation ‚Ä∫ should_invalidate_old_refresh_token_after_rotation

    expect(received).toContain(expected) // indexOf

    Expected substring: "Invalid refresh token"
    Received string:    "Token reuse detected - please login again"

    [0m [90m 140 |[39m
     [90m 141 |[39m       expect(replayResponse[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 142 |[39m       expect(replayResponse[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Invalid refresh token'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 143 |[39m     })[33m;[39m
     [90m 144 |[39m
     [90m 145 |[39m     it([32m'should_track_token_families_in_database'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:142:43)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_handle_concurrent_refresh_requests_gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [[Object], [Object], [Object]]

    [0m [90m 352 |[39m       [36mconst[39m failureResponses [33m=[39m responses[33m.[39mfilter(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m401[39m)[33m;[39m
     [90m 353 |[39m
    [31m[1m>[22m[39m[90m 354 |[39m       expect(successResponses)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 355 |[39m       expect(failureResponses)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m 356 |[39m
     [90m 357 |[39m       [90m// All failures should indicate token was already used[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:354:32)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_prevent_race_conditions_in_token_rotation

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 3

    [0m [90m 389 |[39m       [90m// Verify only one succeeded[39m
     [90m 390 |[39m       [36mconst[39m successCount [33m=[39m statuses[33m.[39mfilter(s [33m=>[39m s [33m===[39m [35m200[39m)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 391 |[39m       expect(successCount)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 392 |[39m     })[33m;[39m
     [90m 393 |[39m   })[33m;[39m
     [90m 394 |[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:391:28)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Token Expiration and Cleanup ‚Ä∫ should_clean_up_invalidated_token_families

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 550 |[39m         [33m.[39msend({ olderThanDays[33m:[39m [35m0[39m })[33m;[39m [90m// Clean immediately for test[39m
     [90m 551 |[39m
    [31m[1m>[22m[39m[90m 552 |[39m       expect(cleanupResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 553 |[39m
     [90m 554 |[39m       [90m// Verify invalidated tokens are removed[39m
     [90m 555 |[39m       [36mconst[39m remainingTokens [33m=[39m [36mawait[39m prisma[33m.[39mrefreshToken[33m.[39mfindMany({[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:552:38)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_enforce_unique_constraints_on_token_families

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": 2025-11-21T22:41:05.899Z, "expiresAt": 2025-11-22T22:41:05.896Z, "familyId": "test-family-1763764865896", "id": 12455, "isActive": true, "isInvalidated": false, "lastActivityAt": null, "token": "test-token-2", "updatedAt": 2025-11-21T22:41:05.899Z, "userId": "8cc5b00c-20c9-42ba-b3e9-d970b11f310e"}

    [0m [90m 583 |[39m
     [90m 584 |[39m       [90m// Second token with same family should fail if constraint exists[39m
    [31m[1m>[22m[39m[90m 585 |[39m       [36mawait[39m expect(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 586 |[39m         prisma[33m.[39mrefreshToken[33m.[39mcreate({
     [90m 587 |[39m           data[33m:[39m { [33m...[39mtokenData[33m,[39m token[33m:[39m [32m'test-token-2'[39m }
     [90m 588 |[39m         })[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:585:13)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_validate_token_structure_and_signatures

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 400

    [0m [90m 605 |[39m           [33m.[39m[36mset[39m([32m'Cookie'[39m[33m,[39m [32m`refreshToken=${token}`[39m)[33m;[39m
     [90m 606 |[39m
    [31m[1m>[22m[39m[90m 607 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 608 |[39m       }
     [90m 609 |[39m     })[33m;[39m
     [90m 610 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:607:33)

PASS tests/groomSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/services/traitInteractionMatrix.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/integration/crossSystemValidation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:07] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 10407 and dam 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:41:07] info: [horseController.gatherLineage] Gathering lineage for sire 10407 and dam 10407, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.gatherLineage] Gathered 1 ancestors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 10407 and dam 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 10407 and dam 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.assessFeedQuality] Mare 10407 feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 10407 and dam 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 10407 and dam 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.detectInbreeding] Inbreeding not detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 10408)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 10408)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/horses/foals - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/foals/10408/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [foalRoutes] POST /api/foals/10408/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 10408 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 5, Stress: 0 -> 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/foals/10408/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/traits/discover/10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/traits/discover/10408 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [GET] /api/traits/discovery-status/10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [GET] /api/traits/discovery-status/10408 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 10408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 10408, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 10408: reactive (score: -5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:07] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /horses/10407/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: Environmental analysis generated for horse 10407 by user 6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /horses/10407/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: Trait interaction matrix generated for horse 10407 by user 6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.trainRouteHandler] Training request for horse 10407 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.trainHorse] Attempting to train horse 10407 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.canTrain] Checking training eligibility for horse 10407 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.getHorseAge] Getting age for horse 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.getHorseAge] Horse 10407 is 28 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10407 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.canTrain] Horse 10407 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.trainHorse] Horse 10407 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.logTrainingSession] Logging training session for horse 10407 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 775

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.updateHorseStat] Updating stamina by 2 for horse 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] error: [horseModel.updateHorseStat] Error updating stat: Invalid stat name: stamina. Valid stats: speed, agility, endurance, strength, precision, balance, coordination, intelligence, focus, obedience, boldness, flexibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:08] error: [trainingController.trainHorse] Failed to update stat: Invalid stat name: stamina. Valid stats: speed, agility, endurance, strength, precision, balance, coordination, intelligence, focus, obedience, boldness, flexibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 10407 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 10407 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 10407: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [xpLogModel.logXpEvent] Logging XP event: User 6418ee6b-8053-4246-a35e-07517fd4cf86, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 556, User 6418ee6b-8053-4246-a35e-07517fd4cf86, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.trainHorse] Awarded 5 XP to user 6418ee6b-8053-4246-a35e-07517fd4cf86 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [trainingController.trainHorse] Successfully trained horse 10407 in Racing (Log ID: 775, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/competition/eligibility/10407/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /eligibility/10407/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10407 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.GET /eligibility] Horse 10407 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/competition/eligibility/10407/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.POST /enter] User 6418ee6b-8053-4246-a35e-07517fd4cf86 entering horse 10407 in show 492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.POST /enter] Successfully entered horse 10407 in show 492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.POST /execute] User 6418ee6b-8053-4246-a35e-07517fd4cf86 executing competition for show 492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1763764868543 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:41:08] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: -8.2%, adjustment: -19.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:41:08] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 220 (base: 240, trait: +0, luck: -19.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:41:08] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 10407) scored 220 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:41:08] info: [resultModel.saveResult] Successfully updated placeholder result for horse 10407 in show 492 with score 220

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 10407). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [competitionRoutes.POST /execute] Competition executed successfully for show 492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /10407/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 10407)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses/10407/xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/user/6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.getUserGrooms] Getting grooms for user 6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/user/6418ee6b-8053-4246-a35e-07517fd4cf86 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.recordInteraction] Recording brushing interaction for foal 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4372 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomProgressionService.awardGroomXP] Groom 4372 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.recordInteraction] Awarded 2 XP to groom 4372 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/user/6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.getUserGrooms] Getting grooms for user 6418ee6b-8053-4246-a35e-07517fd4cf86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/user/6418ee6b-8053-4246-a35e-07517fd4cf86 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/4372/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /4372/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/4372/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/grooms/assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.assignGroom] Assigning groom 4372 to foal 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomSystem.assignGroomToFoal] Assigning groom 4372 to foal 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [POST] /api/grooms/assign - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/assignments/10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [groomController.getFoalAssignments] Getting assignments for foal 10407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/grooms/assignments/10407 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:08] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [POST] /api/memory/gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [POST] /api/memory/gc - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses?page=1&limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/horses?page=1&limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/search?q=competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/search?q=competition - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/feature-guide - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /ping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /ping - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/memory/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [auth] Authenticated user 6418ee6b-8053-4246-a35e-07517fd4cf86 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/memory/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL __tests__/integration/email-verification.test.mjs (6.59 s)
  ‚óè Console

    console.log
      [2025-11-21 17:41:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:10] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser_1763764870410@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=25151055cc1d5fa5312f53dc2bf63f65a6e8c259ae6c043fb202ce0c61b6f919

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:10] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser2_1763764870856@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5f1c63e6e2d7d880f71414d1a667071248dd1cf4845a9f621c1e6665c76f4912

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: devuser_1763764871257@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4a6c01f57a82ed3b88aee86c68406d542f3a58742b6d8215e80ee370dec3533e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=beec0f1b91f9b0df14c46f0d02d68675bc16d7a6083161d4e24654fc72fd2dc8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=beec0f1b91f9b0df14c46f0d02d68675bc16d7a6083161d4e24654fc72fd2dc8 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=2bd0f68c7ad2e1410f4ce53876f8b9cc99cba550fbf63159f54386a5ea9d39ee

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=2bd0f68c7ad2e1410f4ce53876f8b9cc99cba550fbf63159f54386a5ea9d39ee - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=b2b9c05722d88fe33a948176eef243188e0251d9c793c038312d3fe0051a6811

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email?token=b2b9c05722d88fe33a948176eef243188e0251d9c793c038312d3fe0051a6811 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:11] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:11] error: [GET] /api/auth/verify-email - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:11] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:11] info: [GET] /api/auth/verify-email - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=invalid_token_here

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: [GET] /api/auth/verify-email?token=invalid_token_here - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=invalid_token_here - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=32c70ea4dd3912fd3779dda01a969e61afa9a0c5e0e7382b9fef9861d2ac40f3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] error: [authController.verifyEmail] Error verifying email: Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: [GET] /api/auth/verify-email?token=32c70ea4dd3912fd3779dda01a969e61afa9a0c5e0e7382b9fef9861d2ac40f3 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: Error Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=32c70ea4dd3912fd3779dda01a969e61afa9a0c5e0e7382b9fef9861d2ac40f3 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=a011e1f5438c476df4475c86f69d6adf232bca457d24dd113640cf0633fd569b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=a011e1f5438c476df4475c86f69d6adf232bca457d24dd113640cf0633fd569b - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=a011e1f5438c476df4475c86f69d6adf232bca457d24dd113640cf0633fd569b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: [GET] /api/auth/verify-email?token=a011e1f5438c476df4475c86f69d6adf232bca457d24dd113640cf0633fd569b - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=a011e1f5438c476df4475c86f69d6adf232bca457d24dd113640cf0633fd569b - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=0aeceab12289a9f0315422193c5ea5b6994a05e321e9202783b90e100ebcc3ce

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [GET] /api/auth/verify-email?token=0aeceab12289a9f0315422193c5ea5b6994a05e321e9202783b90e100ebcc3ce - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [auth] Authenticated user 41e131dd-ad4c-44ea-b1a0-9d59fd82452b for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763764872554@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=771676092e4fd3ac76233ed8ae7615933f66d868e23a927f3e1a6a959d7f0228

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] warn: [auth] Missing token for POST /resend-verification from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:12] info: [POST] /api/auth/resend-verification - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user c243ba1e-ede2-4c4a-ac16-15d734b221ab for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: [authController.resendVerification] Error resending verification: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: Error Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user 23067734-4312-4aa4-900a-1d2b1009c7d3 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763764873139@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2b8986ecf5b4ef16c68caf6c48473b8e84ee17e67bb8525e76171a2826eeee97

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user 23067734-4312-4aa4-900a-1d2b1009c7d3 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] error: Error Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user da8fe152-8ee1-457d-be3a-52dae7a1e3af for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763764873380@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ae14002c2437b834d4cb364dc5bea291787df3dfeefe9a72484f7b51437d6fe3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user a955df0b-fa4a-4ad9-8de2-f9ce59989a96 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [auth] Authenticated user 4bd03a69-83a8-4893-9194-5053cf909e3e for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:13] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] warn: [auth] Missing token for GET /verification-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [auth] Authenticated user 7d8e04ef-c9a6-4077-9872-dddab1362cbd for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: workflow_1763764874419@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=240ce71ffd69c25f41791254c3189e54090d6ea5b514b309a505a8ded81eb61b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verify-email?token=240ce71ffd69c25f41791254c3189e54090d6ea5b514b309a505a8ded81eb61b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verify-email?token=240ce71ffd69c25f41791254c3189e54090d6ea5b514b309a505a8ded81eb61b - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [auth] Authenticated user 6f5c251b-01d8-435b-b2bf-94b277e61c2b for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [auth] Authenticated user 6f5c251b-01d8-435b-b2bf-94b277e61c2b for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763764874760@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4ec078509f152089c174df39cc51d373351bc8b90b0c73f78b1abc6abca158ea

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:14] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:14] info: [GET] /api/auth/verify-email?token=4ec078509f152089c174df39cc51d373351bc8b90b0c73f78b1abc6abca158ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=4ec078509f152089c174df39cc51d373351bc8b90b0c73f78b1abc6abca158ea - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [auth] Authenticated user 6f5c251b-01d8-435b-b2bf-94b277e61c2b for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=597cc70e1fbd514dd31195628f39e30794e82197aa9881b3bb46b66ed2dddf8d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=597cc70e1fbd514dd31195628f39e30794e82197aa9881b3bb46b66ed2dddf8d - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=597cc70e1fbd514dd31195628f39e30794e82197aa9881b3bb46b66ed2dddf8d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token=597cc70e1fbd514dd31195628f39e30794e82197aa9881b3bb46b66ed2dddf8d - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=597cc70e1fbd514dd31195628f39e30794e82197aa9881b3bb46b66ed2dddf8d - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=09db4831c74295ef466831db00d9c1364fba3073ccca36e29c4849f39c8806e0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=09db4831c74295ef466831db00d9c1364fba3073ccca36e29c4849f39c8806e0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=09db4831c74295ef466831db00d9c1364fba3073ccca36e29c4849f39c8806e0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token=09db4831c74295ef466831db00d9c1364fba3073ccca36e29c4849f39c8806e0 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=09db4831c74295ef466831db00d9c1364fba3073ccca36e29c4849f39c8806e0 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:15] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:15] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:16] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/register - Email Verification Integration ‚Ä∫ should_include_email_verified_status_in_response

    expect(received).toContain(expected) // indexOf

    Expected substring: "verify your account"
    Received string:    "User registered successfully"

    [0m [90m 94 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser)[33m.[39mtoHaveProperty([32m'emailVerified'[39m)[33m;[39m
     [90m 95 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39muser[33m.[39memailVerified)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 96 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'verify your account'[39m)[33m;[39m
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 97 |[39m     })[33m;[39m
     [90m 98 |[39m
     [90m 99 |[39m     it([32m'should_log_verification_email_in_development_mode'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:96:37)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_missing_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 189 |[39m
     [90m 190 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 191 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'Verification token is required'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 192 |[39m     })[33m;[39m
     [90m 193 |[39m
     [90m 194 |[39m     it([32m'should_reject_invalid_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:191:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_invalid_token

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 198 |[39m
     [90m 199 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 200 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 201 |[39m     })[33m;[39m
     [90m 202 |[39m
     [90m 203 |[39m     it([32m'should_reject_expired_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:200:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_expired_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 214 |[39m
     [90m 215 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'expired'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 217 |[39m     })[33m;[39m
     [90m 218 |[39m
     [90m 219 |[39m     it([32m'should_reject_already_used_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:216:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_already_used_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 234 |[39m
     [90m 235 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 236 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m
     [90m 239 |[39m     it([32m'should_be_publicly_accessible_without_authentication'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:236:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_reject_if_email_already_verified

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 307 |[39m
     [90m 308 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 309 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already verified'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 310 |[39m     })[33m;[39m
     [90m 311 |[39m
     [90m 312 |[39m     it([32m'should_enforce_rate_limiting'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:309:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_enforce_rate_limiting

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 322 |[39m
     [90m 323 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 324 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'wait'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 325 |[39m     })[33m;[39m
     [90m 326 |[39m
     [90m 327 |[39m     it([32m'should_cleanup_expired_tokens'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:324:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Complete Email Verification Workflow ‚Ä∫ should_prevent_multiple_verification_attempts

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 519 |[39m       )[33m;[39m
     [90m 520 |[39m       expect(response2[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 521 |[39m       expect(response2[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 522 |[39m
     [90m 523 |[39m       [90m// Third verification attempt[39m
     [90m 524 |[39m       [36mconst[39m response3 [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:521:36)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Security and Edge Cases ‚Ä∫ should_sanitize_error_messages_to_prevent_enumeration

    expect(received).not.toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 562 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 563 |[39m       [90m// Should not reveal whether user exists or not[39m
    [31m[1m>[22m[39m[90m 564 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'user'[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 565 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'email'[39m)[33m;[39m
     [90m 566 |[39m     })[33m;[39m
     [90m 567 |[39m[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:564:39)

PASS tests/services/developmentalWindowSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:16] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:16] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/facilityManagementSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:17] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getUserFacilities] Getting facilities for user 06b7a72c-0671-4527-9a79-a3ebe8096f67

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getUserFacilities] Getting facilities for user db6d2267-83bc-4ddb-8b0a-8673209c9fb4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.purchaseFacilityUpgrade] User af716db5-074c-4f3b-83b9-f362a50144da purchasing automated_care upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.purchaseFacilityUpgrade] User c4459e10-9e2e-48a6-a4f5-6b31d5b95553 purchasing competition_hosting upgrade to level 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.purchaseFacilityUpgrade] User 961a606b-072a-47c5-b3ec-147be8c001aa purchasing ventilation upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 826

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 827

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user c7fef4e5-395a-456f-bae8-88257a9f5e2d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getUserFacilities] Getting facilities for user c7fef4e5-395a-456f-bae8-88257a9f5e2d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 3d699826-a324-4dee-b57b-d8606c4287dc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getUserFacilities] Getting facilities for user 3d699826-a324-4dee-b57b-d8606c4287dc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 833

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.purchaseFacilityUpgrade] User 6ec4cee6-f12a-4957-b9f0-ead055aa4e88 purchasing stable_management upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 835

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 838

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 838

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 840

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:17] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 840

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/api-response-integration.test.mjs (6.825 s)
  ‚óè Console

    console.log
      [2025-11-21 17:41:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=185bb3ba755fc699e069e150a0a0dafcf678704f647679786bfec9eff80adaf5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:18] info: [auth] Authenticated user 33e41cbf-d55c-4a88-b8b7-0e79ece148f3 for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1f4b7f5e4757c42cf646d61849b81e37a8fbf7836da66d1e65a5b938b6373913

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [auth] Authenticated user 7a1673ef-6148-4565-bf15-f643c8f26386 for GET /api/test/error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=937b6c2887e51a2ca6a65ee89df3b4081e95ce1fe91d39f1e22561926bbda9ce

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [auth] Authenticated user 75b42b7b-f206-4f57-bb94-de68b06db441 for GET /api/test/not-found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8485d65c374c1ada47d0c169a535fd0d110fb8dd031646f3e2e397b391d8adba

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:19] info: [auth] Authenticated user 902de37f-ad3e-4241-bbb6-61aa43549425 for GET /api/test/validation-error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=764b8fcdcac4b593449bac67eee241f50c444109e019a0987cf07465700d989e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [auth] Authenticated user ed3c8f38-8603-4428-bb6a-fba09d4d58f0 for GET /api/test/paginated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fc64925e108bae888f88811c08b6acfa0c99d9f2304f964454a424fa20b3ad22

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [auth] Authenticated user 07aae18a-001f-4101-bca0-2d4c783a821a for GET /api/test/paginated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1ee52352da68f0380ccafdb715277521f6fccda680f416cc9ad28fc0af32d129

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:20] info: [auth] Authenticated user 1bfcd8cf-3992-48ea-a0bb-781c5a450f37 for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1622d2731bbdec8f8a68d5103e162789fe7b79a3bbc29b41bef4685a143313c8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [auth] Authenticated user 3bcf6ef2-3a53-4d6a-ab8c-fb1f2f68cdc9 for GET /api/test/large-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7961aa0b405c794adab0d9713bf93f0ef06dc40196a3e5d9ad7fb713e674f1ef

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [auth] Authenticated user d14c8abc-79fb-469f-bd0f-0db99a740305 for GET /api/test/field-selection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=23fe8f8c2c2aaad20243c350f7928b8ffaff1d35458e4e4b8db75001693ef24b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:21] info: [auth] Authenticated user cf32cb61-4432-4660-ad88-5e16a71dd595 for GET /api/test/field-selection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=cb0046f2cab65ebed07350e60b4b59c5f35537fd5fb86dd0041d07603fce2e1c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:22] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [auth] Authenticated user 72c1a00a-d24d-4447-b75f-df90edcacc69 for GET /api/test/etag

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [auth] Authenticated user 72c1a00a-d24d-4447-b75f-df90edcacc69 for GET /api/test/etag

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3e1ca79c3319b01e41e70b62832f52f0ef880edfa262f750a09770ca1be82229

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:22] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:22] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fa1bb76532a1ea473751ae9577000455ecbfbfa8823ee5a63b96586f66e95724

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:22] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d5c61773d4d6766ae61f76bce27a4688dda9733580eb143d92bd3e3c8e98e189

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:23] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] warn: [auth] Missing token for GET /api/test/success from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] warn: [auth] Missing token for GET /api/test/error from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] warn: [auth] Missing token for GET /api/test/large-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:23] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=44a222855f8f88d8ad3ff10451577ab4fbe7fcc555f640b5d17deee2ccd645dc

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:23] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1a79ab6694384f678551050fe389c2ada63bebe62cca9e64c2dc774400b662af

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:24] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=69224401cb060e38ee045f1724c2fe969adc0ebaaf3ccec65d1699a9d117968f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:24] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [auth] Authenticated user f90c1de2-ea10-43f1-a3c1-4ddd96a2e02e for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7074b6965c5864183f3ecab294a9b955c74e66b3df2da563f4fd6313d2aa3d01

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:24] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [auth] Authenticated user 719fe6da-2be2-4491-9d00-75bcbb11e6de for GET /api/test/large-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:24] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/sessionManagement.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:26] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] error: [Session] Error fetching active sessions: Database connection lost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:26] info: [Session] Session revoked by user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:26] error: [Session] Error revoking session: 
      Invalid `prisma.refreshToken.deleteMany()` invocation:
      
      {
        where: {
          userId: "invalid-user",
      +   id: {
      +     equals: Int | IntFieldRefInput,
      +     in: Int[] | ListIntFieldRefInput,
      +     notIn: Int[] | ListIntFieldRefInput,
      +     lt: Int | IntFieldRefInput,
      +     lte: Int | IntFieldRefInput,
      +     gt: Int | IntFieldRefInput,
      +     gte: Int | IntFieldRefInput,
      +     not: Int | NestedIntFilter
      +   }
        }
      }
      
      Argument `id` is missing.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

FAIL __tests__/unit/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 0)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:28] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] error: [TokenRotation] Error creating token pair: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Token Rotation Service - Unit Tests ‚Ä∫ invalidateTokenFamily() ‚Ä∫ should_log_invalidation_for_security_audit

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Token family invalidated", ObjectContaining {"familyId": "mi9g2qf6_8a108da5e6e77dc96e4949daf3292a8b", "reason": Any<String>, "userId": "02c67ce4-ee59-4fd1-a433-1176950548c1"}

    Number of calls: 0

    [0m [90m 390 |[39m       [36mawait[39m invalidateTokenFamily(familyId)[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(mockLogger)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 393 |[39m         expect[33m.[39mstringContaining([32m'Token family invalidated'[39m)[33m,[39m
     [90m 394 |[39m         expect[33m.[39mobjectContaining({
     [90m 395 |[39m           familyId[33m:[39m familyId[33m,[39m[0m

      at Object.<anonymous> (__tests__/unit/token-rotation.test.mjs:392:26)

PASS tests/unit/environmentalFactorEngine.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:29] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:30] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:30] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:30] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: competition-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2b515ef166e089a5841fe787c8f8b005cb44d8c10d795a6920fe5f94a44a5377

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [GET] /api/competition/eligibility/10414/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [auth] Authenticated user 849a1ce0-98eb-45c6-ad5f-e52613ffbaab for GET /eligibility/10414/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 10414 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [horseModel.getHorseById] Successfully found horse: Competition Integration Champion (ID: 10414)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [competitionRoutes.GET /eligibility] Horse 10414 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [GET] /api/competition/eligibility/10414/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [auth] Authenticated user 849a1ce0-98eb-45c6-ad5f-e52613ffbaab for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [competitionRoutes.POST /enter] User 849a1ce0-98eb-45c6-ad5f-e52613ffbaab entering horse 10414 in show 493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [horseModel.getHorseById] Successfully found horse: Competition Integration Champion (ID: 10414)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [competitionRoutes.POST /enter] Successfully entered horse 10414 in show 493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [auth] Authenticated user 849a1ce0-98eb-45c6-ad5f-e52613ffbaab for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìù STEP 3: Competition Entry & Validation ‚Ä∫ should successfully enter horse in competition using API endpoint

    expect(received).toBe(expected) // Object.is equality

    Expected: 14500
    Received: 500

    [0m [90m 228 |[39m       [90m// VERIFY: Entry fee deducted from user account[39m
     [90m 229 |[39m       [36mconst[39m updatedUser [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mfindUnique({ where[33m:[39m { id[33m:[39m testUser[33m.[39mid } })[33m;[39m
    [31m[1m>[22m[39m[90m 230 |[39m       expect(updatedUser[33m.[39mmoney)[33m.[39mtoBe([35m15000[39m [33m-[39m testShow[33m.[39mentryFee)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 231 |[39m
     [90m 232 |[39m       [90m// VERIFY: Competition entry created in database[39m
     [90m 233 |[39m       [36mconst[39m entry [33m=[39m [36mawait[39m prisma[33m.[39mcompetitionResult[33m.[39mfindFirst({[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:230:33)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate complete competition workflow integrity

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   5

    [0m [90m 455 |[39m
     [90m 456 |[39m       [90m// User progression[39m
    [31m[1m>[22m[39m[90m 457 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan([35m100[39m)[33m;[39m [90m// Started with 100, gained more[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 458 |[39m       expect(finalUser[33m.[39mmoney)[33m.[39mtoBeGreaterThan([35m15000[39m [33m-[39m testShow[33m.[39mentryFee)[33m;[39m [90m// Prize money added[39m
     [90m 459 |[39m
     [90m 460 |[39m       [90m// Horse competition record[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:457:28)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate all business rules enforced throughout competition

    expect(received).toBe(expected) // Object.is equality

    Expected: 19500
    Received: 5500

    [0m [90m 485 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mfindUnique({ where[33m:[39m { id[33m:[39m testUser[33m.[39mid } })[33m;[39m
     [90m 486 |[39m       [36mconst[39m expectedMoney [33m=[39m [35m15000[39m [33m-[39m testShow[33m.[39mentryFee [33m+[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
    [31m[1m>[22m[39m[90m 487 |[39m       expect(user[33m.[39mmoney)[33m.[39mtoBe(expectedMoney)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 488 |[39m
     [90m 489 |[39m       [90m// Competition results realistic[39m
     [90m 490 |[39m       expect([33mNumber[39m(competitionResult[33m.[39mscore))[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:487:26)

PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/unit/advancedLineageAnalysis.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10415 and mare 10416, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10418 and mare 10419, 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 10420 and mare 10421

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10420 and mare 10421, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 10422 and mare 10423

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 10422 and mare 10423

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 10424 and mare 10425

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 10424 and mare 10425

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitCalculation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

FAIL tests/cronJobsIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:33] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] GET /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/cron/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/traits/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/traits/evaluate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] GET /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] error: [adminRoutes] GET /api/admin/foals/development error: Cannot read properties of undefined (reading 'length')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/foals/development - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] GET /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [GET] /api/admin/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] POST /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/cron/start - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [adminRoutes] POST /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [POST] /api/admin/cron/stop - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè ‚è∞ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API ‚Ä∫ Admin API Endpoints ‚Ä∫ should get foals in development

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 446 |[39m       mockPrisma[33m.[39mhorse[33m.[39mfindMany[33m.[39mmockResolvedValueOnce(mockFoals)[33m;[39m
     [90m 447 |[39m
    [31m[1m>[22m[39m[90m 448 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([32m'/api/admin/foals/development'[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                                                                               [31m[1m^[22m[39m
     [90m 449 |[39m
     [90m 450 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 451 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'foals'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/cronJobsIntegration.test.mjs:448:79)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 4374) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Hiring new groom Expert Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 4375) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Hiring new groom Novice Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 4376) for 350 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.assignGroom] Assigning groom 4377 to foal 10435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomSystem.assignGroomToFoal] Assigning groom 4377 to foal 10435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.assignGroom] Assigning groom 4379 to foal 10438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomSystem.assignGroomToFoal] Assigning groom 4379 to foal 10438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.assignGroom] Assigning groom 4380 to foal 10441

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:33] info: [groomController.recordInteraction] Recording trust_building interaction for foal 10444

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4381 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Groom 4381 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Awarded 2 XP to groom 4381 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 10448

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4382 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Groom 4382 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Awarded 2 XP to groom 4382 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Recording brushing interaction for foal 10452

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -6 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4383 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomProgressionService.awardGroomXP] Groom 4383 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [groomController.recordInteraction] Awarded 2 XP to groom 4383 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/environmentalTriggerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/epigeneticTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS __tests__/utils/validateEnvironment.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS __tests__/routes/userDocumentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "horse training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting table of contents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting sections for document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting sections for document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching in document "non-existent" for: "test"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Refreshing documentation cache

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:36] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS seed/horseSeed.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:38] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: progress-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c40f8a665ad55a396f762c5d8ba2a7783de6aa083a14f3147a01f62a20e2490e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:38] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:38] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 0/200, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 776

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 10467: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 559, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Racing (Log ID: 776, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 5/200, 3% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 777

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updating obedience by 3 for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updated obedience for horse 10467: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Stat gain: obedience +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10467: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 560, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Dressage (Log ID: 777, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 778

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updating intelligence by 2 for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updated intelligence for horse 10467: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Stat gain: intelligence +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10467: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 561, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Show Jumping (Log ID: 778, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 779

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updating precision by 1 for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateHorseStat] Updated precision for horse 10467: 0 -> 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Stat gain: precision +1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10467: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 562, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Dressage (Log ID: 779, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 780

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10467: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 563, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Show Jumping (Log ID: 780, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 781

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10467: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 564, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Dressage (Log ID: 781, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 782

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10467: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 565, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Show Jumping (Log ID: 782, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 783

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10467: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 566, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Dressage (Log ID: 783, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 784

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10467: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 567, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Show Jumping (Log ID: 784, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 785

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10467: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 568, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Successfully trained horse 10467 in Dressage (Log ID: 785, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Attempting to train horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:39 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.canTrain] Horse 10467 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 786

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 10467: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:39] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 569, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Successfully trained horse 10467 in Show Jumping (Log ID: 786, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 55/200, 28% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainRouteHandler] Training request for horse 10467 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Attempting to train horse 10467 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.canTrain] Checking training eligibility for horse 10467 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getHorseAge] Getting age for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getHorseAge] Horse 10467 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Thu Nov 13 2025 17:41:40 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.canTrain] Horse 10467 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 10467)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Horse 10467 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.logTrainingSession] Logging training session for horse 10467 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 787

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.updateHorseStat] Updating endurance by 3 for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.updateHorseStat] Updated endurance for horse 10467: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Stat gain: endurance +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 10467 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 10467: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 10467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [xpLogModel.logXpEvent] Logging XP event: User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 570, User c16873a2-594d-4f81-a53c-fca35d4e5484, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Awarded 5 XP to user c16873a2-594d-4f81-a53c-fca35d4e5484 for training - LEVEL UP to undefined!

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.trainHorse] Successfully trained horse 10467 in Cross Country (Log ID: 787, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 2, XP: 200/300, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 3, XP: 350/400, 50% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/dashboard/c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /dashboard/c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.getTrainableHorses] Getting trainable horses for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10467 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10467: Fri Nov 21 2025 17:41:40 GMT-0500 (Eastern Standard Time) (discipline: Cross Country)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getDashboardData] Successfully retrieved dashboard data for user progresstest (1 horses, 0 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/dashboard/c16873a2-594d-4f81-a53c-fca35d4e5484 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"999999","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/999999/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"invalid","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/invalid/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] warn: [auth] Missing token for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [auth] Authenticated user c16873a2-594d-4f81-a53c-fca35d4e5484 for GET /c16873a2-594d-4f81-a53c-fca35d4e5484/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Getting comprehensive progress for user c16873a2-594d-4f81-a53c-fca35d4e5484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 3, XP: 350/400, 50% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [GET] /api/users/c16873a2-594d-4f81-a53c-fca35d4e5484/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîê STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -1,9 +1,9 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
    -   "totalEarnings": 5000,
    +   "totalEarnings": 1000,
        "userId": "c16873a2-594d-4f81-a53c-fca35d4e5484",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,

    [0m [90m 154 |[39m
     [90m 155 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 156 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 157 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 158 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 159 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:156:34)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -1,9 +1,9 @@
      Object {
        "level": 1,
        "progressPercentage": 3,
    -   "totalEarnings": 5000,
    +   "totalEarnings": 1000,
        "userId": "c16873a2-594d-4f81-a53c-fca35d4e5484",
        "username": "progresstest",
        "xp": 5,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,

    [0m [90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 234 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 235 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 236 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:233:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -1,9 +1,9 @@
      Object {
        "level": 2,
        "progressPercentage": 0,
    -   "totalEarnings": 5000,
    +   "totalEarnings": 1000,
        "userId": "c16873a2-594d-4f81-a53c-fca35d4e5484",
        "username": "progresstest",
        "xp": 200,
        "xpForCurrentLevel": 200,
        "xpForNextLevel": 300,

    [0m [90m 330 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 331 |[39m
    [31m[1m>[22m[39m[90m 332 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 333 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 334 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 335 |[39m         level[33m:[39m [35m2[39m[33m,[39m [90m// Leveled up![39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:332:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -1,9 +1,9 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
    -   "totalEarnings": 5000,
    +   "totalEarnings": 1000,
        "userId": "c16873a2-594d-4f81-a53c-fca35d4e5484",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üìä STEP 5: Dashboard Data Integration ‚Ä∫ should return comprehensive dashboard data with progress integration

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

    @@ -12,10 +12,10 @@
          "upcomingEntries": 0,
        },
        "user": Object {
          "id": "c16873a2-594d-4f81-a53c-fca35d4e5484",
          "level": 3,
    -     "money": 5000,
    +     "money": 1000,
          "username": "progresstest",
          "xp": 350,
        },
      }

    [0m [90m 382 |[39m
     [90m 383 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 384 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 385 |[39m         user[33m:[39m {
     [90m 386 |[39m           id[33m:[39m testUser[33m.[39mid[33m,[39m
     [90m 387 |[39m           username[33m:[39m testUser[33m.[39musername[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:384:43)

PASS tests/traitDiscoveryIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:40] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:40] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:41] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 526MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Triggering trait discovery for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 10468: resilient, intelligent, bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Discovered 3 traits for horse 10468 (High Bond Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10468 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 531MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Triggering trait discovery for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10469 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 533MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Triggering trait discovery for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10470 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 533MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Triggering trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 530MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 526MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] GET /progress/10468 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/10468 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 526MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] GET /progress/99999 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscoveryRoutes] GET /progress/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Batch test foal IDs: [ 10468, 10469 ]

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:263:15)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 539MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 10468: calm, athletic

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 10469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 530MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscovery.revealTraits] Error revealing traits for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscovery.batchRevealTraits] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 10470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 536MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/batch - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 531MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] GET /conditions - Getting discovery conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/conditions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/10468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 533MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] POST /check-conditions/10468 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/10468 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 535MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] POST /check-conditions/99999 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] error: [traitDiscoveryRoutes] POST /check-conditions/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 535MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] GET /progress/10471 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/10471 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Initial hidden count: 5

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:440:15)

    console.log
      Progress response: {
        "horseId": 10471,
        "horseName": "Fresh Workflow Foal",
        "discoveredTraits": 5,
        "totalPossibleTraits": 7,
        "progressPercentage": 71,
        "traits": [
          "intelligent",
          "calm",
          "athletic",
          "resilient",
          "bold"
        ],
        "hiddenTraitsCount": 5,
        "visibleTraitsCount": 0,
        "currentStats": {
          "bondScore": 85,
          "stressLevel": 15,
          "developmentDay": 3
        },
        "conditions": {
          "high_bond": {
            "name": "High Bond",
            "description": "Strong bond formed",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "loyal",
              "trusting",
              "calm"
            ]
          },
          "excellent_bond": {
            "name": "Excellent Bond",
            "description": "Exceptional bond achieved",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "devoted",
              "empathetic",
              "intuitive"
            ]
          },
          "low_stress": {
            "name": "Low Stress",
            "description": "Stress levels minimized",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "calm",
              "relaxed",
              "confident"
            ]
          },
          "minimal_stress": {
            "name": "Minimal Stress",
            "description": "Perfect stress management",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "zen",
              "unflappable",
              "serene"
            ]
          },
          "perfect_care": {
            "name": "Perfect Care",
            "description": "Perfect care conditions achieved",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "exceptional",
              "thriving",
              "balanced"
            ]
          },
          "mature_bond": {
            "name": "Mature Bond",
            "description": "Mature relationship developed with adult horse",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "resilient",
              "calm",
              "confident",
              "bonded"
            ]
          },
          "consistent_training": {
            "name": "Consistent Training",
            "description": "Consistent training regimen maintained",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "disciplined",
              "focused",
              "trainable"
            ]
          }
        }
      }

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:441:15)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 535MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscoveryRoutes] POST /check-conditions/10471 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/check-conditions/10471 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] warn: [MemoryMonitoring] Memory threshold exceeded: 532MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Triggering trait discovery for horse 10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 10471: bold, intelligent, athletic

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [traitController.discoverTraits] Discovered 3 traits for horse 10471 (Fresh Workflow Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [POST] /api/trait-discovery/discover/10471 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:41] info: [GET] /api/trait-discovery/progress/10471

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] warn: [MemoryMonitoring] Memory threshold exceeded: 535MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [traitDiscoveryRoutes] GET /progress/10471 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [GET] /api/trait-discovery/progress/10471 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/userRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:42] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] warn: [MemoryMonitoring] Memory threshold exceeded: 565MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:42] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b3a22aff-315c-42fb-b5cd-84c0ef2e955f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763764902901 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 566MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users//progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 570MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users//progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 567MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/a/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 565MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 565MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b3a22aff-315c-42fb-b5cd-84c0ef2e955f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763764902901 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Getting comprehensive progress for user b3a22aff-315c-42fb-b5cd-84c0ef2e955f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763764902901 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/b3a22aff-315c-42fb-b5cd-84c0ef2e955f/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 569MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [auth] Authenticated user b3a22aff-315c-42fb-b5cd-84c0ef2e955f for GET /user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/user-123_test/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/3b988ecf-3452-4684-958f-f252777a1876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUser] Getting user 3b988ecf-3452-4684-958f-f252777a1876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/3b988ecf-3452-4684-958f-f252777a1876 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 567MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.getUser] Getting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.createUser] Creating user NewUser_1763764903370

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [createUser] User created: NewUser_1763764903370

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 577MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [PUT] /api/users/3b988ecf-3452-4684-958f-f252777a1876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 572MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.updateUser] Updating user 3b988ecf-3452-4684-958f-f252777a1876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [PUT] /api/users/3b988ecf-3452-4684-958f-f252777a1876 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.updateUser] Updating user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] error: [updateUser] User not found for update: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [DELETE] /api/users/863f7a8c-c802-4ad2-a0e9-20c7295d29fd

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.deleteUser] Deleting user 863f7a8c-c802-4ad2-a0e9-20c7295d29fd

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [DELETE] /api/users/863f7a8c-c802-4ad2-a0e9-20c7295d29fd - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 575MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.deleteUser] Deleting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] error: [deleteUser] User not found for deletion: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users/3b988ecf-3452-4684-958f-f252777a1876/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 574MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.addXp] Adding 50 XP to user 3b988ecf-3452-4684-958f-f252777a1876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users/3b988ecf-3452-4684-958f-f252777a1876/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] warn: [MemoryMonitoring] Memory threshold exceeded: 572MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] info: [userController.addXp] Adding 50 XP to user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:43] error: [addXpToUser] Error: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:43] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/horseAgingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS models/userModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/taskInfluenceConfig.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/integration/advancedBreedingGeneticsAPI.test.mjs (6.414 s)
  ‚óè Console

    console.log
      [2025-11-21 17:41:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:46] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:46] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: genetics@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f03281e6377b16c8688735d93a55d49ce57d84d8faaac0ade45bdb8a2988f6de

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:47] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 635MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10481)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10481)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 635MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10482)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10482)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 638MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 631MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10483)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10483)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10484)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10484)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 638MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [advancedBreedingGeneticsRoutes.genetic-probability] Calculating for stallion 10481 and mare 10482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10481 and mare 10482, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [POST] /api/breeding/genetic-probability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [DELETE] /api/horses/10481

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 632MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Deleted horse ID: 10481

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [DELETE] /api/horses/10481 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [DELETE] /api/horses/10482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] warn: [MemoryMonitoring] Memory threshold exceeded: 642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [horseRoutes] Deleted horse ID: 10482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:47] info: [DELETE] /api/horses/10482 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10483

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10483

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10483 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 632MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10484 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10485)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10485)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10486)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10486)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 636MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10487)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10487)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10488)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10488)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedBreedingGeneticsRoutes.genetic-probability] Calculating for stallion 99999 and mare 10486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/breeding/genetic-probability - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10485

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10485

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10485 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 638MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10486 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10487

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10487

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10487 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10488

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10488

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10488 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 639MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10489)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10489)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10490)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10490)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10491)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10491)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10492)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10492)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [auth] Missing token for POST /breeding/genetic-probability from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/breeding/genetic-probability - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10489 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10490 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10491

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 635MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10491

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10491 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 645MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10492 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10493)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10493)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10494)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10494)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10495)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10495)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10496)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10496)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [GET] /api/breeding/lineage-analysis/10493/10494?generations=3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for GET /breeding/lineage-analysis/10493/10494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedBreedingGeneticsRoutes.lineage-analysis] Analyzing lineage for stallion 10493 and mare 10494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10493 and mare 10494, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 10493 and mare 10494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 10493 and mare 10494, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:41:48] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:41:48] info: [GET] /api/breeding/lineage-analysis/10493/10494?generations=3 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10493 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10494 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10495

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 647MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10495

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10495 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10496

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10496

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10496 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 638MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10497)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10497)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 639MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10498)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10498)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10499)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10499)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10500)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10500)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [GET] /api/breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for GET /breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [advancedBreedingGeneticsRoutes.lineage-analysis] Analyzing lineage for stallion 99999 and mare 99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10497

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] warn: [MemoryMonitoring] Memory threshold exceeded: 639MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [horseRoutes] Deleted horse ID: 10497

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:48] info: [DELETE] /api/horses/10497 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10498

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10498

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10498 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10499

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10499

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10499 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 639MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10500 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10501)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10501)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10502)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10502)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10503)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10503)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10504)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10504)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/breeding/breeding-recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /breeding/breeding-recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedBreedingGeneticsRoutes.breeding-recommendations] Generating recommendations for stallion 10501 and mare 10502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 10501 and mare 10502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 10501 and mare 10502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/breeding/breeding-recommendations - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10501

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10501

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10501 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10502 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10503 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10504

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 645MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10504

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10504 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10506)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10506)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10507)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10507)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10508)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10508)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedBreedingGeneticsRoutes.population-analysis] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/genetics/population-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 654MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10505 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 645MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10507 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 655MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10508 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10509)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10509)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10510)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10510)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10511)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10511)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10512)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10512)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [advancedBreedingGeneticsRoutes.inbreeding-analysis] Analyzing inbreeding for stallion 10509 and mare 10510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 10509 and mare 10510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/genetics/inbreeding-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10509 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 648MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10510 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 644MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10511 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10512

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 654MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Deleted horse ID: 10512

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [DELETE] /api/horses/10512 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10513)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10513)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:49] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10514)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10514)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 645MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10515)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10515)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10516)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10516)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for GET /genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [advancedBreedingGeneticsRoutes.diversity-report] Generating report for user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 646MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10513 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10514

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10514

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10514 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10515

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10515

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10515 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10516

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 646MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10516

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10516 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10517)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10517)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10518)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10518)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 650MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10519)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10519)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10520)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10520)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/optimal-breeding

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /genetics/optimal-breeding

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [advancedBreedingGeneticsRoutes.optimal-breeding] Generating optimal breeding for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/optimal-breeding - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10517 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10518

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10518

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10518 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10519

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 648MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10519

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10519 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10520 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 653MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10521)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10521)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 655MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10522)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10522)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 656MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10523)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10523)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10524)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10524)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 654MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for POST /breeding/genetic-probability from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/breeding/genetic-probability - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/breeding/lineage-analysis/10521/10522

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for GET /breeding/lineage-analysis/10521/10522 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/breeding/lineage-analysis/10521/10522 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/breeding/breeding-recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for POST /breeding/breeding-recommendations from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/breeding/breeding-recommendations - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [MemoryMonitoring] Memory threshold exceeded: 651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for POST /genetics/population-analysis from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/population-analysis - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for POST /genetics/inbreeding-analysis from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/inbreeding-analysis - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for GET /genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [GET] /api/genetics/diversity-report/bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/optimal-breeding

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] warn: [auth] Missing token for POST /genetics/optimal-breeding from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [POST] /api/genetics/optimal-breeding - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10521

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10521

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10521 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10522

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10522

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10522 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10523

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [horseRoutes] Deleted horse ID: 10523

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10523 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:50] info: [DELETE] /api/horses/10524

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Deleted horse ID: 10524

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10524 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10525)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10525)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10526)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10526)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10527)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10527)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10528)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10528)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/breeding/genetic-probability - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/genetics/inbreeding-analysis - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/genetics/population-analysis - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Deleted horse ID: 10525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10525 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10526

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Deleted horse ID: 10526

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10526 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Deleted horse ID: 10527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10527 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10528

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Deleted horse ID: 10528

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [DELETE] /api/horses/10528 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 10529)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 10529)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 10530)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 10530)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [auth] Authenticated user bb18a0ab-0dfc-4f89-bea2-e54dd8373f42 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 10531)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 10531)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 10532)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 10532)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] warn: [MemoryManager] Memory threshold alert: 463MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: other@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d0052895f10da6c5a8f785ad13bd957e96f1ff3251f4c84839cb7fb54d9c8472

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:51] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:51] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [auth] Authenticated user 086e3eb6-2e4a-4466-85b2-823b060c8ec2 for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [POST] /api/breeding/genetic-probability - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10529

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [horseRoutes] Deleted horse ID: 10529

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10529 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10530

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [horseRoutes] Deleted horse ID: 10530

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10530 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10531

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [horseRoutes] Deleted horse ID: 10531

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10531 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10532

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [horseRoutes] Deleted horse ID: 10532

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [DELETE] /api/horses/10532 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/documentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /validation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Validating OpenAPI specification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: POST /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation coverage analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: GET /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: POST /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering endpoint: GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering schema: User

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [auth] Authenticated user 339fbbbe-5fc1-48ff-924a-b920da6c2b3d for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:53] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/trainingProgression.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:41:54] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:54] warn: [MemoryMonitoring] Memory threshold exceeded: 529MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=cf6e860578dcb7158ac60a95f0d6806310d05425e5cd35aa07f99907c5a5ac19

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:41:55] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [MemoryMonitoring] Memory threshold exceeded: 537MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainRouteHandler] Training request for horse 10533 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Attempting to train horse 10533 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Checking training eligibility for horse 10533 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Getting age for horse 10533

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Horse 10533 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Horse 10533 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [MemoryMonitoring] Memory threshold exceeded: 539MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainRouteHandler] Training request for horse 10534 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Attempting to train horse 10534 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Checking training eligibility for horse 10534 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Getting age for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Horse 10534 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10534 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] No training records found for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Horse 10534 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 10534)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Horse 10534 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.logTrainingSession] Logging training session for horse 10534 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 788

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateHorseStat] Updating intelligence by 2 for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateHorseStat] Updated intelligence for horse 10534: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Stat gain: intelligence +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 10534 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 10534 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 10534: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [xpLogModel.logXpEvent] Logging XP event: User ec0ac533-abde-495d-b3d1-414f53d0a24a, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 571, User ec0ac533-abde-495d-b3d1-414f53d0a24a, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Awarded 5 XP to user ec0ac533-abde-495d-b3d1-414f53d0a24a for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Successfully trained horse 10534 in Racing (Log ID: 788, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [MemoryMonitoring] Memory threshold exceeded: 542MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainRouteHandler] Training request for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Attempting to train horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Checking training eligibility for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Getting age for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Horse 10534 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10534 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10534: Fri Nov 21 2025 17:41:55 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Horse 10534 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [MemoryMonitoring] Memory threshold exceeded: 532MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainRouteHandler] Training request for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Attempting to train horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Checking training eligibility for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Getting age for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Horse 10534 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10534 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10534: Fri Nov 21 2025 17:41:55 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Horse 10534 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] warn: [MemoryMonitoring] Memory threshold exceeded: 533MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainRouteHandler] Training request for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Attempting to train horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Checking training eligibility for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Getting age for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getHorseAge] Horse 10534 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 10534 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 10534: Thu Nov 13 2025 17:41:55 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.canTrain] Horse 10534 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 10534)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Horse 10534 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.logTrainingSession] Logging training session for horse 10534 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 789

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 10534 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 10534 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 10534: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 10534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [xpLogModel.logXpEvent] Logging XP event: User ec0ac533-abde-495d-b3d1-414f53d0a24a, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 572, User ec0ac533-abde-495d-b3d1-414f53d0a24a, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Awarded 5 XP to user ec0ac533-abde-495d-b3d1-414f53d0a24a for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [trainingController.trainHorse] Successfully trained horse 10534 in Dressage (Log ID: 789, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/services/userDocumentation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 5 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [UserDocService] Documentation directory not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 0 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/services/apiDocumentation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:41:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] error: [ApiDocService] Failed to load specification: OpenAPI specification file not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] warn: [ApiDocService] OpenAPI specification validation found 2 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:41:56] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

