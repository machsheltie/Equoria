
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --verbose

[2026-01-28 14:28:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:44] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
(node:35444) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs
  üîí OWASP Top 10 - Comprehensive Security Tests
    üõ°Ô∏è A06:2021 - Security Misconfiguration
      Default Credentials Prevention
        √ó should reject common default passwords (1 ms)
        √ó should enforce minimum password complexity
      HTTP Security Headers
        √ó should include security headers in responses (1 ms)
        √ó should not expose server version information
      Error Message Handling
        √ó should not leak sensitive information in error messages
        √ó should not expose stack traces in production-like errors
      CORS Configuration
        √ó should enforce CORS policies
      Rate Limiting Configuration
        √ó should have rate limiting enabled
    üîê A08:2021 - Software and Data Integrity Failures
      Dependency Integrity
        √ó should have package-lock.json for dependency pinning
        √ó should validate critical dependencies are up-to-date
      Data Integrity Checks
        √ó should validate data integrity for critical operations
        √ó should prevent stat manipulation through tampering
      Unsigned or Tampered JWT Prevention
        √ó should reject unsigned JWT tokens
        √ó should reject JWT tokens with tampered payload
      Insecure Deserialization Prevention
        √ó should reject malformed JSON payloads
    üìä A09:2021 - Security Logging and Monitoring Failures
      Authentication Event Logging
        √ó should log successful authentication attempts
        √ó should log failed authentication attempts
      Sensitive Operation Logging
        √ó should log ownership violations
        √ó should log rate limit violations
      Audit Log Completeness
        √ó should include required audit fields
      Sentry Integration
        √ó should have Sentry configured for error tracking
    üåê A10:2021 - Server-Side Request Forgery (SSRF)
      URL Validation
        √ó should reject internal IP addresses in URLs
        √ó should reject file:// protocol URLs
      External Request Validation
        √ó should sanitize redirect URLs
        √ó should validate webhook URLs
      DNS Rebinding Prevention
        √ó should prevent DNS rebinding attacks
    üîÑ Cross-Category Security Validation
      Defense in Depth
        √ó should enforce multiple security layers
      Security Configuration Consistency
        √ó should have consistent security settings across all endpoints (1 ms)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should reject common default passwords

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should enforce minimum password complexity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should include security headers in responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should not expose server version information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not leak sensitive information in error messages

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not expose stack traces in production-like errors

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ CORS Configuration ‚Ä∫ should enforce CORS policies

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üõ°Ô∏è A06:2021 - Security Misconfiguration ‚Ä∫ Rate Limiting Configuration ‚Ä∫ should have rate limiting enabled

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should have package-lock.json for dependency pinning

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should validate critical dependencies are up-to-date

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should validate data integrity for critical operations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should prevent stat manipulation through tampering

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject unsigned JWT tokens

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject JWT tokens with tampered payload

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîê A08:2021 - Software and Data Integrity Failures ‚Ä∫ Insecure Deserialization Prevention ‚Ä∫ should reject malformed JSON payloads

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log successful authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log failed authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log ownership violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log rate limit violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Audit Log Completeness ‚Ä∫ should include required audit fields

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üìä A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sentry Integration ‚Ä∫ should have Sentry configured for error tracking

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject internal IP addresses in URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject file:// protocol URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should sanitize redirect URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should validate webhook URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üåê A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ DNS Rebinding Prevention ‚Ä∫ should prevent DNS rebinding attacks

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîÑ Cross-Category Security Validation ‚Ä∫ Defense in Depth ‚Ä∫ should enforce multiple security layers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè üîí OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ üîÑ Cross-Category Security Validation ‚Ä∫ Security Configuration Consistency ‚Ä∫ should have consistent security settings across all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

[2026-01-28 14:28:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:45] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:46] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:46] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:46] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:46] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:46] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:46] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:46] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:46] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:46] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:46] info: [POST] /api/auth/register
[2026-01-28 14:28:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:28:47] info: [EmailVerification] Created verification token
[2026-01-28 14:28:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:28:47] info: [authController.register] Verification email sent
[2026-01-28 14:28:47] info: [POST] /api/auth/register - 201
[2026-01-28 14:28:47] info: [POST] /api/auth/login
[2026-01-28 14:28:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:28:47] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:28:47] info: [POST] /api/auth/login - 200
[2026-01-28 14:28:47] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:jahx5] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:jahx5] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:jahx5] Token from header: true
[2026-01-28 14:28:47] info: [auth:jahx5] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [auth:tfcsgb] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:tfcsgb] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:tfcsgb] Token from header: true
[2026-01-28 14:28:47] info: [auth:tfcsgb] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:47] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:o3bbym] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:o3bbym] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:o3bbym] Token from header: true
[2026-01-28 14:28:47] info: [auth:o3bbym] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Racing
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Racing
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Racing
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147659
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Racing
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Racing
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9040
[2026-01-28 14:28:47] info: [horseModel.updateHorseStat] Updating intelligence by 3 for horse 147659
[2026-01-28 14:28:47] info: [horseModel.updateHorseStat] Updated intelligence for horse 147659: 0 -> 3 (+3)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Stat gain: intelligence +3
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147659: 0 -> 5
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Racing
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4463, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Racing (Log ID: 9040, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:alqi8o] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:alqi8o] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:alqi8o] Token from header: true
[2026-01-28 14:28:47] info: [auth:alqi8o] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [auth:au0ht] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:47] info: [auth:au0ht] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:au0ht] Token from header: true
[2026-01-28 14:28:47] info: [auth:au0ht] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:47] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:lkxqm] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:lkxqm] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:lkxqm] Token from header: true
[2026-01-28 14:28:47] info: [auth:lkxqm] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Dressage
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9041
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147659: 0 -> 5
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4464, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Dressage (Log ID: 9041, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:37xw8j] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:37xw8j] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:37xw8j] Token from header: true
[2026-01-28 14:28:47] info: [auth:37xw8j] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Show Jumping
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9042
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147659: 0 -> 5
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4465, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Show Jumping (Log ID: 9042, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:a14zb] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:a14zb] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:a14zb] Token from header: true
[2026-01-28 14:28:47] info: [auth:a14zb] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Dressage
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9043
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147659: 5 -> 10
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4466, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Dressage (Log ID: 9043, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:12x0k9] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:12x0k9] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:12x0k9] Token from header: true
[2026-01-28 14:28:47] info: [auth:12x0k9] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Show Jumping
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9044
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147659: 5 -> 10
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4467, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Show Jumping (Log ID: 9044, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:tuafgj] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:tuafgj] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:tuafgj] Token from header: true
[2026-01-28 14:28:47] info: [auth:tuafgj] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Dressage
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Dressage
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9045
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147659: 10 -> 15
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4468, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Successfully trained horse 147659 in Dressage (Log ID: 9045, Score +5)
[2026-01-28 14:28:47] info: [POST] /api/training/train - 200
[2026-01-28 14:28:47] info: [POST] /api/training/train
[2026-01-28 14:28:47] info: [auth:snh1m] Starting auth for POST /training/train
[2026-01-28 14:28:47] info: [auth:snh1m] Token from cookie: false
[2026-01-28 14:28:47] info: [auth:snh1m] Token from header: true
[2026-01-28 14:28:47] info: [auth:snh1m] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:47] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Attempting to train horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:47] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:47] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:47 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:28:47] info: [trainingController.canTrain] Horse 147659 is eligible to train in Show Jumping
[2026-01-28 14:28:47] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Show Jumping
[2026-01-28 14:28:47] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9046
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:47] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147659: 10 -> 15
[2026-01-28 14:28:47] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147659
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:28:47] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4469, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:47] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Show Jumping (Log ID: 9046, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [POST] /api/training/train
[2026-01-28 14:28:48] info: [auth:80n0y] Starting auth for POST /training/train
[2026-01-28 14:28:48] info: [auth:80n0y] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:80n0y] Token from header: true
[2026-01-28 14:28:48] info: [auth:80n0y] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Attempting to train horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:48 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:28:48] info: [trainingController.canTrain] Horse 147659 is eligible to train in Dressage
[2026-01-28 14:28:48] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9047
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147659: 15 -> 20
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147659
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4470, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Dressage (Log ID: 9047, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [POST] /api/training/train
[2026-01-28 14:28:48] info: [auth:f388zm] Starting auth for POST /training/train
[2026-01-28 14:28:48] info: [auth:f388zm] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:f388zm] Token from header: true
[2026-01-28 14:28:48] info: [auth:f388zm] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Attempting to train horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:48 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:28:48] info: [trainingController.canTrain] Horse 147659 is eligible to train in Show Jumping
[2026-01-28 14:28:48] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9048
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147659: 15 -> 20
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147659
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4471, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Show Jumping (Log ID: 9048, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [POST] /api/training/train
[2026-01-28 14:28:48] info: [auth:owie0p] Starting auth for POST /training/train
[2026-01-28 14:28:48] info: [auth:owie0p] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:owie0p] Token from header: true
[2026-01-28 14:28:48] info: [auth:owie0p] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Attempting to train horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:48 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:28:48] info: [trainingController.canTrain] Horse 147659 is eligible to train in Dressage
[2026-01-28 14:28:48] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Dressage
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9049
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147659: 20 -> 25
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147659
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4472, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Dressage (Log ID: 9049, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [POST] /api/training/train
[2026-01-28 14:28:48] info: [auth:lfhnd] Starting auth for POST /training/train
[2026-01-28 14:28:48] info: [auth:lfhnd] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:lfhnd] Token from header: true
[2026-01-28 14:28:48] info: [auth:lfhnd] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Attempting to train horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:48 GMT-0500 (Eastern Standard Time) (discipline: Dressage)
[2026-01-28 14:28:48] info: [trainingController.canTrain] Horse 147659 is eligible to train in Show Jumping
[2026-01-28 14:28:48] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Show Jumping
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9050
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 147659: 20 -> 25
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 147659
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4473, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Show Jumping (Log ID: 9050, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:rrk2hq] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:rrk2hq] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:rrk2hq] Token from header: true
[2026-01-28 14:28:48] info: [auth:rrk2hq] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:9heizi] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:9heizi] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:9heizi] Token from header: true
[2026-01-28 14:28:48] info: [auth:9heizi] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:48] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
[2026-01-28 14:28:48] info: [POST] /api/training/train
[2026-01-28 14:28:48] info: [auth:erjv7l] Starting auth for POST /training/train
[2026-01-28 14:28:48] info: [auth:erjv7l] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:erjv7l] Token from header: true
[2026-01-28 14:28:48] info: [auth:erjv7l] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [ownership] Found owned horse 147659 for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.trainRouteHandler] Training request for horse 147659 in Cross Country
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Attempting to train horse 147659 in Cross Country
[2026-01-28 14:28:48] info: [trainingController.canTrain] Checking training eligibility for horse 147659 in Cross Country
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Getting age for horse 147659
[2026-01-28 14:28:48] info: [trainingModel.getHorseAge] Horse 147659 is 6 years old
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147659 across all disciplines
[2026-01-28 14:28:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147659: Tue Jan 20 2026 14:28:48 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)
[2026-01-28 14:28:48] info: [trainingController.canTrain] Horse 147659 is eligible to train in Cross Country
[2026-01-28 14:28:48] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147659)
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Horse 147659 has traits: 
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Logging training session for horse 147659 in Cross Country
[2026-01-28 14:28:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9051
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 147659 by +5
[2026-01-28 14:28:48] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 147659: 0 -> 5
[2026-01-28 14:28:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 147659
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Logging XP event: User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country
[2026-01-28 14:28:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4474, User c00699ae-16ce-4700-a19a-fed6299b04ab, Amount: 5
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Awarded 5 XP to user c00699ae-16ce-4700-a19a-fed6299b04ab for training - LEVEL UP to undefined!
[2026-01-28 14:28:48] info: [trainingController.trainHorse] Successfully trained horse 147659 in Cross Country (Log ID: 9051, Score +5)
[2026-01-28 14:28:48] info: [POST] /api/training/train - 200
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:y9zho] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:y9zho] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:y9zho] Token from header: true
[2026-01-28 14:28:48] info: [auth:y9zho] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:6gegsk] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:6gegsk] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:6gegsk] Token from header: true
[2026-01-28 14:28:48] info: [auth:6gegsk] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:48] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:pdf9ie] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:pdf9ie] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:pdf9ie] Token from header: true
[2026-01-28 14:28:48] info: [auth:pdf9ie] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:7iukxf] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:7iukxf] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:7iukxf] Token from header: true
[2026-01-28 14:28:48] info: [auth:7iukxf] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:48] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
[2026-01-28 14:28:48] info: [GET] /api/users/dashboard/c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:73c1sx] Starting auth for GET /users/dashboard/c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:73c1sx] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:73c1sx] Token from header: true
[2026-01-28 14:28:48] info: [auth:73c1sx] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:amr11l] Starting auth for GET /dashboard/c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:amr11l] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:amr11l] Token from header: true
[2026-01-28 14:28:48] info: [auth:amr11l] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:48] info: [userController.getDashboardData] Cache MISS - Getting dashboard for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingController.getTrainableHorses] Getting trainable horses for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:28:48] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [GET] /api/users/dashboard/c00699ae-16ce-4700-a19a-fed6299b04ab - 200
[2026-01-28 14:28:48] info: [GET] /api/users/999999/progress
[2026-01-28 14:28:48] info: [auth:626qi4] Starting auth for GET /users/999999/progress
[2026-01-28 14:28:48] info: [auth:626qi4] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:626qi4] Token from header: true
[2026-01-28 14:28:48] info: [auth:626qi4] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:cu3a6] Starting auth for GET /999999/progress
[2026-01-28 14:28:48] info: [auth:cu3a6] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:cu3a6] Token from header: true
[2026-01-28 14:28:48] info: [auth:cu3a6] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"999999","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:48] info: [GET] /api/users/999999/progress - 400
[2026-01-28 14:28:48] info: [GET] /api/users/invalid/progress
[2026-01-28 14:28:48] info: [auth:xjq51i] Starting auth for GET /users/invalid/progress
[2026-01-28 14:28:48] info: [auth:xjq51i] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:xjq51i] Token from header: true
[2026-01-28 14:28:48] info: [auth:xjq51i] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:o5omdt] Starting auth for GET /invalid/progress
[2026-01-28 14:28:48] info: [auth:o5omdt] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:o5omdt] Token from header: true
[2026-01-28 14:28:48] info: [auth:o5omdt] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"invalid","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:48] info: [GET] /api/users/invalid/progress - 400
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:63fir] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:63fir] Token from cookie: false
[2026-01-28 14:28:48] warn: [auth:63fir] Access token is required for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress from ::ffff:127.0.0.1
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 401
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:7wpfh] Starting auth for GET /users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:7wpfh] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:7wpfh] Token from header: true
[2026-01-28 14:28:48] info: [auth:7wpfh] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [auth:n9oepo] Starting auth for GET /c00699ae-16ce-4700-a19a-fed6299b04ab/progress
[2026-01-28 14:28:48] info: [auth:n9oepo] Token from cookie: false
[2026-01-28 14:28:48] info: [auth:n9oepo] Token from header: true
[2026-01-28 14:28:48] info: [auth:n9oepo] Authenticated user c00699ae-16ce-4700-a19a-fed6299b04ab
[2026-01-28 14:28:48] info: [userRoutes] Self-access validated: user c00699ae-16ce-4700-a19a-fed6299b04ab accessing own data
[2026-01-28 14:28:48] info: [GET] /api/users/c00699ae-16ce-4700-a19a-fed6299b04ab/progress - 200
FAIL tests/integration/userProgressAPI.integration.test.mjs
  üéØ INTEGRATION: User Progress API - Complete Progress Tracking
    üîê STEP 1: User Setup & Initial Progress State
      ‚àö should create user and establish initial progress state (701 ms)
      √ó should return correct initial progress data via API (49 ms)
    üêé STEP 2: Horse Creation for Training Integration
      ‚àö should create training-eligible horse (10 ms)
    üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates
      √ó should gain XP from training and update progress correctly (100 ms)
      ‚àö should handle multiple training sessions and XP accumulation (580 ms)
    üéØ STEP 4: Level-Up Detection & Multi-Level Progression
      √ó should level up when reaching XP threshold (82 ms)
      √ó should handle multiple level gains in single XP award (30 ms)
    üìä STEP 5: Dashboard Data Integration
      ‚àö should return comprehensive dashboard data with progress integration (46 ms)
    üîç STEP 6: API Consistency & Edge Cases
      ‚àö should handle invalid user ID gracefully (25 ms)
      ‚àö should validate user ID format (24 ms)
      ‚àö should require authentication for progress endpoints (20 ms)
    üéä STEP 7: End-to-End Progress Validation
      ‚àö should validate complete progress tracking integrity (25 ms)
      ‚àö should validate all business rules were enforced throughout progression (4 ms)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîê STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 3,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 5,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 195,

    [0m [90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 234 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 235 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 236 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:233:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 2,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 200,
        "xpForCurrentLevel": 200,
        "xpForNextLevel": 300,
        "xpToNextLevel": 100,

    [0m [90m 326 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 327 |[39m
    [31m[1m>[22m[39m[90m 328 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 329 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 330 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 331 |[39m         level[33m:[39m [35m2[39m[33m,[39m [90m// Leveled up![39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:328:42)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

[2026-01-28 14:28:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:49] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:49] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:49] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:49] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:49] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:49] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:49] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:lyjy84] Starting auth for GET /users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:lyjy84] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:lyjy84] Token from header: true
[2026-01-28 14:28:50] info: [auth:lyjy84] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:pf1u14] Starting auth for GET /2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:pf1u14] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:pf1u14] Token from header: true
[2026-01-28 14:28:50] info: [auth:pf1u14] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [userRoutes] Self-access validated: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f accessing own data
[2026-01-28 14:28:50] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress - 200
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:28:50] info: [auth:gn9xh3i] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:28:50] info: [auth:gn9xh3i] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:gn9xh3i] Token from header: true
[2026-01-28 14:28:50] info: [auth:gn9xh3i] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:4wbbo5] Starting auth for GET /550e8400-e29b-41d4-a716-446655440999/progress
[2026-01-28 14:28:50] info: [auth:4wbbo5] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:4wbbo5] Token from header: true
[2026-01-28 14:28:50] info: [auth:4wbbo5] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440999
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 403
[2026-01-28 14:28:50] info: [GET] /api/users//progress
[2026-01-28 14:28:50] info: [auth:fo87oo] Starting auth for GET /users//progress
[2026-01-28 14:28:50] info: [auth:fo87oo] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:fo87oo] Token from header: true
[2026-01-28 14:28:50] info: [auth:fo87oo] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:fwgp2r] Starting auth for GET /progress
[2026-01-28 14:28:50] info: [auth:fwgp2r] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:fwgp2r] Token from header: true
[2026-01-28 14:28:50] info: [auth:fwgp2r] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:50] info: [GET] /api/users//progress - 400
[2026-01-28 14:28:50] info: [GET] /api/users/a/progress
[2026-01-28 14:28:50] info: [auth:qajr3] Starting auth for GET /users/a/progress
[2026-01-28 14:28:50] info: [auth:qajr3] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:qajr3] Token from header: true
[2026-01-28 14:28:50] info: [auth:qajr3] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:91sdgy] Starting auth for GET /a/progress
[2026-01-28 14:28:50] info: [auth:91sdgy] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:91sdgy] Token from header: true
[2026-01-28 14:28:50] info: [auth:91sdgy] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:50] info: [GET] /api/users/a/progress - 400
[2026-01-28 14:28:50] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:28:50] info: [auth:95eoptl] Starting auth for GET /users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:28:50] info: [auth:95eoptl] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:95eoptl] Token from header: true
[2026-01-28 14:28:50] info: [auth:95eoptl] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:mvx7dh] Starting auth for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress
[2026-01-28 14:28:50] info: [auth:mvx7dh] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:mvx7dh] Token from header: true
[2026-01-28 14:28:50] info: [auth:mvx7dh] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:50] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:28:50] info: [auth:1mkeu6] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:28:50] info: [auth:1mkeu6] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:1mkeu6] Token from header: true
[2026-01-28 14:28:50] info: [auth:1mkeu6] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:ogx9th] Starting auth for GET /550e8400-e29b-41d4-a716-446655440998/progress
[2026-01-28 14:28:50] info: [auth:ogx9th] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:ogx9th] Token from header: true
[2026-01-28 14:28:50] info: [auth:ogx9th] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440998
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 403
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:9kufj] Starting auth for GET /users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:9kufj] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:9kufj] Token from header: true
[2026-01-28 14:28:50] info: [auth:9kufj] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:oe7v6m] Starting auth for GET /2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:oe7v6m] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:oe7v6m] Token from header: true
[2026-01-28 14:28:50] info: [auth:oe7v6m] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [userRoutes] Self-access validated: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f accessing own data
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress - 200
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:rzteo] Starting auth for GET /users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:rzteo] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:rzteo] Token from header: true
[2026-01-28 14:28:50] info: [auth:rzteo] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:yewjg] Starting auth for GET /2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress
[2026-01-28 14:28:50] info: [auth:yewjg] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:yewjg] Token from header: true
[2026-01-28 14:28:50] info: [auth:yewjg] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [userRoutes] Self-access validated: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f accessing own data
[2026-01-28 14:28:50] info: [GET] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/progress - 200
[2026-01-28 14:28:50] info: [GET] /api/users/user-123_test/progress
[2026-01-28 14:28:50] info: [auth:771msc9] Starting auth for GET /users/user-123_test/progress
[2026-01-28 14:28:50] info: [auth:771msc9] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:771msc9] Token from header: true
[2026-01-28 14:28:50] info: [auth:771msc9] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:axs23] Starting auth for GET /user-123_test/progress
[2026-01-28 14:28:50] info: [auth:axs23] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:axs23] Token from header: true
[2026-01-28 14:28:50] info: [auth:axs23] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:28:50] info: [GET] /api/users/user-123_test/progress - 400
[2026-01-28 14:28:50] info: [GET] /api/users/041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:jrb258] Starting auth for GET /users/041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:jrb258] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:jrb258] Token from header: true
[2026-01-28 14:28:50] info: [auth:jrb258] Authenticated user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:7d5w] Starting auth for GET /041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:7d5w] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:7d5w] Token from header: true
[2026-01-28 14:28:50] info: [auth:7d5w] Authenticated user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [userRoutes] Self-access validated: user 041b72b2-822c-42ba-b351-6ca8c6dd4202 accessing own data
[2026-01-28 14:28:50] info: [userController.getUser] Getting user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [GET] /api/users/041b72b2-822c-42ba-b351-6ca8c6dd4202 - 200
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:ggerd] Starting auth for GET /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:ggerd] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:ggerd] Token from header: true
[2026-01-28 14:28:50] info: [auth:ggerd] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:axecj8] Starting auth for GET /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:axecj8] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:axecj8] Token from header: true
[2026-01-28 14:28:50] info: [auth:axecj8] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:28:50] info: [POST] /api/users
[2026-01-28 14:28:50] info: [auth:508qf] Starting auth for POST /users
[2026-01-28 14:28:50] info: [auth:508qf] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:508qf] Token from header: true
[2026-01-28 14:28:50] info: [auth:508qf] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [userController.createUser] Creating user NewUser_1769628530594
[2026-01-28 14:28:50] info: [createUser] User created: NewUser_1769628530594
[2026-01-28 14:28:50] info: [POST] /api/users - 201
[2026-01-28 14:28:50] info: [POST] /api/users
[2026-01-28 14:28:50] info: [auth:1i2rrj] Starting auth for POST /users
[2026-01-28 14:28:50] info: [auth:1i2rrj] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:1i2rrj] Token from header: true
[2026-01-28 14:28:50] info: [auth:1i2rrj] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [POST] /api/users - 400
[2026-01-28 14:28:50] info: [PUT] /api/users/041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:5m6ft] Starting auth for PUT /users/041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:5m6ft] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:5m6ft] Token from header: true
[2026-01-28 14:28:50] info: [auth:5m6ft] Authenticated user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:lul8] Starting auth for PUT /041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [auth:lul8] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:lul8] Token from header: true
[2026-01-28 14:28:50] info: [auth:lul8] Authenticated user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [userRoutes] Self-access validated: user 041b72b2-822c-42ba-b351-6ca8c6dd4202 accessing own data
[2026-01-28 14:28:50] info: [userController.updateUser] Updating user 041b72b2-822c-42ba-b351-6ca8c6dd4202
[2026-01-28 14:28:50] info: [PUT] /api/users/041b72b2-822c-42ba-b351-6ca8c6dd4202 - 200
[2026-01-28 14:28:50] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:mm5rh] Starting auth for PUT /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:mm5rh] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:mm5rh] Token from header: true
[2026-01-28 14:28:50] info: [auth:mm5rh] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] info: [auth:2z2cdh] Starting auth for PUT /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [auth:2z2cdh] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:2z2cdh] Token from header: true
[2026-01-28 14:28:50] info: [auth:2z2cdh] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:50] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:50] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:28:50] info: [DELETE] /api/users/d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:50] info: [auth:yihgr] Starting auth for DELETE /users/d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:50] info: [auth:yihgr] Token from cookie: false
[2026-01-28 14:28:50] info: [auth:yihgr] Token from header: true
[2026-01-28 14:28:50] info: [auth:yihgr] Authenticated user d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:51] info: [auth:bsgu8m] Starting auth for DELETE /d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:51] info: [auth:bsgu8m] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:bsgu8m] Token from header: true
[2026-01-28 14:28:51] info: [auth:bsgu8m] Authenticated user d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:51] info: [userRoutes] Self-access validated: user d7ecf57b-2594-4a62-bd01-52f13a914d35 accessing own data
[2026-01-28 14:28:51] info: [userController.deleteUser] Deleting user d7ecf57b-2594-4a62-bd01-52f13a914d35
[2026-01-28 14:28:51] info: [DELETE] /api/users/d7ecf57b-2594-4a62-bd01-52f13a914d35 - 200
[2026-01-28 14:28:51] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:51] info: [auth:orkpwp] Starting auth for DELETE /users/550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:51] info: [auth:orkpwp] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:orkpwp] Token from header: true
[2026-01-28 14:28:51] info: [auth:orkpwp] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] info: [auth:benvc] Starting auth for DELETE /550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:51] info: [auth:benvc] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:benvc] Token from header: true
[2026-01-28 14:28:51] info: [auth:benvc] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:51] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403
[2026-01-28 14:28:51] info: [POST] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/add-xp
[2026-01-28 14:28:51] info: [auth:tpxa80h] Starting auth for POST /users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/add-xp
[2026-01-28 14:28:51] info: [auth:tpxa80h] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:tpxa80h] Token from header: true
[2026-01-28 14:28:51] info: [auth:tpxa80h] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] info: [auth:4865n] Starting auth for POST /2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/add-xp
[2026-01-28 14:28:51] info: [auth:4865n] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:4865n] Token from header: true
[2026-01-28 14:28:51] info: [auth:4865n] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] info: [userRoutes] Self-access validated: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f accessing own data
[2026-01-28 14:28:51] info: [userController.addXp] Adding 50 XP to user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] info: [POST] /api/users/2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f/add-xp - 200
[2026-01-28 14:28:51] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:28:51] info: [auth:m7d00y] Starting auth for POST /users/550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:28:51] info: [auth:m7d00y] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:m7d00y] Token from header: true
[2026-01-28 14:28:51] info: [auth:m7d00y] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] info: [auth:9rhgxh] Starting auth for POST /550e8400-e29b-41d4-a716-446655440001/add-xp
[2026-01-28 14:28:51] info: [auth:9rhgxh] Token from cookie: false
[2026-01-28 14:28:51] info: [auth:9rhgxh] Token from header: true
[2026-01-28 14:28:51] info: [auth:9rhgxh] Authenticated user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f
[2026-01-28 14:28:51] warn: [userRoutes] Self-access violation: user 2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f attempted to access user 550e8400-e29b-41d4-a716-446655440001
[2026-01-28 14:28:51] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 403
FAIL tests/integration/userRoutes.test.mjs
  üåê INTEGRATION: User Routes - HTTP API Endpoints
    GET /api/users/:id/progress
      √ó should return user progress successfully (58 ms)
      ‚àö should return 403 for non-existent user (unauthorized access) (25 ms)
      ‚àö should return validation error for empty user ID (28 ms)
      ‚àö should return validation error for invalid user ID format (27 ms)
      ‚àö should return validation error for extremely long user ID (26 ms)
      ‚àö should return 403 when attempting to access a different user (database error path blocked) (26 ms)
      ‚àö should calculate xpToNextLevel correctly for edge cases (25 ms)
      ‚àö should only return required fields in response (26 ms)
      ‚àö should handle invalid special characters in user ID (28 ms)
    GET /api/users/:id
      ‚àö should return a user by ID (31 ms)
      ‚àö should return 403 if user not authorized (matches different user) (26 ms)
    POST /api/users
      ‚àö should create a new user (33 ms)
      ‚àö should return 400 for invalid user data (23 ms)
    PUT /api/users/:id
      ‚àö should update an existing user (31 ms)
      ‚àö should return 403 if user to update is not authorized (26 ms)
    DELETE /api/users/:id
      ‚àö should delete a user (311 ms)
      ‚àö should return 403 if user to delete is not authorized (27 ms)
    POST /api/users/:id/add-xp
      ‚àö should add XP to a user and potentially level them up (31 ms)
      ‚àö should return 404 if user not found for XP addition (matches authorized user check) (27 ms)

  ‚óè üåê INTEGRATION: User Routes - HTTP API Endpoints ‚Ä∫ GET /api/users/:id/progress ‚Ä∫ should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f",
    -     },
    -   },
        "username": "userroutes_1769628529654",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

[2026-01-28 14:28:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:52] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:52] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:52] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:52] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:52] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:52] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:52] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:52] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:52] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:6gh5cn] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:6gh5cn] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:6gh5cn] Token from header: true
[2026-01-28 14:28:52] info: [auth:6gh5cn] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:rxvfr] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:rxvfr] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:rxvfr] Token from header: true
[2026-01-28 14:28:52] info: [auth:rxvfr] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Creating assignment: groom 73896 -> horse 147660
[2026-01-28 14:28:52] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:ho978] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:ho978] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:ho978] Token from header: true
[2026-01-28 14:28:52] info: [auth:ho978] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:lh672g] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:lh672g] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:lh672g] Token from header: true
[2026-01-28 14:28:52] info: [auth:lh672g] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Creating assignment: groom 73896 -> horse 147661
[2026-01-28 14:28:52] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:6i5m09] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:6i5m09] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:6i5m09] Token from header: true
[2026-01-28 14:28:52] info: [auth:6i5m09] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:59s81] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:59s81] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:59s81] Token from header: true
[2026-01-28 14:28:52] info: [auth:59s81] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Creating assignment: groom 73896 -> horse 147660
[2026-01-28 14:28:52] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:otn088] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:otn088] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:otn088] Token from header: true
[2026-01-28 14:28:52] info: [auth:otn088] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:p4makb] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:p4makb] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:p4makb] Token from header: true
[2026-01-28 14:28:52] info: [auth:p4makb] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] warn: [groomAssignmentRoutes] Validation errors: [{"type":"field","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:2m474g] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:2m474g] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:2m474g] Token from header: true
[2026-01-28 14:28:52] info: [auth:2m474g] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:51985] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:51985] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:51985] Token from header: true
[2026-01-28 14:28:52] info: [auth:51985] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Creating assignment: groom 73896 -> horse 147662
[2026-01-28 14:28:52] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:35rfod] Starting auth for GET /groom-assignments
[2026-01-28 14:28:52] info: [auth:35rfod] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:35rfod] Token from header: true
[2026-01-28 14:28:52] info: [auth:35rfod] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:qdkjy] Starting auth for GET /
[2026-01-28 14:28:52] info: [auth:qdkjy] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:qdkjy] Token from header: true
[2026-01-28 14:28:52] info: [auth:qdkjy] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Getting assignments for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments - 200
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments?groomId=73896
[2026-01-28 14:28:52] info: [auth:u4jv0r] Starting auth for GET /groom-assignments
[2026-01-28 14:28:52] info: [auth:u4jv0r] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:u4jv0r] Token from header: true
[2026-01-28 14:28:52] info: [auth:u4jv0r] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:wk82wvm] Starting auth for GET /
[2026-01-28 14:28:52] info: [auth:wk82wvm] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:wk82wvm] Token from header: true
[2026-01-28 14:28:52] info: [auth:wk82wvm] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Getting assignments for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments?groomId=73896 - 200
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 14:28:52] info: [auth:yhiara] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 14:28:52] info: [auth:yhiara] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:yhiara] Token from header: true
[2026-01-28 14:28:52] info: [auth:yhiara] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:lao0ak] Starting auth for GET /dashboard
[2026-01-28 14:28:52] info: [auth:lao0ak] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:lao0ak] Token from header: true
[2026-01-28 14:28:52] info: [auth:lao0ak] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Getting assignment dashboard for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/dashboard - 200
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/groom/73896/limits
[2026-01-28 14:28:52] info: [auth:1gsebm] Starting auth for GET /groom-assignments/groom/73896/limits
[2026-01-28 14:28:52] info: [auth:1gsebm] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:1gsebm] Token from header: true
[2026-01-28 14:28:52] info: [auth:1gsebm] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:5etv6m] Starting auth for GET /groom/73896/limits
[2026-01-28 14:28:52] info: [auth:5etv6m] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:5etv6m] Token from header: true
[2026-01-28 14:28:52] info: [auth:5etv6m] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [ownership] Validated ownership: user 75055d92-d341-4b2e-9c65-edb3ba0bb51f owns groom 73896
[2026-01-28 14:28:52] info: [groomAssignmentController] Getting limits for groom 73896
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/groom/73896/limits - 200
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:5z85tl] Starting auth for POST /groom-assignments
[2026-01-28 14:28:52] info: [auth:5z85tl] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:5z85tl] Token from header: true
[2026-01-28 14:28:52] info: [auth:5z85tl] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:2nr4dng] Starting auth for POST /
[2026-01-28 14:28:52] info: [auth:2nr4dng] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:2nr4dng] Token from header: true
[2026-01-28 14:28:52] info: [auth:2nr4dng] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Creating assignment: groom 73896 -> horse 147663
[2026-01-28 14:28:52] error: [groomAssignmentService] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] error: [groomAssignmentController] Error creating assignment: You do not own this horse
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments - 400
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 14:28:52] info: [auth:u94lgm] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 14:28:52] info: [auth:u94lgm] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:u94lgm] Token from header: true
[2026-01-28 14:28:52] info: [auth:u94lgm] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:8js96] Starting auth for GET /salary-costs
[2026-01-28 14:28:52] info: [auth:8js96] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:8js96] Token from header: true
[2026-01-28 14:28:52] info: [auth:8js96] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Calculating salary costs for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/salary-costs - 200
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments/validate
[2026-01-28 14:28:52] info: [auth:kwz3di] Starting auth for POST /groom-assignments/validate
[2026-01-28 14:28:52] info: [auth:kwz3di] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:kwz3di] Token from header: true
[2026-01-28 14:28:52] info: [auth:kwz3di] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:fpmkhp] Starting auth for POST /validate
[2026-01-28 14:28:52] info: [auth:fpmkhp] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:fpmkhp] Token from header: true
[2026-01-28 14:28:52] info: [auth:fpmkhp] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Validating assignment: groom 73897 -> horse 147660
[2026-01-28 14:28:52] info: [POST] /api/groom-assignments/validate - 200
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments
[2026-01-28 14:28:52] info: [auth:hhew2g] Starting auth for GET /groom-assignments
[2026-01-28 14:28:52] info: [auth:hhew2g] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:hhew2g] Token from header: true
[2026-01-28 14:28:52] info: [auth:hhew2g] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:rxr9so] Starting auth for GET /
[2026-01-28 14:28:52] info: [auth:rxr9so] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:rxr9so] Token from header: true
[2026-01-28 14:28:52] info: [auth:rxr9so] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentController] Getting assignments for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments - 200
[2026-01-28 14:28:52] info: [DELETE] /api/groom-assignments/99999
[2026-01-28 14:28:52] info: [auth:325huj] Starting auth for DELETE /groom-assignments/99999
[2026-01-28 14:28:52] info: [auth:325huj] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:325huj] Token from header: true
[2026-01-28 14:28:52] info: [auth:325huj] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:o5733] Starting auth for DELETE /99999
[2026-01-28 14:28:52] info: [auth:o5733] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:o5733] Token from header: true
[2026-01-28 14:28:52] info: [auth:o5733] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] warn: [ownership] groom-assignment 99999 not found or not owned by user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [DELETE] /api/groom-assignments/99999 - 404
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/config
[2026-01-28 14:28:52] info: [auth:htxiwm] Starting auth for GET /groom-assignments/config
[2026-01-28 14:28:52] info: [auth:htxiwm] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:htxiwm] Token from header: true
[2026-01-28 14:28:52] info: [auth:htxiwm] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:ggf5z4] Starting auth for GET /config
[2026-01-28 14:28:52] info: [auth:ggf5z4] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:ggf5z4] Token from header: true
[2026-01-28 14:28:52] info: [auth:ggf5z4] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/config - 200
[2026-01-28 14:28:52] info: [GET] /api/groom-assignments/statistics
[2026-01-28 14:28:52] info: [auth:fe9zkg] Starting auth for GET /groom-assignments/statistics
[2026-01-28 14:28:52] info: [auth:fe9zkg] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:fe9zkg] Token from header: true
[2026-01-28 14:28:52] info: [auth:fe9zkg] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [auth:n9jc7] Starting auth for GET /statistics
[2026-01-28 14:28:52] info: [auth:n9jc7] Token from cookie: false
[2026-01-28 14:28:52] info: [auth:n9jc7] Token from header: true
[2026-01-28 14:28:52] info: [auth:n9jc7] Authenticated user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:52] info: [groomAssignmentRoutes] Getting assignment statistics for user 75055d92-d341-4b2e-9c65-edb3ba0bb51f
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments/statistics - 200
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments
[2026-01-28 14:28:53] info: [auth:1vad1m] Starting auth for GET /groom-assignments
[2026-01-28 14:28:53] info: [auth:1vad1m] Token from cookie: false
[2026-01-28 14:28:53] warn: [auth:1vad1m] Access token is required for GET /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments - 401
[2026-01-28 14:28:53] info: [POST] /api/groom-assignments
[2026-01-28 14:28:53] info: [auth:cwu26i] Starting auth for POST /groom-assignments
[2026-01-28 14:28:53] info: [auth:cwu26i] Token from cookie: false
[2026-01-28 14:28:53] warn: [auth:cwu26i] Access token is required for POST /groom-assignments from ::ffff:127.0.0.1
[2026-01-28 14:28:53] info: [POST] /api/groom-assignments - 401
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments/dashboard
[2026-01-28 14:28:53] info: [auth:mgiwbc] Starting auth for GET /groom-assignments/dashboard
[2026-01-28 14:28:53] info: [auth:mgiwbc] Token from cookie: false
[2026-01-28 14:28:53] warn: [auth:mgiwbc] Access token is required for GET /groom-assignments/dashboard from ::ffff:127.0.0.1
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments/dashboard - 401
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments/salary-costs
[2026-01-28 14:28:53] info: [auth:hvulq] Starting auth for GET /groom-assignments/salary-costs
[2026-01-28 14:28:53] info: [auth:hvulq] Token from cookie: false
[2026-01-28 14:28:53] warn: [auth:hvulq] Access token is required for GET /groom-assignments/salary-costs from ::ffff:127.0.0.1
[2026-01-28 14:28:53] info: [GET] /api/groom-assignments/salary-costs - 401
FAIL tests/integration/groomAssignmentSystem.test.mjs
  Enhanced Groom Assignment System Integration Tests
    1. Assignment Creation
      √ó should create a new groom assignment (110 ms)
      √ó should create multiple assignments for different horses (38 ms)
      √ó should prevent duplicate assignments (39 ms)
      ‚àö should validate required fields (31 ms)
      ‚àö should prevent assignment to non-owned horses (62 ms)
    2. Assignment Retrieval
      √ó should get all assignments for user (35 ms)
      ‚àö should filter assignments by groom (37 ms)
      √ó should get assignment dashboard (35 ms)
    3. Assignment Limits
      ‚àö should get groom assignment limits (38 ms)
      √ó should enforce assignment limits (65 ms)
    4. Salary Calculations
      √ó should calculate weekly salary costs (33 ms)
    5. Assignment Validation
      ‚àö should validate assignment eligibility (32 ms)
    6. Assignment Removal
      √ó should remove an assignment (31 ms)
      ‚àö should validate assignment ownership for removal (32 ms)
    7. Configuration and Statistics
      ‚àö should get assignment configuration (28 ms)
      ‚àö should get assignment statistics (76 ms)
    8. Authentication and Authorization
      ‚àö should require authentication for all endpoints (75 ms)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 3. Assignment Limits ‚Ä∫ should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 4. Salary Calculations ‚Ä∫ should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 6. Assignment Removal ‚Ä∫ should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

[2026-01-28 14:28:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:54] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:61psr] Starting auth for GET /horses/147669/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:61psr] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:61psr] Token from header: true
[2026-01-28 14:28:54] info: [auth:61psr] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:xb7vy5] Starting auth for GET /horses/147669/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:xb7vy5] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:xb7vy5] Token from header: true
[2026-01-28 14:28:54] info: [auth:xb7vy5] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [ownership] Validated ownership: user d76632e6-3c12-496a-b1f1-e94617f82b9c owns horse 147669
[2026-01-28 14:28:54] info: Enhanced trait history generated for horse 147669 by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/enhanced-trait-history - 200
[2026-01-28 14:28:54] info: [GET] /api/horses/147670/epigenetic-insights
[2026-01-28 14:28:54] info: [auth:ky454] Starting auth for GET /horses/147670/epigenetic-insights
[2026-01-28 14:28:54] info: [auth:ky454] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:ky454] Token from header: true
[2026-01-28 14:28:54] info: [auth:ky454] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:iatk9] Starting auth for GET /horses/147670/epigenetic-insights
[2026-01-28 14:28:54] info: [auth:iatk9] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:iatk9] Token from header: true
[2026-01-28 14:28:54] info: [auth:iatk9] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [ownership] Validated ownership: user d76632e6-3c12-496a-b1f1-e94617f82b9c owns horse 147670
[2026-01-28 14:28:54] info: Epigenetic insights generated for horse 147670 by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147670/epigenetic-insights - 200
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/trait-timeline
[2026-01-28 14:28:54] info: [auth:rl3k29] Starting auth for GET /horses/147669/trait-timeline
[2026-01-28 14:28:54] info: [auth:rl3k29] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:rl3k29] Token from header: true
[2026-01-28 14:28:54] info: [auth:rl3k29] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:ne45ev] Starting auth for GET /horses/147669/trait-timeline
[2026-01-28 14:28:54] info: [auth:ne45ev] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:ne45ev] Token from header: true
[2026-01-28 14:28:54] info: [auth:ne45ev] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [ownership] Validated ownership: user d76632e6-3c12-496a-b1f1-e94617f82b9c owns horse 147669
[2026-01-28 14:28:54] info: Trait timeline generated for horse 147669 by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/trait-timeline - 200
[2026-01-28 14:28:54] info: [GET] /api/users/d76632e6-3c12-496a-b1f1-e94617f82b9c/stable-epigenetic-report
[2026-01-28 14:28:54] info: [auth:trti3d] Starting auth for GET /users/d76632e6-3c12-496a-b1f1-e94617f82b9c/stable-epigenetic-report
[2026-01-28 14:28:54] info: [auth:trti3d] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:trti3d] Token from header: true
[2026-01-28 14:28:54] info: [auth:trti3d] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:qw1l0l] Starting auth for GET /users/d76632e6-3c12-496a-b1f1-e94617f82b9c/stable-epigenetic-report
[2026-01-28 14:28:54] info: [auth:qw1l0l] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:qw1l0l] Token from header: true
[2026-01-28 14:28:54] info: [auth:qw1l0l] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/users/d76632e6-3c12-496a-b1f1-e94617f82b9c/stable-epigenetic-report - 200
[2026-01-28 14:28:54] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:m5vhw] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:m5vhw] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:m5vhw] Token from header: true
[2026-01-28 14:28:54] info: [auth:m5vhw] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:snu45t] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:snu45t] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:snu45t] Token from header: true
[2026-01-28 14:28:54] info: [auth:snu45t] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [POST] /api/horses/compare-epigenetics - 403
[2026-01-28 14:28:54] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=d76632e6-3c12-496a-b1f1-e94617f82b9c&timeframe=30
[2026-01-28 14:28:54] info: [auth:ftf0aa] Starting auth for GET /horses/trait-trends
[2026-01-28 14:28:54] info: [auth:ftf0aa] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:ftf0aa] Token from header: true
[2026-01-28 14:28:54] info: [auth:ftf0aa] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:wrr5f2] Starting auth for GET /trait-trends
[2026-01-28 14:28:54] info: [auth:wrr5f2] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:wrr5f2] Token from header: true
[2026-01-28 14:28:54] info: [auth:wrr5f2] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/trait-trends?user%5Bconnect%5D%5Bid%5D=d76632e6-3c12-496a-b1f1-e94617f82b9c&timeframe=30 - 400
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T19%3A28%3A54.767Z&dateTo=2026-01-28T19%3A28%3A54.767Z
[2026-01-28 14:28:54] info: [auth:75nsjy] Starting auth for GET /horses/147669/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:75nsjy] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:75nsjy] Token from header: true
[2026-01-28 14:28:54] info: [auth:75nsjy] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:84cfa1g] Starting auth for GET /horses/147669/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:84cfa1g] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:84cfa1g] Token from header: true
[2026-01-28 14:28:54] info: [auth:84cfa1g] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [ownership] Validated ownership: user d76632e6-3c12-496a-b1f1-e94617f82b9c owns horse 147669
[2026-01-28 14:28:54] info: Enhanced trait history generated for horse 147669 by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147669/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2026-01-18T19%3A28%3A54.767Z&dateTo=2026-01-28T19%3A28%3A54.767Z - 200
[2026-01-28 14:28:54] info: [GET] /api/horses/147670/epigenetic-report-export?format=detailed
[2026-01-28 14:28:54] info: [auth:it6xmh] Starting auth for GET /horses/147670/epigenetic-report-export
[2026-01-28 14:28:54] info: [auth:it6xmh] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:it6xmh] Token from header: true
[2026-01-28 14:28:54] info: [auth:it6xmh] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:8e7knn] Starting auth for GET /horses/147670/epigenetic-report-export
[2026-01-28 14:28:54] info: [auth:8e7knn] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:8e7knn] Token from header: true
[2026-01-28 14:28:54] info: [auth:8e7knn] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [ownership] Validated ownership: user d76632e6-3c12-496a-b1f1-e94617f82b9c owns horse 147670
[2026-01-28 14:28:54] info: Epigenetic report export generated for horse 147670 (detailed) by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147670/epigenetic-report-export?format=detailed - 200
[2026-01-28 14:28:54] info: [GET] /api/horses/147668/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:40tptc] Starting auth for GET /horses/147668/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:40tptc] Token from cookie: false
[2026-01-28 14:28:54] warn: [auth:40tptc] Access token is required for GET /horses/147668/enhanced-trait-history from ::ffff:127.0.0.1
[2026-01-28 14:28:54] info: [GET] /api/horses/147668/enhanced-trait-history - 401
[2026-01-28 14:28:54] info: [GET] /api/horses/147671/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:0b4ppg] Starting auth for GET /horses/147671/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:0b4ppg] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:0b4ppg] Token from header: true
[2026-01-28 14:28:54] info: [auth:0b4ppg] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:eds0xj] Starting auth for GET /horses/147671/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:eds0xj] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:eds0xj] Token from header: true
[2026-01-28 14:28:54] info: [auth:eds0xj] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] warn: [ownership] horse 147671 not found or not owned by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [GET] /api/horses/147671/enhanced-trait-history - 404
[2026-01-28 14:28:54] info: [POST] /api/horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:pik6ipr] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:pik6ipr] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:pik6ipr] Token from header: true
[2026-01-28 14:28:54] info: [auth:pik6ipr] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:9xp9kr] Starting auth for POST /horses/compare-epigenetics
[2026-01-28 14:28:54] info: [auth:9xp9kr] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:9xp9kr] Token from header: true
[2026-01-28 14:28:54] info: [auth:9xp9kr] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [POST] /api/horses/compare-epigenetics - 400
[2026-01-28 14:28:54] info: [GET] /api/horses/99999/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:ev2dv7] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:ev2dv7] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:ev2dv7] Token from header: true
[2026-01-28 14:28:54] info: [auth:ev2dv7] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:54] info: [auth:ekxyzq] Starting auth for GET /horses/99999/enhanced-trait-history
[2026-01-28 14:28:54] info: [auth:ekxyzq] Token from cookie: false
[2026-01-28 14:28:54] info: [auth:ekxyzq] Token from header: true
[2026-01-28 14:28:55] info: [auth:ekxyzq] Authenticated user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:55] warn: [ownership] horse 99999 not found or not owned by user d76632e6-3c12-496a-b1f1-e94617f82b9c
[2026-01-28 14:28:55] info: [GET] /api/horses/99999/enhanced-trait-history - 404
FAIL tests/routes/enhancedReportingRoutes.test.mjs
  Enhanced Reporting API Routes
    Enhanced Trait History Endpoints
      ‚àö GET /api/horses/:id/enhanced-trait-history should return comprehensive trait history (93 ms)
      ‚àö GET /api/horses/:id/epigenetic-insights should return advanced epigenetic analysis (64 ms)
      ‚àö GET /api/horses/:id/trait-timeline should return detailed trait development timeline (45 ms)
    Multi-Horse Analysis Endpoints
      ‚àö GET /api/users/:id/stable-epigenetic-report should return stable-wide epigenetic analysis (32 ms)
      √ó POST /api/horses/compare-epigenetics should compare multiple horses (42 ms)
      √ó GET /api/horses/trait-trends should return trait development trends (28 ms)
    Advanced Filtering and Export
      ‚àö GET /api/horses/:id/enhanced-trait-history with filters should return filtered results (66 ms)
      ‚àö GET /api/horses/:id/epigenetic-report-export should return exportable report data (42 ms)
    Authentication and Validation
      ‚àö should require authentication for enhanced reporting endpoints (21 ms)
      ‚àö should validate horse ownership for reporting endpoints (54 ms)
      ‚àö should validate input parameters for comparison endpoint (29 ms)
      ‚àö should handle non-existent horse IDs in reporting (31 ms)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 14:28:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:56] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:56] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:56] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:56] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:56] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:56] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:56] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:56] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:56] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:56] info: [POST] /api/auth/register
[2026-01-28 14:28:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:28:56] info: [EmailVerification] Created verification token
[2026-01-28 14:28:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:28:56] info: [authController.register] Verification email sent
[2026-01-28 14:28:56] info: [POST] /api/auth/register - 201
[2026-01-28 14:28:56] info: [GET] /api/competition/eligibility/147672/Racing
[2026-01-28 14:28:56] info: [auth:61weg] Starting auth for GET /competition/eligibility/147672/Racing
[2026-01-28 14:28:56] info: [auth:61weg] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:61weg] Token from header: true
[2026-01-28 14:28:56] info: [auth:61weg] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [auth:jqehq] Starting auth for GET /eligibility/147672/Racing
[2026-01-28 14:28:56] info: [auth:jqehq] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:jqehq] Token from header: true
[2026-01-28 14:28:56] info: [auth:jqehq] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [ownership] Validated ownership: user c6176406-a9f7-4be8-b6cf-ca2a45d080c4 owns horse 147672
[2026-01-28 14:28:56] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147672 in Racing
[2026-01-28 14:28:56] info: [competitionRoutes.GET /eligibility] Horse 147672 eligibility checked for Racing
[2026-01-28 14:28:56] info: [GET] /api/competition/eligibility/147672/Racing - 200
[2026-01-28 14:28:56] info: [POST] /api/competition/enter
[2026-01-28 14:28:56] info: [auth:39qua] Starting auth for POST /competition/enter
[2026-01-28 14:28:56] info: [auth:39qua] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:39qua] Token from header: true
[2026-01-28 14:28:56] info: [auth:39qua] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [auth:b13vv5] Starting auth for POST /enter
[2026-01-28 14:28:56] info: [auth:b13vv5] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:b13vv5] Token from header: true
[2026-01-28 14:28:56] info: [auth:b13vv5] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [competitionRoutes.POST /enter] User c6176406-a9f7-4be8-b6cf-ca2a45d080c4 entering horse 147672 in show 8292
[2026-01-28 14:28:56] info: [ownership] Found owned horse 147672 for user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [competitionRoutes.POST /enter] Successfully entered horse 147672 in show 8292
[2026-01-28 14:28:56] info: [POST] /api/competition/enter - 201
[2026-01-28 14:28:56] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 14:28:56] info: [auth:flnaqf] Starting auth for GET /leaderboards/competition
[2026-01-28 14:28:56] info: [auth:flnaqf] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:flnaqf] Token from header: true
[2026-01-28 14:28:56] info: [auth:flnaqf] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [auth:b87tmt] Starting auth for GET /competition
[2026-01-28 14:28:56] info: [auth:b87tmt] Token from cookie: false
[2026-01-28 14:28:56] info: [auth:b87tmt] Token from header: true
[2026-01-28 14:28:56] info: [auth:b87tmt] Authenticated user c6176406-a9f7-4be8-b6cf-ca2a45d080c4
[2026-01-28 14:28:56] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 14:28:56] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries
[2026-01-28 14:28:56] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
FAIL tests/integration/competitionWorkflow.integration.test.mjs
  üèÜ INTEGRATION: Complete Competition Workflow
    üîê STEP 1: User & Horse Setup
      ‚àö should create user and prepare competition-ready horse (363 ms)
    üèüÔ∏è STEP 2: Competition Setup & Show Creation
      ‚àö should create competition show with proper configuration (3 ms)
    üìù STEP 3: Competition Entry & Validation
      ‚àö should validate horse meets competition requirements using API (36 ms)
      ‚àö should successfully enter horse in competition using API endpoint (43 ms)
    üèÅ STEP 4: Competition Execution & Scoring
      ‚àö should execute competition and calculate results (5 ms)
    üí∞ STEP 5: Prize Distribution & XP Awards
      √ó should award prize money and XP for competition performance (15 ms)
    üìä STEP 6: Leaderboard & Rankings
      ‚àö should update leaderboards with competition results using API (40 ms)
      ‚àö should track historical performance (4 ms)
    üéØ STEP 7: Performance Impact on Horse Value
      ‚àö should increase horse value based on competition success (4 ms)
    üèÜ STEP 8: Multi-Discipline Competition Readiness
      ‚àö should validate horse can compete in multiple disciplines (3 ms)
    üéä STEP 9: End-to-End Competition Workflow Validation
      ‚àö should validate complete competition workflow integrity (7 ms)
      ‚àö should validate all business rules enforced throughout competition (2 ms)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üí∞ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    PrismaClientValidationError: 
    Invalid `prisma.xpEvent.findFirst()` invocation:

    {
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "c6176406-a9f7-4be8-b6cf-ca2a45d080c4"
          },
    ?     is?: UserWhereInput,
    ?     isNot?: UserWhereInput
        },
        reason: {
          contains: "Competition"
        }
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 332 |[39m
     [90m 333 |[39m       [90m// VERIFY: XP event logged[39m
    [31m[1m>[22m[39m[90m 334 |[39m       [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindFirst({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 335 |[39m         where[33m:[39m {
     [90m 336 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 337 |[39m           reason[33m:[39m { contains[33m:[39m [32m'Competition'[39m }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:334:23)

[2026-01-28 14:28:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:57] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:57] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:57] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:57] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:57] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:57] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate
[2026-01-28 14:28:58] info: [auth:cniwd] Starting auth for POST /compatibility/calculate
[2026-01-28 14:28:58] info: [auth:cniwd] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:cniwd] Token from header: true
[2026-01-28 14:28:58] info: [auth:cniwd] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:uockn7] Starting auth for POST /calculate
[2026-01-28 14:28:58] info: [auth:uockn7] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:uockn7] Token from header: true
[2026-01-28 14:28:58] info: [auth:uockn7] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73899 and horse 147673
[2026-01-28 14:28:58] info: [ownership] Found owned groom 73899 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Found owned horse 147673 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 1.381 (highly_recommended)
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate
[2026-01-28 14:28:58] info: [auth:cl5zh] Starting auth for POST /compatibility/calculate
[2026-01-28 14:28:58] info: [auth:cl5zh] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:cl5zh] Token from header: true
[2026-01-28 14:28:58] info: [auth:cl5zh] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:20qwof] Starting auth for POST /calculate
[2026-01-28 14:28:58] info: [auth:20qwof] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:20qwof] Token from header: true
[2026-01-28 14:28:58] info: [auth:20qwof] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 73900 and horse 147673
[2026-01-28 14:28:58] info: [ownership] Found owned groom 73900 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Found owned horse 147673 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 0.340 (not_recommended)
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate - 200
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate
[2026-01-28 14:28:58] info: [auth:kh47u] Starting auth for POST /compatibility/calculate
[2026-01-28 14:28:58] info: [auth:kh47u] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:kh47u] Token from header: true
[2026-01-28 14:28:58] info: [auth:kh47u] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:ei7p95] Starting auth for POST /calculate
[2026-01-28 14:28:58] info: [auth:ei7p95] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:ei7p95] Token from header: true
[2026-01-28 14:28:58] info: [auth:ei7p95] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] warn: [Validation] Input validation failed
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate - 400
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate
[2026-01-28 14:28:58] info: [auth:044215] Starting auth for POST /compatibility/calculate
[2026-01-28 14:28:58] info: [auth:044215] Token from cookie: false
[2026-01-28 14:28:58] warn: [auth:044215] Access token is required for POST /compatibility/calculate from ::ffff:127.0.0.1
[2026-01-28 14:28:58] info: [POST] /api/compatibility/calculate - 401
[2026-01-28 14:28:58] info: [GET] /api/compatibility/factors/73899/147673
[2026-01-28 14:28:58] info: [auth:bao74] Starting auth for GET /compatibility/factors/73899/147673
[2026-01-28 14:28:58] info: [auth:bao74] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:bao74] Token from header: true
[2026-01-28 14:28:58] info: [auth:bao74] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:22ify2] Starting auth for GET /factors/73899/147673
[2026-01-28 14:28:58] info: [auth:22ify2] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:22ify2] Token from header: true
[2026-01-28 14:28:58] info: [auth:22ify2] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Validated ownership: user 32998d37-ba0f-4f47-a078-27d1215e0b81 owns groom 73899
[2026-01-28 14:28:58] info: [ownership] Validated ownership: user 32998d37-ba0f-4f47-a078-27d1215e0b81 owns horse 147673
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getCompatibilityFactors] Analyzing factors for groom 73899 and horse 147673
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getCompatibilityFactors] Factors analyzed: excellent compatibility
[2026-01-28 14:28:58] info: [GET] /api/compatibility/factors/73899/147673 - 200
[2026-01-28 14:28:58] info: [GET] /api/compatibility/factors/invalid/147673
[2026-01-28 14:28:58] info: [auth:bueodl] Starting auth for GET /compatibility/factors/invalid/147673
[2026-01-28 14:28:58] info: [auth:bueodl] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:bueodl] Token from header: true
[2026-01-28 14:28:58] info: [auth:bueodl] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:pegln] Starting auth for GET /factors/invalid/147673
[2026-01-28 14:28:58] info: [auth:pegln] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:pegln] Token from header: true
[2026-01-28 14:28:58] info: [auth:pegln] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] warn: [Validation] Input validation failed
[2026-01-28 14:28:58] info: [GET] /api/compatibility/factors/invalid/147673 - 400
[2026-01-28 14:28:58] info: [POST] /api/compatibility/predict
[2026-01-28 14:28:58] info: [auth:0wd53] Starting auth for POST /compatibility/predict
[2026-01-28 14:28:58] info: [auth:0wd53] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:0wd53] Token from header: true
[2026-01-28 14:28:58] info: [auth:0wd53] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:c6ls6o] Starting auth for POST /predict
[2026-01-28 14:28:58] info: [auth:c6ls6o] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:c6ls6o] Token from header: true
[2026-01-28 14:28:58] info: [auth:c6ls6o] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73899 and horse 147673
[2026-01-28 14:28:58] info: [ownership] Found owned groom 73899 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Found owned horse 147673 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: excellent quality, 0.95 success probability
[2026-01-28 14:28:58] info: [POST] /api/compatibility/predict - 200
[2026-01-28 14:28:58] info: [POST] /api/compatibility/predict
[2026-01-28 14:28:58] info: [auth:ms1bf] Starting auth for POST /compatibility/predict
[2026-01-28 14:28:58] info: [auth:ms1bf] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:ms1bf] Token from header: true
[2026-01-28 14:28:58] info: [auth:ms1bf] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:k9t3d] Starting auth for POST /predict
[2026-01-28 14:28:58] info: [auth:k9t3d] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:k9t3d] Token from header: true
[2026-01-28 14:28:58] info: [auth:k9t3d] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 73900 and horse 147673
[2026-01-28 14:28:58] info: [ownership] Found owned groom 73900 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Found owned horse 147673 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: fair quality, 0.52 success probability
[2026-01-28 14:28:58] info: [POST] /api/compatibility/predict - 200
[2026-01-28 14:28:58] info: [POST] /api/compatibility/recommendations
[2026-01-28 14:28:58] info: [auth:8w8cki] Starting auth for POST /compatibility/recommendations
[2026-01-28 14:28:58] info: [auth:8w8cki] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:8w8cki] Token from header: true
[2026-01-28 14:28:58] info: [auth:8w8cki] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:isiizl] Starting auth for POST /recommendations
[2026-01-28 14:28:58] info: [auth:isiizl] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:isiizl] Token from header: true
[2026-01-28 14:28:58] info: [auth:isiizl] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getRecommendations] Getting recommendations for horse 147673
[2026-01-28 14:28:58] info: [ownership] Found owned horse 147673 for user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getRecommendations] Found 0 groom recommendations
[2026-01-28 14:28:58] info: [POST] /api/compatibility/recommendations - 200
[2026-01-28 14:28:58] info: [GET] /api/compatibility/trends/73899/147673
[2026-01-28 14:28:58] info: [auth:6l6sfa] Starting auth for GET /compatibility/trends/73899/147673
[2026-01-28 14:28:58] info: [auth:6l6sfa] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:6l6sfa] Token from header: true
[2026-01-28 14:28:58] info: [auth:6l6sfa] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:8l1twp] Starting auth for GET /trends/73899/147673
[2026-01-28 14:28:58] info: [auth:8l1twp] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:8l1twp] Token from header: true
[2026-01-28 14:28:58] info: [auth:8l1twp] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [ownership] Validated ownership: user 32998d37-ba0f-4f47-a078-27d1215e0b81 owns groom 73899
[2026-01-28 14:28:58] info: [ownership] Validated ownership: user 32998d37-ba0f-4f47-a078-27d1215e0b81 owns horse 147673
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getCompatibilityTrends] Analyzing trends for groom 73899 and horse 147673
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getCompatibilityTrends] Trends analyzed: insufficient_data trend with 0 data points
[2026-01-28 14:28:58] info: [GET] /api/compatibility/trends/73899/147673 - 200
[2026-01-28 14:28:58] info: [GET] /api/compatibility/config
[2026-01-28 14:28:58] info: [auth:w7341b] Starting auth for GET /compatibility/config
[2026-01-28 14:28:58] info: [auth:w7341b] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:w7341b] Token from header: true
[2026-01-28 14:28:58] info: [auth:w7341b] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [auth:quwhye] Starting auth for GET /config
[2026-01-28 14:28:58] info: [auth:quwhye] Token from cookie: false
[2026-01-28 14:28:58] info: [auth:quwhye] Token from header: true
[2026-01-28 14:28:58] info: [auth:quwhye] Authenticated user 32998d37-ba0f-4f47-a078-27d1215e0b81
[2026-01-28 14:28:58] info: [dynamicCompatibilityController.getCompatibilityConfig] Getting compatibility system configuration
[2026-01-28 14:28:58] info: [GET] /api/compatibility/config - 200
FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  Dynamic Compatibility Controller API
    POST /api/compatibility/calculate
      ‚àö should calculate high compatibility for calm groom with fearful horse (80 ms)
      ‚àö should calculate low compatibility for energetic groom with fearful horse (46 ms)
      ‚àö should return 400 for missing required fields (28 ms)
      ‚àö should return 401 for missing authentication (20 ms)
    GET /api/compatibility/factors/:groomId/:horseId
      ‚àö should analyze compatibility factors comprehensively (43 ms)
      ‚àö should return 400 for invalid groom ID (27 ms)
    POST /api/compatibility/predict
      ‚àö should predict positive outcome for good compatibility (43 ms)
      ‚àö should predict negative outcome for poor compatibility (45 ms)
    POST /api/compatibility/recommendations
      √ó should recommend optimal grooms for specific horse and context (37 ms)
    GET /api/compatibility/trends/:groomId/:horseId
      ‚àö should analyze compatibility trends with insufficient data (35 ms)
    GET /api/compatibility/config
      ‚àö should return compatibility system configuration (27 ms)

  ‚óè Dynamic Compatibility Controller API ‚Ä∫ POST /api/compatibility/recommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 336 |[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:333:54)

[2026-01-28 14:28:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:28:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:28:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:28:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:28:59] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:28:59] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:28:59] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:28:59] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:28:59] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:28:59] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:28:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:28:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:28:59] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomPersonalityTraitBonus.test.mjs
  Groom Personality Trait Bonus System - REAL SYSTEM TESTS
    Personality Compatibility Matrix
      √ó should correctly identify compatible personality-temperament pairs (69 ms)
      √ó should correctly identify incompatible personality-temperament pairs (10 ms)
      √ó should handle regular matches without high bond (8 ms)
    Personality Modifier Engine
      √ó should apply personality effects to milestone evaluation (8 ms)
      √ó should handle missing personality or temperament gracefully (10 ms)
    Enhanced Milestone Evaluation Integration
      √ó should integrate personality effects into milestone evaluation (9 ms)
      √ó should handle milestone evaluation without groom assignment (8 ms)
    Compatible Grooms Utility
      √ó should return all compatible grooms for a temperament (8 ms)
      √ó should return empty array for unknown temperament (7 ms)
    API Endpoints - REAL HTTP TESTS
      GET /api/grooms/:id/profile
        √ó should return groom profile with personality information (8 ms)
        √ó should return 404 for non-existent groom (7 ms)
        √ó should return 400 for invalid groom ID (8 ms)
      GET /api/horses/:id/personality-impact
        √ó should return personality compatibility for horse (6 ms)
        √ó should return 404 for non-existent horse (8 ms)
        √ó should return 400 for horse without temperament (8 ms)
      POST /api/milestones/evaluate-milestone (with personality impact)
        √ó should evaluate milestone with personality effects (8 ms)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539705",
        user: {
          connect: {
            id: "74aef6ed-9595-4bd6-881d-a7171457d4e8"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.705Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31684,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539727",
        user: {
          connect: {
            id: "bce4fa2e-d217-42a3-802c-f44911e254bd"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.727Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31685,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539737",
        user: {
          connect: {
            id: "0a3294f7-af50-4bc1-8059-d4a2873394cb"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.737Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31686,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539745",
        user: {
          connect: {
            id: "024c3dad-24bf-4362-9001-8ceb9c46e7b1"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.745Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31687,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539754",
        user: {
          connect: {
            id: "055e450c-07ff-4439-be86-18b652f9e23b"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.754Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31688,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539764",
        user: {
          connect: {
            id: "f5fe23fc-8d28-4166-a368-15bd29cbd936"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.764Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31689,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539773",
        user: {
          connect: {
            id: "dadcd2b7-0682-4325-a253-6834a05991e9"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.773Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31690,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539781",
        user: {
          connect: {
            id: "98293cf2-4eb0-4bf5-84cd-55a7ec280374"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.781Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31691,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539788",
        user: {
          connect: {
            id: "237da04c-e481-448c-bde5-0070b7114131"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.788Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31692,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539796",
        user: {
          connect: {
            id: "34ed5f8c-d6b2-461e-b3d6-c5bd3bbbdade"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.796Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31693,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539804",
        user: {
          connect: {
            id: "9f390dd5-11ab-4b2f-a01d-02f83aacb817"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.804Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31694,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539811",
        user: {
          connect: {
            id: "fccc4cb9-ed1d-4e9b-86be-330cc1dd8335"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.811Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31695,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539820",
        user: {
          connect: {
            id: "995852d1-be3e-4d28-922a-64915b805aaa"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.820Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31696,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539827",
        user: {
          connect: {
            id: "e045b15b-78de-4f59-9d2d-ceb3938bc5b0"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.827Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31697,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539835",
        user: {
          connect: {
            id: "bcbfa518-5435-430d-a3af-66fa184f10f7"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.835Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31698,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ POST /api/milestones/evaluate-milestone (with personality impact) ‚Ä∫ should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539843",
        user: {
          connect: {
            id: "6f0c2a32-80f3-47ba-96d1-2cd5d368dcca"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.843Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31699,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

[2026-01-28 14:29:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:00] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:00] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:00] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:00] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:00] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:00] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:00] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:01] info: [POST] /api/auth/register
[2026-01-28 14:29:01] warn: [MemoryMonitoring] Memory threshold exceeded: 536MB
[2026-01-28 14:29:01] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:01] info: [EmailVerification] Created verification token
[2026-01-28 14:29:01] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:01] info: [authController.register] Verification email sent
[2026-01-28 14:29:01] info: [POST] /api/auth/register - 201
FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  üêé INTEGRATION: Complete Horse Breeding Workflow
    üîê STEP 1: User Registration & Authentication
      ‚àö should register user and obtain authentication token (356 ms)
    üê¥ STEP 2: Horse Creation (Breeding Stock)
      ‚àö should create mare with quality traits (10 ms)
      ‚àö should create stallion with complementary traits (6 ms)
    ü§± STEP 3: Breeding Process & Foal Birth
      √ó should create foal with inherited and epigenetic traits (7 ms)
    üë• STEP 4: Groom Assignment & Care
      √ó should assign specialized foal care groom to newborn (1 ms)
      √ó should record groom interaction with foal (1 ms)
    üìà STEP 5: Foal Development Tracking
      √ó should track foal development progress (1 ms)
    üéØ STEP 6: End-to-End Workflow Validation
      √ó should validate complete breeding workflow integrity (1 ms)
      √ó should validate business rules are enforced throughout workflow (1 ms)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ü§± STEP 3: Breeding Process & Foal Birth ‚Ä∫ should create foal with inherited and epigenetic traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Foal",
        age: 0,
        breed: {
          connect: {
            id: 26468
          }
        },
        sex: "Colt",
        sireId: 147677,
        ~~~~~~
        damId: 147676,
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "ed98b537-079d-41a6-8144-fc621f036b24"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:29:01.406Z"),
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `sireId`. Did you mean `sire`? Available options are marked with ?.

    [0m [90m 225 |[39m
     [90m 226 |[39m       [90m// Create foal (simulating breeding result) with proper schema fields[39m
    [31m[1m>[22m[39m[90m 227 |[39m       foal [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 228 |[39m         data[33m:[39m {
     [90m 229 |[39m           name[33m:[39m [32m'Integration Test Foal'[39m[33m,[39m
     [90m 230 |[39m           age[33m:[39m [35m0[39m[33m,[39m [90m// Newborn[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:227:14)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üìà STEP 5: Foal Development Tracking ‚Ä∫ should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

[2026-01-28 14:29:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:02] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:02] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:02] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:02] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:02] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:02] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:02] info: [Sentry] Sentry error handler not attached (DSN not configured).
  console.error
    [ERROR] Failed in beforeAll setup: PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:
    
    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }
    
    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.
        at kn (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:29:1363)
        at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7102)
        at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
        at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
        at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\traitRoutes.test.mjs:52:19) {
      clientVersion: '6.8.2'
    }

    [0m [90m 69 |[39m       console[33m.[39mlog([32m'[DEBUG] Created test horse:'[39m[33m,[39m testHorse[33m.[39mid[33m,[39m [32m'owned by user:'[39m[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m 70 |[39m     } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 71 |[39m       console[33m.[39merror([32m'[ERROR] Failed in beforeAll setup:'[39m[33m,[39m error)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 72 |[39m       [36mthrow[39m error[33m;[39m
     [90m 73 |[39m     }
     [90m 74 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:71:15)

FAIL tests/integration/traitRoutes.test.mjs
  Trait Routes Integration Tests
    POST /api/traits/discover/:horseId
      √ó should trigger trait discovery successfully
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse (1 ms)
      √ó should handle optional parameters correctly
    GET /api/traits/horse/:horseId
      √ó should get horse traits successfully
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse
    GET /api/traits/definitions
      √ó should get all trait definitions
      √ó should filter traits by type
      √ó should return validation error for invalid type
    GET /api/traits/discovery-status/:horseId
      √ó should get discovery status successfully (1 ms)
      √ó should return validation error for invalid horse ID
      √ó should return 404 for non-existent horse
    POST /api/traits/batch-discover
      √ó should process batch discovery successfully
      √ó should return validation error for empty horse IDs array
      √ó should return validation error for too many horse IDs
      √ó should return validation error for invalid horse IDs
      √ó should handle mix of valid and invalid horse IDs

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

[2026-01-28 14:29:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:04] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:04] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:04] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:04] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:04] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:04] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:04] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/dashboardRoutes.test.mjs
  üè† INTEGRATION: Dashboard API - Real Database Integration
    GET /api/user/dashboard/:userId
      √ó should return complete dashboard data successfully (92 ms)
      √ó should return 400 for invalid user ID format (26 ms)
      √ó should return 401 for missing authentication (45 ms)
      √ó should return validation error for invalid user ID format (29 ms)
      √ó should handle user with no horses gracefully (20 ms)
      √ó should handle user with horses but no activity gracefully (20 ms)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31701,
        ~~~~~~~
        user: {
          connect: {
            id: "92bddc8d-dfc9-4cbb-a483-67bb5860f44d"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31702,
        ~~~~~~~
        user: {
          connect: {
            id: "ae759d03-194f-4cf3-9795-5e06da1b167c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31703,
        ~~~~~~~
        user: {
          connect: {
            id: "e939172a-4664-4587-960c-212350c6c206"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31704,
        ~~~~~~~
        user: {
          connect: {
            id: "f4006ee6-bd63-4ebc-960c-660c725947e8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31705,
        ~~~~~~~
        user: {
          connect: {
            id: "7af4c293-1163-4367-85c4-aa6dc179c978"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè üè† INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31706,
        ~~~~~~~
        user: {
          connect: {
            id: "97b3711c-e02a-43ff-a3ce-f1feb22470d6"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

[2026-01-28 14:29:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:05] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:05] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:05] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:05] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:05] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:05] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:05] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:05] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:05] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomSalarySystem.test.mjs
  Groom Salary System
    Salary Calculation
      √ó should calculate correct weekly salary for expert groom with specialty (207 ms)
      √ó should calculate correct salary for novice groom (19 ms)
      √ó should calculate user total salary cost (18 ms)
    API Endpoints
      √ó should get user salary cost (19 ms)
      √ó should get salary summary (19 ms)
      √ó should get groom salary (20 ms)
      √ó should get salary payment history (16 ms)
      √ó should get cron job status (13 ms)
      √ó should validate groom ownership (13 ms)
    Salary Processing
      √ó should process weekly salaries successfully (13 ms)
      √ó should handle insufficient funds (15 ms)
      √ó should trigger salary processing via API (13 ms)
    Authentication
      √ó should require authentication for GET /api/groom-salaries/cost (14 ms)
      √ó should require authentication for GET /api/groom-salaries/summary (14 ms)
      √ó should require authentication for GET /api/groom-salaries/history (13 ms)
      √ó should require authentication for GET /api/groom-salaries/groom/:groomId/salary (13 ms)
      √ó should require authentication for GET /api/groom-salaries/status (15 ms)
      √ó should require authentication for POST /api/groom-salaries/process (14 ms)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73902,
        foalId: 147678,
        user: {
        ~~~~
          connect: {
            id: "014b0349-e1cc-4b9e-bf39-27e65d4905df"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73903,
        foalId: 147679,
        user: {
        ~~~~
          connect: {
            id: "58830335-d1b7-452c-887a-d53686255a5d"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73904,
        foalId: 147680,
        user: {
        ~~~~
          connect: {
            id: "212dbf13-768f-4912-aa90-b4a6d8eac96e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73905,
        foalId: 147681,
        user: {
        ~~~~
          connect: {
            id: "e2a52909-c175-48ef-9170-34e6f8de20a5"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73906,
        foalId: 147682,
        user: {
        ~~~~
          connect: {
            id: "f72d9f21-d226-4ab6-b17c-1fb26966f62a"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73907,
        foalId: 147683,
        user: {
        ~~~~
          connect: {
            id: "ef6d3008-f123-4df2-8ed5-dc85499cb90a"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73908,
        foalId: 147684,
        user: {
        ~~~~
          connect: {
            id: "a7ead3e6-5f5f-4419-aa19-2cbbfb8fcaf1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73909,
        foalId: 147685,
        user: {
        ~~~~
          connect: {
            id: "acd01a3f-4bed-48d7-a1aa-33caeb669631"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73910,
        foalId: 147686,
        user: {
        ~~~~
          connect: {
            id: "2b3868ae-cca3-4813-a6d9-267ad18b5319"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73911,
        foalId: 147687,
        user: {
        ~~~~
          connect: {
            id: "30f8b2be-9a5b-4c54-9758-c68345871fac"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73912,
        foalId: 147688,
        user: {
        ~~~~
          connect: {
            id: "195a127d-d496-4241-b1d5-6029193eec7c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73913,
        foalId: 147689,
        user: {
        ~~~~
          connect: {
            id: "89295dd9-525c-4d05-9b98-3fe30f8fcbfe"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73914,
        foalId: 147690,
        user: {
        ~~~~
          connect: {
            id: "5bd5f09a-3246-4275-97f2-b18a63343f73"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73915,
        foalId: 147691,
        user: {
        ~~~~
          connect: {
            id: "9d0c4b9e-b77e-41a6-8469-9df5093f06dd"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73916,
        foalId: 147692,
        user: {
        ~~~~
          connect: {
            id: "26065a16-9822-4de8-b648-24482edae8b2"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73917,
        foalId: 147693,
        user: {
        ~~~~
          connect: {
            id: "5e4b2945-c714-4f8b-8d02-a26774f3ff2c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73918,
        foalId: 147694,
        user: {
        ~~~~
          connect: {
            id: "7458aa93-a61d-49c3-8d9f-7770448dba5c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73919,
        foalId: 147695,
        user: {
        ~~~~
          connect: {
            id: "409200d0-67b2-450c-b500-b8d894998906"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

[2026-01-28 14:29:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:06] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:06] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:07] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:07] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:07] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:07] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:07] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:07] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:07] info: [POST] /api/training/train
[2026-01-28 14:29:07] warn: [MemoryMonitoring] Memory threshold exceeded: 572MB
[2026-01-28 14:29:07] info: [auth:vlevhj] Starting auth for POST /training/train
[2026-01-28 14:29:07] info: [auth:vlevhj] Token from cookie: false
[2026-01-28 14:29:07] info: [auth:vlevhj] Token from header: true
[2026-01-28 14:29:07] info: [auth:vlevhj] Authenticated user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] warn: [ownership] horse 147697 not found or not owned by user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] info: [POST] /api/training/train - 404
[2026-01-28 14:29:07] info: [POST] /api/training/train
[2026-01-28 14:29:07] warn: [MemoryMonitoring] Memory threshold exceeded: 575MB
[2026-01-28 14:29:07] info: [auth:as15ds] Starting auth for POST /training/train
[2026-01-28 14:29:07] info: [auth:as15ds] Token from cookie: false
[2026-01-28 14:29:07] info: [auth:as15ds] Token from header: true
[2026-01-28 14:29:07] info: [auth:as15ds] Authenticated user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] warn: [ownership] horse 147696 not found or not owned by user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] info: [POST] /api/training/train - 404
[2026-01-28 14:29:07] info: [POST] /api/training/train
[2026-01-28 14:29:07] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB
[2026-01-28 14:29:07] info: [auth:c74anp] Starting auth for POST /training/train
[2026-01-28 14:29:07] info: [auth:c74anp] Token from cookie: false
[2026-01-28 14:29:07] info: [auth:c74anp] Token from header: true
[2026-01-28 14:29:07] info: [auth:c74anp] Authenticated user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] warn: [ownership] horse 147698 not found or not owned by user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] info: [POST] /api/training/train - 404
[2026-01-28 14:29:07] info: [POST] /api/training/train
[2026-01-28 14:29:07] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB
[2026-01-28 14:29:07] info: [auth:2umjnk] Starting auth for POST /training/train
[2026-01-28 14:29:07] info: [auth:2umjnk] Token from cookie: false
[2026-01-28 14:29:07] info: [auth:2umjnk] Token from header: true
[2026-01-28 14:29:07] info: [auth:2umjnk] Authenticated user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] warn: [ownership] horse 99999 not found or not owned by user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] info: [POST] /api/training/train - 404
[2026-01-28 14:29:07] info: [POST] /api/training/train
[2026-01-28 14:29:07] warn: [MemoryMonitoring] Memory threshold exceeded: 574MB
[2026-01-28 14:29:07] info: [auth:oodbd] Starting auth for POST /training/train
[2026-01-28 14:29:07] info: [auth:oodbd] Token from cookie: false
[2026-01-28 14:29:07] info: [auth:oodbd] Token from header: true
[2026-01-28 14:29:07] info: [auth:oodbd] Authenticated user 14defcb3-c60a-472f-a150-e0f170f204ee
[2026-01-28 14:29:07] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]
[2026-01-28 14:29:07] info: [POST] /api/training/train - 400
FAIL tests/training.test.mjs
  üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation
    BUSINESS RULE: Age Requirements (3+ years old)
      √ó BLOCKS training for horses under 3 years old (54 ms)
      √ó ALLOWS training for horses 3+ years old (27 ms)
    BUSINESS RULE: Discipline Score Progression (+5 base)
      √ó INCREASES discipline scores by +5 for first-time training (8 ms)
      √ó ACCUMULATES discipline scores across multiple training sessions (different horses) (4 ms)
    BUSINESS RULE: Global Cooldown (One Discipline Per Week)
      √ó BLOCKS training when horse has trained ANY discipline within 7 days (27 ms)
      √ó ALLOWS training after 7-day cooldown expires (4 ms)
    BUSINESS RULE: XP Award for Training
      √ó AWARDS XP to horse owner (Player) when training succeeds (6 ms)
    BUSINESS RULE: Training Log Creation
      √ó CREATES training log entry for successful training (5 ms)
    BUSINESS RULE: Error Handling and Data Integrity
      ‚àö MAINTAINS database integrity when training non-existent horse (26 ms)
      ‚àö VALIDATES input parameters and rejects invalid requests (24 ms)
    BUSINESS RULE: Next Training Date Calculation
      √ó PROVIDES accurate next training date (7 days from training) (4 ms)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ BLOCKS training for horses under 3 years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'age'[39m)[33m;[39m
     [90m 258 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:255:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ ALLOWS training for horses 3+ years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m
    [31m[1m>[22m[39m[90m 278 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 280 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'trained in Dressage'[39m)[33m;[39m
     [90m 281 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:278:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Score Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.255Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 303 |[39m       fourYearsAgoForScore[33m.[39msetFullYear(fourYearsAgoForScore[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 304 |[39m
    [31m[1m>[22m[39m[90m 305 |[39m       [36mconst[39m scoreTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 306 |[39m         data[33m:[39m {
     [90m 307 |[39m           name[33m:[39m [32m'Score Test Horse'[39m[33m,[39m
     [90m 308 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:305:30)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Accumulation Test Horse 1",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:29:07.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 364 |[39m       fiveYearsAgoForAccumulation[33m.[39msetFullYear(fiveYearsAgoForAccumulation[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 365 |[39m
    [31m[1m>[22m[39m[90m 366 |[39m       [36mconst[39m horse1 [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 367 |[39m         data[33m:[39m {
     [90m 368 |[39m           name[33m:[39m [32m'Accumulation Test Horse 1'[39m[33m,[39m
     [90m 369 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:366:22)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ BLOCKS training when horse has trained ANY discipline within 7 days

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 442 |[39m       })[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 445 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 446 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Training cooldown active'[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:444:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Old Trained Horse",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-28T19:29:07.295Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 15
        },
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 467 |[39m       sixYearsAgoForOldTrained[33m.[39msetFullYear(sixYearsAgoForOldTrained[33m.[39mgetFullYear() [33m-[39m [35m6[39m)[33m;[39m
     [90m 468 |[39m
    [31m[1m>[22m[39m[90m 469 |[39m       [36mconst[39m oldTrainedHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 470 |[39m         data[33m:[39m {
     [90m 471 |[39m           name[33m:[39m [32m'Old Trained Horse'[39m[33m,[39m
     [90m 472 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:469:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: XP Award for Training ‚Ä∫ AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "XP Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.302Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 535 |[39m       fourYearsAgoForXp[33m.[39msetFullYear(fourYearsAgoForXp[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 536 |[39m
    [31m[1m>[22m[39m[90m 537 |[39m       [36mconst[39m xpTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 538 |[39m         data[33m:[39m {
     [90m 539 |[39m           name[33m:[39m [32m'XP Test Horse'[39m[33m,[39m
     [90m 540 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:537:27)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Training Log Creation ‚Ä∫ CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Log Test Horse",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:29:07.307Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 597 |[39m       fiveYearsAgoForLog[33m.[39msetFullYear(fiveYearsAgoForLog[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 598 |[39m
    [31m[1m>[22m[39m[90m 599 |[39m       [36mconst[39m logTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 600 |[39m         data[33m:[39m {
     [90m 601 |[39m           name[33m:[39m [32m'Log Test Horse'[39m[33m,[39m
     [90m 602 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:599:28)

  ‚óè üèãÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Next Training Date Calculation ‚Ä∫ PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Date Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.364Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 689 |[39m       fourYearsAgoForDate[33m.[39msetFullYear(fourYearsAgoForDate[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 690 |[39m
    [31m[1m>[22m[39m[90m 691 |[39m       [36mconst[39m dateTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 692 |[39m         data[33m:[39m {
     [90m 693 |[39m           name[33m:[39m [32m'Date Test Horse'[39m[33m,[39m
     [90m 694 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:691:29)

[2026-01-28 14:29:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBonusTraits.test.mjs
  Groom Bonus Traits System
    Groom Bonus Trait Management
      √ó should assign bonus traits to a groom (83 ms)
      √ó should validate bonus trait constraints (14 ms)
      √ó should get groom bonus traits (13 ms)
    Trait Assignment Logic Integration
      √ó should apply bonus probability when conditions are met (12 ms)
      √ó should not apply bonus when bond is too low (17 ms)
      √ó should not apply bonus when coverage is insufficient (13 ms)
    API Endpoints
      √ó should get groom bonus traits via API (12 ms)
      √ó should update groom bonus traits via API (10 ms)
      √ó should reject invalid bonus trait updates (12 ms)
      √ó should require authentication for bonus trait endpoints (13 ms)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548582",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.582Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "85f425f1-875f-49a1-a2d6-d5c9fbbdc51a"
          }
        },
        breedId: 31707,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548614",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.614Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9f0c9c24-2e11-4531-8009-a7b1dd62e00f"
          }
        },
        breedId: 31708,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548627",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.627Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "708eccd5-175e-4fa7-a8af-2620514c03e3"
          }
        },
        breedId: 31709,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548641",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.641Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "551a7a43-9b1a-4612-8d18-b333ee2f30c1"
          }
        },
        breedId: 31710,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548656",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.657Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cf04a13b-861d-47bb-8ffa-2fed39628c8f"
          }
        },
        breedId: 31711,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548671",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.671Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "bf390843-62ba-458b-94f1-c89dc9af2bc4"
          }
        },
        breedId: 31712,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548685",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.685Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "373e4ad7-d730-4ef8-aa1a-4b8a8ed2b81f"
          }
        },
        breedId: 31713,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548696",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.696Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0a8f2593-e076-4520-b272-7f3011780507"
          }
        },
        breedId: 31714,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548707",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.707Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4bc0decf-abbf-43e7-9bdc-33779cf6f9fc"
          }
        },
        breedId: 31715,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548720",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.720Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1c1f8e3f-6d2f-43e0-ae18-e1c89d428e33"
          }
        },
        breedId: 31716,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

[2026-01-28 14:29:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:09] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:09] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:09] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:09] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:09] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:09] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/epigeneticTraitSystem.test.mjs
  Epigenetic Trait System Integration Tests
    API Endpoints
      √ó GET /api/epigenetic-traits/definitions should return flag and personality definitions (1 ms)
      √ó POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone
      √ó POST /api/epigenetic-traits/log-trait should log trait assignment
      √ó GET /api/epigenetic-traits/history/:horseId should return trait history
      √ó GET /api/epigenetic-traits/summary/:horseId should return development summary
      √ó GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights
      √ó Should handle authentication errors properly (1 ms)
      √ó Should handle horse ownership validation
      √ó Should validate input parameters properly
    Epigenetic Flag System
      √ó Should apply epigenetic flags based on care patterns
    Enhanced Milestone Evaluation
      √ó Should factor in groom personality bonuses
  Trait History Service
    ‚àö Should log and retrieve trait assignments correctly (60 ms)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Epigenetic Flag System ‚Ä∫ Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Enhanced Milestone Evaluation ‚Ä∫ Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

[2026-01-28 14:29:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:11] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:11] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:11] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:11] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:11] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:11] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:11] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:11] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:11] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 584MB
[2026-01-28 14:29:11] info: [auth:xli05] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:xli05] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:xli05] Token from header: true
[2026-01-28 14:29:11] info: [auth:xli05] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 588MB
[2026-01-28 14:29:11] info: [auth:9zc3nn] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:9zc3nn] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:9zc3nn] Token from header: true
[2026-01-28 14:29:11] info: [auth:9zc3nn] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 589MB
[2026-01-28 14:29:11] info: [auth:neszsg] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:neszsg] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:neszsg] Token from header: true
[2026-01-28 14:29:11] info: [auth:neszsg] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/99999/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 590MB
[2026-01-28 14:29:11] info: [auth:uu584q] Starting auth for POST /foals/99999/enrichment
[2026-01-28 14:29:11] info: [auth:uu584q] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:uu584q] Token from header: true
[2026-01-28 14:29:11] info: [auth:uu584q] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/99999/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 590MB
[2026-01-28 14:29:11] info: [auth:kxx4m] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:kxx4m] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:kxx4m] Token from header: true
[2026-01-28 14:29:11] info: [auth:kxx4m] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 591MB
[2026-01-28 14:29:11] info: [auth:pf0kyl] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:pf0kyl] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:pf0kyl] Token from header: true
[2026-01-28 14:29:11] info: [auth:pf0kyl] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 592MB
[2026-01-28 14:29:11] info: [auth:6ogqr] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:6ogqr] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:6ogqr] Token from header: true
[2026-01-28 14:29:11] info: [auth:6ogqr] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 593MB
[2026-01-28 14:29:11] info: [auth:d2xqt] Starting auth for POST /foals/1/enrichment
[2026-01-28 14:29:11] info: [auth:d2xqt] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:d2xqt] Token from header: true
[2026-01-28 14:29:11] info: [auth:d2xqt] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/1/enrichment - 401
[2026-01-28 14:29:11] info: [POST] /api/foals/999/enrichment
[2026-01-28 14:29:11] warn: [MemoryMonitoring] Memory threshold exceeded: 594MB
[2026-01-28 14:29:11] info: [auth:u6zkm] Starting auth for POST /foals/999/enrichment
[2026-01-28 14:29:11] info: [auth:u6zkm] Token from cookie: false
[2026-01-28 14:29:11] info: [auth:u6zkm] Token from header: true
[2026-01-28 14:29:11] info: [auth:u6zkm] Authenticated user undefined
[2026-01-28 14:29:11] warn: [ownership] Missing user for foal ownership check
[2026-01-28 14:29:11] info: [POST] /api/foals/999/enrichment - 401
FAIL tests/foalEnrichmentIntegration.test.mjs
  üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation
    POST /api/foals/:foalId/enrichment
      √ó should complete enrichment activity successfully (57 ms)
      √ó should update horse bond_score and stress_level in database (27 ms)
      √ó should validate request parameters (29 ms)
      √ó should return 404 for non-existent foal (26 ms)
      √ó should return 400 for inappropriate activity for day (26 ms)
      √ó should accept different activity name formats (26 ms)
      √ó should handle all day 3 activities (26 ms)
      √ó should create training history records for each activity (26 ms)
      √ó should handle edge cases with bond and stress levels (29 ms)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üê¥ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

[2026-01-28 14:29:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:12] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:12] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:12] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:12] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:12] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:12] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:12] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:12] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:12] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/foalTaskLoggingIntegration.test.mjs
  Foal Task Logging Integration
    Task Log JSON Updates
      √ó should initialize task log with first enrichment task (97 ms)
      √ó should increment existing task count in task log (27 ms)
      √ó should add new task to existing task log (23 ms)
      √ó should handle multiple task types across different foals (20 ms)
    Streak Tracking Integration
      √ó should update lastGroomed timestamp on each interaction (23 ms)
      √ó should enforce daily interaction limits correctly (25 ms)
    Age-Based Task Eligibility Enforcement
      √ó should reject enrichment tasks for horses too old (19 ms)
      √ó should reject grooming tasks for horses too young (18 ms)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147701,
        groomId: 73932,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147702,
        groomId: 73933,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147703,
        groomId: 73934,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147704,
        groomId: 73935,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147705,
        groomId: 73936,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147706,
        groomId: 73937,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147707,
        groomId: 73938,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147708,
        groomId: 73939,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

[2026-01-28 14:29:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:14] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:14] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:14] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:14] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:14] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:14] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:14] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:14] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/legacyScoreTraitIntegration.test.mjs
  Legacy Score Trait Integration System
    Trait Score Calculation
      √ó should calculate trait score based on count, diversity, and rarity (81 ms)
      √ó should apply negative trait penalties (17 ms)
      √ó should only count traits gained before age 4 (13 ms)
      √ó should calculate groom care consistency from milestone logs (13 ms)
    Legacy Score Integration
      √ó should integrate trait score into overall legacy score (13 ms)
      √ó should calculate legacy score without traits (13 ms)
    API Endpoints
      √ó should get horse legacy score via API (12 ms)
      √ó should require authentication for legacy score endpoint (12 ms)
      √ó should return 404 for non-existent horse (12 ms)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554174",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.174Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "5f95701f-e459-470e-a164-676212aa2115"
          }
        },
        breedId: 31717,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554207",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.207Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b07ccaf6-555f-4efa-af40-74f36efd5466"
          }
        },
        breedId: 31718,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554223",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.223Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "18a6b211-3946-488a-8406-eb3c0aab939c"
          }
        },
        breedId: 31719,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554236",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.236Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c8f79311-4d16-43cd-9076-16bc2969887f"
          }
        },
        breedId: 31720,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554250",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.250Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "966e9588-bfd8-4083-b882-ebe7044b7a6b"
          }
        },
        breedId: 31721,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554263",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.263Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d65ff986-a667-4eaa-9cfc-82154248113f"
          }
        },
        breedId: 31722,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554277",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.277Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d33bc46d-14b4-4035-8cf9-1bb8affc2a35"
          }
        },
        breedId: 31723,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554290",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.290Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "e80c63bd-1186-429a-adab-4fb4c66797ba"
          }
        },
        breedId: 31724,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554301",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.301Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "90e50df6-100c-4645-921f-f8fe77615b3b"
          }
        },
        breedId: 31725,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

[2026-01-28 14:29:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:15] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:15] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:15] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:15] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:15] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:15] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:15] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/breedingPrediction.test.mjs
  Breeding Prediction System
    Inheritance Probability Logic
      √ó should calculate trait inheritance probabilities from parent history (81 ms)
      √ó should calculate flag inheritance scores (14 ms)
      √ó should handle horses with no trait history (13 ms)
      √ó should calculate temperament influence modifiers (15 ms)
    Child Prediction Algorithms
      √ó should predict trait categories with probability ranges (12 ms)
      √ó should handle epigenetic flag inheritance with stacking limits (14 ms)
    API Extension
      √ó should extend breeding-data endpoint with prediction data (11 ms)
      √ó should require authentication for breeding-data endpoint (11 ms)
      √ó should handle horses with minimal breeding data (11 ms)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555494",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.494Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4b11d3ee-e55e-4098-a945-9ed2e22478de"
          }
        },
        breedId: 31726,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555525",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.525Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ca4c241c-bc6c-4037-8b43-145cb49949a0"
          }
        },
        breedId: 31727,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555539",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.539Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "438d02bb-bb36-421f-b50c-64d8442bad11"
          }
        },
        breedId: 31728,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555553",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.553Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "42734f00-0229-4e42-8798-5b5073405119"
          }
        },
        breedId: 31729,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555568",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.568Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2a782b6d-5bd2-475a-b088-564fb8b46dce"
          }
        },
        breedId: 31730,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555581",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.581Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6b50db4a-bb88-4c64-b3e3-89762d4e51f9"
          }
        },
        breedId: 31731,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555595",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.595Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ea48aaea-6b55-4531-87e2-01bd42a4200c"
          }
        },
        breedId: 31732,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555607",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.607Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "71292a04-4c09-438e-bd04-2270279b8733"
          }
        },
        breedId: 31733,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555618",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.618Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "25c8b31f-7171-4a7a-b3b1-1aca569042a8"
          }
        },
        breedId: 31734,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

[2026-01-28 14:29:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:16] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:16] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:16] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:16] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:16] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:16] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:16] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:16] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:16] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/traitTimeline.test.mjs
  Trait Timeline System
    Trait Timeline Data Aggregation
      √ó should aggregate trait timeline with milestone and groom data (80 ms)
      √ó should include detailed trait context and groom involvement (14 ms)
      √ó should filter traits by age cutoff (before age 4) (13 ms)
      √ó should categorize traits by type and rarity (13 ms)
      √ó should handle horses with no trait history (13 ms)
    Timeline Formatting and Organization
      √ó should organize events by age ranges (16 ms)
      √ó should include bond and stress trend analysis (11 ms)
    API Endpoints
      √ó should get trait timeline card via API (10 ms)
      √ó should require authentication for trait card endpoint (13 ms)
      √ó should return 404 for non-existent horse (10 ms)
      √ó should handle horses with empty trait timeline (12 ms)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556877",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.877Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "f0b06114-3fc2-42d7-ad29-f7c987e1b578"
          }
        },
        breedId: 31735,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556909",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.909Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "bed3b187-4956-404f-80b3-bdd7241a2580"
          }
        },
        breedId: 31736,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556922",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.922Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ba23ae43-afc8-4215-b1dd-c9593ad50858"
          }
        },
        breedId: 31737,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556935",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.935Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b8a90d94-d7c0-4c87-a0f8-fe0934c6c934"
          }
        },
        breedId: 31738,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556949",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.949Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4ce17756-338c-4925-b3ee-0af42f902fc4"
          }
        },
        breedId: 31739,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556965",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.965Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0d7cb8c7-c8bf-4f53-ad5a-a0542c36fbf6"
          }
        },
        breedId: 31740,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556979",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.979Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d340abc7-4eb8-4a7e-99aa-d39cb1047a8b"
          }
        },
        breedId: 31741,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556989",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.989Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "46689760-d169-4d77-962f-8434974844ba"
          }
        },
        breedId: 31742,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557001",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.001Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "46a22be2-394e-404f-b634-555e1382c8ad"
          }
        },
        breedId: 31743,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557014",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.014Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "94205eee-75dc-4d47-ae2c-920acb202b94"
          }
        },
        breedId: 31744,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557024",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.024Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "22864105-b9bb-4806-9c72-dbb14d486433"
          }
        },
        breedId: 31745,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

[2026-01-28 14:29:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:17] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:18] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:18] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:18] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:18] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:18] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:18] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:18] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:18] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:18] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/groomBondingIntegration.test.mjs
  Groom Bonding System Integration
    New Grooming Tasks for Horses 3+ Years Old
      √ó should successfully process brushing interaction (92 ms)
      √ó should successfully process hand-walking interaction (23 ms)
      √ó should successfully process stall_care interaction (19 ms)
    Age Restrictions
      √ó should reject new grooming tasks for horses under 3 years old (18 ms)
    Bond Score Updates
      √ó should update horse bond score after grooming (16 ms)
      √ó should grant burnout immunity after 7 consecutive days (16 ms)
    Daily Interaction Limits
      √ó should enforce one grooming session per horse per day (13 ms)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147709,
        groomId: 73969,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558193_biwt1"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147710,
        groomId: 73970,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558286_qm649"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147711,
        groomId: 73971,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558309_luyae"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Age Restrictions ‚Ä∫ should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147712,
        groomId: 73972,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558329_4ut9j"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147713,
        groomId: 73973,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558348_ivjay"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147714,
        groomId: 73974,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558365_mqzdx"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Daily Interaction Limits ‚Ä∫ should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147715,
        groomId: 73975,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558381_ooeli"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

[2026-01-28 14:29:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:19] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:19] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:19] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:19] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:19] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:19] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:19] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/horseOverview.test.mjs
  üèá INTEGRATION: Horse Overview API - Real Database Integration
    GET /api/horses/:id/overview
      √ó should return complete horse overview data successfully (80 ms)
      √ó should return 404 for non-existent horse (19 ms)
      √ó should return validation error for invalid horse ID (16 ms)
      √ó should handle horse with no training history gracefully (15 ms)
      √ó should calculate next training date correctly when horse has recent training (15 ms)
      √ó should handle missing optional fields gracefully (17 ms)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "9f71a8fa-4b72-489c-be89-13d733d9ef46"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21922ce8-eb29-4a7c-ad00-bc80151b046c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "ba85b029-e330-4422-9c0e-69f82eda1f7c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "ccd5ce9c-3c49-4bb8-b9a1-6fffd5fb8e0e"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "632a4f6b-f881-464d-8a6d-ee51a97bb1fb"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè üèá INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "9660d9d7-be55-4d08-9951-011797ca95a8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

[2026-01-28 14:29:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:20] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:20] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:20] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:20] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:20] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:20] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:20] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:20] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:20] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 14:29:21] warn: [MemoryMonitoring] Memory threshold exceeded: 811MB
[2026-01-28 14:29:21] info: [auth:01omcj] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 14:29:21] info: [auth:01omcj] Token from cookie: false
[2026-01-28 14:29:21] info: [auth:01omcj] Token from header: true
[2026-01-28 14:29:21] info: [auth:01omcj] Authenticated user test-user-uuid-123
[2026-01-28 14:29:21] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123
[2026-01-28 14:29:21] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 2 horses
[2026-01-28 14:29:21] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-user-uuid-123
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456
[2026-01-28 14:29:21] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB
[2026-01-28 14:29:21] info: [auth:dxon5] Starting auth for GET /horses/trainable/nonexistent-user-uuid-456
[2026-01-28 14:29:21] info: [auth:dxon5] Token from cookie: false
[2026-01-28 14:29:21] info: [auth:dxon5] Token from header: true
[2026-01-28 14:29:21] info: [auth:dxon5] Authenticated user test-user-uuid-123
[2026-01-28 14:29:21] warn: [horseRoutes] User test-user-uuid-123 attempted to access trainable horses for user nonexistent-user-uuid-456
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456 - 403
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/
[2026-01-28 14:29:21] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB
[2026-01-28 14:29:21] info: [auth:rsk10d] Starting auth for GET /horses/trainable/
[2026-01-28 14:29:21] info: [auth:rsk10d] Token from cookie: false
[2026-01-28 14:29:21] info: [auth:rsk10d] Token from header: true
[2026-01-28 14:29:21] info: [auth:rsk10d] Authenticated user test-user-uuid-123
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/ - 400
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:29:21] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB
[2026-01-28 14:29:21] info: [auth:e9dd9k] Starting auth for GET /horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:29:21] info: [auth:e9dd9k] Token from cookie: false
[2026-01-28 14:29:21] info: [auth:e9dd9k] Token from header: true
[2026-01-28 14:29:21] info: [auth:e9dd9k] Authenticated user test-user-uuid-123
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/test-user-uuid-123
[2026-01-28 14:29:21] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB
[2026-01-28 14:29:21] info: [auth:s87dq] Starting auth for GET /horses/trainable/test-user-uuid-123
[2026-01-28 14:29:21] info: [auth:s87dq] Token from cookie: false
[2026-01-28 14:29:21] info: [auth:s87dq] Token from header: true
[2026-01-28 14:29:21] info: [auth:s87dq] Authenticated user test-user-uuid-123
[2026-01-28 14:29:21] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200
FAIL tests/integration/horseRoutes.test.mjs
  Horse Routes Integration Tests
    GET /api/horses/trainable/:userId
      √ó should return trainable horses for valid user ID (54 ms)
      ‚àö should return 403 when accessing another user's trainable horses (26 ms)
      ‚àö should return validation error for invalid user ID (26 ms)
      ‚àö should return validation error for user ID that is too long (28 ms)
      ‚àö should handle server errors gracefully (26 ms)

  ‚óè Horse Routes Integration Tests ‚Ä∫ GET /api/horses/trainable/:userId ‚Ä∫ should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

[2026-01-28 14:29:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:21] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:21] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:21] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:22] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:22] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:22] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:22] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:22] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:22] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:22] info: [Sentry] Sentry error handler not attached (DSN not configured).
FAIL tests/integration/groomHandlerSystem.test.mjs
  Groom Handler System Integration Tests
    1. Handler Assignment
      √ó should get the assigned handler for a horse
      √ó should return no handler for a horse without assignment
      √ó should validate horse ownership
    2. Handler Eligibility
      √ó should check handler eligibility for a conformation class
      √ó should validate conformation class
    3. Handler Configuration
      √ó should get handler configuration
    4. Handler Recommendations
      √ó should get handler recommendations for a horse (1 ms)
    5. Authentication and Authorization
      √ó should require authentication for all endpoints

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 3. Handler Configuration ‚Ä∫ should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 4. Handler Recommendations ‚Ä∫ should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 5. Authentication and Authorization ‚Ä∫ should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

[2026-01-28 14:29:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73977 to 1
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73978 to 1
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73978 to 2
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73978 to 3
[2026-01-28 14:29:22] error: Error incrementing career weeks for groom 99999: 
Invalid `prisma.groom.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:29:22] info: Processed retirement for groom 73986 with reason: mandatory_career_limit
[2026-01-28 14:29:22] info: Processed retirement for groom 73987 with reason: voluntary
[2026-01-28 14:29:22] error: Error processing retirement for groom 73989: Groom 73989 is not eligible for retirement
[2026-01-28 14:29:22] info: Starting weekly career progression processing
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73990 to 1
[2026-01-28 14:29:22] info: Incremented career weeks for groom 73991 to 11
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73992 to 51
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73993 to 104
[2026-01-28 14:29:23] info: Processed retirement for groom 73993 with reason: mandatory_career_limit
[2026-01-28 14:29:23] info: Groom Test Groom Near Retirement 1769628562978 (ID: 73993) retired: mandatory_career_limit
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73994 to 81
[2026-01-28 14:29:23] info: Processed retirement for groom 73994 with reason: early_level_cap
[2026-01-28 14:29:23] info: Groom Test Groom Level 10 1769628562978 (ID: 73994) retired: early_level_cap
[2026-01-28 14:29:23] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors
[2026-01-28 14:29:23] info: Starting weekly career progression processing
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73995 to 1
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73996 to 11
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73997 to 51
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73998 to 104
[2026-01-28 14:29:23] info: Processed retirement for groom 73998 with reason: mandatory_career_limit
[2026-01-28 14:29:23] info: Groom Test Groom Near Retirement 1769628563068 (ID: 73998) retired: mandatory_career_limit
[2026-01-28 14:29:23] info: Incremented career weeks for groom 73999 to 81
[2026-01-28 14:29:23] info: Processed retirement for groom 73999 with reason: early_level_cap
[2026-01-28 14:29:23] info: Groom Test Groom Level 10 1769628563068 (ID: 73999) retired: early_level_cap
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74000 to 1
[2026-01-28 14:29:23] info: Weekly career progression completed: 6 processed, 2 retired, 0 errors
[2026-01-28 14:29:23] info: Starting weekly career progression processing
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74001 to 1
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74003 to 51
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74004 to 81
[2026-01-28 14:29:23] info: Processed retirement for groom 74004 with reason: early_level_cap
[2026-01-28 14:29:23] info: Groom Test Groom Level 10 1769628563163 (ID: 74004) retired: early_level_cap
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74005 to 104
[2026-01-28 14:29:23] info: Processed retirement for groom 74005 with reason: mandatory_career_limit
[2026-01-28 14:29:23] info: Groom Test Groom Near Retirement 1769628563163 (ID: 74005) retired: mandatory_career_limit
[2026-01-28 14:29:23] info: Weekly career progression completed: 4 processed, 2 retired, 0 errors
[2026-01-28 14:29:23] info: Starting weekly career progression processing
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74006 to 1
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74007 to 51
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74008 to 11
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74009 to 104
[2026-01-28 14:29:23] info: Processed retirement for groom 74009 with reason: mandatory_career_limit
[2026-01-28 14:29:23] info: Groom Test Groom Near Retirement 1769628563243 (ID: 74009) retired: mandatory_career_limit
[2026-01-28 14:29:23] info: Incremented career weeks for groom 74010 to 81
[2026-01-28 14:29:23] info: Processed retirement for groom 74010 with reason: early_level_cap
[2026-01-28 14:29:23] info: Groom Test Groom Level 10 1769628563243 (ID: 74010) retired: early_level_cap
[2026-01-28 14:29:23] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors
FAIL tests/services/groomRetirementService.test.mjs
  Groom Retirement Service
    Career Week Tracking
      ‚àö should increment career weeks correctly (30 ms)
      ‚àö should handle multiple career week increments (20 ms)
      ‚àö should throw error for non-existent groom (16 ms)
    Retirement Eligibility
      ‚àö should identify groom not eligible for retirement (11 ms)
      ‚àö should identify mandatory retirement at 104 weeks (12 ms)
      ‚àö should identify early retirement at level 10 (11 ms)
      ‚àö should identify early retirement with 12+ assignments (129 ms)
      ‚àö should identify retirement notice period (12 ms)
      ‚àö should handle already retired groom (11 ms)
    Retirement Processing
      ‚àö should process mandatory retirement correctly (18 ms)
      ‚àö should process voluntary retirement (16 ms)
      √ó should remove active assignments on retirement (12 ms)
      ‚àö should reject retirement for ineligible groom (10 ms)
    Weekly Career Progression
      ‚àö should process weekly career progression for all active grooms (89 ms)
      ‚àö should handle errors gracefully during weekly progression (96 ms)
      ‚àö should skip already retired grooms (80 ms)
      ‚àö should provide detailed statistics (71 ms)

  ‚óè Groom Retirement Service ‚Ä∫ Retirement Processing ‚Ä∫ should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73988,
        foalId: 147717,
        user: {
        ~~~~
          connect: {
            id: "1406a4ad-4e8e-451f-a029-7f1f3d6a24e5"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

[2026-01-28 14:29:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:23] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:23] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:23] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:23] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user user-groom-int-1769628563580_lneal
[2026-01-28 14:29:23] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 74011) for 750 coins
[2026-01-28 14:29:23] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user user-groom-int-1769628563698_9e1fg
[2026-01-28 14:29:23] info: [groomController.hireGroom] Hiring new groom Expert Groom for user user-groom-int-1769628563728_pc4ar
[2026-01-28 14:29:23] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 74012) for 750 coins
[2026-01-28 14:29:23] info: [groomController.hireGroom] Hiring new groom Novice Groom for user user-groom-int-1769628563728_pc4ar
[2026-01-28 14:29:23] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 74013) for 350 coins
[2026-01-28 14:29:23] info: [groomController.assignGroom] Assigning groom 74014 to foal 147727
[2026-01-28 14:29:23] info: [groomSystem.assignGroomToFoal] Assigning groom 74014 to foal 147727
[2026-01-28 14:29:23] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal 1769628563774_zkr0i
[2026-01-28 14:29:23] info: [groomController.assignGroom] Assigning groom 74016 to foal 147730
[2026-01-28 14:29:23] info: [groomSystem.assignGroomToFoal] Assigning groom 74016 to foal 147730
[2026-01-28 14:29:23] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal 1769628563822_weraf
[2026-01-28 14:29:23] info: [groomController.assignGroom] Assigning groom 74017 to foal 147733
[2026-01-28 14:29:23] info: [groomController.recordInteraction] Recording trust_building interaction for foal 147736
[2026-01-28 14:29:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building
[2026-01-28 14:29:23] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:29:23] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:29:23] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -3 stress
[2026-01-28 14:29:23] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 74018 for interaction_completed
[2026-01-28 14:29:24] info: [groomProgressionService.awardGroomXP] Groom 74018 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Awarded 2 XP to groom 74018 for interaction
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 147740
[2026-01-28 14:29:24] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling
[2026-01-28 14:29:24] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:29:24] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -3 stress
[2026-01-28 14:29:24] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 74019 for interaction_completed
[2026-01-28 14:29:24] info: [groomProgressionService.awardGroomXP] Groom 74019 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Awarded 2 XP to groom 74019 for interaction
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Recording brushing interaction for foal 147744
[2026-01-28 14:29:24] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:29:24] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 14:29:24] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -8 stress
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses
[2026-01-28 14:29:24] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 74020 for interaction_completed
[2026-01-28 14:29:24] info: [groomProgressionService.awardGroomXP] Groom 74020 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:29:24] info: [groomController.recordInteraction] Awarded 2 XP to groom 74020 for interaction
FAIL tests/integration/groomWorkflowIntegration.test.mjs
  Groom Workflow Integration Tests
    1. Complete Groom Hiring Workflow
      √ó should hire groom with proper skill calculations and validation (116 ms)
      ‚àö should validate required fields and reject invalid groom data (30 ms)
      ‚àö should calculate proper session rates based on skill level (46 ms)
    2. Groom Assignment Management
      ‚àö should assign groom to foal with proper validation (48 ms)
      ‚àö should handle assignment conflicts and priority management (48 ms)
      ‚àö should validate ownership and authorization (28 ms)
    3. Age-Based Task Validation
      ‚àö should allow enrichment tasks for foals (0-2 years) (279 ms)
      ‚àö should allow grooming tasks for horses 1-3 years old (75 ms)
      ‚àö should allow grooming tasks for horses over 3 years old (54 ms)

  ‚óè Groom Workflow Integration Tests ‚Ä∫ 1. Complete Groom Hiring Workflow ‚Ä∫ should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769628563580_lneal"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T19:29:23.657Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T19:29:23.657Z, "hiringCost": 750, "id": 74011, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T19:29:23.657Z, "userId": "user-groom-int-1769628563580_lneal"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

[2026-01-28 14:29:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:24] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:24] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:24] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/groomProgression.test.mjs
  Groom Progression System
    XP and Leveling System
      √ó Should award XP for milestone completion (86 ms)
      √ó Should award XP for trait shaping (22 ms)
      √ó Should award XP for show wins (20 ms)
      √ó Should level up when reaching XP threshold (21 ms)
      √ó Should calculate correct level from experience (18 ms)
      √ó Should cap level at 10 (19 ms)
    Groom-Horse Synergy System
      √ó Should create synergy record for new groom-horse pair (20 ms)
      √ó Should award correct synergy for different actions (17 ms)
      √ó Should penalize synergy for reassignment (20 ms)
      √ó Should track sessions together (19 ms)
    Assignment History Logging
      √ó Should log assignment start (17 ms)
      √ó Should log assignment completion with performance data (19 ms)
    Enhanced Groom Profile API
      √ó Should return comprehensive groom profile (17 ms)
      √ó Should include synergy effects in profile (17 ms)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.607Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31755,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.641Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31756,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.661Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31757,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.683Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31758,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.701Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31759,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.720Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31760,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.742Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31761,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.759Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31762,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.776Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31763,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.798Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31764,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.817Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31765,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.834Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31766,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.854Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31767,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.871Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31768,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

[2026-01-28 14:29:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:25] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/breedingAnalyticsService.test.mjs
  Breeding Analytics Service
    Lineage Tracking
      ‚àö should track breeding pair lineage (170 ms)
      ‚àö should identify parent-offspring relationships (14 ms)
    Trait Inheritance Analysis
      ‚àö should analyze trait inheritance patterns (13 ms)
      ‚àö should calculate trait inheritance rates (15 ms)
    Breeding Success Metrics
      ‚àö should calculate breeding success rates (13 ms)
      ‚àö should track foal development outcomes (11 ms)
    Statistical Analysis
      ‚àö should calculate average offspring stats (14 ms)
      ‚àö should compare offspring to parent averages (14 ms)
    Error Handling
      ‚àö should handle user with no breeding data (18 ms)
      ‚àö should handle non-existent user gracefully (8 ms)

[2026-01-28 14:29:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:26] error: [ResponseOptimization] Response size exceeds limit: 12715 bytes for GET /test/oversized
PASS __tests__/performance/apiResponseOptimization.test.mjs
  API Response Optimization System
    Pagination Service
      ‚àö creates offset-based pagination correctly (3 ms)
      ‚àö creates cursor-based pagination correctly (2 ms)
      ‚àö generates optimized Prisma query for cursor pagination (1 ms)
    Serialization Service
      ‚àö optimizes response data correctly (1 ms)
      ‚àö selects specific fields correctly (2 ms)
      ‚àö excludes specific fields correctly (1 ms)
      ‚àö handles nested field selection (1 ms)
    Response Cache Service
      ‚àö generates consistent ETags for same data (1 ms)
      ‚àö generates different ETags for different data (1 ms)
      ‚àö determines cacheable requests correctly (1 ms)
    Lazy Loading Service
      ‚àö creates lazy loading configuration (1 ms)
      ‚àö loads related data on demand (6 ms)
    Middleware Integration
      ‚àö handles pagination middleware correctly (26 ms)
      ‚àö handles field selection via query parameters (13 ms)
      ‚àö adds performance headers to responses (16 ms)
      ‚àö handles large response optimization (25 ms)
      ‚àö supports debug mode with optimization info (15 ms)
    Performance Metrics
      ‚àö tracks performance metrics correctly (1 ms)
    ETag and Caching
      ‚àö generates and validates ETags correctly (20 ms)
    Response Size Monitoring
      ‚àö monitors and warns about large responses (25 ms)
      ‚àö handles response size limits (15 ms)

[2026-01-28 14:29:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:26] info: [envValidator] Test environment validation complete. Success: true
FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  Dynamic Compatibility Scoring
    calculateDynamicCompatibility
      ‚àö should calculate high compatibility for calm groom with fearful horse (17 ms)
      ‚àö should calculate low compatibility for energetic groom with fearful horse (11 ms)
      ‚àö should calculate moderate compatibility with contextual improvements (9 ms)
      ‚àö should apply experience bonuses correctly (14 ms)
    analyzeCompatibilityFactors
      ‚àö should analyze all compatibility factors comprehensively (9 ms)
      ‚àö should identify risk factors for poor matches (7 ms)
    predictInteractionOutcome
      ‚àö should predict positive outcome for good compatibility (12 ms)
      ‚àö should predict negative outcome for poor compatibility (10 ms)
    updateCompatibilityHistory
      ‚àö should update compatibility history with interaction results (7 ms)
    getOptimalGroomRecommendations
      √ó should recommend optimal grooms for specific horse and context (5 ms)
      √ó should provide alternative recommendations (4 ms)
    analyzeCompatibilityTrends
      ‚àö should analyze compatibility trends over time (8 ms)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 380 |[39m       expect(recommendations)[33m.[39mtoBeDefined()[33m;[39m
     [90m 381 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 382 |[39m       expect(recommendations[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 383 |[39m       expect(recommendations[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 384 |[39m       expect(recommendations[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 385 |[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:382:51)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should provide alternative recommendations

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 405 |[39m       [36mconst[39m recommendations [33m=[39m [36mawait[39m getOptimalGroomRecommendations(horse[33m.[39mid[33m,[39m context)[33m;[39m
     [90m 406 |[39m
    [31m[1m>[22m[39m[90m 407 |[39m       expect(recommendations[33m.[39malternativeOptions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 408 |[39m       expect(recommendations[33m.[39mcontextualNotes)[33m.[39mtoBeDefined()[33m;[39m
     [90m 409 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mcontextualNotes))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 410 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:407:57)

[2026-01-28 14:29:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:26] info: [envValidator] Test environment validation complete. Success: true
PASS tests/schema-validation.test.mjs
  Schema Validation
    ‚àö should create horse with basic required fields (30 ms)
    ‚àö should create horse with groom-related fields (16 ms)
    ‚àö should create groom with all required fields (13 ms)
    ‚àö should create groom assignment (19 ms)
    ‚àö should create groom interaction (17 ms)

[2026-01-28 14:29:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:27] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:27] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:27] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:27] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:27] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:27] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:28] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:28] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:28] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:28] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:28] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:28] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:28] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:28] info: [POST] /auth/register
[2026-01-28 14:29:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1019MB
[2026-01-28 14:29:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:28] info: [EmailVerification] Created verification token
[2026-01-28 14:29:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:28] info: [authController.register] Verification email sent
[2026-01-28 14:29:28] info: [POST] /auth/register - 201
[2026-01-28 14:29:28] info: [GET] /auth/csrf-token
[2026-01-28 14:29:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:28] info: [CSRF] Token generated
[2026-01-28 14:29:28] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:28] info: [POST] /auth/register
[2026-01-28 14:29:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1022MB
[2026-01-28 14:29:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:29] info: [EmailVerification] Created verification token
[2026-01-28 14:29:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:29] info: [authController.register] Verification email sent
[2026-01-28 14:29:29] info: [POST] /auth/register - 201
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:29] info: [CSRF] Token generated
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:29] info: [POST] /auth/register
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:29] info: [EmailVerification] Created verification token
[2026-01-28 14:29:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:29] info: [authController.register] Verification email sent
[2026-01-28 14:29:29] info: [POST] /auth/register - 201
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1026MB
[2026-01-28 14:29:29] info: [CSRF] Token generated
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:29] info: [CSRF] Token generated
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:29] info: [POST] /auth/register
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:29] info: [EmailVerification] Created verification token
[2026-01-28 14:29:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:29] info: [authController.register] Verification email sent
[2026-01-28 14:29:29] info: [POST] /auth/register - 201
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:29] info: [CSRF] Token generated
[2026-01-28 14:29:29] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:29] info: [PUT] /api/users/3978723f-6cd4-42b4-831a-bb2642b75019
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1021MB
[2026-01-28 14:29:29] info: [auth:kouaj] Starting auth for PUT /users/3978723f-6cd4-42b4-831a-bb2642b75019
[2026-01-28 14:29:29] info: [auth:kouaj] Token from cookie: true
[2026-01-28 14:29:29] info: [auth:kouaj] Authenticated user 3978723f-6cd4-42b4-831a-bb2642b75019
[2026-01-28 14:29:29] info: [PUT] /api/users/3978723f-6cd4-42b4-831a-bb2642b75019 - 403
[2026-01-28 14:29:29] info: [POST] /auth/register
[2026-01-28 14:29:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:30] info: [EmailVerification] Created verification token
[2026-01-28 14:29:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:30] info: [authController.register] Verification email sent
[2026-01-28 14:29:30] info: [POST] /auth/register - 201
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:30] info: [CSRF] Token generated
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:30] info: [PUT] /api/users/76d3b6c4-5c70-461c-9a00-e9161869643e
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1021MB
[2026-01-28 14:29:30] info: [auth:eo6hen] Starting auth for PUT /users/76d3b6c4-5c70-461c-9a00-e9161869643e
[2026-01-28 14:29:30] info: [auth:eo6hen] Token from cookie: true
[2026-01-28 14:29:30] info: [auth:eo6hen] Authenticated user 76d3b6c4-5c70-461c-9a00-e9161869643e
[2026-01-28 14:29:30] info: [PUT] /api/users/76d3b6c4-5c70-461c-9a00-e9161869643e - 403
[2026-01-28 14:29:30] info: [POST] /auth/register
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:30] info: [EmailVerification] Created verification token
[2026-01-28 14:29:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:30] info: [authController.register] Verification email sent
[2026-01-28 14:29:30] info: [POST] /auth/register - 201
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:30] info: [CSRF] Token generated
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:30] info: [DELETE] /api/users/7a2916ef-2024-450d-9eff-8df18401a494
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1021MB
[2026-01-28 14:29:30] info: [auth:tm19vo] Starting auth for DELETE /users/7a2916ef-2024-450d-9eff-8df18401a494
[2026-01-28 14:29:30] info: [auth:tm19vo] Token from cookie: true
[2026-01-28 14:29:30] info: [auth:tm19vo] Authenticated user 7a2916ef-2024-450d-9eff-8df18401a494
[2026-01-28 14:29:30] info: [DELETE] /api/users/7a2916ef-2024-450d-9eff-8df18401a494 - 403
[2026-01-28 14:29:30] info: [POST] /auth/register
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:30] info: [EmailVerification] Created verification token
[2026-01-28 14:29:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:30] info: [authController.register] Verification email sent
[2026-01-28 14:29:30] info: [POST] /auth/register - 201
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:30] info: [CSRF] Token generated
[2026-01-28 14:29:30] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:30] info: [PATCH] /api/users/4142eead-135c-43f1-abfb-8d4158f33e33
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1022MB
[2026-01-28 14:29:30] info: [auth:6foane] Starting auth for PATCH /users/4142eead-135c-43f1-abfb-8d4158f33e33
[2026-01-28 14:29:30] info: [auth:6foane] Token from cookie: true
[2026-01-28 14:29:30] info: [auth:6foane] Authenticated user 4142eead-135c-43f1-abfb-8d4158f33e33
[2026-01-28 14:29:30] info: [PATCH] /api/users/4142eead-135c-43f1-abfb-8d4158f33e33 - 403
[2026-01-28 14:29:30] info: [POST] /auth/register
[2026-01-28 14:29:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:31] info: [EmailVerification] Created verification token
[2026-01-28 14:29:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:31] info: [authController.register] Verification email sent
[2026-01-28 14:29:31] info: [POST] /auth/register - 201
[2026-01-28 14:29:31] info: [GET] /api/users/f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:31] info: [auth:qsgdu] Starting auth for GET /users/f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] info: [auth:qsgdu] Token from cookie: true
[2026-01-28 14:29:31] info: [auth:qsgdu] Authenticated user f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] info: [auth:j0jgl8] Starting auth for GET /f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] info: [auth:j0jgl8] Token from cookie: true
[2026-01-28 14:29:31] info: [auth:j0jgl8] Authenticated user f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] info: [userRoutes] Self-access validated: user f7c8fc8b-2615-4425-b1ef-edee40fb6f52 accessing own data
[2026-01-28 14:29:31] info: [userController.getUser] Getting user f7c8fc8b-2615-4425-b1ef-edee40fb6f52
[2026-01-28 14:29:31] info: [GET] /api/users/f7c8fc8b-2615-4425-b1ef-edee40fb6f52 - 200
[2026-01-28 14:29:31] info: [POST] /auth/register
[2026-01-28 14:29:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 14:29:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:31] info: [EmailVerification] Created verification token
[2026-01-28 14:29:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:31] info: [authController.register] Verification email sent
[2026-01-28 14:29:31] info: [POST] /auth/register - 201
[2026-01-28 14:29:31] info: [HEAD] /health
[2026-01-28 14:29:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:31] info: [HEAD] /health - 200
[2026-01-28 14:29:31] info: [POST] /auth/register
[2026-01-28 14:29:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:31] info: [EmailVerification] Created verification token
[2026-01-28 14:29:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:31] info: [authController.register] Verification email sent
[2026-01-28 14:29:31] info: [POST] /auth/register - 201
[2026-01-28 14:29:31] info: [POST] /auth/register
[2026-01-28 14:29:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:32] info: [EmailVerification] Created verification token
[2026-01-28 14:29:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:32] info: [authController.register] Verification email sent
[2026-01-28 14:29:32] info: [POST] /auth/register - 201
[2026-01-28 14:29:32] info: [POST] /api/users/me
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:32] info: [auth:5vzg56] Starting auth for POST /users/me
[2026-01-28 14:29:32] info: [auth:5vzg56] Token from cookie: true
[2026-01-28 14:29:32] info: [auth:5vzg56] Authenticated user 75852944-335b-478c-996f-a504e9ae9f0d
[2026-01-28 14:29:32] info: [POST] /api/users/me - 403
[2026-01-28 14:29:32] info: [POST] /auth/register
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:32] info: [EmailVerification] Created verification token
[2026-01-28 14:29:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:32] info: [authController.register] Verification email sent
[2026-01-28 14:29:32] info: [POST] /auth/register - 201
[2026-01-28 14:29:32] info: [PUT] /api/users/5658bafc-76a3-4b5e-b8bd-fc6f6a45d668
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:32] info: [auth:ctp2n2b] Starting auth for PUT /users/5658bafc-76a3-4b5e-b8bd-fc6f6a45d668
[2026-01-28 14:29:32] info: [auth:ctp2n2b] Token from cookie: true
[2026-01-28 14:29:32] info: [auth:ctp2n2b] Authenticated user 5658bafc-76a3-4b5e-b8bd-fc6f6a45d668
[2026-01-28 14:29:32] info: [PUT] /api/users/5658bafc-76a3-4b5e-b8bd-fc6f6a45d668 - 403
[2026-01-28 14:29:32] info: [POST] /auth/register
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:29:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:32] info: [EmailVerification] Created verification token
[2026-01-28 14:29:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:32] info: [authController.register] Verification email sent
[2026-01-28 14:29:32] info: [POST] /auth/register - 201
[2026-01-28 14:29:32] info: [DELETE] /api/users/01ce9a6a-ba75-4182-8777-6a2f7b2ec490
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:32] info: [auth:vh8dgm] Starting auth for DELETE /users/01ce9a6a-ba75-4182-8777-6a2f7b2ec490
[2026-01-28 14:29:32] info: [auth:vh8dgm] Token from cookie: true
[2026-01-28 14:29:32] info: [auth:vh8dgm] Authenticated user 01ce9a6a-ba75-4182-8777-6a2f7b2ec490
[2026-01-28 14:29:32] info: [DELETE] /api/users/01ce9a6a-ba75-4182-8777-6a2f7b2ec490 - 403
[2026-01-28 14:29:32] info: [POST] /auth/register
[2026-01-28 14:29:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:33] info: [EmailVerification] Created verification token
[2026-01-28 14:29:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:33] info: [authController.register] Verification email sent
[2026-01-28 14:29:33] info: [POST] /auth/register - 201
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:29:33] info: [CSRF] Token generated
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:33] info: [PUT] /api/users/6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:33] info: [auth:th4vvb] Starting auth for PUT /users/6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] info: [auth:th4vvb] Token from cookie: true
[2026-01-28 14:29:33] info: [auth:th4vvb] Authenticated user 6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] info: [auth:muevlp] Starting auth for PUT /6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] info: [auth:muevlp] Token from cookie: true
[2026-01-28 14:29:33] info: [auth:muevlp] Authenticated user 6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] info: [userRoutes] Self-access validated: user 6d888a60-2bb1-4fc4-865f-2a4091670123 accessing own data
[2026-01-28 14:29:33] info: [userController.updateUser] Updating user 6d888a60-2bb1-4fc4-865f-2a4091670123
[2026-01-28 14:29:33] info: [PUT] /api/users/6d888a60-2bb1-4fc4-865f-2a4091670123 - 200
[2026-01-28 14:29:33] info: [POST] /auth/register
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:33] info: [EmailVerification] Created verification token
[2026-01-28 14:29:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:33] info: [authController.register] Verification email sent
[2026-01-28 14:29:33] info: [POST] /auth/register - 201
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:29:33] info: [CSRF] Token generated
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:33] info: [CSRF] Token generated
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB
[2026-01-28 14:29:33] info: [CSRF] Token generated
[2026-01-28 14:29:33] info: [GET] /auth/csrf-token - 200
[2026-01-28 14:29:33] info: [POST] /auth/register
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 14:29:33] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:33] info: [EmailVerification] Created verification token
[2026-01-28 14:29:33] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:33] info: [authController.register] Verification email sent
[2026-01-28 14:29:33] info: [POST] /auth/register - 201
[2026-01-28 14:29:33] info: [POST] /api/users/me
[2026-01-28 14:29:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:33] info: [auth:hsyxlm] Starting auth for POST /users/me
[2026-01-28 14:29:34] info: [auth:hsyxlm] Token from cookie: true
[2026-01-28 14:29:34] info: [auth:hsyxlm] Authenticated user 96693586-d4a5-442b-bd87-02dbabb0c656
[2026-01-28 14:29:34] info: [POST] /api/users/me - 403
[2026-01-28 14:29:34] info: [POST] /auth/register
[2026-01-28 14:29:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB
[2026-01-28 14:29:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:34] info: [EmailVerification] Created verification token
[2026-01-28 14:29:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:34] info: [authController.register] Verification email sent
[2026-01-28 14:29:34] info: [POST] /auth/register - 201
[2026-01-28 14:29:34] info: [POST] /auth/register
[2026-01-28 14:29:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:34] info: [EmailVerification] Created verification token
[2026-01-28 14:29:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:34] info: [authController.register] Verification email sent
[2026-01-28 14:29:34] info: [POST] /auth/register - 201
[2026-01-28 14:29:34] info: [POST] /auth/login
[2026-01-28 14:29:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:34] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:34] info: [POST] /auth/login - 200
[2026-01-28 14:29:34] info: [POST] /auth/register
[2026-01-28 14:29:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:35] info: [EmailVerification] Created verification token
[2026-01-28 14:29:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:35] info: [authController.register] Verification email sent
[2026-01-28 14:29:35] info: [POST] /auth/register - 201
[2026-01-28 14:29:35] info: [POST] /auth/register
[2026-01-28 14:29:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:35] info: [EmailVerification] Created verification token
[2026-01-28 14:29:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:35] info: [authController.register] Verification email sent
[2026-01-28 14:29:35] info: [POST] /auth/register - 201
[2026-01-28 14:29:35] info: [POST] /auth/register
[2026-01-28 14:29:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:29:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:35] info: [EmailVerification] Created verification token
[2026-01-28 14:29:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:35] info: [authController.register] Verification email sent
[2026-01-28 14:29:35] info: [POST] /auth/register - 201
[2026-01-28 14:29:35] info: [POST] /auth/forgot-password
[2026-01-28 14:29:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:29:35] warn: 404 - Route not found: POST /auth/forgot-password from ::ffff:127.0.0.1
[2026-01-28 14:29:35] info: [POST] /auth/forgot-password - 404
PASS __tests__/integration/csrf-integration.test.mjs (8.63 s)
  CSRF Protection Integration Tests
    CSRF Token Acquisition
      ‚àö should get CSRF token from /auth/csrf-token endpoint (402 ms)
      ‚àö should set CSRF token in cookie (334 ms)
      ‚àö should generate unique tokens for different requests (350 ms)
    CSRF Protection for State-Changing Operations
      ‚àö should reject POST request without CSRF token (360 ms)
      ‚àö should reject PUT request without CSRF token (357 ms)
      ‚àö should reject DELETE request without CSRF token (352 ms)
      ‚àö should reject PATCH request without CSRF token (356 ms)
    Safe HTTP Methods (No CSRF Required)
      ‚àö should allow GET requests without CSRF token (336 ms)
      ‚àö should allow HEAD requests without CSRF token (328 ms)
      ‚àö should allow OPTIONS requests without CSRF token (322 ms)
    CSRF Error Messages
      ‚àö should provide clear error message for missing token (334 ms)
      ‚àö should include error code in response (331 ms)
      ‚àö should return 403 status for CSRF failures (334 ms)
    CSRF Token Lifecycle
      ‚àö should accept newly generated token (371 ms)
      ‚àö should generate new token on each request to /auth/csrf-token (372 ms)
    CORS and CSRF Integration
      ‚àö should require X-CSRF-Token header for cross-origin requests (350 ms)
      ‚àö should allow CORS preflight without CSRF token (318 ms)
    Public Endpoints (No CSRF)
      ‚àö should not require CSRF token for login (611 ms)
      ‚àö should not require CSRF token for registration (612 ms)
      ‚àö should not require CSRF token for password reset request (332 ms)

[2026-01-28 14:29:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:36] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:36] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:36] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:36] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:37] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:37] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:37] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:37] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:37] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:37] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:37] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:37] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1084MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1084MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:37] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:37] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:37] error: Error Invalid credentials
[2026-01-28 14:29:37] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:37] info: [POST] /api/auth/login
[2026-01-28 14:29:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1089MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1085MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:29:38] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1086MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:29:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:38] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 200
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1089MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1087MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:38] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:38] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:38] error: Error Invalid credentials
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:38] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:38] info: [POST] /api/auth/login
[2026-01-28 14:29:38] warn: [MemoryMonitoring] Memory threshold exceeded: 1087MB
[2026-01-28 14:29:38] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:38] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1089MB
[2026-01-28 14:29:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:29:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 14:29:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1088MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:39] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:39] info: [POST] /api/auth/login
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 14:29:39] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:39] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:39] error: Error Invalid credentials
[2026-01-28 14:29:39] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:39] info: [POST] /api/auth/register
[2026-01-28 14:29:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:40] info: [EmailVerification] Created verification token
[2026-01-28 14:29:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:40] info: [authController.register] Verification email sent
[2026-01-28 14:29:40] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:40] info: [POST] /api/auth/register
[2026-01-28 14:29:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 14:29:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:40] info: [EmailVerification] Created verification token
[2026-01-28 14:29:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:40] info: [authController.register] Verification email sent
[2026-01-28 14:29:40] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:40] info: [POST] /api/auth/register
[2026-01-28 14:29:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:40] info: [EmailVerification] Created verification token
[2026-01-28 14:29:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:40] info: [authController.register] Verification email sent
[2026-01-28 14:29:40] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:40] info: [POST] /api/auth/register
[2026-01-28 14:29:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:40] info: [EmailVerification] Created verification token
[2026-01-28 14:29:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:40] info: [authController.register] Verification email sent
[2026-01-28 14:29:40] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:40] info: [POST] /api/auth/register
[2026-01-28 14:29:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:41] info: [EmailVerification] Created verification token
[2026-01-28 14:29:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:41] info: [authController.register] Verification email sent
[2026-01-28 14:29:41] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:41] info: [POST] /api/auth/register
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:41] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:41] info: [POST] /api/auth/register - 429
[2026-01-28 14:29:41] info: [POST] /api/auth/register
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 14:29:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:41] info: [EmailVerification] Created verification token
[2026-01-28 14:29:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:41] info: [authController.register] Verification email sent
[2026-01-28 14:29:41] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:41] info: [POST] /api/auth/login
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 14:29:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:41] info: [POST] /api/auth/login - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1101MB
[2026-01-28 14:29:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 14:29:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1090MB
[2026-01-28 14:29:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1096MB
[2026-01-28 14:29:41] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:41] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token
[2026-01-28 14:29:41] warn: [MemoryMonitoring] Memory threshold exceeded: 1091MB
[2026-01-28 14:29:41] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:41] info: [POST] /api/auth/refresh-token - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:42] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:42] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:42] error: Error Invalid credentials
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1092MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:42] info: [POST] /api/auth/login
[2026-01-28 14:29:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:29:42] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:42] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1102MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1093MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1101MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1094MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1098MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1095MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1097MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
[2026-01-28 14:29:44] info: [POST] /api/auth/login
[2026-01-28 14:29:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1099MB
[2026-01-28 14:29:44] warn: [RateLimit:rl:auth] Limit exceeded
[2026-01-28 14:29:44] info: [POST] /api/auth/login - 429
PASS __tests__/integration/rate-limiting.test.mjs (8.861 s)
  Rate Limiting System
    Login Rate Limiting (Brute Force Protection)
      ‚àö should_allow_up_to_5_failed_login_attempts (491 ms)
      ‚àö should_block_6th_failed_login_attempt_with_429 (473 ms)
      ‚àö should_reset_rate_limit_after_successful_authentication (811 ms)
      ‚àö should_include_retry_after_in_rate_limit_response (90 ms)
      ‚àö should_track_rate_limits_per_ip_address (565 ms)
    Registration Rate Limiting
      ‚àö should_rate_limit_registration_attempts (1581 ms)
      ‚àö should_include_rate_limit_headers_on_registration (307 ms)
    Token Refresh Rate Limiting
      ‚àö should_rate_limit_token_refresh_attempts (156 ms)
    Rate Limit Headers
      ‚àö should_include_standard_rate_limit_headers (93 ms)
      ‚àö should_update_ratelimit_remaining_with_each_request (56 ms)
      ‚àö should_provide_accurate_reset_timestamp (22 ms)
    Rate Limit Reset Mechanism
      ‚àö should_reset_rate_limit_after_time_window (2130 ms)
    Concurrent Request Handling
      ‚àö should_handle_concurrent_requests_correctly (144 ms)
    Edge Cases
      ‚àö should_handle_missing_ip_address_gracefully (19 ms)
      ‚àö should_handle_malformed_requests_with_rate_limiting (91 ms)
      ‚àö should_not_leak_user_existence_through_rate_limiting (92 ms)
    Test Environment Configuration
      ‚àö should_respect_test_environment_rate_limit_config (1 ms)

[2026-01-28 14:29:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:45] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:45] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:45] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:45] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:45] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:45] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:45] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:45] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:45] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:45] info: [POST] /auth/register
[2026-01-28 14:29:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1152MB
[2026-01-28 14:29:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:46] info: [EmailVerification] Created verification token
[2026-01-28 14:29:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:46] info: [authController.register] Verification email sent
[2026-01-28 14:29:46] info: [POST] /auth/register - 201
[2026-01-28 14:29:46] info: [POST] /auth/register
[2026-01-28 14:29:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1156MB
[2026-01-28 14:29:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:46] info: [EmailVerification] Created verification token
[2026-01-28 14:29:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:46] info: [authController.register] Verification email sent
[2026-01-28 14:29:46] info: [POST] /auth/register - 201
[2026-01-28 14:29:46] info: [POST] /auth/register
[2026-01-28 14:29:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB
[2026-01-28 14:29:46] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:46] info: [EmailVerification] Created verification token
[2026-01-28 14:29:46] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:46] info: [authController.register] Verification email sent
[2026-01-28 14:29:46] info: [POST] /auth/register - 201
[2026-01-28 14:29:46] info: [POST] /auth/register
[2026-01-28 14:29:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:47] info: [EmailVerification] Created verification token
[2026-01-28 14:29:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:47] info: [authController.register] Verification email sent
[2026-01-28 14:29:47] info: [POST] /auth/register - 201
[2026-01-28 14:29:47] info: [POST] /auth/login
[2026-01-28 14:29:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:47] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:47] info: [POST] /auth/login - 200
[2026-01-28 14:29:47] info: [POST] /auth/register
[2026-01-28 14:29:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB
[2026-01-28 14:29:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:47] info: [EmailVerification] Created verification token
[2026-01-28 14:29:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:47] info: [authController.register] Verification email sent
[2026-01-28 14:29:47] info: [POST] /auth/register - 201
[2026-01-28 14:29:47] info: [POST] /auth/login
[2026-01-28 14:29:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:48] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:48] info: [POST] /auth/login - 200
[2026-01-28 14:29:48] info: [POST] /auth/register
[2026-01-28 14:29:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:29:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:48] info: [EmailVerification] Created verification token
[2026-01-28 14:29:48] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:48] info: [authController.register] Verification email sent
[2026-01-28 14:29:48] info: [POST] /auth/register - 201
[2026-01-28 14:29:48] info: [POST] /auth/login
[2026-01-28 14:29:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:48] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:48] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:48] info: [POST] /auth/login - 200
[2026-01-28 14:29:48] info: [POST] /auth/register
[2026-01-28 14:29:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:29:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:49] info: [EmailVerification] Created verification token
[2026-01-28 14:29:49] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:49] info: [authController.register] Verification email sent
[2026-01-28 14:29:49] info: [POST] /auth/register - 201
[2026-01-28 14:29:49] info: [POST] /auth/login
[2026-01-28 14:29:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:49] info: [POST] /auth/login - 200
[2026-01-28 14:29:49] info: [POST] /auth/refresh-token
[2026-01-28 14:29:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:29:49] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:49] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:49] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:29:49] info: [POST] /auth/register
[2026-01-28 14:29:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1161MB
[2026-01-28 14:29:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:49] info: [EmailVerification] Created verification token
[2026-01-28 14:29:49] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:49] info: [authController.register] Verification email sent
[2026-01-28 14:29:49] info: [POST] /auth/register - 201
[2026-01-28 14:29:49] info: [POST] /auth/login
[2026-01-28 14:29:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:50] info: [POST] /auth/login - 200
[2026-01-28 14:29:50] info: [POST] /auth/refresh-token
[2026-01-28 14:29:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:29:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:50] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:29:50] info: [POST] /auth/register
[2026-01-28 14:29:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:29:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:50] info: [EmailVerification] Created verification token
[2026-01-28 14:29:50] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:50] info: [authController.register] Verification email sent
[2026-01-28 14:29:50] info: [POST] /auth/register - 201
[2026-01-28 14:29:50] info: [POST] /auth/login
[2026-01-28 14:29:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:50] info: [POST] /auth/login - 200
[2026-01-28 14:29:50] info: [POST] /auth/refresh-token
[2026-01-28 14:29:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:29:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:50] info: [POST] /auth/refresh-token - 200
[2026-01-28 14:29:50] info: [POST] /auth/register
[2026-01-28 14:29:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1162MB
[2026-01-28 14:29:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:51] info: [EmailVerification] Created verification token
[2026-01-28 14:29:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:51] info: [authController.register] Verification email sent
[2026-01-28 14:29:51] info: [POST] /auth/register - 201
[2026-01-28 14:29:51] info: [POST] /auth/login
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:29:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:51] info: [POST] /auth/login - 200
[2026-01-28 14:29:51] info: [POST] /auth/logout
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:51] info: [auth:92luys] Starting auth for POST /logout
[2026-01-28 14:29:51] info: [auth:92luys] Token from cookie: true
[2026-01-28 14:29:51] info: [auth:92luys] Authenticated user 2b7fbaa8-8963-4d4f-8a84-fdca8a86a3b2
[2026-01-28 14:29:51] info: [POST] /auth/logout - 200
[2026-01-28 14:29:51] info: [POST] /auth/register
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:51] info: [EmailVerification] Created verification token
[2026-01-28 14:29:51] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:51] info: [authController.register] Verification email sent
[2026-01-28 14:29:51] info: [POST] /auth/register - 201
[2026-01-28 14:29:51] info: [POST] /auth/login
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1165MB
[2026-01-28 14:29:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:51] info: [POST] /auth/login - 200
[2026-01-28 14:29:51] info: [POST] /auth/logout
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:51] info: [auth:jxsxzr] Starting auth for POST /logout
[2026-01-28 14:29:51] info: [auth:jxsxzr] Token from cookie: true
[2026-01-28 14:29:51] info: [auth:jxsxzr] Authenticated user e9511cf8-7a6a-4b7f-993a-6cfb22d741ce
[2026-01-28 14:29:51] info: [POST] /auth/logout - 200
[2026-01-28 14:29:51] info: [POST] /auth/register
[2026-01-28 14:29:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1163MB
[2026-01-28 14:29:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:52] info: [EmailVerification] Created verification token
[2026-01-28 14:29:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:52] info: [authController.register] Verification email sent
[2026-01-28 14:29:52] info: [POST] /auth/register - 201
[2026-01-28 14:29:52] info: [POST] /auth/login
[2026-01-28 14:29:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 14:29:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:52] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:52] info: [POST] /auth/login - 200
[2026-01-28 14:29:52] info: [POST] /auth/logout
[2026-01-28 14:29:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:52] info: [auth:x7i37v] Starting auth for POST /logout
[2026-01-28 14:29:52] info: [auth:x7i37v] Token from cookie: true
[2026-01-28 14:29:52] info: [auth:x7i37v] Authenticated user 651d63e7-8378-4ce8-92c3-1a8f001a6ae5
[2026-01-28 14:29:52] info: [POST] /auth/logout - 200
[2026-01-28 14:29:52] info: [POST] /auth/register
[2026-01-28 14:29:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:52] info: [EmailVerification] Created verification token
[2026-01-28 14:29:52] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:52] info: [authController.register] Verification email sent
[2026-01-28 14:29:52] info: [POST] /auth/register - 201
[2026-01-28 14:29:52] info: [POST] /auth/login
[2026-01-28 14:29:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1166MB
[2026-01-28 14:29:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:53] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:29:53] info: [POST] /auth/login - 200
[2026-01-28 14:29:53] info: [POST] /auth/refresh-token
[2026-01-28 14:29:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1164MB
[2026-01-28 14:29:53] info: [TokenRotation] Token rotation successful
[2026-01-28 14:29:53] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:29:53] info: [POST] /auth/refresh-token - 200
PASS __tests__/integration/cookieIntegration.test.mjs (8.489 s)
  Cookie Integration Tests
    Registration Endpoint Cookies
      ‚àö should set accessToken cookie with correct attributes (373 ms)
      ‚àö should set refreshToken cookie with correct attributes (315 ms)
      ‚àö should set both cookies in a single response (314 ms)
    Login Endpoint Cookies
      ‚àö should set cookies on successful login (620 ms)
      ‚àö should set accessToken cookie with correct attributes on login (610 ms)
      ‚àö should set refreshToken cookie with correct attributes on login (611 ms)
    Token Refresh Endpoint Cookies
      ‚àö should set new cookies on token refresh (640 ms)
      ‚àö should set new accessToken cookie with correct attributes (641 ms)
      ‚àö should set new refreshToken cookie with correct attributes (631 ms)
    Logout Endpoint Cookie Clearing
      ‚àö should clear accessToken cookie on logout (633 ms)
      ‚àö should clear refreshToken cookie on logout (628 ms)
      ‚àö should maintain same path when clearing cookies (631 ms)
    Cookie Security Attributes
      ‚àö should use consistent security attributes across all endpoints (638 ms)

[2026-01-28 14:29:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:29:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:29:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:29:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:29:54] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:29:54] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:29:54] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:29:54] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:29:54] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:29:54] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:29:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:29:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:29:54] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1022MB
[2026-01-28 14:29:54] info: [auth:hzvlkd] Starting auth for GET /user/victim-uuid-001
[2026-01-28 14:29:54] info: [auth:hzvlkd] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:hzvlkd] Token from header: true
[2026-01-28 14:29:54] info: [auth:hzvlkd] Authenticated user attacker-uuid-999
[2026-01-28 14:29:54] warn: 404 - Route not found: GET /api/user/victim-uuid-001 from ::ffff:127.0.0.1
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001 - 404
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001/progress
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1016MB
[2026-01-28 14:29:54] info: [auth:h79kq] Starting auth for GET /user/victim-uuid-001/progress
[2026-01-28 14:29:54] info: [auth:h79kq] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:h79kq] Token from header: true
[2026-01-28 14:29:54] info: [auth:h79kq] Authenticated user attacker-uuid-999
[2026-01-28 14:29:54] warn: 404 - Route not found: GET /api/user/victim-uuid-001/progress from ::ffff:127.0.0.1
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001/progress - 404
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001/activity
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1019MB
[2026-01-28 14:29:54] info: [auth:ki892i] Starting auth for GET /user/victim-uuid-001/activity
[2026-01-28 14:29:54] info: [auth:ki892i] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:ki892i] Token from header: true
[2026-01-28 14:29:54] info: [auth:ki892i] Authenticated user attacker-uuid-999
[2026-01-28 14:29:54] warn: 404 - Route not found: GET /api/user/victim-uuid-001/activity from ::ffff:127.0.0.1
[2026-01-28 14:29:54] info: [GET] /api/user/victim-uuid-001/activity - 404
[2026-01-28 14:29:54] info: [PUT] /api/user/victim-uuid-001
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1022MB
[2026-01-28 14:29:54] info: [auth:ly00ba] Starting auth for PUT /user/victim-uuid-001
[2026-01-28 14:29:54] info: [auth:ly00ba] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:ly00ba] Token from header: true
[2026-01-28 14:29:54] info: [auth:ly00ba] Authenticated user attacker-uuid-999
[2026-01-28 14:29:54] info: [PUT] /api/user/victim-uuid-001 - 403
[2026-01-28 14:29:54] info: [DELETE] /api/user/victim-uuid-001
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:54] info: [auth:ldpej] Starting auth for DELETE /user/victim-uuid-001
[2026-01-28 14:29:54] info: [auth:ldpej] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:ldpej] Token from header: true
[2026-01-28 14:29:54] info: [auth:ldpej] Authenticated user attacker-uuid-999
[2026-01-28 14:29:54] info: [DELETE] /api/user/victim-uuid-001 - 403
[2026-01-28 14:29:54] info: [GET] /api/horses/1
[2026-01-28 14:29:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:54] info: [auth:x7wr08] Starting auth for GET /horses/1
[2026-01-28 14:29:54] info: [auth:x7wr08] Token from cookie: false
[2026-01-28 14:29:54] info: [auth:x7wr08] Token from header: true
[2026-01-28 14:29:54] info: [auth:x7wr08] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 14:29:55] info: [GET] /api/horses/1 - 404
[2026-01-28 14:29:55] info: [PUT] /api/horses/1
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:55] info: [auth:sc5vb] Starting auth for PUT /horses/1
[2026-01-28 14:29:55] info: [auth:sc5vb] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:sc5vb] Token from header: true
[2026-01-28 14:29:55] info: [auth:sc5vb] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [PUT] /api/horses/1 - 403
[2026-01-28 14:29:55] info: [POST] /api/training/train
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB
[2026-01-28 14:29:55] info: [auth:ffbcxa] Starting auth for POST /training/train
[2026-01-28 14:29:55] info: [auth:ffbcxa] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:ffbcxa] Token from header: true
[2026-01-28 14:29:55] info: [auth:ffbcxa] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [POST] /api/training/train - 403
[2026-01-28 14:29:55] info: [POST] /api/competition/enter
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:55] info: [auth:03p7ye] Starting auth for POST /competition/enter
[2026-01-28 14:29:55] info: [auth:03p7ye] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:03p7ye] Token from header: true
[2026-01-28 14:29:55] info: [auth:03p7ye] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [POST] /api/competition/enter - 403
[2026-01-28 14:29:55] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 14:29:55] info: [auth:dwrqr] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:29:55] info: [auth:dwrqr] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:dwrqr] Token from header: true
[2026-01-28 14:29:55] info: [auth:dwrqr] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [auth:yctm5] Starting auth for GET /horse/1/results
[2026-01-28 14:29:55] info: [auth:yctm5] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:yctm5] Token from header: true
[2026-01-28 14:29:55] info: [auth:yctm5] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] warn: [ownership] horse 1 not found or not owned by user attacker-uuid-999
[2026-01-28 14:29:55] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 14:29:55] info: [GET] /api/grooms/user/victim-uuid-001
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1019MB
[2026-01-28 14:29:55] info: [auth:uhpgmw] Starting auth for GET /grooms/user/victim-uuid-001
[2026-01-28 14:29:55] info: [auth:uhpgmw] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:uhpgmw] Token from header: true
[2026-01-28 14:29:55] info: [auth:uhpgmw] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [auth:2t47ge] Starting auth for GET /user/victim-uuid-001
[2026-01-28 14:29:55] info: [auth:2t47ge] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:2t47ge] Token from header: true
[2026-01-28 14:29:55] info: [auth:2t47ge] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] warn: [groomRoutes] Self-access violation: user attacker-uuid-999 attempted to access grooms for user victim-uuid-001
[2026-01-28 14:29:55] info: [GET] /api/grooms/user/victim-uuid-001 - 404
[2026-01-28 14:29:55] info: [POST] /api/grooms/assign
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1026MB
[2026-01-28 14:29:55] info: [auth:4tkv2f] Starting auth for POST /grooms/assign
[2026-01-28 14:29:55] info: [auth:4tkv2f] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:4tkv2f] Token from header: true
[2026-01-28 14:29:55] info: [auth:4tkv2f] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [POST] /api/grooms/assign - 403
[2026-01-28 14:29:55] info: [POST] /api/breeding/breed
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:55] info: [auth:dy3oj] Starting auth for POST /breeding/breed
[2026-01-28 14:29:55] info: [auth:dy3oj] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:dy3oj] Token from header: true
[2026-01-28 14:29:55] info: [auth:dy3oj] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] info: [POST] /api/breeding/breed - 403
[2026-01-28 14:29:55] info: [GET] /api/admin/users
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:55] info: [auth:kgjg4] Starting auth for GET /users
[2026-01-28 14:29:55] info: [auth:kgjg4] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:kgjg4] Token from header: true
[2026-01-28 14:29:55] info: [auth:kgjg4] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access GET /users (requires: admin)
[2026-01-28 14:29:55] info: [GET] /api/admin/users - 403
[2026-01-28 14:29:55] info: [POST] /api/admin/users/ban
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:55] info: [auth:w3z1tn] Starting auth for POST /users/ban
[2026-01-28 14:29:55] info: [auth:w3z1tn] Token from cookie: false
[2026-01-28 14:29:55] info: [auth:w3z1tn] Token from header: true
[2026-01-28 14:29:55] info: [auth:w3z1tn] Authenticated user attacker-uuid-999
[2026-01-28 14:29:55] warn: [auth] User attacker-uuid-999 with role 'user' attempted to access POST /users/ban (requires: admin)
[2026-01-28 14:29:55] info: [POST] /api/admin/users/ban - 403
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1020MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1019MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1023MB
[2026-01-28 14:29:55] info: [POST] /api/auth/register
[2026-01-28 14:29:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2977ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2960ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2920ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2934ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2945ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2983ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2970ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2928ms
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2965ms
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [EmailVerification] Created verification token
[2026-01-28 14:29:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:29:58] info: [authController.register] Verification email sent
[2026-01-28 14:29:58] warn: [Performance] Slow request detected: POST /register took 2959ms
[2026-01-28 14:29:58] info: [POST] /api/auth/register - 201
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1022MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1026MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1025MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1024MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:58] info: [POST] /api/auth/login
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1026MB
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:29:58] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:29:58] error: Error Invalid credentials
[2026-01-28 14:29:58] info: [POST] /api/auth/login - 401
[2026-01-28 14:29:58] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:58] info: [auth:210l] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:58] info: [auth:210l] Token from cookie: false
[2026-01-28 14:29:58] info: [auth:210l] Token from header: true
[2026-01-28 14:29:58] info: [auth:210l] Authenticated user attacker-uuid-999
[2026-01-28 14:29:58] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:58] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1027MB
[2026-01-28 14:29:58] info: [auth:p1uoom] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:58] info: [auth:p1uoom] Token from cookie: false
[2026-01-28 14:29:58] info: [auth:p1uoom] Token from header: true
[2026-01-28 14:29:58] info: [auth:p1uoom] Authenticated user attacker-uuid-999
[2026-01-28 14:29:58] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:58] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB
[2026-01-28 14:29:58] info: [auth:svp6zo] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:58] info: [auth:svp6zo] Token from cookie: false
[2026-01-28 14:29:58] info: [auth:svp6zo] Token from header: true
[2026-01-28 14:29:59] info: [auth:svp6zo] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:29:59] info: [auth:vs9vtp] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:vs9vtp] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:vs9vtp] Token from header: true
[2026-01-28 14:29:59] info: [auth:vs9vtp] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:n7k0ma] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:n7k0ma] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:n7k0ma] Token from header: true
[2026-01-28 14:29:59] info: [auth:n7k0ma] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:59] info: [auth:cegane] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:cegane] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:cegane] Token from header: true
[2026-01-28 14:29:59] info: [auth:cegane] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:59] info: [auth:pkkfa8] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:pkkfa8] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:pkkfa8] Token from header: true
[2026-01-28 14:29:59] info: [auth:pkkfa8] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:59] info: [auth:ej9xg] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:ej9xg] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:ej9xg] Token from header: true
[2026-01-28 14:29:59] info: [auth:ej9xg] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1030MB
[2026-01-28 14:29:59] info: [auth:23o9jl] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:23o9jl] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:23o9jl] Token from header: true
[2026-01-28 14:29:59] info: [auth:23o9jl] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1028MB
[2026-01-28 14:29:59] info: [auth:ydnqf9] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:ydnqf9] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:ydnqf9] Token from header: true
[2026-01-28 14:29:59] info: [auth:ydnqf9] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB
[2026-01-28 14:29:59] info: [auth:1r200f] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:1r200f] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:1r200f] Token from header: true
[2026-01-28 14:29:59] info: [auth:1r200f] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB
[2026-01-28 14:29:59] info: [auth:p3mjlk] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:p3mjlk] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:p3mjlk] Token from header: true
[2026-01-28 14:29:59] info: [auth:p3mjlk] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:59] info: [auth:qdg3v] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:qdg3v] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:qdg3v] Token from header: true
[2026-01-28 14:29:59] info: [auth:qdg3v] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:29:59] info: [auth:4fk0k7] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:4fk0k7] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:4fk0k7] Token from header: true
[2026-01-28 14:29:59] info: [auth:4fk0k7] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:59] info: [auth:p2xjjr] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:p2xjjr] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:p2xjjr] Token from header: true
[2026-01-28 14:29:59] info: [auth:p2xjjr] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:59] info: [auth:25q30d] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:25q30d] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:25q30d] Token from header: true
[2026-01-28 14:29:59] info: [auth:25q30d] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:59] info: [auth:hr2kln] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:hr2kln] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:hr2kln] Token from header: true
[2026-01-28 14:29:59] info: [auth:hr2kln] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1029MB
[2026-01-28 14:29:59] info: [auth:2e5z5s] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:2e5z5s] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:2e5z5s] Token from header: true
[2026-01-28 14:29:59] info: [auth:2e5z5s] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB
[2026-01-28 14:29:59] info: [auth:6uhqq7] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:6uhqq7] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:6uhqq7] Token from header: true
[2026-01-28 14:29:59] info: [auth:6uhqq7] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB
[2026-01-28 14:29:59] info: [auth:xhxf9k] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:xhxf9k] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:xhxf9k] Token from header: true
[2026-01-28 14:29:59] info: [auth:xhxf9k] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB
[2026-01-28 14:29:59] info: [auth:oq16hm] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:oq16hm] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:oq16hm] Token from header: true
[2026-01-28 14:29:59] info: [auth:oq16hm] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:59] info: [auth:5a225] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:5a225] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:5a225] Token from header: true
[2026-01-28 14:29:59] info: [auth:5a225] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:29:59] info: [auth:xczvfw] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:xczvfw] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:xczvfw] Token from header: true
[2026-01-28 14:29:59] info: [auth:xczvfw] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:59] info: [auth:glt3q4] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:glt3q4] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:glt3q4] Token from header: true
[2026-01-28 14:29:59] info: [auth:glt3q4] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:59] info: [auth:we7yga] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:we7yga] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:we7yga] Token from header: true
[2026-01-28 14:29:59] info: [auth:we7yga] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1031MB
[2026-01-28 14:29:59] info: [auth:3gv98h] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:3gv98h] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:3gv98h] Token from header: true
[2026-01-28 14:29:59] info: [auth:3gv98h] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB
[2026-01-28 14:29:59] info: [auth:y2dmw3] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:y2dmw3] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:y2dmw3] Token from header: true
[2026-01-28 14:29:59] info: [auth:y2dmw3] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB
[2026-01-28 14:29:59] info: [auth:inj3wf] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:inj3wf] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:inj3wf] Token from header: true
[2026-01-28 14:29:59] info: [auth:inj3wf] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB
[2026-01-28 14:29:59] info: [auth:5pagpo] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:5pagpo] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:5pagpo] Token from header: true
[2026-01-28 14:29:59] info: [auth:5pagpo] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:29:59] info: [auth:uaw53] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:uaw53] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:uaw53] Token from header: true
[2026-01-28 14:29:59] info: [auth:uaw53] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:c0z9kk] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:c0z9kk] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:c0z9kk] Token from header: true
[2026-01-28 14:29:59] info: [auth:c0z9kk] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB
[2026-01-28 14:29:59] info: [auth:r2a96m] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:r2a96m] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:r2a96m] Token from header: true
[2026-01-28 14:29:59] info: [auth:r2a96m] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:59] info: [auth:ew5mw] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:ew5mw] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:ew5mw] Token from header: true
[2026-01-28 14:29:59] info: [auth:ew5mw] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1032MB
[2026-01-28 14:29:59] info: [auth:6iix5a] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:6iix5a] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:6iix5a] Token from header: true
[2026-01-28 14:29:59] info: [auth:6iix5a] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:29:59] info: [auth:8361im] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:8361im] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:8361im] Token from header: true
[2026-01-28 14:29:59] info: [auth:8361im] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB
[2026-01-28 14:29:59] info: [auth:601gi] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:601gi] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:601gi] Token from header: true
[2026-01-28 14:29:59] info: [auth:601gi] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB
[2026-01-28 14:29:59] info: [auth:ehshhj] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:ehshhj] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:ehshhj] Token from header: true
[2026-01-28 14:29:59] info: [auth:ehshhj] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB
[2026-01-28 14:29:59] info: [auth:j5mlre] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:j5mlre] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:j5mlre] Token from header: true
[2026-01-28 14:29:59] info: [auth:j5mlre] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:29:59] info: [auth:9o64ga] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:9o64ga] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:9o64ga] Token from header: true
[2026-01-28 14:29:59] info: [auth:9o64ga] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:ercejg] Starting auth for PUT /user/attacker-uuid-999
[2026-01-28 14:29:59] info: [auth:ercejg] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:ercejg] Token from header: true
[2026-01-28 14:29:59] info: [auth:ercejg] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] info: [PUT] /api/user/attacker-uuid-999 - 403
[2026-01-28 14:29:59] info: [GET] /api/user/attacker-uuid-999/progress
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1033MB
[2026-01-28 14:29:59] info: [auth:yizuhn] Starting auth for GET /user/attacker-uuid-999/progress
[2026-01-28 14:29:59] info: [auth:yizuhn] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:yizuhn] Token from header: true
[2026-01-28 14:29:59] info: [auth:yizuhn] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] warn: 404 - Route not found: GET /api/user/attacker-uuid-999/progress from ::ffff:127.0.0.1
[2026-01-28 14:29:59] info: [GET] /api/user/attacker-uuid-999/progress - 404
[2026-01-28 14:29:59] info: [POST] /api/auth/register
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] warn: [Validation] Input validation failed
[2026-01-28 14:29:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:29:59] info: [POST] /api/auth/register
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:29:59] warn: [Validation] Input validation failed
[2026-01-28 14:29:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:29:59] info: [POST] /api/auth/register
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:29:59] warn: [Validation] Input validation failed
[2026-01-28 14:29:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:29:59] info: [POST] /api/auth/register
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1034MB
[2026-01-28 14:29:59] warn: [Validation] Input validation failed
[2026-01-28 14:29:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:29:59] info: [POST] /api/auth/register
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB
[2026-01-28 14:29:59] warn: [Validation] Input validation failed
[2026-01-28 14:29:59] info: [POST] /api/auth/register - 400
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:vx7gs9] Starting auth for PUT /profile
[2026-01-28 14:29:59] info: [auth:vx7gs9] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:vx7gs9] Token from header: true
[2026-01-28 14:29:59] info: [auth:vx7gs9] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:29:59] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:29:59] error: Error At least one field is required
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:bk9qld] Starting auth for PUT /profile
[2026-01-28 14:29:59] info: [auth:bk9qld] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:bk9qld] Token from header: true
[2026-01-28 14:29:59] info: [auth:bk9qld] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:29:59] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:29:59] error: Error At least one field is required
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:q10gz] Starting auth for PUT /profile
[2026-01-28 14:29:59] info: [auth:q10gz] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:q10gz] Token from header: true
[2026-01-28 14:29:59] info: [auth:q10gz] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:29:59] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:29:59] error: Error At least one field is required
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:q09yxr] Starting auth for PUT /profile
[2026-01-28 14:29:59] info: [auth:q09yxr] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:q09yxr] Token from header: true
[2026-01-28 14:29:59] info: [auth:q09yxr] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:29:59] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:29:59] error: Error At least one field is required
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:29:59] info: [PUT] /api/auth/profile
[2026-01-28 14:29:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB
[2026-01-28 14:29:59] info: [auth:kghia9] Starting auth for PUT /profile
[2026-01-28 14:29:59] info: [auth:kghia9] Token from cookie: false
[2026-01-28 14:29:59] info: [auth:kghia9] Token from header: true
[2026-01-28 14:29:59] info: [auth:kghia9] Authenticated user attacker-uuid-999
[2026-01-28 14:29:59] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:29:59] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:00] error: Error At least one field is required
[2026-01-28 14:30:00] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:30:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:00] info: [EmailVerification] Created verification token
[2026-01-28 14:30:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:00] info: [authController.register] Verification email sent
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:00] info: [PUT] /api/auth/profile
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB
[2026-01-28 14:30:00] info: [auth:6zq61s] Starting auth for PUT /profile
[2026-01-28 14:30:00] info: [auth:6zq61s] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:6zq61s] Token from header: true
[2026-01-28 14:30:00] info: [auth:6zq61s] Authenticated user attacker-uuid-999
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:00] info: [PUT] /api/auth/profile
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1048MB
[2026-01-28 14:30:00] info: [auth:nmzoxa] Starting auth for PUT /profile
[2026-01-28 14:30:00] info: [auth:nmzoxa] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:nmzoxa] Token from header: true
[2026-01-28 14:30:00] info: [auth:nmzoxa] Authenticated user attacker-uuid-999
[2026-01-28 14:30:00] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:00] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:00] error: Error At least one field is required
[2026-01-28 14:30:00] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:30:00] info: [auth:iijj4t] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:iijj4t] Token from cookie: false
[2026-01-28 14:30:00] warn: [auth:iijj4t] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/horses/1
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:30:00] info: [auth:nmdrgr] Starting auth for GET /horses/1
[2026-01-28 14:30:00] info: [auth:nmdrgr] Token from cookie: false
[2026-01-28 14:30:00] warn: [auth:nmdrgr] Access token is required for GET /horses/1 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/horses/1 - 401
[2026-01-28 14:30:00] info: [POST] /api/competition/enter
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:30:00] info: [auth:fjij9o] Starting auth for POST /competition/enter
[2026-01-28 14:30:00] info: [auth:fjij9o] Token from cookie: false
[2026-01-28 14:30:00] warn: [auth:fjij9o] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [POST] /api/competition/enter - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:30:00] info: [auth:pu0x1] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:pu0x1] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:pu0x1] Token from header: true
[2026-01-28 14:30:00] warn: [auth:pu0x1] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB
[2026-01-28 14:30:00] info: [auth:blo47o] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:blo47o] Token from cookie: false
[2026-01-28 14:30:00] warn: [auth:blo47o] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB
[2026-01-28 14:30:00] info: [auth:57r1m4] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:57r1m4] Token from cookie: false
[2026-01-28 14:30:00] warn: [auth:57r1m4] Access token is required for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1044MB
[2026-01-28 14:30:00] info: [auth:rk3an] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:rk3an] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:rk3an] Token from header: true
[2026-01-28 14:30:00] warn: [auth:rk3an] Verify failed: invalid signature
[2026-01-28 14:30:00] warn: [auth:rk3an] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB
[2026-01-28 14:30:00] info: [auth:232yi] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:232yi] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:232yi] Token from header: true
[2026-01-28 14:30:00] warn: [auth:232yi] Verify failed: invalid signature
[2026-01-28 14:30:00] warn: [auth:232yi] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1050MB
[2026-01-28 14:30:00] info: [auth:2hpics] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:2hpics] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:2hpics] Token from header: true
[2026-01-28 14:30:00] warn: [auth:2hpics] Verify failed: invalid signature
[2026-01-28 14:30:00] warn: [auth:2hpics] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:30:00] info: [auth:op4hvr] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:op4hvr] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:op4hvr] Token from header: true
[2026-01-28 14:30:00] warn: [auth:op4hvr] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:30:00] info: [auth:vi6mh] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:vi6mh] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:vi6mh] Token from header: true
[2026-01-28 14:30:00] warn: [auth:vi6mh] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB
[2026-01-28 14:30:00] info: [auth:ydzcwe] Starting auth for GET /user/attacker-uuid-999
[2026-01-28 14:30:00] info: [auth:ydzcwe] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:ydzcwe] Token from header: true
[2026-01-28 14:30:00] warn: [auth:ydzcwe] Invalid or expired token for GET /user/attacker-uuid-999 from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/attacker-uuid-999 - 401
[2026-01-28 14:30:00] info: [GET] /api/user/invalid-uuid-format
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB
[2026-01-28 14:30:00] info: [auth:wp76ai] Starting auth for GET /user/invalid-uuid-format
[2026-01-28 14:30:00] info: [auth:wp76ai] Token from cookie: false
[2026-01-28 14:30:00] info: [auth:wp76ai] Token from header: true
[2026-01-28 14:30:00] info: [auth:wp76ai] Authenticated user attacker-uuid-999
[2026-01-28 14:30:00] warn: 404 - Route not found: GET /api/user/invalid-uuid-format from ::ffff:127.0.0.1
[2026-01-28 14:30:00] info: [GET] /api/user/invalid-uuid-format - 404
[2026-01-28 14:30:00] info: [POST] /api/auth/register
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB
[2026-01-28 14:30:00] warn: [Validation] Input validation failed
[2026-01-28 14:30:00] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:00] info: [POST] /api/auth/login
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1051MB
[2026-01-28 14:30:00] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:30:00] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:30:00] error: Error Invalid credentials
[2026-01-28 14:30:00] info: [POST] /api/auth/login - 401
[2026-01-28 14:30:00] info: [POST] /api/auth/login
[2026-01-28 14:30:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB
[2026-01-28 14:30:00] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:30:00] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:30:00] error: Error Invalid credentials
[2026-01-28 14:30:00] info: [POST] /api/auth/login - 401
PASS __tests__/integration/security-attack-simulation.test.mjs (7.593 s)
  Security Attack Simulation Tests
    IDOR (Insecure Direct Object Reference) Attack Simulation
      User Resource IDOR Attacks
        ‚àö should block access to another user's profile (46 ms)
        ‚àö should block access to another user's progress data (32 ms)
        ‚àö should block access to another user's activity feed (28 ms)
        ‚àö should block modification of another user's profile (38 ms)
        ‚àö should block deletion of another user's account (30 ms)
      Horse Resource IDOR Attacks
        ‚àö should block access to another user's horse details (190 ms)
        ‚àö should block modification of another user's horse (27 ms)
        ‚àö should block training another user's horse (30 ms)
      Competition Resource IDOR Attacks
        ‚àö should block entering another user's horse in competition (31 ms)
        ‚àö should block accessing another user's competition results (33 ms)
      Groom Resource IDOR Attacks
        ‚àö should block accessing another user's groom list (38 ms)
        ‚àö should block assigning another user's groom (28 ms)
      Breeding Resource IDOR Attacks
        ‚àö should block breeding with another user's horse without permission (28 ms)
      Privilege Escalation Attempts
        ‚àö should block accessing admin endpoints with user token (30 ms)
        ‚àö should block admin operations with user token (31 ms)
    Rate Limiting Bypass Attempt Simulation
      Rapid-Fire Attack Simulation
        ‚àö should have rate limiting configured on registration endpoint (3121 ms)
        ‚àö should have rate limiting configured on login endpoint (brute force protection) (374 ms)
        ‚àö should have rate limiting configured on profile update endpoint (926 ms)
      Rate Limit Header Validation
        ‚àö should include proper rate limit headers in all responses (43 ms)
    Input Validation Fuzzing Simulation
      SQL Injection Attempts
        ‚àö should block SQL injection in email field (74 ms)
        ‚àö should block SQL injection in username field (17 ms)
      XSS (Cross-Site Scripting) Attempts
        ‚àö should sanitize XSS payloads in bio field (122 ms)
        ‚àö should sanitize XSS payloads in name fields (323 ms)
      Buffer Overflow Attempts
        ‚àö should reject extremely long email addresses (19 ms)
        ‚àö should reject extremely long usernames (21 ms)
        ‚àö should reject extremely long passwords (18 ms)
        ‚àö should reject extremely long bio text (24 ms)
      Special Character Injection
        ‚àö should handle null bytes in input (16 ms)
        ‚àö should handle Unicode control characters (25 ms)
    Authentication Bypass Attempt Simulation
      Missing Authentication Token
        ‚àö should block access to protected user endpoints without token (22 ms)
        ‚àö should block access to protected horse endpoints without token (27 ms)
        ‚àö should block access to protected competition endpoints without token (22 ms)
      Invalid Authentication Token
        ‚àö should reject malformed JWT tokens (23 ms)
        ‚àö should reject empty Bearer token (21 ms)
        ‚àö should reject token without Bearer prefix (23 ms)
      Token Manipulation Attempts
        ‚àö should reject token with modified payload (27 ms)
        ‚àö should reject token with modified signature (27 ms)
      Session Fixation Attempts
        ‚àö should not accept hardcoded or predictable tokens (97 ms)
    Information Disclosure Prevention
      ‚àö should not leak database errors in responses (30 ms)
      ‚àö should not leak stack traces in production (21 ms)
      ‚àö should not reveal whether username exists during login (41 ms)

[2026-01-28 14:30:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:01] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:01] info: [EmailVerification] Created verification token
[2026-01-28 14:30:01] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:01] info: [authController.register] Verification email sent
[2026-01-28 14:30:02] info: [auth:9118fs] Starting auth for GET /api/test/success
[2026-01-28 14:30:02] info: [auth:9118fs] Token from cookie: false
[2026-01-28 14:30:02] info: [auth:9118fs] Token from header: true
[2026-01-28 14:30:02] info: [auth:9118fs] Authenticated user 8f7a4928-0c63-4843-acff-2ac1d5a2da59
[2026-01-28 14:30:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:02] info: [EmailVerification] Created verification token
[2026-01-28 14:30:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:02] info: [authController.register] Verification email sent
[2026-01-28 14:30:02] info: [auth:wtc51d] Starting auth for GET /api/test/error
[2026-01-28 14:30:02] info: [auth:wtc51d] Token from cookie: false
[2026-01-28 14:30:02] info: [auth:wtc51d] Token from header: true
[2026-01-28 14:30:02] info: [auth:wtc51d] Authenticated user f513d223-97a9-4f4d-a18d-eaed91189f95
[2026-01-28 14:30:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:02] info: [EmailVerification] Created verification token
[2026-01-28 14:30:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:02] info: [authController.register] Verification email sent
[2026-01-28 14:30:02] info: [auth:0it1o9] Starting auth for GET /api/test/not-found
[2026-01-28 14:30:02] info: [auth:0it1o9] Token from cookie: false
[2026-01-28 14:30:02] info: [auth:0it1o9] Token from header: true
[2026-01-28 14:30:02] info: [auth:0it1o9] Authenticated user 9ce4180e-75c9-490b-bf05-a7f20f40b2a7
[2026-01-28 14:30:02] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:02] info: [EmailVerification] Created verification token
[2026-01-28 14:30:02] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:02] info: [authController.register] Verification email sent
[2026-01-28 14:30:02] info: [auth:7fqy4f] Starting auth for GET /api/test/validation-error
[2026-01-28 14:30:02] info: [auth:7fqy4f] Token from cookie: false
[2026-01-28 14:30:02] info: [auth:7fqy4f] Token from header: true
[2026-01-28 14:30:02] info: [auth:7fqy4f] Authenticated user d735c98c-2ade-4a4e-a0c0-8ac1e34b7ca5
[2026-01-28 14:30:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:03] info: [EmailVerification] Created verification token
[2026-01-28 14:30:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:03] info: [authController.register] Verification email sent
[2026-01-28 14:30:03] info: [auth:khfzf] Starting auth for GET /api/test/paginated
[2026-01-28 14:30:03] info: [auth:khfzf] Token from cookie: false
[2026-01-28 14:30:03] info: [auth:khfzf] Token from header: true
[2026-01-28 14:30:03] info: [auth:khfzf] Authenticated user 3a88f61f-b4fd-4ac6-8cef-5f4232d7316f
[2026-01-28 14:30:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:03] info: [EmailVerification] Created verification token
[2026-01-28 14:30:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:03] info: [authController.register] Verification email sent
[2026-01-28 14:30:03] info: [auth:ljjtb] Starting auth for GET /api/test/paginated
[2026-01-28 14:30:03] info: [auth:ljjtb] Token from cookie: false
[2026-01-28 14:30:03] info: [auth:ljjtb] Token from header: true
[2026-01-28 14:30:03] info: [auth:ljjtb] Authenticated user 2f85242e-b009-4a64-a9c2-3603d2d0157c
[2026-01-28 14:30:03] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:03] info: [EmailVerification] Created verification token
[2026-01-28 14:30:03] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:03] info: [authController.register] Verification email sent
[2026-01-28 14:30:03] info: [auth:4rvqio] Starting auth for GET /api/test/success
[2026-01-28 14:30:03] info: [auth:4rvqio] Token from cookie: false
[2026-01-28 14:30:03] info: [auth:4rvqio] Token from header: true
[2026-01-28 14:30:03] info: [auth:4rvqio] Authenticated user c40e8e0b-db0d-4763-bb3e-8a3b30bcbbdf
[2026-01-28 14:30:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:04] info: [EmailVerification] Created verification token
[2026-01-28 14:30:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:04] info: [authController.register] Verification email sent
[2026-01-28 14:30:04] info: [auth:myvkp5] Starting auth for GET /api/test/large-data
[2026-01-28 14:30:04] info: [auth:myvkp5] Token from cookie: false
[2026-01-28 14:30:04] info: [auth:myvkp5] Token from header: true
[2026-01-28 14:30:04] info: [auth:myvkp5] Authenticated user 4b9497e6-0dec-4183-8cf9-3b6169529fd0
[2026-01-28 14:30:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:04] info: [EmailVerification] Created verification token
[2026-01-28 14:30:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:04] info: [authController.register] Verification email sent
[2026-01-28 14:30:04] info: [auth:atn2m9] Starting auth for GET /api/test/field-selection
[2026-01-28 14:30:04] info: [auth:atn2m9] Token from cookie: false
[2026-01-28 14:30:04] info: [auth:atn2m9] Token from header: true
[2026-01-28 14:30:04] info: [auth:atn2m9] Authenticated user d80f2f89-c5f8-4774-824a-94f93f899b09
[2026-01-28 14:30:04] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:04] info: [EmailVerification] Created verification token
[2026-01-28 14:30:04] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:04] info: [authController.register] Verification email sent
[2026-01-28 14:30:04] info: [auth:g9iemw] Starting auth for GET /api/test/field-selection
[2026-01-28 14:30:04] info: [auth:g9iemw] Token from cookie: false
[2026-01-28 14:30:04] info: [auth:g9iemw] Token from header: true
[2026-01-28 14:30:04] info: [auth:g9iemw] Authenticated user cb70a047-2865-4938-9a49-4d7f73bc029d
[2026-01-28 14:30:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:05] info: [EmailVerification] Created verification token
[2026-01-28 14:30:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:05] info: [authController.register] Verification email sent
[2026-01-28 14:30:05] info: [auth:ci9jka] Starting auth for GET /api/test/etag
[2026-01-28 14:30:05] info: [auth:ci9jka] Token from cookie: false
[2026-01-28 14:30:05] info: [auth:ci9jka] Token from header: true
[2026-01-28 14:30:05] info: [auth:ci9jka] Authenticated user 4cf90163-60f4-4f62-ad91-8daefa52adb0
[2026-01-28 14:30:05] info: [auth:vedpxt] Starting auth for GET /api/test/etag
[2026-01-28 14:30:05] info: [auth:vedpxt] Token from cookie: false
[2026-01-28 14:30:05] info: [auth:vedpxt] Token from header: true
[2026-01-28 14:30:05] info: [auth:vedpxt] Authenticated user 4cf90163-60f4-4f62-ad91-8daefa52adb0
[2026-01-28 14:30:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:05] info: [EmailVerification] Created verification token
[2026-01-28 14:30:05] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:05] info: [authController.register] Verification email sent
[2026-01-28 14:30:05] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:05] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:06] info: [EmailVerification] Created verification token
[2026-01-28 14:30:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:06] info: [authController.register] Verification email sent
[2026-01-28 14:30:06] info: [health] Health check passed
[2026-01-28 14:30:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:06] info: [EmailVerification] Created verification token
[2026-01-28 14:30:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:06] info: [authController.register] Verification email sent
[2026-01-28 14:30:06] info: [auth:dl8wvb] Starting auth for GET /api/test/success
[2026-01-28 14:30:06] info: [auth:dl8wvb] Token from cookie: false
[2026-01-28 14:30:06] warn: [auth:dl8wvb] Access token is required for GET /api/test/success from ::ffff:127.0.0.1
[2026-01-28 14:30:06] info: [auth:hn3no5] Starting auth for GET /api/test/error
[2026-01-28 14:30:06] info: [auth:hn3no5] Token from cookie: false
[2026-01-28 14:30:06] warn: [auth:hn3no5] Access token is required for GET /api/test/error from ::ffff:127.0.0.1
[2026-01-28 14:30:06] info: [auth:slkat4] Starting auth for GET /api/test/large-data
[2026-01-28 14:30:06] info: [auth:slkat4] Token from cookie: false
[2026-01-28 14:30:06] warn: [auth:slkat4] Access token is required for GET /api/test/large-data from ::ffff:127.0.0.1
[2026-01-28 14:30:06] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:06] info: [EmailVerification] Created verification token
[2026-01-28 14:30:06] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:06] info: [authController.register] Verification email sent
[2026-01-28 14:30:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:07] info: [EmailVerification] Created verification token
[2026-01-28 14:30:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:07] info: [authController.register] Verification email sent
[2026-01-28 14:30:07] warn: [Validation] Input validation failed
[2026-01-28 14:30:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:07] info: [EmailVerification] Created verification token
[2026-01-28 14:30:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:07] info: [authController.register] Verification email sent
[2026-01-28 14:30:07] info: [auth:ovskbl] Starting auth for GET /api/test/success
[2026-01-28 14:30:07] info: [auth:ovskbl] Token from cookie: false
[2026-01-28 14:30:07] info: [auth:ovskbl] Token from header: true
[2026-01-28 14:30:07] info: [auth:ovskbl] Authenticated user c9d0f12d-c7dc-4a49-b428-ed753dabb7d7
[2026-01-28 14:30:07] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:07] info: [EmailVerification] Created verification token
[2026-01-28 14:30:07] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:07] info: [authController.register] Verification email sent
[2026-01-28 14:30:07] info: [auth:n3dcaa] Starting auth for GET /api/test/large-data
[2026-01-28 14:30:07] info: [auth:n3dcaa] Token from cookie: false
[2026-01-28 14:30:07] info: [auth:n3dcaa] Token from header: true
[2026-01-28 14:30:07] info: [auth:n3dcaa] Authenticated user a0485852-1edb-48d1-8c7b-4c50863e7e4e
PASS tests/integration/api-response-integration.test.mjs (6.922 s)
  üîÑ API Response Integration Tests
    üìã Response Format Standardization
      ‚àö should provide consistent success response format (508 ms)
      ‚àö should provide consistent error response format (323 ms)
      ‚àö should provide consistent not found response format (316 ms)
      ‚àö should provide consistent validation error response format (320 ms)
    üìä Pagination Response Validation
      ‚àö should provide consistent paginated response format (320 ms)
      ‚àö should handle pagination edge cases correctly (334 ms)
    ‚ö° Performance Monitoring Integration
      ‚àö should include performance headers in responses (318 ms)
      ‚àö should monitor large response performance (328 ms)
    üîß Response Optimization Features
      ‚àö should support field selection optimization (313 ms)
      ‚àö should support field exclusion optimization (316 ms)
      ‚àö should generate and validate ETags correctly (331 ms)
    üîó Cross-System Response Consistency
      ‚àö should maintain consistent response format across auth endpoints (583 ms)
      ‚àö should maintain consistent response format across health endpoints (323 ms)
      ‚àö should handle authentication errors consistently (343 ms)
    üõ°Ô∏è Error Handling Consistency
      ‚àö should handle invalid JSON gracefully (309 ms)
      ‚àö should handle validation errors consistently (308 ms)
    üìà Response Performance Benchmarking
      ‚àö should meet performance benchmarks for simple responses (310 ms)
      ‚àö should meet performance benchmarks for large responses (328 ms)

[2026-01-28 14:30:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:30:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:30:08] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:08] info: [POST] /api/auth/register
[2026-01-28 14:30:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1135MB
[2026-01-28 14:30:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:09] info: [EmailVerification] Created verification token
[2026-01-28 14:30:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:09] info: [authController.register] Verification email sent
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:09] info: [POST] /api/auth/register
[2026-01-28 14:30:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1144MB
[2026-01-28 14:30:09] warn: [Validation] Input validation failed
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:09] info: [POST] /api/auth/register
[2026-01-28 14:30:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1139MB
[2026-01-28 14:30:09] warn: [Validation] Input validation failed
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:09] info: [POST] /api/auth/register
[2026-01-28 14:30:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1135MB
[2026-01-28 14:30:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:09] info: [EmailVerification] Created verification token
[2026-01-28 14:30:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:09] info: [authController.register] Verification email sent
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:09] info: [POST] /api/auth/register
[2026-01-28 14:30:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 14:30:09] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:30:09] error: [POST] /api/auth/register - ERROR
[2026-01-28 14:30:09] error: Error User with this email or username already exists
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:09] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:09] info: [POST] /api/auth/register
[2026-01-28 14:30:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1136MB
[2026-01-28 14:30:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:09] info: [EmailVerification] Created verification token
[2026-01-28 14:30:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:09] info: [authController.register] Verification email sent
[2026-01-28 14:30:09] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:10] info: [POST] /api/auth/login
[2026-01-28 14:30:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1138MB
[2026-01-28 14:30:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:10] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:10] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:10] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:10] info: [POST] /api/auth/register
[2026-01-28 14:30:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1136MB
[2026-01-28 14:30:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:10] info: [EmailVerification] Created verification token
[2026-01-28 14:30:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:10] info: [authController.register] Verification email sent
[2026-01-28 14:30:10] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:10] info: [POST] /api/auth/login
[2026-01-28 14:30:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1136MB
[2026-01-28 14:30:10] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:30:10] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:30:10] error: Error Invalid credentials
[2026-01-28 14:30:10] info: [POST] /api/auth/login - 401
[2026-01-28 14:30:10] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:10] info: [POST] /api/auth/register
[2026-01-28 14:30:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 14:30:10] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:10] info: [EmailVerification] Created verification token
[2026-01-28 14:30:10] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:10] info: [authController.register] Verification email sent
[2026-01-28 14:30:10] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:10] info: [POST] /api/auth/login
[2026-01-28 14:30:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 14:30:11] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:30:11] error: [POST] /api/auth/login - ERROR
[2026-01-28 14:30:11] error: Error Invalid credentials
[2026-01-28 14:30:11] info: [POST] /api/auth/login - 401
[2026-01-28 14:30:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:11] info: [POST] /api/auth/register
[2026-01-28 14:30:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 14:30:11] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:11] info: [EmailVerification] Created verification token
[2026-01-28 14:30:11] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:11] info: [authController.register] Verification email sent
[2026-01-28 14:30:11] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:11] info: [POST] /api/auth/login
[2026-01-28 14:30:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1137MB
[2026-01-28 14:30:11] warn: [Validation] Input validation failed
[2026-01-28 14:30:11] info: [POST] /api/auth/login - 400
[2026-01-28 14:30:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:11] info: [POST] /api/auth/register
[2026-01-28 14:30:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 14:30:11] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:11] info: [EmailVerification] Created verification token
[2026-01-28 14:30:11] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:11] info: [authController.register] Verification email sent
[2026-01-28 14:30:11] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:11] info: [POST] /api/auth/refresh
[2026-01-28 14:30:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 14:30:11] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:11] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:11] info: [POST] /api/auth/refresh - 200
[2026-01-28 14:30:11] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:11] info: [POST] /api/auth/register
[2026-01-28 14:30:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1145MB
[2026-01-28 14:30:12] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:12] info: [EmailVerification] Created verification token
[2026-01-28 14:30:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:12] info: [authController.register] Verification email sent
[2026-01-28 14:30:12] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:12] info: [POST] /api/auth/refresh
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1147MB
[2026-01-28 14:30:12] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:12] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:12] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:12] error: [POST] /api/auth/refresh - ERROR
[2026-01-28 14:30:12] error: Error Token reuse detected - please login again
[2026-01-28 14:30:12] info: [POST] /api/auth/refresh - 401
[2026-01-28 14:30:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:12] info: [POST] /api/auth/register
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 14:30:12] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:12] info: [EmailVerification] Created verification token
[2026-01-28 14:30:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:12] info: [authController.register] Verification email sent
[2026-01-28 14:30:12] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:12] info: [POST] /api/auth/refresh
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1148MB
[2026-01-28 14:30:12] warn: [Validation] Input validation failed
[2026-01-28 14:30:12] info: [POST] /api/auth/refresh - 400
[2026-01-28 14:30:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:12] info: [POST] /api/auth/register
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1143MB
[2026-01-28 14:30:12] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:12] info: [EmailVerification] Created verification token
[2026-01-28 14:30:12] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:12] info: [authController.register] Verification email sent
[2026-01-28 14:30:12] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:12] info: [GET] /api/auth/me
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1144MB
[2026-01-28 14:30:12] info: [auth:yg0wcs] Starting auth for GET /me
[2026-01-28 14:30:12] info: [auth:yg0wcs] Token from cookie: false
[2026-01-28 14:30:12] info: [auth:yg0wcs] Token from header: true
[2026-01-28 14:30:12] info: [auth:yg0wcs] Authenticated user c24476ef-8240-4ffe-8a2c-9e5a45bd7398
[2026-01-28 14:30:12] info: [GET] /api/auth/me - 200
[2026-01-28 14:30:12] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:12] info: [POST] /api/auth/register
[2026-01-28 14:30:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 14:30:13] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:13] info: [EmailVerification] Created verification token
[2026-01-28 14:30:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:13] info: [authController.register] Verification email sent
[2026-01-28 14:30:13] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:13] info: [GET] /api/auth/me
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1141MB
[2026-01-28 14:30:13] info: [auth:3rl1sk] Starting auth for GET /me
[2026-01-28 14:30:13] info: [auth:3rl1sk] Token from cookie: false
[2026-01-28 14:30:13] warn: [auth:3rl1sk] Access token is required for GET /me from ::ffff:127.0.0.1
[2026-01-28 14:30:13] info: [GET] /api/auth/me - 401
[2026-01-28 14:30:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:13] info: [POST] /api/auth/register
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1140MB
[2026-01-28 14:30:13] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:13] info: [EmailVerification] Created verification token
[2026-01-28 14:30:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:13] info: [authController.register] Verification email sent
[2026-01-28 14:30:13] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:13] info: [GET] /api/auth/me
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1140MB
[2026-01-28 14:30:13] info: [auth:96o3zu] Starting auth for GET /me
[2026-01-28 14:30:13] info: [auth:96o3zu] Token from cookie: false
[2026-01-28 14:30:13] info: [auth:96o3zu] Token from header: true
[2026-01-28 14:30:13] warn: [auth:96o3zu] Invalid or expired token for GET /me from ::ffff:127.0.0.1
[2026-01-28 14:30:13] info: [GET] /api/auth/me - 401
[2026-01-28 14:30:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:13] info: [POST] /api/auth/register
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 14:30:13] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:13] info: [EmailVerification] Created verification token
[2026-01-28 14:30:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:13] info: [authController.register] Verification email sent
[2026-01-28 14:30:13] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:13] info: [POST] /api/auth/logout
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:30:13] info: [auth:8249fa] Starting auth for POST /logout
[2026-01-28 14:30:13] info: [auth:8249fa] Token from cookie: false
[2026-01-28 14:30:13] info: [auth:8249fa] Token from header: true
[2026-01-28 14:30:13] info: [auth:8249fa] Authenticated user 56a08fdf-1f11-4276-8e57-e244332939b7
[2026-01-28 14:30:13] info: [POST] /api/auth/logout - 200
[2026-01-28 14:30:13] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:30:13] info: [POST] /api/auth/register
[2026-01-28 14:30:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB
[2026-01-28 14:30:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:14] info: [EmailVerification] Created verification token
[2026-01-28 14:30:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:14] info: [authController.register] Verification email sent
[2026-01-28 14:30:14] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:14] info: [POST] /api/auth/logout
[2026-01-28 14:30:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB
[2026-01-28 14:30:14] info: [auth:0jyhe] Starting auth for POST /logout
[2026-01-28 14:30:14] info: [auth:0jyhe] Token from cookie: false
[2026-01-28 14:30:14] warn: [auth:0jyhe] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 14:30:14] info: [POST] /api/auth/logout - 401
PASS tests/auth.test.mjs (6.426 s)
  üîê INTEGRATION: Authentication System - User Registration & Session Management
    POST /api/auth/register
      ‚àö should register a new user and player successfully (410 ms)
      ‚àö should reject registration with invalid email (20 ms)
      ‚àö should reject registration with weak password (17 ms)
      ‚àö should reject duplicate email registration (331 ms)
    POST /api/auth/login
      ‚àö should login successfully with valid credentials (605 ms)
      ‚àö should reject login with invalid email (330 ms)
      ‚àö should reject login with invalid password (595 ms)
      ‚àö should reject login with malformed email (324 ms)
    POST /api/auth/refresh
      ‚àö should refresh token successfully with valid refresh token (340 ms)
      ‚àö should reject refresh with invalid token (327 ms)
      ‚àö should reject refresh without token (317 ms)
    GET /api/auth/me
      ‚àö should get user profile successfully with valid token (328 ms)
      ‚àö should reject profile request without token (321 ms)
      ‚àö should reject profile request with invalid token (319 ms)
    POST /api/auth/logout
      ‚àö should logout successfully with valid token (340 ms)
      ‚àö should reject logout without token (341 ms)

[2026-01-28 14:30:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:14] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:14] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:15] info: [EmailVerification] Created verification token
[2026-01-28 14:30:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:15] info: [authController.register] Verification email sent
[2026-01-28 14:30:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:15] info: [EmailVerification] Created verification token
[2026-01-28 14:30:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:15] info: [authController.register] Verification email sent
[2026-01-28 14:30:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:15] info: [EmailVerification] Created verification token
[2026-01-28 14:30:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:15] info: [authController.register] Verification email sent
[2026-01-28 14:30:15] info: [health] Health check passed
[2026-01-28 14:30:16] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:16] info: [EmailVerification] Created verification token
[2026-01-28 14:30:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:16] info: [authController.register] Verification email sent
[2026-01-28 14:30:16] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:16] info: [EmailVerification] Created verification token
[2026-01-28 14:30:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:16] info: [authController.register] Verification email sent
[2026-01-28 14:30:16] info: [auth:8vg4] Starting auth for GET /health
[2026-01-28 14:30:16] info: [auth:8vg4] Token from cookie: false
[2026-01-28 14:30:16] info: [auth:8vg4] Token from header: true
[2026-01-28 14:30:16] info: [auth:8vg4] Authenticated user 76750812-1f92-4758-847c-e40981f3282c
[2026-01-28 14:30:16] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:30:16] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:16] info: [EmailVerification] Created verification token
[2026-01-28 14:30:16] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:16] info: [authController.register] Verification email sent
[2026-01-28 14:30:16] info: [auth:berc0i] Starting auth for GET /health
[2026-01-28 14:30:16] info: [auth:berc0i] Token from cookie: false
[2026-01-28 14:30:16] info: [auth:berc0i] Token from header: true
[2026-01-28 14:30:16] info: [auth:berc0i] Authenticated user 33f4a972-442c-4892-93f5-c03d60dd05af
[2026-01-28 14:30:16] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:30:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:17] info: [EmailVerification] Created verification token
[2026-01-28 14:30:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:17] info: [authController.register] Verification email sent
[2026-01-28 14:30:17] info: [auth:zmwsk] Starting auth for GET /health
[2026-01-28 14:30:17] info: [auth:zmwsk] Token from cookie: false
[2026-01-28 14:30:17] info: [auth:zmwsk] Token from header: true
[2026-01-28 14:30:17] info: [auth:zmwsk] Authenticated user 8e7aa12f-3830-4336-9176-e2a7c39db53a
[2026-01-28 14:30:17] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:30:17] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:30:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:17] info: [EmailVerification] Created verification token
[2026-01-28 14:30:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:17] info: [authController.register] Verification email sent
[2026-01-28 14:30:17] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:30:17] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:30:17] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:30:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:17] info: [EmailVerification] Created verification token
[2026-01-28 14:30:17] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:17] info: [authController.register] Verification email sent
[2026-01-28 14:30:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:18] info: [EmailVerification] Created verification token
[2026-01-28 14:30:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:18] info: [authController.register] Verification email sent
[2026-01-28 14:30:18] info: [health] Health check passed
[2026-01-28 14:30:18] info: [auth:tsk0us] Starting auth for GET /health
[2026-01-28 14:30:18] info: [auth:tsk0us] Token from cookie: false
[2026-01-28 14:30:18] info: [auth:tsk0us] Token from header: true
[2026-01-28 14:30:18] info: [auth:tsk0us] Authenticated user dc51b51e-5f64-48eb-9357-71db0a052fe7
[2026-01-28 14:30:18] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:30:18] info: [auth:rebusl] Starting auth for GET /health
[2026-01-28 14:30:18] info: [auth:rebusl] Token from cookie: false
[2026-01-28 14:30:18] info: [auth:rebusl] Token from header: true
[2026-01-28 14:30:18] info: [auth:rebusl] Authenticated user dc51b51e-5f64-48eb-9357-71db0a052fe7
[2026-01-28 14:30:18] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:30:18] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:30:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:18] info: [EmailVerification] Created verification token
[2026-01-28 14:30:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:18] info: [authController.register] Verification email sent
[2026-01-28 14:30:18] info: [auth:b7z5op] Starting auth for GET /health
[2026-01-28 14:30:18] info: [auth:b7z5op] Token from cookie: false
[2026-01-28 14:30:18] info: [auth:b7z5op] Token from header: true
[2026-01-28 14:30:18] info: [auth:b7z5op] Authenticated user d6afb8e8-e7ce-4a65-9c8f-0d16f299e17e
[2026-01-28 14:30:18] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:30:18] info: [health] Health check passed
[2026-01-28 14:30:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:18] info: [EmailVerification] Created verification token
[2026-01-28 14:30:18] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:18] info: [authController.register] Verification email sent
[2026-01-28 14:30:18] info: [health] Health check passed
[2026-01-28 14:30:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:19] info: [EmailVerification] Created verification token
[2026-01-28 14:30:19] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:19] info: [authController.register] Verification email sent
[2026-01-28 14:30:19] info: [health] Health check passed
[2026-01-28 14:30:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:19] info: [EmailVerification] Created verification token
[2026-01-28 14:30:19] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:19] info: [authController.register] Verification email sent
[2026-01-28 14:30:19] info: [auth:eivw6k] Starting auth for GET /health
[2026-01-28 14:30:19] info: [auth:eivw6k] Token from cookie: false
[2026-01-28 14:30:19] warn: [auth:eivw6k] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:30:19] info: [auth:dyr7ze] Starting auth for GET /health
[2026-01-28 14:30:19] info: [auth:dyr7ze] Token from cookie: false
[2026-01-28 14:30:19] warn: [auth:dyr7ze] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:30:19] info: [auth:dg5csf] Starting auth for GET /api/test/health-status
[2026-01-28 14:30:19] info: [auth:dg5csf] Token from cookie: false
[2026-01-28 14:30:19] warn: [auth:dg5csf] Access token is required for GET /api/test/health-status from ::ffff:127.0.0.1
[2026-01-28 14:30:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:19] info: [EmailVerification] Created verification token
[2026-01-28 14:30:19] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:19] info: [authController.register] Verification email sent
[2026-01-28 14:30:19] info: [health] Health check passed
[2026-01-28 14:30:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:20] info: [EmailVerification] Created verification token
[2026-01-28 14:30:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:20] info: [authController.register] Verification email sent
[2026-01-28 14:30:20] info: [auth:r596kw] Starting auth for GET /api/test/health-status
[2026-01-28 14:30:20] info: [auth:r596kw] Token from cookie: false
[2026-01-28 14:30:20] info: [auth:r596kw] Token from header: true
[2026-01-28 14:30:20] info: [auth:r596kw] Authenticated user d6081650-2ba1-41f1-9557-645f0e3e82e2
[2026-01-28 14:30:20] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:20] info: [EmailVerification] Created verification token
[2026-01-28 14:30:20] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:20] info: [authController.register] Verification email sent
[2026-01-28 14:30:20] info: [auth:unbb2] Starting auth for GET /health
[2026-01-28 14:30:20] info: [auth:unbb2] Token from cookie: false
[2026-01-28 14:30:20] info: [auth:unbb2] Token from header: true
[2026-01-28 14:30:20] warn: [auth:unbb2] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:30:20] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:20] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/health-monitoring-integration.test.mjs (6.285 s)
  üè• Health Monitoring Integration Tests
    üîç Main Health Endpoints
      ‚àö should provide basic ping health check (403 ms)
      ‚àö should provide ping with custom name (313 ms)
      ‚àö should provide comprehensive health check (309 ms)
      ‚àö should provide readiness check (311 ms)
    üß† Memory Management Health
      ‚àö should provide memory system health assessment (318 ms)
      ‚àö should validate memory health score ranges (321 ms)
    üìö Documentation System Health
      ‚àö should provide API documentation health status (325 ms)
      ‚àö should provide user documentation health status (313 ms)
    üß¨ Epigenetic Flag System Health
      ‚àö should provide flag system operational status (315 ms)
    üîó Cross-System Health Integration
      ‚àö should validate health across all systems (398 ms)
      ‚àö should provide consistent health response formats (346 ms)
    ‚ö° Performance Health Monitoring
      ‚àö should monitor health endpoint response times (310 ms)
      ‚àö should validate database performance in health checks (309 ms)
    üõ°Ô∏è Health Monitoring Security
      ‚àö should require authentication for protected health endpoints (331 ms)
      ‚àö should allow public access to basic health endpoints (340 ms)
    üö® Error Handling and Reporting
      ‚àö should handle health check errors gracefully (318 ms)
      ‚àö should provide meaningful error messages for health failures (315 ms)

[2026-01-28 14:30:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:21] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:21] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:30:21] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:21] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:21] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:21] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:21] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:21] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:21] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:30:21] info: [POST] /auth/register
[2026-01-28 14:30:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 14:30:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:22] info: [EmailVerification] Created verification token
[2026-01-28 14:30:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:22] info: [authController.register] Verification email sent
[2026-01-28 14:30:22] info: [POST] /auth/register - 201
[2026-01-28 14:30:22] info: [POST] /auth/register
[2026-01-28 14:30:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:30:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:22] info: [EmailVerification] Created verification token
[2026-01-28 14:30:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:22] info: [authController.register] Verification email sent
[2026-01-28 14:30:22] info: [POST] /auth/register - 201
[2026-01-28 14:30:22] info: [POST] /auth/register
[2026-01-28 14:30:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:30:22] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:22] info: [EmailVerification] Created verification token
[2026-01-28 14:30:22] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:22] info: [authController.register] Verification email sent
[2026-01-28 14:30:22] info: [POST] /auth/register - 201
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=2654119e319a4ba17bce16d9d10008fdf6d3b29cda24fbf371160d5c579fbff2
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 14:30:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:23] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=2654119e319a4ba17bce16d9d10008fdf6d3b29cda24fbf371160d5c579fbff2 - 200
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=1effd3f58520dd4f728f684a1b7062c302ddd9fa45e2536a0956d39fbe2d6a69
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:30:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:23] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=1effd3f58520dd4f728f684a1b7062c302ddd9fa45e2536a0956d39fbe2d6a69 - 200
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=c8e8e2273c5f79a10f5b85d69beb338d59563ef04705eeeff21d893df591f3ac
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:30:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:23] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=c8e8e2273c5f79a10f5b85d69beb338d59563ef04705eeeff21d893df591f3ac - 200
[2026-01-28 14:30:23] info: [GET] /auth/verify-email
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1240MB
[2026-01-28 14:30:23] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:30:23] error: [GET] /auth/verify-email - ERROR
[2026-01-28 14:30:23] error: Error Verification token is required
[2026-01-28 14:30:23] info: [GET] /auth/verify-email - 400
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=invalid_token_here
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1244MB
[2026-01-28 14:30:23] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:30:23] error: [GET] /auth/verify-email?token=invalid_token_here - ERROR
[2026-01-28 14:30:23] error: Error Invalid or expired verification token
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=invalid_token_here - 400
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=ab9f9b109e9c42b553df5d25632131731a67156d26e3abfd5f74abf9bcf12253
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB
[2026-01-28 14:30:23] error: [authController.verifyEmail] Error verifying email: Verification token has expired
[2026-01-28 14:30:23] error: [GET] /auth/verify-email?token=ab9f9b109e9c42b553df5d25632131731a67156d26e3abfd5f74abf9bcf12253 - ERROR
[2026-01-28 14:30:23] error: Error Verification token has expired
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=ab9f9b109e9c42b553df5d25632131731a67156d26e3abfd5f74abf9bcf12253 - 400
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=fae979b3a6a0d249835a41dba21ae0a80baaf7db12f4f8a4c2ac4c686165c993
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:30:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:23] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=fae979b3a6a0d249835a41dba21ae0a80baaf7db12f4f8a4c2ac4c686165c993 - 200
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=fae979b3a6a0d249835a41dba21ae0a80baaf7db12f4f8a4c2ac4c686165c993
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 14:30:23] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:30:23] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:30:23] error: [GET] /auth/verify-email?token=fae979b3a6a0d249835a41dba21ae0a80baaf7db12f4f8a4c2ac4c686165c993 - ERROR
[2026-01-28 14:30:23] error: Error Verification token has already been used
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=fae979b3a6a0d249835a41dba21ae0a80baaf7db12f4f8a4c2ac4c686165c993 - 400
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=b84776a78d1c798d26b611edf2e0f335f6ee4f98beeb003bede031484baa0f1b
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1244MB
[2026-01-28 14:30:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:23] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [GET] /auth/verify-email?token=b84776a78d1c798d26b611edf2e0f335f6ee4f98beeb003bede031484baa0f1b - 200
[2026-01-28 14:30:23] info: [POST] /auth/resend-verification
[2026-01-28 14:30:23] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 14:30:23] info: [auth:ao84qb] Starting auth for POST /resend-verification
[2026-01-28 14:30:23] info: [auth:ao84qb] Token from cookie: false
[2026-01-28 14:30:23] info: [auth:ao84qb] Token from header: true
[2026-01-28 14:30:23] info: [auth:ao84qb] Authenticated user 74428218-b5e8-4b21-8385-20fab9097016
[2026-01-28 14:30:23] info: [EmailVerification] Created verification token
[2026-01-28 14:30:23] info: [EmailVerification] Resent verification email
[2026-01-28 14:30:23] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:23] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:30:24] info: [auth:8ytyn7] Starting auth for POST /resend-verification
[2026-01-28 14:30:24] info: [auth:8ytyn7] Token from cookie: false
[2026-01-28 14:30:24] warn: [auth:8ytyn7] Access token is required for POST /resend-verification from ::ffff:127.0.0.1
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification - 401
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB
[2026-01-28 14:30:24] info: [auth:od3bfw] Starting auth for POST /resend-verification
[2026-01-28 14:30:24] info: [auth:od3bfw] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:od3bfw] Token from header: true
[2026-01-28 14:30:24] info: [auth:od3bfw] Authenticated user fcf2c50c-96fc-4d13-99d0-d86e09560656
[2026-01-28 14:30:24] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 14:30:24] error: [authController.resendVerification] Error resending verification: Email is already verified
[2026-01-28 14:30:24] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 14:30:24] error: Error Email is already verified
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification - 500
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1245MB
[2026-01-28 14:30:24] info: [auth:9snz0a] Starting auth for POST /resend-verification
[2026-01-28 14:30:24] info: [auth:9snz0a] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:9snz0a] Token from header: true
[2026-01-28 14:30:24] info: [auth:9snz0a] Authenticated user 8fef354e-9e61-408a-832d-85997a5e5386
[2026-01-28 14:30:24] info: [EmailVerification] Created verification token
[2026-01-28 14:30:24] info: [EmailVerification] Resent verification email
[2026-01-28 14:30:24] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:30:24] info: [auth:6lalur] Starting auth for POST /resend-verification
[2026-01-28 14:30:24] info: [auth:6lalur] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:6lalur] Token from header: true
[2026-01-28 14:30:24] info: [auth:6lalur] Authenticated user 8fef354e-9e61-408a-832d-85997a5e5386
[2026-01-28 14:30:24] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:30:24] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:30:24] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:30:24] error: [POST] /auth/resend-verification - ERROR
[2026-01-28 14:30:24] error: Error Please wait 300 seconds before requesting another verification email
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification - 429
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 14:30:24] info: [auth:4pwsxo] Starting auth for POST /resend-verification
[2026-01-28 14:30:24] info: [auth:4pwsxo] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:4pwsxo] Token from header: true
[2026-01-28 14:30:24] info: [auth:4pwsxo] Authenticated user c9a1c052-ba72-4d6d-98b7-b60118624a06
[2026-01-28 14:30:24] info: [EmailVerification] Created verification token
[2026-01-28 14:30:24] info: [EmailVerification] Resent verification email
[2026-01-28 14:30:24] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:24] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:30:24] info: [GET] /auth/verification-status
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1248MB
[2026-01-28 14:30:24] info: [auth:80ty3g] Starting auth for GET /verification-status
[2026-01-28 14:30:24] info: [auth:80ty3g] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:80ty3g] Token from header: true
[2026-01-28 14:30:24] info: [auth:80ty3g] Authenticated user 18a17cf5-2195-427f-a12c-2e049e381581
[2026-01-28 14:30:24] info: [EmailVerification] Verification status check
[2026-01-28 14:30:24] info: [GET] /auth/verification-status - 200
[2026-01-28 14:30:24] info: [GET] /auth/verification-status
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB
[2026-01-28 14:30:24] info: [auth:0fn2ga] Starting auth for GET /verification-status
[2026-01-28 14:30:24] info: [auth:0fn2ga] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:0fn2ga] Token from header: true
[2026-01-28 14:30:24] info: [auth:0fn2ga] Authenticated user dfd1c67d-7eb7-48e4-8137-12f103288b8b
[2026-01-28 14:30:24] info: [EmailVerification] Verification status check
[2026-01-28 14:30:24] info: [GET] /auth/verification-status - 200
[2026-01-28 14:30:24] info: [GET] /auth/verification-status
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1242MB
[2026-01-28 14:30:24] info: [auth:couioq] Starting auth for GET /verification-status
[2026-01-28 14:30:24] info: [auth:couioq] Token from cookie: false
[2026-01-28 14:30:24] warn: [auth:couioq] Access token is required for GET /verification-status from ::ffff:127.0.0.1
[2026-01-28 14:30:24] info: [GET] /auth/verification-status - 401
[2026-01-28 14:30:24] info: [GET] /auth/verification-status
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1245MB
[2026-01-28 14:30:24] info: [auth:se8iq] Starting auth for GET /verification-status
[2026-01-28 14:30:24] info: [auth:se8iq] Token from cookie: false
[2026-01-28 14:30:24] info: [auth:se8iq] Token from header: true
[2026-01-28 14:30:24] info: [auth:se8iq] Authenticated user a3d65d93-20d2-43f5-a715-79267c0ad89b
[2026-01-28 14:30:24] info: [EmailVerification] Verification status check
[2026-01-28 14:30:24] info: [GET] /auth/verification-status - 200
[2026-01-28 14:30:24] info: [POST] /auth/register
[2026-01-28 14:30:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:30:25] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:25] info: [EmailVerification] Created verification token
[2026-01-28 14:30:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [authController.register] Verification email sent
[2026-01-28 14:30:25] info: [POST] /auth/register - 201
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=29876ac4d38c996bca7c62ebbdc76c0bc504643e0a3374aabfc5e100875c7ea9
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1250MB
[2026-01-28 14:30:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:25] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=29876ac4d38c996bca7c62ebbdc76c0bc504643e0a3374aabfc5e100875c7ea9 - 200
[2026-01-28 14:30:25] info: [GET] /auth/verification-status
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB
[2026-01-28 14:30:25] info: [auth:u9n8xt] Starting auth for GET /verification-status
[2026-01-28 14:30:25] info: [auth:u9n8xt] Token from cookie: false
[2026-01-28 14:30:25] info: [auth:u9n8xt] Token from header: true
[2026-01-28 14:30:25] info: [auth:u9n8xt] Authenticated user 4a14bb75-2569-40dc-9d47-1193f7a9d707
[2026-01-28 14:30:25] info: [EmailVerification] Verification status check
[2026-01-28 14:30:25] info: [GET] /auth/verification-status - 200
[2026-01-28 14:30:25] info: [POST] /auth/resend-verification
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1250MB
[2026-01-28 14:30:25] info: [auth:6suman] Starting auth for POST /resend-verification
[2026-01-28 14:30:25] info: [auth:6suman] Token from cookie: false
[2026-01-28 14:30:25] info: [auth:6suman] Token from header: true
[2026-01-28 14:30:25] info: [auth:6suman] Authenticated user 4a14bb75-2569-40dc-9d47-1193f7a9d707
[2026-01-28 14:30:25] info: [EmailVerification] Created verification token
[2026-01-28 14:30:25] info: [EmailVerification] Resent verification email
[2026-01-28 14:30:25] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [POST] /auth/resend-verification - 200
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=43ab001f929bb254ab33234ef10c45f71d943e1ba796b3f9f832757755597323
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB
[2026-01-28 14:30:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:25] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=43ab001f929bb254ab33234ef10c45f71d943e1ba796b3f9f832757755597323 - 200
[2026-01-28 14:30:25] info: [GET] /auth/verification-status
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB
[2026-01-28 14:30:25] info: [auth:lhtrbo] Starting auth for GET /verification-status
[2026-01-28 14:30:25] info: [auth:lhtrbo] Token from cookie: false
[2026-01-28 14:30:25] info: [auth:lhtrbo] Token from header: true
[2026-01-28 14:30:25] info: [auth:lhtrbo] Authenticated user 4a14bb75-2569-40dc-9d47-1193f7a9d707
[2026-01-28 14:30:25] info: [EmailVerification] Verification status check
[2026-01-28 14:30:25] info: [GET] /auth/verification-status - 200
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 14:30:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:25] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93 - 200
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1254MB
[2026-01-28 14:30:25] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:30:25] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:30:25] error: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93 - ERROR
[2026-01-28 14:30:25] error: Error Verification token has already been used
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93 - 400
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB
[2026-01-28 14:30:25] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:30:25] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:30:25] error: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93 - ERROR
[2026-01-28 14:30:25] error: Error Verification token has already been used
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=5f000a3772c732d3829e53c37bbd83f91d7e4bd3a3b4251df0af4db22548ba93 - 400
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=808d00ca78c31b8e3c35a8c529e977f12143c4a87241001a29dc20b91edf56cc
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1253MB
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=808d00ca78c31b8e3c35a8c529e977f12143c4a87241001a29dc20b91edf56cc
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1243MB
[2026-01-28 14:30:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:30:25] info: [EmailService] Welcome email (DEV MODE - not sent)
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=808d00ca78c31b8e3c35a8c529e977f12143c4a87241001a29dc20b91edf56cc - 200
[2026-01-28 14:30:25] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:30:25] error: [authController.verifyEmail] Error verifying email: Verification token has already been used
[2026-01-28 14:30:25] error: [GET] /auth/verify-email?token=808d00ca78c31b8e3c35a8c529e977f12143c4a87241001a29dc20b91edf56cc - ERROR
[2026-01-28 14:30:25] error: Error Verification token has already been used
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=808d00ca78c31b8e3c35a8c529e977f12143c4a87241001a29dc20b91edf56cc - 400
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=definitely_invalid_token_123
[2026-01-28 14:30:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1248MB
[2026-01-28 14:30:25] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:30:25] error: [GET] /auth/verify-email?token=definitely_invalid_token_123 - ERROR
[2026-01-28 14:30:25] error: Error Invalid or expired verification token
[2026-01-28 14:30:25] info: [GET] /auth/verify-email?token=definitely_invalid_token_123 - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:30:26] error: Error Verification token is required
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1250MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:30:26] error: Error Verification token is required
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1252MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR
[2026-01-28 14:30:26] error: Error Invalid or expired verification token
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1251MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR
[2026-01-28 14:30:26] error: Error Invalid or expired verification token
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1248MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR
[2026-01-28 14:30:26] error: Error Invalid or expired verification token
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1245MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:30:26] error: Error Verification token is required
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token= - 400
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token=
[2026-01-28 14:30:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB
[2026-01-28 14:30:26] error: [authController.verifyEmail] Error verifying email: Verification token is required
[2026-01-28 14:30:26] error: [GET] /auth/verify-email?token= - ERROR
[2026-01-28 14:30:26] error: Error Verification token is required
[2026-01-28 14:30:26] info: [GET] /auth/verify-email?token= - 400
PASS __tests__/integration/email-verification.test.mjs (6.025 s)
  Email Verification System - Integration Tests
    POST /auth/register - Email Verification Integration
      ‚àö should_create_verification_token_on_registration (484 ms)
      ‚àö should_include_email_verified_status_in_response (392 ms)
      ‚àö should_log_verification_email_in_development_mode (385 ms)
    GET /auth/verify-email
      ‚àö should_verify_email_with_valid_token (103 ms)
      ‚àö should_update_user_email_verified_status (105 ms)
      ‚àö should_mark_token_as_used (103 ms)
      ‚àö should_reject_missing_token (102 ms)
      ‚àö should_reject_invalid_token (199 ms)
      ‚àö should_reject_expired_token (97 ms)
      ‚àö should_reject_already_used_token (124 ms)
      ‚àö should_be_publicly_accessible_without_authentication (110 ms)
    POST /auth/resend-verification
      ‚àö should_create_new_verification_token (113 ms)
      ‚àö should_require_authentication (100 ms)
      ‚àö should_reject_if_email_already_verified (107 ms)
      ‚àö should_enforce_rate_limiting (141 ms)
      ‚àö should_cleanup_expired_tokens (111 ms)
    GET /auth/verification-status
      ‚àö should_return_unverified_status_for_new_user (102 ms)
      ‚àö should_return_verified_status_after_verification (102 ms)
      ‚àö should_require_authentication (100 ms)
      ‚àö should_return_user_email_address (101 ms)
    Complete Email Verification Workflow
      ‚àö should_complete_full_registration_to_verification_flow (406 ms)
      ‚àö should_handle_resend_and_verify_workflow (184 ms)
      ‚àö should_prevent_multiple_verification_attempts (144 ms)
    Security and Edge Cases
      ‚àö should_handle_concurrent_verification_requests (155 ms)
      ‚àö should_sanitize_error_messages_to_prevent_enumeration (213 ms)
      ‚àö should_handle_malformed_token_input (559 ms)

[2026-01-28 14:30:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:27] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:27] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:27] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:27] info: [EmailVerification] Created verification token
[2026-01-28 14:30:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:27] info: [authController.register] Verification email sent
[2026-01-28 14:30:27] info: [auth:bjf7hs] Starting auth for GET /status
[2026-01-28 14:30:27] info: [auth:bjf7hs] Token from cookie: false
[2026-01-28 14:30:27] info: [auth:bjf7hs] Token from header: true
[2026-01-28 14:30:27] info: [auth:bjf7hs] Authenticated user 57fcdc80-9f5f-4f18-9759-2b1d1476090b
[2026-01-28 14:30:27] info: [MemoryManagement] Getting memory status
[2026-01-28 14:30:27] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:27] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:27] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:27] info: [EmailVerification] Created verification token
[2026-01-28 14:30:27] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:27] info: [authController.register] Verification email sent
[2026-01-28 14:30:27] info: [auth:e55wc] Starting auth for GET /metrics
[2026-01-28 14:30:27] info: [auth:e55wc] Token from cookie: false
[2026-01-28 14:30:27] info: [auth:e55wc] Token from header: true
[2026-01-28 14:30:27] info: [auth:e55wc] Authenticated user f6b3da3a-ddf2-4a13-aa05-5eb28ed9df17
[2026-01-28 14:30:27] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:30:27] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:27] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:28] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:28] info: [EmailVerification] Created verification token
[2026-01-28 14:30:28] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:28] info: [authController.register] Verification email sent
[2026-01-28 14:30:28] info: [auth:9czak5] Starting auth for GET /status
[2026-01-28 14:30:28] info: [auth:9czak5] Token from cookie: false
[2026-01-28 14:30:28] info: [auth:9czak5] Token from header: true
[2026-01-28 14:30:28] info: [auth:9czak5] Authenticated user fd47e1d3-63fd-455a-9837-b8a44ec3e95d
[2026-01-28 14:30:28] info: [MemoryManagement] Getting memory status
[2026-01-28 14:30:28] info: [auth:yw00o] Starting auth for POST /api/test/memory-load
[2026-01-28 14:30:28] info: [auth:yw00o] Token from cookie: false
[2026-01-28 14:30:28] info: [auth:yw00o] Token from header: true
[2026-01-28 14:30:28] info: [auth:yw00o] Authenticated user fd47e1d3-63fd-455a-9837-b8a44ec3e95d
[2026-01-28 14:30:29] info: [auth:c27y01] Starting auth for GET /status
[2026-01-28 14:30:29] info: [auth:c27y01] Token from cookie: false
[2026-01-28 14:30:29] info: [auth:c27y01] Token from header: true
[2026-01-28 14:30:29] info: [auth:c27y01] Authenticated user fd47e1d3-63fd-455a-9837-b8a44ec3e95d
[2026-01-28 14:30:29] info: [MemoryManagement] Getting memory status
[2026-01-28 14:30:29] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:29] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:29] info: [EmailVerification] Created verification token
[2026-01-28 14:30:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:29] info: [authController.register] Verification email sent
[2026-01-28 14:30:29] info: [auth:mqx3h9] Starting auth for GET /resources
[2026-01-28 14:30:29] info: [auth:mqx3h9] Token from cookie: false
[2026-01-28 14:30:29] info: [auth:mqx3h9] Token from header: true
[2026-01-28 14:30:29] info: [auth:mqx3h9] Authenticated user 6bf95cb7-5b21-48d3-b83f-0c41f6618c58
[2026-01-28 14:30:29] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:30:29] info: [auth:9vbtdq] Starting auth for POST /cleanup
[2026-01-28 14:30:29] info: [auth:9vbtdq] Token from cookie: false
[2026-01-28 14:30:29] info: [auth:9vbtdq] Token from header: true
[2026-01-28 14:30:29] info: [auth:9vbtdq] Authenticated user 6bf95cb7-5b21-48d3-b83f-0c41f6618c58
[2026-01-28 14:30:29] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 14:30:29] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:29] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:29] info: [auth:irauqr] Starting auth for GET /resources
[2026-01-28 14:30:29] info: [auth:irauqr] Token from cookie: false
[2026-01-28 14:30:29] info: [auth:irauqr] Token from header: true
[2026-01-28 14:30:29] info: [auth:irauqr] Authenticated user 6bf95cb7-5b21-48d3-b83f-0c41f6618c58
[2026-01-28 14:30:29] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:30:29] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:29] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:29] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:29] info: [EmailVerification] Created verification token
[2026-01-28 14:30:29] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:29] info: [authController.register] Verification email sent
[2026-01-28 14:30:29] info: [auth:l8mfi] Starting auth for GET /resources
[2026-01-28 14:30:29] info: [auth:l8mfi] Token from cookie: false
[2026-01-28 14:30:29] info: [auth:l8mfi] Token from header: true
[2026-01-28 14:30:29] info: [auth:l8mfi] Authenticated user 849a0338-b9b4-4411-a84a-f3f71a8ff58a
[2026-01-28 14:30:29] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:30:29] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:29] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:30] info: [EmailVerification] Created verification token
[2026-01-28 14:30:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:30] info: [authController.register] Verification email sent
[2026-01-28 14:30:30] info: [auth:4puakf] Starting auth for POST /gc
[2026-01-28 14:30:30] info: [auth:4puakf] Token from cookie: false
[2026-01-28 14:30:30] info: [auth:4puakf] Token from header: true
[2026-01-28 14:30:30] info: [auth:4puakf] Authenticated user cd94ce85-f56b-448d-8cda-04261dba9cb4
[2026-01-28 14:30:30] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:30:30] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:30] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:30] info: [EmailVerification] Created verification token
[2026-01-28 14:30:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:30] info: [authController.register] Verification email sent
[2026-01-28 14:30:30] info: [auth:1pzb1ai] Starting auth for POST /gc
[2026-01-28 14:30:30] info: [auth:1pzb1ai] Token from cookie: false
[2026-01-28 14:30:30] info: [auth:1pzb1ai] Token from header: true
[2026-01-28 14:30:30] info: [auth:1pzb1ai] Authenticated user 69f7bb21-b738-4769-a249-99a12e4f54d5
[2026-01-28 14:30:30] info: [MemoryManagement] Manual GC trigger requested (force: true)
[2026-01-28 14:30:30] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:30] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:30] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:30] info: [EmailVerification] Created verification token
[2026-01-28 14:30:30] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:30] info: [authController.register] Verification email sent
[2026-01-28 14:30:30] info: [auth:uzuf8d] Starting auth for GET /alerts
[2026-01-28 14:30:30] info: [auth:uzuf8d] Token from cookie: false
[2026-01-28 14:30:30] info: [auth:uzuf8d] Token from header: true
[2026-01-28 14:30:30] info: [auth:uzuf8d] Authenticated user 2c205a0c-be91-4352-a53f-fa4ff62cabf6
[2026-01-28 14:30:30] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:30:30] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:30] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:31] info: [EmailVerification] Created verification token
[2026-01-28 14:30:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:31] info: [authController.register] Verification email sent
[2026-01-28 14:30:31] info: [auth:4czkiw] Starting auth for GET /alerts
[2026-01-28 14:30:31] info: [auth:4czkiw] Token from cookie: false
[2026-01-28 14:30:31] info: [auth:4czkiw] Token from header: true
[2026-01-28 14:30:31] info: [auth:4czkiw] Authenticated user 29c178e2-2c7a-478a-a20d-2486c753f5fe
[2026-01-28 14:30:31] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:30:31] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:31] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:31] info: [EmailVerification] Created verification token
[2026-01-28 14:30:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:31] info: [authController.register] Verification email sent
[2026-01-28 14:30:31] info: [auth:utd79] Starting auth for GET /status
[2026-01-28 14:30:31] info: [auth:utd79] Token from cookie: false
[2026-01-28 14:30:31] warn: [auth:utd79] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:30:31] info: [auth:v2as38] Starting auth for GET /metrics
[2026-01-28 14:30:31] info: [auth:v2as38] Token from cookie: false
[2026-01-28 14:30:31] warn: [auth:v2as38] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:30:31] info: [auth:b8t0p] Starting auth for GET /resources
[2026-01-28 14:30:31] info: [auth:b8t0p] Token from cookie: false
[2026-01-28 14:30:31] warn: [auth:b8t0p] Access token is required for GET /resources from ::ffff:127.0.0.1
[2026-01-28 14:30:31] info: [auth:ertprh] Starting auth for GET /alerts
[2026-01-28 14:30:31] info: [auth:ertprh] Token from cookie: false
[2026-01-28 14:30:31] warn: [auth:ertprh] Access token is required for GET /alerts from ::ffff:127.0.0.1
[2026-01-28 14:30:31] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:31] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:31] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:31] info: [EmailVerification] Created verification token
[2026-01-28 14:30:31] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:31] info: [authController.register] Verification email sent
[2026-01-28 14:30:31] info: [auth:mkjjq] Starting auth for POST /gc
[2026-01-28 14:30:31] info: [auth:mkjjq] Token from cookie: false
[2026-01-28 14:30:31] info: [auth:mkjjq] Token from header: true
[2026-01-28 14:30:31] info: [auth:mkjjq] Authenticated user 147c7fa6-3aa8-40ac-a731-b77b7fde3c57
[2026-01-28 14:30:31] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:31] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:32] info: [EmailVerification] Created verification token
[2026-01-28 14:30:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:32] info: [authController.register] Verification email sent
[2026-01-28 14:30:32] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:32] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:32] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:32] info: [EmailVerification] Created verification token
[2026-01-28 14:30:32] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:32] info: [authController.register] Verification email sent
[2026-01-28 14:30:32] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:32] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:30:32] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:30:32] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS tests/integration/memory-management-integration.test.mjs (5.986 s)
  üß† Memory Management Integration Tests
    üîç Memory Monitoring Integration
      ‚àö should monitor memory usage and provide reports (403 ms)
      ‚àö should provide detailed memory metrics (332 ms)
      ‚àö should track memory usage during load operations (1371 ms)
    üîß Resource Management Integration
      ‚àö should track and cleanup resources correctly (350 ms)
      ‚àö should provide resource analytics and counts (318 ms)
    üóëÔ∏è Garbage Collection Integration
      ‚àö should trigger garbage collection when available (316 ms)
      ‚àö should handle GC unavailability gracefully (313 ms)
    üö® Memory Alert System Integration
      ‚àö should provide memory alerts and warnings (318 ms)
      ‚àö should filter alerts by severity (322 ms)
    üîí Memory Management Security
      ‚àö should require authentication for memory operations (354 ms)
      ‚àö should validate input for memory operations (314 ms)
    üìä Memory Service Integration
      ‚àö should integrate with memory service functions (303 ms)
      ‚àö should track and untrack resources through service (303 ms)

[2026-01-28 14:30:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:32] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:32] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:33] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:33] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:30:33] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:33] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:33] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:33] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:33] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:33] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:33] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:30:33] info: [POST] /api/auth/register
[2026-01-28 14:30:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:30:33] warn: [Validation] Input validation failed
[2026-01-28 14:30:33] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:33] info: [POST] /api/auth/register
[2026-01-28 14:30:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:34] info: [EmailVerification] Created verification token
[2026-01-28 14:30:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:34] info: [authController.register] Verification email sent
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1336MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1345MB
[2026-01-28 14:30:34] warn: [Validation] Input validation failed
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:34] info: [EmailVerification] Created verification token
[2026-01-28 14:30:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:34] info: [authController.register] Verification email sent
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:34] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:34] info: [EmailVerification] Created verification token
[2026-01-28 14:30:34] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:34] info: [authController.register] Verification email sent
[2026-01-28 14:30:34] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:34] info: [POST] /api/auth/register
[2026-01-28 14:30:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB
[2026-01-28 14:30:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:35] info: [EmailVerification] Created verification token
[2026-01-28 14:30:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:35] info: [authController.register] Verification email sent
[2026-01-28 14:30:35] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:35] info: [POST] /api/auth/register
[2026-01-28 14:30:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:35] info: [EmailVerification] Created verification token
[2026-01-28 14:30:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:35] info: [authController.register] Verification email sent
[2026-01-28 14:30:35] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:35] info: [POST] /api/auth/register
[2026-01-28 14:30:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:35] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:35] info: [EmailVerification] Created verification token
[2026-01-28 14:30:35] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:35] info: [authController.register] Verification email sent
[2026-01-28 14:30:35] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:35] info: [POST] /api/auth/register
[2026-01-28 14:30:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:36] info: [EmailVerification] Created verification token
[2026-01-28 14:30:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:36] info: [authController.register] Verification email sent
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:36] info: [EmailVerification] Created verification token
[2026-01-28 14:30:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:36] info: [authController.register] Verification email sent
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:36] info: [EmailVerification] Created verification token
[2026-01-28 14:30:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:36] info: [authController.register] Verification email sent
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:30:36] warn: [Validation] Input validation failed
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1349MB
[2026-01-28 14:30:36] warn: [Validation] Input validation failed
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:30:36] warn: [Validation] Input validation failed
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1338MB
[2026-01-28 14:30:36] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:36] info: [EmailVerification] Created verification token
[2026-01-28 14:30:36] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:36] info: [authController.register] Verification email sent
[2026-01-28 14:30:36] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:36] info: [POST] /api/auth/register
[2026-01-28 14:30:36] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1348MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1342MB
[2026-01-28 14:30:37] info: [auth:gg9bs6] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:gg9bs6] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:gg9bs6] Token from header: true
[2026-01-28 14:30:37] info: [auth:gg9bs6] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:37] info: [auth:svvnm] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:svvnm] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:svvnm] Token from header: true
[2026-01-28 14:30:37] info: [auth:svvnm] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error At least one field is required
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1339MB
[2026-01-28 14:30:37] info: [auth:cdis] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:cdis] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:cdis] Token from header: true
[2026-01-28 14:30:37] info: [auth:cdis] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error At least one field is required
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:30:37] info: [auth:7grn4p] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:7grn4p] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:7grn4p] Token from header: true
[2026-01-28 14:30:37] info: [auth:7grn4p] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error At least one field is required
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB
[2026-01-28 14:30:37] info: [auth:k9js3r] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:k9js3r] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:k9js3r] Token from header: true
[2026-01-28 14:30:37] info: [auth:k9js3r] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB
[2026-01-28 14:30:37] info: [auth:hopbkn] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:hopbkn] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:hopbkn] Token from header: true
[2026-01-28 14:30:37] info: [auth:hopbkn] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:30:37] info: [auth:f8wn3] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:f8wn3] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:f8wn3] Token from header: true
[2026-01-28 14:30:37] info: [auth:f8wn3] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error At least one field is required
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1346MB
[2026-01-28 14:30:37] info: [auth:bgvftm] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:bgvftm] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:bgvftm] Token from header: true
[2026-01-28 14:30:37] info: [auth:bgvftm] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1343MB
[2026-01-28 14:30:37] info: [auth:ks9g9s] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:ks9g9s] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:ks9g9s] Token from header: true
[2026-01-28 14:30:37] info: [auth:ks9g9s] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:30:37] info: [auth:av127l] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:av127l] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:av127l] Token from header: true
[2026-01-28 14:30:37] info: [auth:av127l] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error 
Invalid `prisma.user.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 404
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:30:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:37] info: [EmailVerification] Created verification token
[2026-01-28 14:30:37] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:37] info: [authController.register] Verification email sent
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:30:37] info: [auth:oqtfpb] Starting auth for PUT /profile
[2026-01-28 14:30:37] info: [auth:oqtfpb] Token from cookie: false
[2026-01-28 14:30:37] info: [auth:oqtfpb] Token from header: true
[2026-01-28 14:30:37] info: [auth:oqtfpb] Authenticated user test-user-uuid-123
[2026-01-28 14:30:37] error: [authController.updateProfile] Error updating profile: At least one field is required
[2026-01-28 14:30:37] error: [PUT] /api/auth/profile - ERROR
[2026-01-28 14:30:37] error: Error At least one field is required
[2026-01-28 14:30:37] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1341MB
[2026-01-28 14:30:37] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:30:37] error: [POST] /api/auth/register - ERROR
[2026-01-28 14:30:37] error: Error User with this email or username already exists
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1354MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1347MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1342MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
[2026-01-28 14:30:37] info: [POST] /api/auth/register
[2026-01-28 14:30:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1351MB
[2026-01-28 14:30:37] warn: [Validation] Input validation failed
[2026-01-28 14:30:37] info: [POST] /api/auth/register - 400
PASS __tests__/integration/input-validation.test.mjs (5.163 s)
  Input Validation Integration Tests
    Registration Validation
      Email Validation
        ‚àö should reject invalid email format (44 ms)
        ‚àö should accept valid email format (374 ms)
      Password Validation - Enhanced Requirements
        ‚àö should reject password without lowercase letter (18 ms)
        ‚àö should reject password without uppercase letter (16 ms)
        ‚àö should reject password without number (20 ms)
        ‚àö should reject password without special character (17 ms)
        ‚àö should reject password shorter than 8 characters (20 ms)
        ‚àö should reject password longer than 128 characters (22 ms)
        ‚àö should accept password meeting all requirements (319 ms)
        ‚àö should accept all supported special characters (2115 ms)
      Username Validation
        ‚àö should reject username shorter than 3 characters (15 ms)
        ‚àö should reject username longer than 30 characters (23 ms)
        ‚àö should reject username with special characters (15 ms)
        ‚àö should accept valid username (302 ms)
      Name Validation
        ‚àö should reject empty first name (18 ms)
        ‚àö should reject first name longer than 50 characters (18 ms)
    Profile Update Validation
      Bio Field Validation
        ‚àö should reject bio longer than 500 characters (21 ms)
        ‚àö should accept bio at maximum length (500 characters) (26 ms)
        ‚àö should accept empty bio (24 ms)
        ‚àö should sanitize bio with XSS prevention (24 ms)
      Name Update Validation
        ‚àö should reject first name longer than 50 characters (23 ms)
        ‚àö should reject last name longer than 50 characters (20 ms)
        ‚àö should accept valid name updates (23 ms)
      Username Update Validation
        ‚àö should reject username shorter than 3 characters (21 ms)
        ‚àö should reject username longer than 30 characters (19 ms)
        ‚àö should accept valid username update (32 ms)
    XSS Prevention Integration
      ‚àö should sanitize registration inputs with HTML tags (300 ms)
      ‚àö should sanitize profile bio with event handlers (24 ms)
    Field Trimming and Normalization
      ‚àö should trim whitespace from names (23 ms)
      ‚àö should normalize email addresses (17 ms)
    Required Fields Validation
      ‚àö should reject registration without email (15 ms)
      ‚àö should reject registration without username (18 ms)
      ‚àö should reject registration without password (18 ms)

[2026-01-28 14:30:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:38] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:38] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:38] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:38] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:38] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:38] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:38] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:38] info: [EmailVerification] Created verification token
[2026-01-28 14:30:38] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:38] info: [authController.register] Verification email sent
[2026-01-28 14:30:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:39] info: [EmailVerification] Created verification token
[2026-01-28 14:30:39] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:39] info: [authController.register] Verification email sent
[2026-01-28 14:30:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:39] info: [EmailVerification] Created verification token
[2026-01-28 14:30:39] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:39] info: [authController.register] Verification email sent
[2026-01-28 14:30:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:39] info: [EmailVerification] Created verification token
[2026-01-28 14:30:39] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:39] info: [authController.register] Verification email sent
[2026-01-28 14:30:39] info: [auth:5f5m4w] Starting auth for POST /endpoints
[2026-01-28 14:30:39] info: [auth:5f5m4w] Token from cookie: false
[2026-01-28 14:30:39] info: [auth:5f5m4w] Token from header: true
[2026-01-28 14:30:39] info: [auth:5f5m4w] Authenticated user 4922cf62-f4d7-46e6-b1be-c472eb6fdb34
[2026-01-28 14:30:39] info: [DocumentationRoutes] Registering endpoint: GET /api/test/integration
[2026-01-28 14:30:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:40] info: [EmailVerification] Created verification token
[2026-01-28 14:30:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:40] info: [authController.register] Verification email sent
[2026-01-28 14:30:40] info: [auth:smepfd] Starting auth for POST /schemas
[2026-01-28 14:30:40] info: [auth:smepfd] Token from cookie: false
[2026-01-28 14:30:40] info: [auth:smepfd] Token from header: true
[2026-01-28 14:30:40] info: [auth:smepfd] Authenticated user e948cc1c-cacc-4e82-abac-0d100aa80e56
[2026-01-28 14:30:40] info: [DocumentationRoutes] Registering schema: TestSchema
[2026-01-28 14:30:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:40] info: [EmailVerification] Created verification token
[2026-01-28 14:30:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:40] info: [authController.register] Verification email sent
[2026-01-28 14:30:40] info: [auth:zr25zm] Starting auth for POST /endpoints
[2026-01-28 14:30:40] info: [auth:zr25zm] Token from cookie: false
[2026-01-28 14:30:40] info: [auth:zr25zm] Token from header: true
[2026-01-28 14:30:40] info: [auth:zr25zm] Authenticated user 75f3dbe2-f01b-4d7d-ad86-fe29ca5d7c6d
[2026-01-28 14:30:40] info: [DocumentationRoutes] Registering endpoint: POST /api/test/create
[2026-01-28 14:30:40] info: [auth:t6nw1l] Starting auth for POST /schemas
[2026-01-28 14:30:40] info: [auth:t6nw1l] Token from cookie: false
[2026-01-28 14:30:40] info: [auth:t6nw1l] Token from header: true
[2026-01-28 14:30:40] info: [auth:t6nw1l] Authenticated user 75f3dbe2-f01b-4d7d-ad86-fe29ca5d7c6d
[2026-01-28 14:30:40] info: [DocumentationRoutes] Registering schema: CreateTestSchema
[2026-01-28 14:30:40] info: [auth:palib] Starting auth for POST /generate
[2026-01-28 14:30:40] info: [auth:palib] Token from cookie: false
[2026-01-28 14:30:40] info: [auth:palib] Token from header: true
[2026-01-28 14:30:40] info: [auth:palib] Authenticated user 75f3dbe2-f01b-4d7d-ad86-fe29ca5d7c6d
[2026-01-28 14:30:40] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:30:40] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:30:40] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:30:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:40] info: [EmailVerification] Created verification token
[2026-01-28 14:30:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:40] info: [authController.register] Verification email sent
[2026-01-28 14:30:40] info: [auth:vf5wjg] Starting auth for GET /metrics
[2026-01-28 14:30:40] info: [auth:vf5wjg] Token from cookie: false
[2026-01-28 14:30:40] info: [auth:vf5wjg] Token from header: true
[2026-01-28 14:30:40] info: [auth:vf5wjg] Authenticated user 54083898-7a06-402b-89f1-4abe527f0930
[2026-01-28 14:30:40] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:30:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:41] info: [EmailVerification] Created verification token
[2026-01-28 14:30:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:41] info: [authController.register] Verification email sent
[2026-01-28 14:30:41] info: [auth:v26k1] Starting auth for GET /health
[2026-01-28 14:30:41] info: [auth:v26k1] Token from cookie: false
[2026-01-28 14:30:41] info: [auth:v26k1] Token from header: true
[2026-01-28 14:30:41] info: [auth:v26k1] Authenticated user ab805baf-df49-43ae-852c-2e5307cafb36
[2026-01-28 14:30:41] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:30:41] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:30:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:41] info: [EmailVerification] Created verification token
[2026-01-28 14:30:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:41] info: [authController.register] Verification email sent
[2026-01-28 14:30:41] info: [auth:yozr6h] Starting auth for GET /coverage
[2026-01-28 14:30:41] info: [auth:yozr6h] Token from cookie: false
[2026-01-28 14:30:41] info: [auth:yozr6h] Token from header: true
[2026-01-28 14:30:41] info: [auth:yozr6h] Authenticated user 8f602e5b-98de-42d3-ab60-a4b6517882e0
[2026-01-28 14:30:41] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 14:30:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:41] info: [EmailVerification] Created verification token
[2026-01-28 14:30:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:41] info: [authController.register] Verification email sent
[2026-01-28 14:30:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:42] info: [EmailVerification] Created verification token
[2026-01-28 14:30:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:42] info: [authController.register] Verification email sent
[2026-01-28 14:30:42] info: [auth:6u5lp] Starting auth for GET /api/test/documented
[2026-01-28 14:30:42] info: [auth:6u5lp] Token from cookie: false
[2026-01-28 14:30:42] info: [auth:6u5lp] Token from header: true
[2026-01-28 14:30:42] info: [auth:6u5lp] Authenticated user faa39699-0a8b-4e14-b53f-eba001719c64
[2026-01-28 14:30:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:42] info: [EmailVerification] Created verification token
[2026-01-28 14:30:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:42] info: [authController.register] Verification email sent
[2026-01-28 14:30:42] info: [auth:5gyw8b] Starting auth for POST /endpoints
[2026-01-28 14:30:42] info: [auth:5gyw8b] Token from cookie: false
[2026-01-28 14:30:42] warn: [auth:5gyw8b] Access token is required for POST /endpoints from ::ffff:127.0.0.1
[2026-01-28 14:30:42] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:42] info: [EmailVerification] Created verification token
[2026-01-28 14:30:42] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:42] info: [authController.register] Verification email sent
[2026-01-28 14:30:42] info: [auth:qcdst] Starting auth for POST /endpoints
[2026-01-28 14:30:42] info: [auth:qcdst] Token from cookie: false
[2026-01-28 14:30:42] info: [auth:qcdst] Token from header: true
[2026-01-28 14:30:42] info: [auth:qcdst] Authenticated user 3ef9bd74-bb82-4ee6-a9eb-84089bf62787
PASS tests/integration/documentation-system-integration.test.mjs (5.069 s)
  üìö Documentation System Integration Tests
    üìã Swagger/OpenAPI Specification Validation
      ‚àö should load and validate OpenAPI specification (501 ms)
      ‚àö should serve YAML specification format (317 ms)
      ‚àö should provide interactive Swagger UI (308 ms)
    üîç API Documentation Service Integration
      ‚àö should register and validate endpoint documentation (315 ms)
      ‚àö should register and validate schema documentation (318 ms)
      ‚àö should generate documentation with metrics (359 ms)
    üìä Documentation Coverage and Health
      ‚àö should provide documentation metrics and coverage (315 ms)
      ‚àö should provide documentation health status (322 ms)
      ‚àö should analyze documentation coverage by system (321 ms)
    üîó Live API Integration Validation
      ‚àö should validate API root endpoint documentation (306 ms)
      ‚àö should validate documented endpoint response format (318 ms)
    üõ°Ô∏è Documentation Security and Access
      ‚àö should require authentication for documentation management (320 ms)
      ‚àö should validate documentation input data (326 ms)

[2026-01-28 14:30:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:43] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:43] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:44] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:30:44] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:44] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:44] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:44] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:44] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:44] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:44] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 14:30:44] info: [auth:fomzd6] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:fomzd6] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:fomzd6] Token from header: true
[2026-01-28 14:30:44] info: [auth:fomzd6] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:ao4x8] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:ao4x8] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:ao4x8] Token from header: true
[2026-01-28 14:30:44] info: [auth:ao4x8] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147784)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147784)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1212MB
[2026-01-28 14:30:44] info: [auth:11y80e] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:11y80e] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:11y80e] Token from header: true
[2026-01-28 14:30:44] info: [auth:11y80e] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:lxsius] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:lxsius] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:lxsius] Token from header: true
[2026-01-28 14:30:44] info: [auth:lxsius] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147785)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147785)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB
[2026-01-28 14:30:44] info: [auth:ynmec] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:ynmec] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:ynmec] Token from header: true
[2026-01-28 14:30:44] info: [auth:ynmec] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:z4rctf] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:z4rctf] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:z4rctf] Token from header: true
[2026-01-28 14:30:44] info: [auth:z4rctf] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 14:30:44] info: [auth:4puihb] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:4puihb] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:4puihb] Token from header: true
[2026-01-28 14:30:44] info: [auth:4puihb] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:g8cpw] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:g8cpw] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:g8cpw] Token from header: true
[2026-01-28 14:30:44] info: [auth:g8cpw] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147786)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147786)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147787)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147787)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1211MB
[2026-01-28 14:30:44] info: [auth:j1drz] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:44] info: [auth:j1drz] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:j1drz] Token from header: true
[2026-01-28 14:30:44] info: [auth:j1drz] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:jy38v] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:44] info: [auth:jy38v] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:jy38v] Token from header: true
[2026-01-28 14:30:44] info: [auth:jy38v] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 calculating for stallion 147784 and mare 147785
[2026-01-28 14:30:44] info: Calculating enhanced genetic probabilities
[2026-01-28 14:30:44] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147784 and mare 147785, 3 generations
[2026-01-28 14:30:44] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:30:44] info: Calculating genetic diversity impact
[2026-01-28 14:30:44] info: Calculating multi-generational predictions
[2026-01-28 14:30:44] info: [POST] /api/breeding/genetic-probability - 200
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 14:30:44] info: [auth:zmx3zc] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:zmx3zc] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:zmx3zc] Token from header: true
[2026-01-28 14:30:44] info: [auth:zmx3zc] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:0kyywb] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:0kyywb] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:0kyywb] Token from header: true
[2026-01-28 14:30:44] info: [auth:0kyywb] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147788)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147788)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB
[2026-01-28 14:30:44] info: [auth:u0hw1a] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:u0hw1a] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:u0hw1a] Token from header: true
[2026-01-28 14:30:44] info: [auth:u0hw1a] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:5kq82u] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:5kq82u] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:5kq82u] Token from header: true
[2026-01-28 14:30:44] info: [auth:5kq82u] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147789)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147789)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:44] info: [auth:c0swoh] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:c0swoh] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:c0swoh] Token from header: true
[2026-01-28 14:30:44] info: [auth:c0swoh] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:4o41ok] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:4o41ok] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:4o41ok] Token from header: true
[2026-01-28 14:30:44] info: [auth:4o41ok] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 14:30:44] info: [auth:f200ge] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:f200ge] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:f200ge] Token from header: true
[2026-01-28 14:30:44] info: [auth:f200ge] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:2wy7tx] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:2wy7tx] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:2wy7tx] Token from header: true
[2026-01-28 14:30:44] info: [auth:2wy7tx] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147790)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147790)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147791)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147791)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB
[2026-01-28 14:30:44] info: [auth:6pr87m] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:44] info: [auth:6pr87m] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:6pr87m] Token from header: true
[2026-01-28 14:30:44] info: [auth:6pr87m] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:g6l3n] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:44] info: [auth:g6l3n] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:g6l3n] Token from header: true
[2026-01-28 14:30:44] info: [auth:g6l3n] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [advancedBreedingGeneticsRoutes.genetic-probability] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 calculating for stallion 99999 and mare 147789
[2026-01-28 14:30:44] info: [POST] /api/breeding/genetic-probability - 404
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 14:30:44] info: [auth:j40mpa] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:j40mpa] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:j40mpa] Token from header: true
[2026-01-28 14:30:44] info: [auth:j40mpa] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:siedlm] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:siedlm] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:siedlm] Token from header: true
[2026-01-28 14:30:44] info: [auth:siedlm] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147792)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147792)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1219MB
[2026-01-28 14:30:44] info: [auth:zzn7d3] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:zzn7d3] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:zzn7d3] Token from header: true
[2026-01-28 14:30:44] info: [auth:zzn7d3] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:1qfccn] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:1qfccn] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:1qfccn] Token from header: true
[2026-01-28 14:30:44] info: [auth:1qfccn] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147793)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147793)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 14:30:44] info: [auth:2q96k9] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:2q96k9] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:2q96k9] Token from header: true
[2026-01-28 14:30:44] info: [auth:2q96k9] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:i0689m] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:i0689m] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:i0689m] Token from header: true
[2026-01-28 14:30:44] info: [auth:i0689m] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [POST] /api/horses
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:44] info: [auth:m744b] Starting auth for POST /horses
[2026-01-28 14:30:44] info: [auth:m744b] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:m744b] Token from header: true
[2026-01-28 14:30:44] info: [auth:m744b] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [auth:ns7cpj] Starting auth for POST /
[2026-01-28 14:30:44] info: [auth:ns7cpj] Token from cookie: false
[2026-01-28 14:30:44] info: [auth:ns7cpj] Token from header: true
[2026-01-28 14:30:44] info: [auth:ns7cpj] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147794)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147794)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147795)
[2026-01-28 14:30:44] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147795)
[2026-01-28 14:30:44] info: [POST] /api/horses - 201
[2026-01-28 14:30:44] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 14:30:45] info: [auth:ysqe1s] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:45] info: [auth:ysqe1s] Token from cookie: false
[2026-01-28 14:30:45] warn: [auth:ysqe1s] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 14:30:45] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 14:30:45] info: [auth:ndv4w] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:ndv4w] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:ndv4w] Token from header: true
[2026-01-28 14:30:45] info: [auth:ndv4w] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:kduskq] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:kduskq] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:kduskq] Token from header: true
[2026-01-28 14:30:45] info: [auth:kduskq] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147796)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147796)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:45] info: [auth:kaeide] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:kaeide] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:kaeide] Token from header: true
[2026-01-28 14:30:45] info: [auth:kaeide] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:3rh5xs] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:3rh5xs] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:3rh5xs] Token from header: true
[2026-01-28 14:30:45] info: [auth:3rh5xs] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147797)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147797)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1215MB
[2026-01-28 14:30:45] info: [auth:z7esto] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:z7esto] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:z7esto] Token from header: true
[2026-01-28 14:30:45] info: [auth:z7esto] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:r7nsel] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:r7nsel] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:r7nsel] Token from header: true
[2026-01-28 14:30:45] info: [auth:r7nsel] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1213MB
[2026-01-28 14:30:45] info: [auth:ahy20b] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:ahy20b] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:ahy20b] Token from header: true
[2026-01-28 14:30:45] info: [auth:ahy20b] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:4sxex] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:4sxex] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:4sxex] Token from header: true
[2026-01-28 14:30:45] info: [auth:4sxex] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147798)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147798)
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147799)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147799)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [GET] /api/breeding/lineage-analysis/147796/147797?generations=3
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:45] info: [auth:ruqeqm] Starting auth for GET /breeding/lineage-analysis/147796/147797
[2026-01-28 14:30:45] info: [auth:ruqeqm] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:ruqeqm] Token from header: true
[2026-01-28 14:30:45] info: [auth:ruqeqm] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:p2h81] Starting auth for GET /breeding/lineage-analysis/147796/147797
[2026-01-28 14:30:45] info: [auth:p2h81] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:p2h81] Token from header: true
[2026-01-28 14:30:45] info: [auth:p2h81] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 analyzing lineage for stallion 147796 and mare 147797
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147796 and mare 147797, 3 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 147796 and mare 147797
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 147796 and mare 147797, 3 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:30:45] info: [GET] /api/breeding/lineage-analysis/147796/147797?generations=3 - 200
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 14:30:45] info: [auth:pcchtf] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:pcchtf] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:pcchtf] Token from header: true
[2026-01-28 14:30:45] info: [auth:pcchtf] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:aqvt3o] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:aqvt3o] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:aqvt3o] Token from header: true
[2026-01-28 14:30:45] info: [auth:aqvt3o] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147800)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147800)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1217MB
[2026-01-28 14:30:45] info: [auth:u31mhc] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:u31mhc] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:u31mhc] Token from header: true
[2026-01-28 14:30:45] info: [auth:u31mhc] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:wmmtcg] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:wmmtcg] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:wmmtcg] Token from header: true
[2026-01-28 14:30:45] info: [auth:wmmtcg] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147801)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147801)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:45] info: [auth:8agzo7] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:8agzo7] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:8agzo7] Token from header: true
[2026-01-28 14:30:45] info: [auth:8agzo7] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:7nd0s] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:7nd0s] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:7nd0s] Token from header: true
[2026-01-28 14:30:45] info: [auth:7nd0s] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 14:30:45] info: [auth:kuvpi] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:kuvpi] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:kuvpi] Token from header: true
[2026-01-28 14:30:45] info: [auth:kuvpi] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:0ufzg] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:0ufzg] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:0ufzg] Token from header: true
[2026-01-28 14:30:45] info: [auth:0ufzg] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147802)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147802)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147803)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147803)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [GET] /api/breeding/lineage-analysis/99999/99998
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1216MB
[2026-01-28 14:30:45] info: [auth:2tqctc] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 14:30:45] info: [auth:2tqctc] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:2tqctc] Token from header: true
[2026-01-28 14:30:45] info: [auth:2tqctc] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:t5mymi] Starting auth for GET /breeding/lineage-analysis/99999/99998
[2026-01-28 14:30:45] info: [auth:t5mymi] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:t5mymi] Token from header: true
[2026-01-28 14:30:45] info: [auth:t5mymi] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 analyzing lineage for stallion 99999 and mare 99998
[2026-01-28 14:30:45] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 404
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:45] info: [auth:u3p2ed] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:u3p2ed] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:u3p2ed] Token from header: true
[2026-01-28 14:30:45] info: [auth:u3p2ed] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:drud7b] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:drud7b] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:drud7b] Token from header: true
[2026-01-28 14:30:45] info: [auth:drud7b] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147804)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147804)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 14:30:45] info: [auth:l3yid] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:l3yid] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:l3yid] Token from header: true
[2026-01-28 14:30:45] info: [auth:l3yid] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:lk7jyp] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:lk7jyp] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:lk7jyp] Token from header: true
[2026-01-28 14:30:45] info: [auth:lk7jyp] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147805)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147805)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1220MB
[2026-01-28 14:30:45] info: [auth:q6b12] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:q6b12] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:q6b12] Token from header: true
[2026-01-28 14:30:45] info: [auth:q6b12] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:5sh5eg] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:5sh5eg] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:5sh5eg] Token from header: true
[2026-01-28 14:30:45] info: [auth:5sh5eg] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB
[2026-01-28 14:30:45] info: [auth:5byypt] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:5byypt] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:5byypt] Token from header: true
[2026-01-28 14:30:45] info: [auth:5byypt] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:ih3kmk] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:ih3kmk] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:ih3kmk] Token from header: true
[2026-01-28 14:30:45] info: [auth:ih3kmk] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147806)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147806)
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147807)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147807)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 14:30:45] info: [auth:6zbsoe] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:30:45] info: [auth:6zbsoe] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:6zbsoe] Token from header: true
[2026-01-28 14:30:45] info: [auth:6zbsoe] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:5394zj] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:30:45] info: [auth:5394zj] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:5394zj] Token from header: true
[2026-01-28 14:30:45] info: [auth:5394zj] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [advancedBreedingGeneticsRoutes.breeding-recommendations] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 generating recommendations for stallion 147804 and mare 147805
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 147804 and mare 147805
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 147804 and mare 147805
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:30:45] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:30:45] info: [POST] /api/breeding/breeding-recommendations - 200
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1218MB
[2026-01-28 14:30:45] info: [auth:scq35d] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:scq35d] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:scq35d] Token from header: true
[2026-01-28 14:30:45] info: [auth:scq35d] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:6pgir] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:6pgir] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:6pgir] Token from header: true
[2026-01-28 14:30:45] info: [auth:6pgir] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147808)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147808)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:45] info: [auth:ium64] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:ium64] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:ium64] Token from header: true
[2026-01-28 14:30:45] info: [auth:ium64] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:2ebtcj] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:2ebtcj] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:2ebtcj] Token from header: true
[2026-01-28 14:30:45] info: [auth:2ebtcj] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147809)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147809)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 14:30:45] info: [auth:yleb8r] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:yleb8r] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:yleb8r] Token from header: true
[2026-01-28 14:30:45] info: [auth:yleb8r] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:o7zt] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:o7zt] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:o7zt] Token from header: true
[2026-01-28 14:30:45] info: [auth:o7zt] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 14:30:45] info: [auth:rm88ba] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:rm88ba] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:rm88ba] Token from header: true
[2026-01-28 14:30:45] info: [auth:rm88ba] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:agmd9i] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:agmd9i] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:agmd9i] Token from header: true
[2026-01-28 14:30:45] info: [auth:agmd9i] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147810)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147810)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147811)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147811)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:45] info: [auth:tla93] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:30:45] info: [auth:tla93] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:tla93] Token from header: true
[2026-01-28 14:30:45] info: [auth:tla93] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:h9fo4] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:30:45] info: [auth:h9fo4] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:h9fo4] Token from header: true
[2026-01-28 14:30:45] info: [auth:h9fo4] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [advancedBreedingGeneticsRoutes.population-analysis] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 analyzing 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:30:45] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:30:45] info: [POST] /api/genetics/population-analysis - 200
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 14:30:45] info: [auth:esprrj] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:esprrj] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:esprrj] Token from header: true
[2026-01-28 14:30:45] info: [auth:esprrj] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:qqiya5] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:qqiya5] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:qqiya5] Token from header: true
[2026-01-28 14:30:45] info: [auth:qqiya5] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147812)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147812)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 14:30:45] info: [auth:nuko6wb] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:nuko6wb] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:nuko6wb] Token from header: true
[2026-01-28 14:30:45] info: [auth:nuko6wb] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:vg1jx5] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:vg1jx5] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:vg1jx5] Token from header: true
[2026-01-28 14:30:45] info: [auth:vg1jx5] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147813)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147813)
[2026-01-28 14:30:45] info: [POST] /api/horses - 201
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 14:30:45] info: [auth:nc8kka] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:nc8kka] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:nc8kka] Token from header: true
[2026-01-28 14:30:45] info: [auth:nc8kka] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:2mzugi] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:2mzugi] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:2mzugi] Token from header: true
[2026-01-28 14:30:45] info: [auth:2mzugi] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [POST] /api/horses
[2026-01-28 14:30:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1225MB
[2026-01-28 14:30:45] info: [auth:yoaurc] Starting auth for POST /horses
[2026-01-28 14:30:45] info: [auth:yoaurc] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:yoaurc] Token from header: true
[2026-01-28 14:30:45] info: [auth:yoaurc] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [auth:zle14j] Starting auth for POST /
[2026-01-28 14:30:45] info: [auth:zle14j] Token from cookie: false
[2026-01-28 14:30:45] info: [auth:zle14j] Token from header: true
[2026-01-28 14:30:45] info: [auth:zle14j] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:45] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147814)
[2026-01-28 14:30:45] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147814)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147815)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147815)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 14:30:46] info: [auth:zwlall] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:30:46] info: [auth:zwlall] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:zwlall] Token from header: true
[2026-01-28 14:30:46] info: [auth:zwlall] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:ov85dv] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:30:46] info: [auth:ov85dv] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:ov85dv] Token from header: true
[2026-01-28 14:30:46] info: [auth:ov85dv] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [advancedBreedingGeneticsRoutes.inbreeding-analysis] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 analyzing inbreeding for stallion 147812 and mare 147813
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147812 and mare 147813
[2026-01-28 14:30:46] info: [POST] /api/genetics/inbreeding-analysis - 200
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 14:30:46] info: [auth:9t60eb] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:9t60eb] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:9t60eb] Token from header: true
[2026-01-28 14:30:46] info: [auth:9t60eb] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:1mvsgr] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:1mvsgr] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:1mvsgr] Token from header: true
[2026-01-28 14:30:46] info: [auth:1mvsgr] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147816)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147816)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1222MB
[2026-01-28 14:30:46] info: [auth:3kr52x] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:3kr52x] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:3kr52x] Token from header: true
[2026-01-28 14:30:46] info: [auth:3kr52x] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:popis] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:popis] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:popis] Token from header: true
[2026-01-28 14:30:46] info: [auth:popis] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147817)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147817)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 14:30:46] info: [auth:ezy7qx] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:ezy7qx] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:ezy7qx] Token from header: true
[2026-01-28 14:30:46] info: [auth:ezy7qx] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:wlw271i] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:wlw271i] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:wlw271i] Token from header: true
[2026-01-28 14:30:46] info: [auth:wlw271i] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 14:30:46] info: [auth:cv4pbq] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:cv4pbq] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:cv4pbq] Token from header: true
[2026-01-28 14:30:46] info: [auth:cv4pbq] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:0k31uh] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:0k31uh] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:0k31uh] Token from header: true
[2026-01-28 14:30:46] info: [auth:0k31uh] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147818)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147818)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147819)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147819)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [GET] /api/genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1221MB
[2026-01-28 14:30:46] info: [auth:l0nspm] Starting auth for GET /genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:l0nspm] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:l0nspm] Token from header: true
[2026-01-28 14:30:46] info: [auth:l0nspm] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:6j2jh8] Starting auth for GET /genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:6j2jh8] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:6j2jh8] Token from header: true
[2026-01-28 14:30:46] info: [auth:6j2jh8] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [advancedBreedingGeneticsRoutes.diversity-report] Generating report for user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 4 horses
[2026-01-28 14:30:46] info: [GET] /api/genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 - 200
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 14:30:46] info: [auth:78s55] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:78s55] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:78s55] Token from header: true
[2026-01-28 14:30:46] info: [auth:78s55] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:dvog9q] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:dvog9q] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:dvog9q] Token from header: true
[2026-01-28 14:30:46] info: [auth:dvog9q] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147820)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147820)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:1g7bsf] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:1g7bsf] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:1g7bsf] Token from header: true
[2026-01-28 14:30:46] info: [auth:1g7bsf] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:7f375e] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:7f375e] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:7f375e] Token from header: true
[2026-01-28 14:30:46] info: [auth:7f375e] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147821)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147821)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1229MB
[2026-01-28 14:30:46] info: [auth:m40i1] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:m40i1] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:m40i1] Token from header: true
[2026-01-28 14:30:46] info: [auth:m40i1] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:t5er1r] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:t5er1r] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:t5er1r] Token from header: true
[2026-01-28 14:30:46] info: [auth:t5er1r] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 14:30:46] info: [auth:ta4cv] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:ta4cv] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:ta4cv] Token from header: true
[2026-01-28 14:30:46] info: [auth:ta4cv] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:tpczql] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:tpczql] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:tpczql] Token from header: true
[2026-01-28 14:30:46] info: [auth:tpczql] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147822)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147822)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147823)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147823)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:c1wa2n] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:30:46] info: [auth:c1wa2n] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:c1wa2n] Token from header: true
[2026-01-28 14:30:46] info: [auth:c1wa2n] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:igzsld] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:30:46] info: [auth:igzsld] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:igzsld] Token from header: true
[2026-01-28 14:30:46] info: [auth:igzsld] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [advancedBreedingGeneticsRoutes.optimal-breeding] User 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 generating optimal breeding for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 4 horses
[2026-01-28 14:30:46] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 4 horses
[2026-01-28 14:30:46] info: [POST] /api/genetics/optimal-breeding - 200
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 14:30:46] info: [auth:9hzbhj] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:9hzbhj] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:9hzbhj] Token from header: true
[2026-01-28 14:30:46] info: [auth:9hzbhj] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:vs1ztn] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:vs1ztn] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:vs1ztn] Token from header: true
[2026-01-28 14:30:46] info: [auth:vs1ztn] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147824)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147824)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:ggswv9] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:ggswv9] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:ggswv9] Token from header: true
[2026-01-28 14:30:46] info: [auth:ggswv9] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:5frtc] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:5frtc] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:5frtc] Token from header: true
[2026-01-28 14:30:46] info: [auth:5frtc] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147825)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147825)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1230MB
[2026-01-28 14:30:46] info: [auth:oeb4ef] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:oeb4ef] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:oeb4ef] Token from header: true
[2026-01-28 14:30:46] info: [auth:oeb4ef] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:lhnmzu] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:lhnmzu] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:lhnmzu] Token from header: true
[2026-01-28 14:30:46] info: [auth:lhnmzu] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 14:30:46] info: [auth:5di23m] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:5di23m] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:5di23m] Token from header: true
[2026-01-28 14:30:46] info: [auth:5di23m] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:nlgr27] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:nlgr27] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:nlgr27] Token from header: true
[2026-01-28 14:30:46] info: [auth:nlgr27] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147826)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147826)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147827)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147827)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:gmdmn2] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:46] info: [auth:gmdmn2] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:gmdmn2] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [POST] /api/breeding/genetic-probability - 401
[2026-01-28 14:30:46] info: [GET] /api/breeding/lineage-analysis/147824/147825
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:e69qmk] Starting auth for GET /breeding/lineage-analysis/147824/147825
[2026-01-28 14:30:46] info: [auth:e69qmk] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:e69qmk] Access token is required for GET /breeding/lineage-analysis/147824/147825 from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [GET] /api/breeding/lineage-analysis/147824/147825 - 401
[2026-01-28 14:30:46] info: [POST] /api/breeding/breeding-recommendations
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:vhl52i] Starting auth for POST /breeding/breeding-recommendations
[2026-01-28 14:30:46] info: [auth:vhl52i] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:vhl52i] Access token is required for POST /breeding/breeding-recommendations from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [POST] /api/breeding/breeding-recommendations - 401
[2026-01-28 14:30:46] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1223MB
[2026-01-28 14:30:46] info: [auth:oy92i1] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:30:46] info: [auth:oy92i1] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:oy92i1] Access token is required for POST /genetics/population-analysis from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [POST] /api/genetics/population-analysis - 401
[2026-01-28 14:30:46] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:46] info: [auth:cxc50b] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:30:46] info: [auth:cxc50b] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:cxc50b] Access token is required for POST /genetics/inbreeding-analysis from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [POST] /api/genetics/inbreeding-analysis - 401
[2026-01-28 14:30:46] info: [GET] /api/genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:46] info: [auth:dg02ua] Starting auth for GET /genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:dg02ua] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:dg02ua] Access token is required for GET /genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [GET] /api/genetics/diversity-report/83cb473a-c46a-409c-8aee-d6d1b1b7a3d7 - 401
[2026-01-28 14:30:46] info: [POST] /api/genetics/optimal-breeding
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1224MB
[2026-01-28 14:30:46] info: [auth:ycxzxn] Starting auth for POST /genetics/optimal-breeding
[2026-01-28 14:30:46] info: [auth:ycxzxn] Token from cookie: false
[2026-01-28 14:30:46] warn: [auth:ycxzxn] Access token is required for POST /genetics/optimal-breeding from ::ffff:127.0.0.1
[2026-01-28 14:30:46] info: [POST] /api/genetics/optimal-breeding - 401
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 14:30:46] info: [auth:ob1mb8] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:ob1mb8] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:ob1mb8] Token from header: true
[2026-01-28 14:30:46] info: [auth:ob1mb8] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:miphjh] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:miphjh] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:miphjh] Token from header: true
[2026-01-28 14:30:46] info: [auth:miphjh] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147828)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147828)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 14:30:46] info: [auth:cp03b] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:cp03b] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:cp03b] Token from header: true
[2026-01-28 14:30:46] info: [auth:cp03b] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:6ojl0un] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:6ojl0un] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:6ojl0un] Token from header: true
[2026-01-28 14:30:46] info: [auth:6ojl0un] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147829)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147829)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1236MB
[2026-01-28 14:30:46] info: [auth:mya8bl] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:mya8bl] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:mya8bl] Token from header: true
[2026-01-28 14:30:46] info: [auth:mya8bl] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:71xhm] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:71xhm] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:71xhm] Token from header: true
[2026-01-28 14:30:46] info: [auth:71xhm] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [POST] /api/horses
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1234MB
[2026-01-28 14:30:46] info: [auth:xgyl4] Starting auth for POST /horses
[2026-01-28 14:30:46] info: [auth:xgyl4] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:xgyl4] Token from header: true
[2026-01-28 14:30:46] info: [auth:xgyl4] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:2cc7rx] Starting auth for POST /
[2026-01-28 14:30:46] info: [auth:2cc7rx] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:2cc7rx] Token from header: true
[2026-01-28 14:30:46] info: [auth:2cc7rx] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147830)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147830)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147831)
[2026-01-28 14:30:46] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147831)
[2026-01-28 14:30:46] info: [POST] /api/horses - 201
[2026-01-28 14:30:46] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1231MB
[2026-01-28 14:30:46] info: [auth:6xb0v] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:46] info: [auth:6xb0v] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:6xb0v] Token from header: true
[2026-01-28 14:30:46] info: [auth:6xb0v] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:sgbld] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:46] info: [auth:sgbld] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:sgbld] Token from header: true
[2026-01-28 14:30:46] info: [auth:sgbld] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [POST] /api/breeding/genetic-probability - 400
[2026-01-28 14:30:46] info: [POST] /api/genetics/inbreeding-analysis
[2026-01-28 14:30:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1237MB
[2026-01-28 14:30:46] info: [auth:dk7ath] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:30:46] info: [auth:dk7ath] Token from cookie: false
[2026-01-28 14:30:46] info: [auth:dk7ath] Token from header: true
[2026-01-28 14:30:46] info: [auth:dk7ath] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:46] info: [auth:9d0hu9] Starting auth for POST /genetics/inbreeding-analysis
[2026-01-28 14:30:46] info: [auth:9d0hu9] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:9d0hu9] Token from header: true
[2026-01-28 14:30:47] info: [auth:9d0hu9] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [POST] /api/genetics/inbreeding-analysis - 400
[2026-01-28 14:30:47] info: [POST] /api/genetics/population-analysis
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1228MB
[2026-01-28 14:30:47] info: [auth:i0z3i4] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:30:47] info: [auth:i0z3i4] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:i0z3i4] Token from header: true
[2026-01-28 14:30:47] info: [auth:i0z3i4] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [auth:bsife6] Starting auth for POST /genetics/population-analysis
[2026-01-28 14:30:47] info: [auth:bsife6] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:bsife6] Token from header: true
[2026-01-28 14:30:47] info: [auth:bsife6] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [POST] /api/genetics/population-analysis - 400
[2026-01-28 14:30:47] info: [POST] /api/horses
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1235MB
[2026-01-28 14:30:47] info: [auth:2wk6bo] Starting auth for POST /horses
[2026-01-28 14:30:47] info: [auth:2wk6bo] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:2wk6bo] Token from header: true
[2026-01-28 14:30:47] info: [auth:2wk6bo] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [auth:8qbp7j] Starting auth for POST /
[2026-01-28 14:30:47] info: [auth:8qbp7j] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:8qbp7j] Token from header: true
[2026-01-28 14:30:47] info: [auth:8qbp7j] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 147832)
[2026-01-28 14:30:47] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 147832)
[2026-01-28 14:30:47] info: [POST] /api/horses - 201
[2026-01-28 14:30:47] info: [POST] /api/horses
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1226MB
[2026-01-28 14:30:47] info: [auth:70cikn] Starting auth for POST /horses
[2026-01-28 14:30:47] info: [auth:70cikn] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:70cikn] Token from header: true
[2026-01-28 14:30:47] info: [auth:70cikn] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [auth:e62wtp] Starting auth for POST /
[2026-01-28 14:30:47] info: [auth:e62wtp] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:e62wtp] Token from header: true
[2026-01-28 14:30:47] info: [auth:e62wtp] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 147833)
[2026-01-28 14:30:47] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 147833)
[2026-01-28 14:30:47] info: [POST] /api/horses - 201
[2026-01-28 14:30:47] info: [POST] /api/horses
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1233MB
[2026-01-28 14:30:47] info: [auth:r3t8yl] Starting auth for POST /horses
[2026-01-28 14:30:47] info: [auth:r3t8yl] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:r3t8yl] Token from header: true
[2026-01-28 14:30:47] info: [auth:r3t8yl] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [auth:j6npre] Starting auth for POST /
[2026-01-28 14:30:47] info: [auth:j6npre] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:j6npre] Token from header: true
[2026-01-28 14:30:47] info: [auth:j6npre] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [POST] /api/horses
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1232MB
[2026-01-28 14:30:47] info: [auth:u5m9am] Starting auth for POST /horses
[2026-01-28 14:30:47] info: [auth:u5m9am] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:u5m9am] Token from header: true
[2026-01-28 14:30:47] info: [auth:u5m9am] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [auth:jro8dp] Starting auth for POST /
[2026-01-28 14:30:47] info: [auth:jro8dp] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:jro8dp] Token from header: true
[2026-01-28 14:30:47] info: [auth:jro8dp] Authenticated user 83cb473a-c46a-409c-8aee-d6d1b1b7a3d7
[2026-01-28 14:30:47] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 147834)
[2026-01-28 14:30:47] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 147834)
[2026-01-28 14:30:47] info: [POST] /api/horses - 201
[2026-01-28 14:30:47] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 147835)
[2026-01-28 14:30:47] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 147835)
[2026-01-28 14:30:47] info: [POST] /api/horses - 201
[2026-01-28 14:30:47] info: [POST] /api/auth/register
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 14:30:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:47] info: [EmailVerification] Created verification token
[2026-01-28 14:30:47] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:47] info: [authController.register] Verification email sent
[2026-01-28 14:30:47] info: [POST] /api/auth/register - 201
[2026-01-28 14:30:47] info: [POST] /api/auth/login
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1227MB
[2026-01-28 14:30:47] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:47] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:47] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:47] info: [POST] /api/breeding/genetic-probability
[2026-01-28 14:30:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1238MB
[2026-01-28 14:30:47] info: [auth:8xph1w] Starting auth for POST /breeding/genetic-probability
[2026-01-28 14:30:47] info: [auth:8xph1w] Token from cookie: false
[2026-01-28 14:30:47] info: [auth:8xph1w] Token from header: true
[2026-01-28 14:30:47] info: [auth:8xph1w] Authenticated user b5e91bdf-b9b2-4375-b8ad-1551d8334c68
[2026-01-28 14:30:47] info: [POST] /api/breeding/genetic-probability - 403
PASS tests/integration/advancedBreedingGeneticsAPI.test.mjs (5.079 s)
  üß¨ Advanced Breeding Genetics API Integration
    üéØ Enhanced Genetic Probability API
      ‚àö POST /api/breeding/genetic-probability should calculate breeding probabilities (249 ms)
      ‚àö POST /api/breeding/genetic-probability should handle invalid horse IDs (179 ms)
      ‚àö POST /api/breeding/genetic-probability should require authentication (160 ms)
    üå≥ Advanced Lineage Analysis API
      ‚àö GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree (205 ms)
      ‚àö GET /api/breeding/lineage-analysis should handle missing horses gracefully (173 ms)
      ‚àö POST /api/breeding/breeding-recommendations should generate comprehensive recommendations (202 ms)
    üìä Genetic Diversity Tracking API
      ‚àö POST /api/genetics/population-analysis should analyze population genetics (283 ms)
      ‚àö POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding (184 ms)
      ‚àö GET /api/genetics/diversity-report/:userId should generate comprehensive report (275 ms)
      ‚àö POST /api/genetics/optimal-breeding should recommend optimal breeding pairs (185 ms)
    üîí API Security and Validation
      ‚àö All genetic endpoints should require authentication (288 ms)
      ‚àö Genetic endpoints should validate input parameters (231 ms)
      ‚àö Genetic endpoints should handle ownership validation (775 ms)

[2026-01-28 14:30:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:48] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:48] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:30:48] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:48] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:30:48] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:30:48] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:30:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:30:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:30:48] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:30:49] info: [POST] /api/auth/login
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1287MB
[2026-01-28 14:30:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:49] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1285MB
[2026-01-28 14:30:49] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:49] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/login
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1286MB
[2026-01-28 14:30:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:49] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 14:30:49] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:49] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:49] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:49] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:49] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:49] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:49] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:49] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:49] error: Error Token reuse detected - please login again
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:49] info: [POST] /api/auth/login
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB
[2026-01-28 14:30:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:49] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:49] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:49] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/login
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 14:30:49] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:49] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:49] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:49] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:49] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1289MB
[2026-01-28 14:30:49] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:49] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:49] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:49] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:49] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:49] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:49] error: Error Token reuse detected - please login again
[2026-01-28 14:30:49] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] info: [POST] /api/auth/login
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:50] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1289MB
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1287MB
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:50] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Token reuse detected - please login again
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1299MB
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Invalid refresh token
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] info: [POST] /api/auth/login
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 14:30:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:50] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:50] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Token reuse detected - please login again
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] info: [POST] /api/auth/login
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:50] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1291MB
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/login
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:50] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:50] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:50] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1287MB
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:50] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:50] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:50] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Token reuse detected - please login again
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Token reuse detected - please login again
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:50] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:50] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:50] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:50] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:50] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:50] error: Error Token reuse detected - please login again
[2026-01-28 14:30:50] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/login
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 14:30:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:51] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:51] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:51] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:51] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:51] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:51] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:51] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/login
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1302MB
[2026-01-28 14:30:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:51] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1297MB
[2026-01-28 14:30:51] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:51] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 14:30:51] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:51] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:51] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:51] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:51] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:51] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:51] error: Error Token reuse detected - please login again
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 14:30:51] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:30:51] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:30:51] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:51] error: Error Invalid refresh token
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/login
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 14:30:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:51] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:51] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:51] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1291MB
[2026-01-28 14:30:51] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:51] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:51] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:51] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:51] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:51] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:51] error: Error Token reuse detected - please login again
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:51] warn: [authController.refreshToken] Token rotation failed:
[2026-01-28 14:30:51] error: [authController.refreshToken] Error refreshing token: Invalid refresh token
[2026-01-28 14:30:51] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:51] error: Error Invalid refresh token
[2026-01-28 14:30:51] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/login
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1295MB
[2026-01-28 14:30:51] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:51] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:51] info: [POST] /api/auth/logout
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB
[2026-01-28 14:30:51] info: [auth:hri14s] Starting auth for POST /logout
[2026-01-28 14:30:51] info: [auth:hri14s] Token from cookie: false
[2026-01-28 14:30:51] warn: [auth:hri14s] Access token is required for POST /logout from ::ffff:127.0.0.1
[2026-01-28 14:30:51] info: [POST] /api/auth/logout - 401
[2026-01-28 14:30:51] info: [POST] /api/auth/login
[2026-01-28 14:30:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:52] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:52] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:52] info: [POST] /api/auth/login - 200
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1304MB
[2026-01-28 14:30:52] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:52] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1300MB
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:30:52] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Token reuse detected - please login again
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:52] info: [POST] /api/auth/cleanup-tokens
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1303MB
[2026-01-28 14:30:52] info: [auth:rgan4q] Starting auth for POST /auth/cleanup-tokens
[2026-01-28 14:30:52] info: [auth:rgan4q] Token from cookie: false
[2026-01-28 14:30:52] warn: [auth:rgan4q] Access token is required for POST /auth/cleanup-tokens from ::ffff:127.0.0.1
[2026-01-28 14:30:52] info: [POST] /api/auth/cleanup-tokens - 401
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Token reuse detected - please login again
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1293MB
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Refresh token is required
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Token reuse detected - please login again
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Token reuse detected - please login again
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 401
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token
[2026-01-28 14:30:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB
[2026-01-28 14:30:52] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:52] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:52] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:52] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:30:52] error: Error Token reuse detected - please login again
[2026-01-28 14:30:52] info: [POST] /api/auth/refresh-token - 401
PASS __tests__/integration/token-rotation.test.mjs
  Token Rotation and Reuse Detection System
    Basic Token Rotation
      ‚àö should_rotate_refresh_token_on_each_use (295 ms)
      ‚àö should_invalidate_old_refresh_token_after_rotation (238 ms)
      ‚àö should_track_token_families_in_database (204 ms)
    Token Reuse Detection
      ‚àö should_detect_refresh_token_reuse (230 ms)
      ‚àö should_invalidate_entire_token_family_on_reuse_detection (285 ms)
      ‚àö should_require_reauthentication_after_family_invalidation (345 ms)
    Concurrent Token Usage
      ‚àö should_handle_concurrent_refresh_requests_gracefully (331 ms)
      ‚àö should_prevent_race_conditions_in_token_rotation (252 ms)
    Token Compromise Scenarios
      ‚àö should_handle_legitimate_user_concurrent_with_attacker (253 ms)
      ‚àö should_log_security_events_for_monitoring (228 ms)
    Token Expiration and Cleanup
      ‚àö should_reject_expired_refresh_tokens (112 ms)
      ‚àö should_clean_up_invalidated_token_families (363 ms)
    Database Constraints and Security
      ‚àö should_enforce_unique_constraints_on_token_families (75 ms)
      ‚àö should_validate_token_structure_and_signatures (190 ms)

[2026-01-28 14:30:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:53] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:53] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:53] info: [EmailVerification] Created verification token
[2026-01-28 14:30:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:53] info: [authController.register] Verification email sent
[2026-01-28 14:30:53] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:53] info: [EmailVerification] Created verification token
[2026-01-28 14:30:53] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:53] info: [authController.register] Verification email sent
[2026-01-28 14:30:53] error: [authController.register] Error registering user: User with this email or username already exists
[2026-01-28 14:30:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:54] info: [EmailVerification] Created verification token
[2026-01-28 14:30:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:54] info: [authController.register] Verification email sent
[2026-01-28 14:30:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:54] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:30:54] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:54] info: [EmailVerification] Created verification token
[2026-01-28 14:30:54] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:54] info: [authController.register] Verification email sent
[2026-01-28 14:30:55] error: [authController.login] Error logging in user: Invalid credentials
[2026-01-28 14:30:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:55] info: [EmailVerification] Created verification token
[2026-01-28 14:30:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:55] info: [authController.register] Verification email sent
[2026-01-28 14:30:55] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:55] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:55] info: [EmailVerification] Created verification token
[2026-01-28 14:30:55] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:55] info: [authController.register] Verification email sent
[2026-01-28 14:30:55] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:30:55] warn: [authController.refreshToken] Token family invalidated due to reuse detection
[2026-01-28 14:30:55] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again
[2026-01-28 14:30:55] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:55] info: [EmailVerification] Created verification token
[2026-01-28 14:30:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:56] info: [authController.register] Verification email sent
[2026-01-28 14:30:56] info: [auth:gvvg1p] Starting auth for GET /api/auth/me
[2026-01-28 14:30:56] info: [auth:gvvg1p] Token from cookie: false
[2026-01-28 14:30:56] info: [auth:gvvg1p] Token from header: true
[2026-01-28 14:30:56] info: [auth:gvvg1p] Authenticated user 623f8f2c-3657-4db2-9ac1-3dd77299403a
[2026-01-28 14:30:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:56] info: [EmailVerification] Created verification token
[2026-01-28 14:30:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:56] info: [authController.register] Verification email sent
[2026-01-28 14:30:56] info: [auth:woj2ab] Starting auth for GET /api/auth/me
[2026-01-28 14:30:56] info: [auth:woj2ab] Token from cookie: false
[2026-01-28 14:30:56] warn: [auth:woj2ab] Access token is required for GET /api/auth/me from ::ffff:127.0.0.1
[2026-01-28 14:30:56] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:56] info: [EmailVerification] Created verification token
[2026-01-28 14:30:56] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:56] info: [authController.register] Verification email sent
[2026-01-28 14:30:56] info: [auth:su9kwf] Starting auth for POST /api/auth/logout
[2026-01-28 14:30:56] info: [auth:su9kwf] Token from cookie: false
[2026-01-28 14:30:56] info: [auth:su9kwf] Token from header: true
[2026-01-28 14:30:56] info: [auth:su9kwf] Authenticated user 2faaed83-6b6e-4e4c-bfe3-78cb9ff3dc62
PASS tests/auth-working.test.mjs
  üîê INTEGRATION: Authentication System - Complete Auth Workflow Validation
    User Registration
      ‚àö should register a new user successfully (495 ms)
      ‚àö should reject duplicate email registration (312 ms)
    User Login
      ‚àö should login successfully with valid credentials (591 ms)
      ‚àö should reject login with invalid credentials (598 ms)
    Token Management
      ‚àö should refresh token successfully (325 ms)
      ‚àö should reject invalid refresh token (307 ms)
    Protected Routes
      ‚àö should get user profile with valid token (318 ms)
      ‚àö should reject profile request without token (317 ms)
      ‚àö should logout successfully (317 ms)

[2026-01-28 14:30:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:30:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:30:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:30:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:30:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:30:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:30:57] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:57] info: [EmailVerification] Created verification token
[2026-01-28 14:30:57] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:57] info: [authController.register] Verification email sent
[2026-01-28 14:30:57] info: [auth:ke2oe] Starting auth for GET /api/auth/profile
[2026-01-28 14:30:57] info: [auth:ke2oe] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:ke2oe] Token from header: true
[2026-01-28 14:30:57] info: [auth:ke2oe] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:tdwz9] Starting auth for GET /api/horses
[2026-01-28 14:30:57] info: [auth:tdwz9] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:tdwz9] Token from header: true
[2026-01-28 14:30:57] info: [auth:tdwz9] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:w2wkj8] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:30:57] info: [auth:w2wkj8] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:w2wkj8] Token from header: true
[2026-01-28 14:30:57] info: [auth:w2wkj8] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:lo5m05] Starting auth for GET /api/training/status
[2026-01-28 14:30:57] info: [auth:lo5m05] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:lo5m05] Token from header: true
[2026-01-28 14:30:57] info: [auth:lo5m05] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:99kssk] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 14:30:57] info: [auth:99kssk] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:99kssk] Token from header: true
[2026-01-28 14:30:57] info: [auth:99kssk] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:d55o5] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 14:30:57] info: [auth:d55o5] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:d55o5] Token from header: true
[2026-01-28 14:30:57] info: [auth:d55o5] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:86gn8o] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:30:57] info: [auth:86gn8o] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:86gn8o] Token from header: true
[2026-01-28 14:30:57] info: [auth:86gn8o] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:57] info: [auth:en7h6] Starting auth for GET /api/health/protected
[2026-01-28 14:30:57] info: [auth:en7h6] Token from cookie: false
[2026-01-28 14:30:57] info: [auth:en7h6] Token from header: true
[2026-01-28 14:30:57] info: [auth:en7h6] Authenticated user bd476fdd-3be3-4e27-a5aa-426a2a11ab19
[2026-01-28 14:30:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:58] info: [EmailVerification] Created verification token
[2026-01-28 14:30:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:58] info: [authController.register] Verification email sent
[2026-01-28 14:30:58] info: [auth:x6hpsg] Starting auth for GET /api/auth/profile
[2026-01-28 14:30:58] info: [auth:x6hpsg] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:x6hpsg] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:ge8ljq] Starting auth for GET /api/horses
[2026-01-28 14:30:58] info: [auth:ge8ljq] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:ge8ljq] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:50p0ci] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:30:58] info: [auth:50p0ci] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:50p0ci] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:cbrx9a] Starting auth for GET /api/training/status
[2026-01-28 14:30:58] info: [auth:cbrx9a] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:cbrx9a] Access token is required for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:60qvld] Starting auth for GET /api/grooms/my-grooms
[2026-01-28 14:30:58] info: [auth:60qvld] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:60qvld] Access token is required for GET /api/grooms/my-grooms from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:3nxh5d] Starting auth for GET /api/traits/my-discoveries
[2026-01-28 14:30:58] info: [auth:3nxh5d] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:3nxh5d] Access token is required for GET /api/traits/my-discoveries from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:wuw4bu] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:30:58] info: [auth:wuw4bu] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:wuw4bu] Access token is required for GET /api/dashboard/overview from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:54ne7w] Starting auth for GET /api/health/protected
[2026-01-28 14:30:58] info: [auth:54ne7w] Token from cookie: false
[2026-01-28 14:30:58] warn: [auth:54ne7w] Access token is required for GET /api/health/protected from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:58] info: [EmailVerification] Created verification token
[2026-01-28 14:30:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:58] info: [authController.register] Verification email sent
[2026-01-28 14:30:58] info: [auth:onzj7f] Starting auth for GET /api/auth/profile
[2026-01-28 14:30:58] info: [auth:onzj7f] Token from cookie: false
[2026-01-28 14:30:58] info: [auth:onzj7f] Token from header: true
[2026-01-28 14:30:58] warn: [auth:onzj7f] Invalid or expired token for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:apcdj7] Starting auth for GET /api/horses
[2026-01-28 14:30:58] info: [auth:apcdj7] Token from cookie: false
[2026-01-28 14:30:58] info: [auth:apcdj7] Token from header: true
[2026-01-28 14:30:58] warn: [auth:apcdj7] Invalid or expired token for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:j18v0w] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:30:58] info: [auth:j18v0w] Token from cookie: false
[2026-01-28 14:30:58] info: [auth:j18v0w] Token from header: true
[2026-01-28 14:30:58] warn: [auth:j18v0w] Invalid or expired token for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [auth:wm0ooa] Starting auth for GET /api/training/status
[2026-01-28 14:30:58] info: [auth:wm0ooa] Token from cookie: false
[2026-01-28 14:30:58] info: [auth:wm0ooa] Token from header: true
[2026-01-28 14:30:58] warn: [auth:wm0ooa] Invalid or expired token for GET /api/training/status from ::ffff:127.0.0.1
[2026-01-28 14:30:58] info: [TokenRotation] Created new token pair
[2026-01-28 14:30:58] info: [EmailVerification] Created verification token
[2026-01-28 14:30:58] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:30:58] info: [authController.register] Verification email sent
[2026-01-28 14:30:59] info: [TokenRotation] Token rotation successful
[2026-01-28 14:30:59] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:30:59] info: [auth:pz9z0b] Starting auth for GET /api/auth/profile
[2026-01-28 14:30:59] info: [auth:pz9z0b] Token from cookie: false
[2026-01-28 14:30:59] info: [auth:pz9z0b] Token from header: true
[2026-01-28 14:30:59] info: [auth:pz9z0b] Authenticated user 0ec74de0-0e47-4a7c-94a2-05eb9f37af93
[2026-01-28 14:31:00] info: [auth:x7d7vs] Starting auth for GET /api/horses
[2026-01-28 14:31:00] info: [auth:x7d7vs] Token from cookie: false
[2026-01-28 14:31:00] info: [auth:x7d7vs] Token from header: true
[2026-01-28 14:31:00] info: [auth:x7d7vs] Authenticated user 0ec74de0-0e47-4a7c-94a2-05eb9f37af93
[2026-01-28 14:31:00] info: [auth:g8ny3r] Starting auth for GET /api/dashboard/overview
[2026-01-28 14:31:00] info: [auth:g8ny3r] Token from cookie: false
[2026-01-28 14:31:00] info: [auth:g8ny3r] Token from header: true
[2026-01-28 14:31:00] info: [auth:g8ny3r] Authenticated user 0ec74de0-0e47-4a7c-94a2-05eb9f37af93
[2026-01-28 14:31:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:00] info: [EmailVerification] Created verification token
[2026-01-28 14:31:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:00] info: [authController.register] Verification email sent
[2026-01-28 14:31:00] info: [auth:uutb1k] Starting auth for GET /api/auth/profile
[2026-01-28 14:31:00] info: [auth:uutb1k] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:uutb1k] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [auth:vwiolt] Starting auth for GET /api/horses
[2026-01-28 14:31:00] info: [auth:vwiolt] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:vwiolt] Access token is required for GET /api/horses from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [auth:tforzy] Starting auth for GET /api/competition/my-entries
[2026-01-28 14:31:00] info: [auth:tforzy] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:tforzy] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:00] info: [EmailVerification] Created verification token
[2026-01-28 14:31:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:00] info: [authController.register] Verification email sent
[2026-01-28 14:31:00] info: [auth:wz85xu] Starting auth for GET /api/auth/profile
[2026-01-28 14:31:00] info: [auth:wz85xu] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:wz85xu] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [auth:tzhorm] Starting auth for GET /api/auth/profile
[2026-01-28 14:31:00] info: [auth:tzhorm] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:tzhorm] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [auth:k8i23f] Starting auth for GET /api/auth/profile
[2026-01-28 14:31:00] info: [auth:k8i23f] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:k8i23f] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
[2026-01-28 14:31:00] info: [auth:qoypqt] Starting auth for GET /api/auth/profile
[2026-01-28 14:31:00] info: [auth:qoypqt] Token from cookie: false
[2026-01-28 14:31:00] warn: [auth:qoypqt] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1
PASS tests/integration/auth-system-integration.test.mjs
  üîê Authentication System Integration Tests
    üåê Cross-System Authentication Validation
      ‚àö should authenticate successfully across all protected endpoints (515 ms)
      ‚àö should reject access to all protected endpoints without token (403 ms)
      ‚àö should reject access with invalid token across all systems (366 ms)
    üîÑ Token Refresh Integration
      ‚àö should refresh token and maintain access across systems (1391 ms)
    üõ°Ô∏è Security Validation
      ‚àö should maintain consistent error responses across systems (338 ms)
      ‚àö should handle malformed authorization headers consistently (348 ms)

[2026-01-28 14:31:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:01] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:01] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:01] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:01] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:01] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:01] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:31:02] info: [auth:khrlz] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:02] info: [auth:khrlz] Token from cookie: false
[2026-01-28 14:31:02] warn: [auth:khrlz] Access token is required for GET /groom-marketplace from ::ffff:127.0.0.1
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace - 401
[2026-01-28 14:31:02] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:31:02] info: [auth:smmlns] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:02] info: [auth:smmlns] Token from cookie: false
[2026-01-28 14:31:02] warn: [auth:smmlns] Access token is required for POST /groom-marketplace/refresh from ::ffff:127.0.0.1
[2026-01-28 14:31:02] info: [POST] /api/groom-marketplace/refresh - 401
[2026-01-28 14:31:02] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:31:02] info: [auth:q00f1j] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:02] info: [auth:q00f1j] Token from cookie: false
[2026-01-28 14:31:02] warn: [auth:q00f1j] Access token is required for POST /groom-marketplace/hire from ::ffff:127.0.0.1
[2026-01-28 14:31:02] info: [POST] /api/groom-marketplace/hire - 401
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1415MB
[2026-01-28 14:31:02] info: [auth:qzfatl] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:31:02] info: [auth:qzfatl] Token from cookie: false
[2026-01-28 14:31:02] warn: [auth:qzfatl] Access token is required for GET /groom-marketplace/stats from ::ffff:127.0.0.1
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace/stats - 401
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 14:31:02] info: [auth:kjbr9] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:02] info: [auth:kjbr9] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:kjbr9] Token from header: true
[2026-01-28 14:31:02] info: [auth:kjbr9] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [auth:lthp7a] Starting auth for GET /
[2026-01-28 14:31:02] info: [auth:lthp7a] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:lthp7a] Token from header: true
[2026-01-28 14:31:02] info: [auth:lthp7a] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [groomMarketplace] Generated new marketplace for user 04be377c-cd77-4080-9495-c64325ed438f with 12 grooms
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1416MB
[2026-01-28 14:31:02] info: [auth:7f24t] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:02] info: [auth:7f24t] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:7f24t] Token from header: true
[2026-01-28 14:31:02] info: [auth:7f24t] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [auth:301irm] Starting auth for GET /
[2026-01-28 14:31:02] info: [auth:301irm] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:301irm] Token from header: true
[2026-01-28 14:31:02] info: [auth:301irm] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1425MB
[2026-01-28 14:31:02] info: [auth:bqyq4] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:02] info: [auth:bqyq4] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:bqyq4] Token from header: true
[2026-01-28 14:31:02] info: [auth:bqyq4] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [auth:sayqnj] Starting auth for GET /
[2026-01-28 14:31:02] info: [auth:sayqnj] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:sayqnj] Token from header: true
[2026-01-28 14:31:02] info: [auth:sayqnj] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1422MB
[2026-01-28 14:31:02] info: [auth:zon6tr] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:02] info: [auth:zon6tr] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:zon6tr] Token from header: true
[2026-01-28 14:31:02] info: [auth:zon6tr] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [auth:nc4ps] Starting auth for GET /
[2026-01-28 14:31:02] info: [auth:nc4ps] Token from cookie: false
[2026-01-28 14:31:02] info: [auth:nc4ps] Token from header: true
[2026-01-28 14:31:02] info: [auth:nc4ps] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:02] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1419MB
[2026-01-28 14:31:03] info: [auth:6rg] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:03] info: [auth:6rg] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:6rg] Token from header: true
[2026-01-28 14:31:03] info: [auth:6rg] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:qiqgs] Starting auth for POST /refresh
[2026-01-28 14:31:03] info: [auth:qiqgs] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:qiqgs] Token from header: true
[2026-01-28 14:31:03] info: [auth:qiqgs] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshing marketplace for user 04be377c-cd77-4080-9495-c64325ed438f, force: false
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshed marketplace for user 04be377c-cd77-4080-9495-c64325ed438f with 12 new grooms
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1418MB
[2026-01-28 14:31:03] info: [auth:vjx30r] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:03] info: [auth:vjx30r] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:vjx30r] Token from header: true
[2026-01-28 14:31:03] info: [auth:vjx30r] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh - 403
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB
[2026-01-28 14:31:03] info: [auth:5b29rl] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:03] info: [auth:5b29rl] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:5b29rl] Token from header: true
[2026-01-28 14:31:03] info: [auth:5b29rl] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:jiztsn] Starting auth for POST /refresh
[2026-01-28 14:31:03] info: [auth:jiztsn] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:jiztsn] Token from header: true
[2026-01-28 14:31:03] info: [auth:jiztsn] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshing marketplace for user 04be377c-cd77-4080-9495-c64325ed438f, force: false
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1430MB
[2026-01-28 14:31:03] info: [auth:jzfhus] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:03] info: [auth:jzfhus] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:jzfhus] Token from header: true
[2026-01-28 14:31:03] info: [auth:jzfhus] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:3imshw] Starting auth for POST /refresh
[2026-01-28 14:31:03] info: [auth:3imshw] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:3imshw] Token from header: true
[2026-01-28 14:31:03] info: [auth:3imshw] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshing marketplace for user 04be377c-cd77-4080-9495-c64325ed438f, force: false
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh - 400
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:31:03] info: [auth:1teyst] Starting auth for POST /groom-marketplace/refresh
[2026-01-28 14:31:03] info: [auth:1teyst] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:1teyst] Token from header: true
[2026-01-28 14:31:03] info: [auth:1teyst] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:5xaty5r] Starting auth for POST /refresh
[2026-01-28 14:31:03] info: [auth:5xaty5r] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:5xaty5r] Token from header: true
[2026-01-28 14:31:03] info: [auth:5xaty5r] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshing marketplace for user 04be377c-cd77-4080-9495-c64325ed438f, force: true
[2026-01-28 14:31:03] info: [groomMarketplace] Charged user 04be377c-cd77-4080-9495-c64325ed438f $100 for premium refresh
[2026-01-28 14:31:03] info: [groomMarketplace] Refreshed marketplace for user 04be377c-cd77-4080-9495-c64325ed438f with 12 new grooms
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/refresh - 200
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 14:31:03] info: [auth:88m6nm] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:88m6nm] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:88m6nm] Token from header: true
[2026-01-28 14:31:03] info: [auth:88m6nm] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:t5l65e] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:t5l65e] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:t5l65e] Token from header: true
[2026-01-28 14:31:03] info: [auth:t5l65e] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1431MB
[2026-01-28 14:31:03] info: [auth:faau1l] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:03] info: [auth:faau1l] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:faau1l] Token from header: true
[2026-01-28 14:31:03] info: [auth:faau1l] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:4qy6lp] Starting auth for POST /hire
[2026-01-28 14:31:03] info: [auth:4qy6lp] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:4qy6lp] Token from header: true
[2026-01-28 14:31:03] info: [auth:4qy6lp] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] User 04be377c-cd77-4080-9495-c64325ed438f attempting to hire groom mkt_193e7983-f021-4a99-a36f-64592fd2bf23
[2026-01-28 14:31:03] info: [groomMarketplace] User 04be377c-cd77-4080-9495-c64325ed438f hired groom 74041 for $266
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1425MB
[2026-01-28 14:31:03] info: [auth:enfpxa] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:enfpxa] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:enfpxa] Token from header: true
[2026-01-28 14:31:03] info: [auth:enfpxa] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:lrm7i6] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:lrm7i6] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:lrm7i6] Token from header: true
[2026-01-28 14:31:03] info: [auth:lrm7i6] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 14:31:03] info: [auth:4465y] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:4465y] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:4465y] Token from header: true
[2026-01-28 14:31:03] info: [auth:4465y] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:zz1v8] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:zz1v8] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:zz1v8] Token from header: true
[2026-01-28 14:31:03] info: [auth:zz1v8] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1431MB
[2026-01-28 14:31:03] info: [auth:g3roa] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:03] info: [auth:g3roa] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:g3roa] Token from header: true
[2026-01-28 14:31:03] info: [auth:g3roa] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:l512ky] Starting auth for POST /hire
[2026-01-28 14:31:03] info: [auth:l512ky] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:l512ky] Token from header: true
[2026-01-28 14:31:03] info: [auth:l512ky] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] User 04be377c-cd77-4080-9495-c64325ed438f attempting to hire groom mkt_2ea23d2c-ea44-4486-93b5-4384e96ecbb9
[2026-01-28 14:31:03] info: [groomMarketplace] User 04be377c-cd77-4080-9495-c64325ed438f hired groom 74042 for $231
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire - 201
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:31:03] info: [auth:bn9blp] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:bn9blp] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:bn9blp] Token from header: true
[2026-01-28 14:31:03] info: [auth:bn9blp] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:7o44y] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:7o44y] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:7o44y] Token from header: true
[2026-01-28 14:31:03] info: [auth:7o44y] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1420MB
[2026-01-28 14:31:03] info: [auth:dpkdys] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:dpkdys] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:dpkdys] Token from header: true
[2026-01-28 14:31:03] info: [auth:dpkdys] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:f0ad7] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:f0ad7] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:f0ad7] Token from header: true
[2026-01-28 14:31:03] info: [auth:f0ad7] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1431MB
[2026-01-28 14:31:03] info: [auth:ddxb6] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:ddxb6] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:ddxb6] Token from header: true
[2026-01-28 14:31:03] info: [auth:ddxb6] Authenticated user cca9e314-e539-4ed0-9ced-b2572d65df36
[2026-01-28 14:31:03] info: [auth:vay1kg] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:vay1kg] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:vay1kg] Token from header: true
[2026-01-28 14:31:03] info: [auth:vay1kg] Authenticated user cca9e314-e539-4ed0-9ced-b2572d65df36
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user cca9e314-e539-4ed0-9ced-b2572d65df36
[2026-01-28 14:31:03] info: [groomMarketplace] Generated new marketplace for user cca9e314-e539-4ed0-9ced-b2572d65df36 with 12 grooms
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB
[2026-01-28 14:31:03] info: [auth:814pu] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:03] info: [auth:814pu] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:814pu] Token from header: true
[2026-01-28 14:31:03] info: [auth:814pu] Authenticated user cca9e314-e539-4ed0-9ced-b2572d65df36
[2026-01-28 14:31:03] info: [auth:fprqoo] Starting auth for POST /hire
[2026-01-28 14:31:03] info: [auth:fprqoo] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:fprqoo] Token from header: true
[2026-01-28 14:31:03] info: [auth:fprqoo] Authenticated user cca9e314-e539-4ed0-9ced-b2572d65df36
[2026-01-28 14:31:03] info: [groomMarketplace] User cca9e314-e539-4ed0-9ced-b2572d65df36 attempting to hire groom mkt_370d0725-94d5-4433-8c60-5a96be6c0214
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB
[2026-01-28 14:31:03] info: [auth:hnuv0l] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:hnuv0l] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:hnuv0l] Token from header: true
[2026-01-28 14:31:03] info: [auth:hnuv0l] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:9xzoa] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:9xzoa] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:9xzoa] Token from header: true
[2026-01-28 14:31:03] info: [auth:9xzoa] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Generated new marketplace for user 04be377c-cd77-4080-9495-c64325ed438f with 12 grooms
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1433MB
[2026-01-28 14:31:03] info: [auth:ql68rf] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:03] info: [auth:ql68rf] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:ql68rf] Token from header: true
[2026-01-28 14:31:03] info: [auth:ql68rf] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:5p6bm6] Starting auth for POST /hire
[2026-01-28 14:31:03] info: [auth:5p6bm6] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:5p6bm6] Token from header: true
[2026-01-28 14:31:03] info: [auth:5p6bm6] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] User 04be377c-cd77-4080-9495-c64325ed438f attempting to hire groom non-existent-id
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire - 404
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB
[2026-01-28 14:31:03] info: [auth:2l20uj] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:2l20uj] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:2l20uj] Token from header: true
[2026-01-28 14:31:03] info: [auth:2l20uj] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:65hc5d] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:65hc5d] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:65hc5d] Token from header: true
[2026-01-28 14:31:03] info: [auth:65hc5d] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:31:03] info: [auth:6fqpjm] Starting auth for POST /groom-marketplace/hire
[2026-01-28 14:31:03] info: [auth:6fqpjm] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:6fqpjm] Token from header: true
[2026-01-28 14:31:03] info: [auth:6fqpjm] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:ryfemi] Starting auth for POST /hire
[2026-01-28 14:31:03] info: [auth:ryfemi] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:ryfemi] Token from header: true
[2026-01-28 14:31:03] info: [auth:ryfemi] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [POST] /api/groom-marketplace/hire - 400
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace
[2026-01-28 14:31:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1432MB
[2026-01-28 14:31:03] info: [auth:95rzv] Starting auth for GET /groom-marketplace
[2026-01-28 14:31:03] info: [auth:95rzv] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:95rzv] Token from header: true
[2026-01-28 14:31:03] info: [auth:95rzv] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [auth:90568p] Starting auth for GET /
[2026-01-28 14:31:03] info: [auth:90568p] Token from cookie: false
[2026-01-28 14:31:03] info: [auth:90568p] Token from header: true
[2026-01-28 14:31:03] info: [auth:90568p] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [groomMarketplace] Getting marketplace for user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:03] info: [GET] /api/groom-marketplace - 200
[2026-01-28 14:31:04] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:31:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB
[2026-01-28 14:31:04] info: [auth:vl2vw] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:31:04] info: [auth:vl2vw] Token from cookie: false
[2026-01-28 14:31:04] info: [auth:vl2vw] Token from header: true
[2026-01-28 14:31:04] info: [auth:vl2vw] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:04] info: [auth:l7yzi] Starting auth for GET /stats
[2026-01-28 14:31:04] info: [auth:l7yzi] Token from cookie: false
[2026-01-28 14:31:04] info: [auth:l7yzi] Token from header: true
[2026-01-28 14:31:04] info: [auth:l7yzi] Authenticated user 04be377c-cd77-4080-9495-c64325ed438f
[2026-01-28 14:31:04] info: [GET] /api/groom-marketplace/stats - 200
[2026-01-28 14:31:04] info: [GET] /api/groom-marketplace/stats
[2026-01-28 14:31:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB
[2026-01-28 14:31:04] info: [auth:ywxema] Starting auth for GET /groom-marketplace/stats
[2026-01-28 14:31:04] info: [auth:ywxema] Token from cookie: false
[2026-01-28 14:31:04] info: [auth:ywxema] Token from header: true
[2026-01-28 14:31:04] info: [auth:ywxema] Authenticated user 2c3d8b4f-68e6-4e12-a482-bf1b10a26732
[2026-01-28 14:31:04] info: [auth:dkvai] Starting auth for GET /stats
[2026-01-28 14:31:04] info: [auth:dkvai] Token from cookie: false
[2026-01-28 14:31:04] info: [auth:dkvai] Token from header: true
[2026-01-28 14:31:04] info: [auth:dkvai] Authenticated user 2c3d8b4f-68e6-4e12-a482-bf1b10a26732
[2026-01-28 14:31:04] info: [groomMarketplace.getStats] Returning empty stats: {"totalGrooms":0,"lastRefresh":"never","refreshCount":0,"qualityDistribution":{},"specialtyDistribution":{}}
[2026-01-28 14:31:04] info: [GET] /api/groom-marketplace/stats - 200
PASS tests/integration/groomMarketplaceAPI.test.mjs
  üè™ INTEGRATION: Groom Marketplace API
    Authentication
      ‚àö should require authentication for all marketplace endpoints (97 ms)
    GET /api/groom-marketplace
      ‚àö should get marketplace with available grooms (46 ms)
      ‚àö should return same marketplace on subsequent calls (75 ms)
    POST /api/groom-marketplace/refresh
      ‚àö should refresh marketplace when free refresh available (596 ms)
      ‚àö should require payment for premium refresh when not enough time passed (69 ms)
      ‚àö should allow premium refresh with force=true (85 ms)
    POST /api/groom-marketplace/hire
      ‚àö should hire groom from marketplace successfully (81 ms)
      ‚àö should remove hired groom from marketplace (148 ms)
      ‚àö should reject hiring with insufficient funds (391 ms)
      ‚àö should reject hiring non-existent groom (79 ms)
      ‚àö should require marketplaceId (69 ms)
    GET /api/groom-marketplace/stats
      ‚àö should return marketplace statistics (74 ms)
      ‚àö should return empty stats for user with no marketplace (316 ms)

[2026-01-28 14:31:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:04] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:04] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:04] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:04] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:04] warn: [RedisCircuitBreaker] Operation failed: get
[2026-01-28 14:31:04] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:07] warn: [RedisCircuitBreaker] Operation timeout: get
[2026-01-28 14:31:07] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:07] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:07] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:08] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:08] info: [RedisCircuitBreaker] Circuit breaker manually reset
[2026-01-28 14:31:08] info: [RedisCircuitBreaker] Circuit breaker manually reset
PASS __tests__/integration/redis-circuit-breaker.test.mjs
  Redis Circuit Breaker Integration Tests
    Circuit Breaker Initialization
      ‚àö should create circuit breaker with default configuration (15 ms)
      ‚àö should create circuit breaker with custom configuration (6 ms)
      ‚àö should wrap all Redis operations with circuit breaker (6 ms)
    Circuit State Transitions
      ‚àö should start in CLOSED state (9 ms)
      ‚óã skipped should open circuit after 50% error rate over 10 requests (default threshold)
      ‚óã skipped should enter HALF_OPEN state after reset timeout
      ‚óã skipped should close circuit after successful recovery in HALF_OPEN state
    Redis Failure Scenarios
      ‚àö should handle Redis connection refused errors (12 ms)
      ‚àö should handle Redis operation timeout (> 3s) (3012 ms)
      ‚óã skipped should handle intermittent Redis failures
      ‚óã skipped should handle multiple operation types failing simultaneously
    Fallback Strategies
      ‚àö should allow operations to fail when circuit is CLOSED (6 ms)
      ‚óã skipped should reject operations immediately when circuit is OPEN
      ‚óã skipped should track fallback count when circuit is open
    Concurrent Request Handling
      ‚àö should handle concurrent successful requests (318 ms)
      ‚óã skipped should handle concurrent requests during circuit opening
    Metrics and Health Monitoring
      ‚àö should accurately track success count (389 ms)
      ‚àö should return correct health status based on circuit state (6 ms)
      ‚óã skipped should accurately track failure count
      ‚óã skipped should calculate error rate correctly
      ‚óã skipped should return degraded health status when circuit is OPEN
    Manual Circuit Control
      ‚àö should access raw Redis client for unwrapped operations (8 ms)
      ‚óã skipped should allow manual circuit reset
    Error Filtering
      ‚àö should filter ECONNREFUSED errors in test environment (1 ms)
      ‚àö should count ECONNREFUSED errors in production environment (1 ms)

[2026-01-28 14:31:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:09] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:09] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:09] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:09] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:09] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:09] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:09] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:09] info: [POST] /api/auth/register
[2026-01-28 14:31:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1504MB
[2026-01-28 14:31:09] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:09] info: [EmailVerification] Created verification token
[2026-01-28 14:31:09] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:09] info: [authController.register] Verification email sent
[2026-01-28 14:31:09] info: [POST] /api/auth/register - 201
[2026-01-28 14:31:09] info: [GET] /api/user-docs
[2026-01-28 14:31:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1509MB
[2026-01-28 14:31:09] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:31:09] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:31:09] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:31:09] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:31:09] info: [GET] /api/user-docs - 200
[2026-01-28 14:31:09] info: [GET] /api-docs/swagger.json
[2026-01-28 14:31:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1512MB
[2026-01-28 14:31:10] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:31:10] info: [GET] /api/memory/status
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1507MB
[2026-01-28 14:31:10] info: [auth:2fjl7] Starting auth for GET /memory/status
[2026-01-28 14:31:10] info: [auth:2fjl7] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:2fjl7] Token from header: true
[2026-01-28 14:31:10] info: [auth:2fjl7] Authenticated user 393cb002-7faa-4c59-92a8-e07348e25f6c
[2026-01-28 14:31:10] info: [auth:vm6kym] Starting auth for GET /status
[2026-01-28 14:31:10] info: [auth:vm6kym] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:vm6kym] Token from header: true
[2026-01-28 14:31:10] info: [auth:vm6kym] Authenticated user 393cb002-7faa-4c59-92a8-e07348e25f6c
[2026-01-28 14:31:10] info: [MemoryManagement] Getting memory status
[2026-01-28 14:31:10] info: [GET] /api/memory/status - 200
[2026-01-28 14:31:10] info: [GET] /api/users/393cb002-7faa-4c59-92a8-e07348e25f6c/progress
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [auth:q7iwt] Starting auth for GET /users/393cb002-7faa-4c59-92a8-e07348e25f6c/progress
[2026-01-28 14:31:10] info: [auth:q7iwt] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:q7iwt] Token from header: true
[2026-01-28 14:31:10] info: [auth:q7iwt] Authenticated user 393cb002-7faa-4c59-92a8-e07348e25f6c
[2026-01-28 14:31:10] info: [auth:ps47sw] Starting auth for GET /393cb002-7faa-4c59-92a8-e07348e25f6c/progress
[2026-01-28 14:31:10] info: [auth:ps47sw] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:ps47sw] Token from header: true
[2026-01-28 14:31:10] info: [auth:ps47sw] Authenticated user 393cb002-7faa-4c59-92a8-e07348e25f6c
[2026-01-28 14:31:10] info: [userRoutes] Self-access validated: user 393cb002-7faa-4c59-92a8-e07348e25f6c accessing own data
[2026-01-28 14:31:10] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user 393cb002-7faa-4c59-92a8-e07348e25f6c
[2026-01-28 14:31:10] info: [GET] /api/users/393cb002-7faa-4c59-92a8-e07348e25f6c/progress - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1501MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 14:31:10] info: [GET] /health
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [GET] /health - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/health
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1505MB
[2026-01-28 14:31:10] info: [GET] /api/user-docs/health - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/analytics
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1501MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:31:10] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:31:10] info: [POST] /api/grooms/interact
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:10] info: [auth:ok8whb] Starting auth for POST /grooms/interact
[2026-01-28 14:31:10] info: [auth:ok8whb] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:ok8whb] Token from header: true
[2026-01-28 14:31:10] info: [auth:ok8whb] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [auth:qa4vlm] Starting auth for POST /interact
[2026-01-28 14:31:10] info: [auth:qa4vlm] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:qa4vlm] Token from header: true
[2026-01-28 14:31:10] info: [auth:qa4vlm] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [ownership] Found owned foal 147836 for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [ownership] Found owned groom 74044 for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [groomController.recordInteraction] Recording early_touch interaction for foal 147836
[2026-01-28 14:31:10] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: calm
[2026-01-28 14:31:10] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for calm: none
[2026-01-28 14:31:10] info: [groomController.recordInteraction] Interaction recorded: 3 bonding, -2 stress
[2026-01-28 14:31:10] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 74044 for interaction_completed
[2026-01-28 14:31:10] info: [groomProgressionService.awardGroomXP] Groom 74044 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)
[2026-01-28 14:31:10] info: [groomController.recordInteraction] Awarded 2 XP to groom 74044 for interaction
[2026-01-28 14:31:10] info: [POST] /api/grooms/interact - 200
[2026-01-28 14:31:10] info: [GET] /api/grooms/user/a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:10] info: [auth:59n6jf] Starting auth for GET /grooms/user/a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [auth:59n6jf] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:59n6jf] Token from header: true
[2026-01-28 14:31:10] info: [auth:59n6jf] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [auth:b0q7q] Starting auth for GET /user/a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [auth:b0q7q] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:b0q7q] Token from header: true
[2026-01-28 14:31:10] info: [auth:b0q7q] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [groomController.getUserGrooms] Getting grooms for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/grooms/user/a1b5eb43-d839-44ef-9124-1012bffbe480 - 200
[2026-01-28 14:31:10] info: [GET] /api-docs/swagger.json
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB
[2026-01-28 14:31:10] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1508MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:31:10] info: [GET] /api/user-docs - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1503MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/analytics
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:31:10] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1505MB
[2026-01-28 14:31:10] info: [auth:y0hk6] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:y0hk6] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:y0hk6] Token from header: true
[2026-01-28 14:31:10] info: [auth:y0hk6] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1515MB
[2026-01-28 14:31:10] info: [auth:8oz7bp] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:8oz7bp] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:8oz7bp] Token from header: true
[2026-01-28 14:31:10] info: [auth:8oz7bp] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB
[2026-01-28 14:31:10] info: [auth:43fmla] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:43fmla] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:43fmla] Token from header: true
[2026-01-28 14:31:10] info: [auth:43fmla] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1505MB
[2026-01-28 14:31:10] info: [auth:u7xqma] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:u7xqma] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:u7xqma] Token from header: true
[2026-01-28 14:31:10] info: [auth:u7xqma] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1516MB
[2026-01-28 14:31:10] info: [auth:11j1eg] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:11j1eg] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:11j1eg] Token from header: true
[2026-01-28 14:31:10] info: [auth:11j1eg] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [auth:tao0ud] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:tao0ud] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:tao0ud] Token from header: true
[2026-01-28 14:31:10] info: [auth:tao0ud] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 14:31:10] info: [auth:i28ehv] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:i28ehv] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:i28ehv] Token from header: true
[2026-01-28 14:31:10] info: [auth:i28ehv] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1516MB
[2026-01-28 14:31:10] info: [auth:yqtlk] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:yqtlk] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:yqtlk] Token from header: true
[2026-01-28 14:31:10] info: [auth:yqtlk] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [auth:ps6bab] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:ps6bab] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:ps6bab] Token from header: true
[2026-01-28 14:31:10] info: [auth:ps6bab] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 14:31:10] info: [auth:nce31m] Starting auth for GET /horses
[2026-01-28 14:31:10] info: [auth:nce31m] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:nce31m] Token from header: true
[2026-01-28 14:31:10] info: [auth:nce31m] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/horses - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1519MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1515MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1511MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1517MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1507MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1513MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1518MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1509MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1520MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1516MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1512MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1517MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1508MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1513MB
[2026-01-28 14:31:10] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:31:10] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200
[2026-01-28 14:31:10] info: [POST] /api/horses
[2026-01-28 14:31:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1517MB
[2026-01-28 14:31:10] info: [auth:ot91wo] Starting auth for POST /horses
[2026-01-28 14:31:10] info: [auth:ot91wo] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:ot91wo] Token from header: true
[2026-01-28 14:31:10] info: [auth:ot91wo] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:10] info: [auth:b86v9c] Starting auth for POST /
[2026-01-28 14:31:10] info: [auth:b86v9c] Token from cookie: false
[2026-01-28 14:31:10] info: [auth:b86v9c] Token from header: true
[2026-01-28 14:31:11] info: [auth:b86v9c] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:11] info: [horseModel.createHorse] Successfully created horse: Consistency Test Horse (ID: 147837)
[2026-01-28 14:31:11] info: [horseRoutes] Created new horse: Consistency Test Horse (ID: 147837)
[2026-01-28 14:31:11] info: [POST] /api/horses - 201
[2026-01-28 14:31:11] info: [GET] /api/users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB
[2026-01-28 14:31:11] info: [auth:u5vs5] Starting auth for GET /users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:11] info: [auth:u5vs5] Token from cookie: false
[2026-01-28 14:31:11] info: [auth:u5vs5] Token from header: true
[2026-01-28 14:31:11] info: [auth:u5vs5] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:11] info: [auth:9bn6w] Starting auth for GET /a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:11] info: [auth:9bn6w] Token from cookie: false
[2026-01-28 14:31:11] info: [auth:9bn6w] Token from header: true
[2026-01-28 14:31:11] info: [auth:9bn6w] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:11] info: [userRoutes] Self-access validated: user a1b5eb43-d839-44ef-9124-1012bffbe480 accessing own data
[2026-01-28 14:31:11] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:11] info: [GET] /api/users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress - 200
[2026-01-28 14:31:12] info: [POST] /api/training/train
[2026-01-28 14:31:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:12] info: [auth:epttfl2] Starting auth for POST /training/train
[2026-01-28 14:31:12] info: [auth:epttfl2] Token from cookie: false
[2026-01-28 14:31:12] info: [auth:epttfl2] Token from header: true
[2026-01-28 14:31:12] info: [auth:epttfl2] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:12] info: [ownership] Found owned horse 147838 for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:12] info: [trainingController.trainRouteHandler] Training request for horse 147838 in Dressage
[2026-01-28 14:31:12] info: [trainingController.trainHorse] Attempting to train horse 147838 in Dressage
[2026-01-28 14:31:12] info: [trainingController.canTrain] Checking training eligibility for horse 147838 in Dressage
[2026-01-28 14:31:12] info: [trainingModel.getHorseAge] Getting age for horse 147838
[2026-01-28 14:31:12] info: [trainingModel.getHorseAge] Horse 147838 is 7 years old
[2026-01-28 14:31:12] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147838 across all disciplines
[2026-01-28 14:31:12] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147838
[2026-01-28 14:31:12] info: [trainingController.canTrain] Horse 147838 is eligible to train in Dressage
[2026-01-28 14:31:12] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 147838)
[2026-01-28 14:31:12] info: [trainingController.trainHorse] Horse 147838 has traits: 
[2026-01-28 14:31:12] info: [trainingModel.logTrainingSession] Logging training session for horse 147838 in Dressage
[2026-01-28 14:31:12] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9053
[2026-01-28 14:31:12] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147838 by +5
[2026-01-28 14:31:12] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147838 by +5
[2026-01-28 14:31:12] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147838: 0 -> 5
[2026-01-28 14:31:12] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147838
[2026-01-28 14:31:12] info: [xpLogModel.logXpEvent] Logging XP event: User a1b5eb43-d839-44ef-9124-1012bffbe480, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage
[2026-01-28 14:31:12] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4476, User a1b5eb43-d839-44ef-9124-1012bffbe480, Amount: 5
[2026-01-28 14:31:12] info: [trainingController.trainHorse] Awarded 5 XP to user a1b5eb43-d839-44ef-9124-1012bffbe480 for training
[2026-01-28 14:31:12] info: [trainingController.trainHorse] Successfully trained horse 147838 in Dressage (Log ID: 9053, Score +5)
[2026-01-28 14:31:12] info: [POST] /api/training/train - 200
[2026-01-28 14:31:12] info: [GET] /api/users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1514MB
[2026-01-28 14:31:12] info: [auth:emiebf] Starting auth for GET /users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:12] info: [auth:emiebf] Token from cookie: false
[2026-01-28 14:31:12] info: [auth:emiebf] Token from header: true
[2026-01-28 14:31:12] info: [auth:emiebf] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:12] info: [auth:esp8dp] Starting auth for GET /a1b5eb43-d839-44ef-9124-1012bffbe480/progress
[2026-01-28 14:31:12] info: [auth:esp8dp] Token from cookie: false
[2026-01-28 14:31:12] info: [auth:esp8dp] Token from header: true
[2026-01-28 14:31:12] info: [auth:esp8dp] Authenticated user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:12] info: [userRoutes] Self-access validated: user a1b5eb43-d839-44ef-9124-1012bffbe480 accessing own data
[2026-01-28 14:31:12] info: [userController.getUserProgressAPI] Cache MISS - Getting comprehensive progress for user a1b5eb43-d839-44ef-9124-1012bffbe480
[2026-01-28 14:31:12] info: [GET] /api/users/a1b5eb43-d839-44ef-9124-1012bffbe480/progress - 200
PASS __tests__/integration/systemWideIntegration.test.mjs
  System-Wide Integration Tests
    Complete User Journey: Registration to Competition
      ‚àö End-to-end user workflow: registration ‚Üí horse purchase ‚Üí training ‚Üí competition (488 ms)
    System Integration Validation
      ‚àö Documentation system integration (54 ms)
      ‚àö Groom career progression and talent system integration (205 ms)
      ‚àö Documentation system integration with API endpoints (72 ms)
    Performance and Load Testing
      ‚àö API response times under load (257 ms)
      ‚àö Memory usage monitoring during operations (286 ms)
    Data Consistency Validation
      ‚àö Database transaction integrity across systems (59 ms)
      ‚àö User progress tracking accuracy (1254 ms)

[2026-01-28 14:31:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:12] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:12] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:13] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:13] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:13] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:13] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:13] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:13] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:13] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:13] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:13] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:13] info: [POST] /api/auth/register
[2026-01-28 14:31:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB
[2026-01-28 14:31:13] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:13] info: [EmailVerification] Created verification token
[2026-01-28 14:31:13] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:13] info: [authController.register] Verification email sent
[2026-01-28 14:31:13] info: [POST] /api/auth/register - 201
[2026-01-28 14:31:13] info: [POST] /api/auth/register
[2026-01-28 14:31:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] info: [EmailVerification] Created verification token
[2026-01-28 14:31:14] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:14] info: [authController.register] Verification email sent
[2026-01-28 14:31:14] info: [POST] /api/auth/register - 201
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1573MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:14] info: [GET] /api/auth/profile
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1566MB
[2026-01-28 14:31:14] info: [auth:qe0pt7] Starting auth for GET /profile
[2026-01-28 14:31:14] info: [auth:qe0pt7] Token from cookie: true
[2026-01-28 14:31:14] info: [auth:qe0pt7] Authenticated user 25caa7d3-cebb-4bc1-8f35-66d88a57413e
[2026-01-28 14:31:14] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:14] info: [GET] /api/auth/profile
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1577MB
[2026-01-28 14:31:14] info: [auth:zi818b] Starting auth for GET /profile
[2026-01-28 14:31:14] info: [auth:zi818b] Token from cookie: false
[2026-01-28 14:31:14] warn: [auth:zi818b] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:14] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:14] info: [GET] /api/auth/profile
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1571MB
[2026-01-28 14:31:14] info: [auth:6k5zjm] Starting auth for GET /profile
[2026-01-28 14:31:14] info: [auth:6k5zjm] Token from cookie: true
[2026-01-28 14:31:14] warn: [auth:6k5zjm] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:14] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/refresh-token
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1581MB
[2026-01-28 14:31:14] info: [TokenRotation] Token rotation successful
[2026-01-28 14:31:14] info: [authController.refreshToken] Token rotation successful
[2026-01-28 14:31:14] info: [POST] /api/auth/refresh-token - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/refresh-token
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:31:14] error: [authController.refreshToken] Error refreshing token: Refresh token is required
[2026-01-28 14:31:14] error: [POST] /api/auth/refresh-token - ERROR
[2026-01-28 14:31:14] error: Error Refresh token is required
[2026-01-28 14:31:14] info: [POST] /api/auth/refresh-token - 400
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1582MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/logout
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:31:14] info: [auth:sm1iav] Starting auth for POST /logout
[2026-01-28 14:31:14] info: [auth:sm1iav] Token from cookie: true
[2026-01-28 14:31:14] info: [auth:sm1iav] Authenticated user 25caa7d3-cebb-4bc1-8f35-66d88a57413e
[2026-01-28 14:31:14] info: [POST] /api/auth/logout - 200
[2026-01-28 14:31:14] info: [POST] /api/auth/login
[2026-01-28 14:31:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1579MB
[2026-01-28 14:31:14] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:14] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:14] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:15] info: [POST] /api/auth/logout
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:31:15] info: [auth:0rzlf9] Starting auth for POST /logout
[2026-01-28 14:31:15] info: [auth:0rzlf9] Token from cookie: true
[2026-01-28 14:31:15] info: [auth:0rzlf9] Authenticated user 25caa7d3-cebb-4bc1-8f35-66d88a57413e
[2026-01-28 14:31:15] info: [POST] /api/auth/logout - 200
[2026-01-28 14:31:15] info: [POST] /api/auth/register
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1577MB
[2026-01-28 14:31:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:15] info: [EmailVerification] Created verification token
[2026-01-28 14:31:15] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:15] info: [authController.register] Verification email sent
[2026-01-28 14:31:15] info: [POST] /api/auth/register - 201
[2026-01-28 14:31:15] info: [POST] /api/auth/login
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1580MB
[2026-01-28 14:31:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:15] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:15] info: [POST] /api/auth/login
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1579MB
[2026-01-28 14:31:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:15] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:15] info: [POST] /api/auth/login
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1578MB
[2026-01-28 14:31:15] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:15] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:15] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:15] info: [GET] /api/auth/profile
[2026-01-28 14:31:15] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:31:15] info: [auth:qfuj99] Starting auth for GET /profile
[2026-01-28 14:31:15] info: [auth:qfuj99] Token from cookie: false
[2026-01-28 14:31:15] info: [auth:qfuj99] Token from header: true
[2026-01-28 14:31:15] info: [auth:qfuj99] Authenticated user c9d06c41-f652-47f2-bfb3-c632f4434491
[2026-01-28 14:31:15] info: [GET] /api/auth/profile - 200
PASS __tests__/integration/auth-cookies.test.mjs
  Authentication with HttpOnly Cookies
    POST /api/auth/register - Cookie Setting
      ‚àö should set httpOnly cookies on successful registration (357 ms)
      ‚àö should NOT expose tokens in response body (XSS protection) (315 ms)
    POST /api/auth/login - Cookie Setting
      ‚àö should set httpOnly cookies on successful login (95 ms)
      ‚àö should include SameSite=Strict for CSRF protection (95 ms)
    GET /api/auth/profile - Cookie Authentication
      ‚àö should authenticate with httpOnly cookies (24 ms)
      ‚àö should reject request without cookies (19 ms)
      ‚àö should reject request with invalid cookies (16 ms)
    POST /api/auth/refresh-token - Cookie Refresh
      ‚àö should refresh accessToken using httpOnly refreshToken cookie (31 ms)
      ‚àö should reject refresh without refreshToken cookie (28 ms)
    POST /api/auth/logout - Cookie Clearing
      ‚àö should clear httpOnly cookies on logout (121 ms)
      ‚àö should invalidate refresh tokens in database on logout (129 ms)
    Security: XSS Protection Verification
      ‚àö should never include JWT tokens in any response body (613 ms)
    Security: CSRF Protection Verification
      ‚àö should set SameSite=Strict on all auth cookies (94 ms)
    Production Security: HTTPS Enforcement
      ‚àö should set Secure flag in production environment (94 ms)
    Backward Compatibility: Authorization Header Fallback
      ‚àö should still accept Authorization header for backward compatibility (21 ms)

[2026-01-28 14:31:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:17] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:17] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:17] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:17] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:17] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:17] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] info: [POST] /api/auth/login
[2026-01-28 14:31:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1399MB
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:17] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:17] info: [POST] /api/auth/login
[2026-01-28 14:31:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1399MB
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:17] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] info: [POST] /api/auth/login
[2026-01-28 14:31:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:31:17] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:17] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:17] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:17] info: [POST] /api/auth/logout
[2026-01-28 14:31:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1397MB
[2026-01-28 14:31:17] info: [auth:sbikn] Starting auth for POST /logout
[2026-01-28 14:31:17] info: [auth:sbikn] Token from cookie: true
[2026-01-28 14:31:17] info: [auth:sbikn] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:17] info: [POST] /api/auth/logout - 200
[2026-01-28 14:31:17] info: [POST] /api/auth/login
[2026-01-28 14:31:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1399MB
[2026-01-28 14:31:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:18] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:18] info: [POST] /api/auth/logout
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1397MB
[2026-01-28 14:31:18] info: [auth:gem8nm] Starting auth for POST /logout
[2026-01-28 14:31:18] info: [auth:gem8nm] Token from cookie: true
[2026-01-28 14:31:18] info: [auth:gem8nm] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:18] info: [POST] /api/auth/logout - 200
[2026-01-28 14:31:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:18] info: [POST] /api/auth/login
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1401MB
[2026-01-28 14:31:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:18] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:18] info: [POST] /api/auth/change-password
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1399MB
[2026-01-28 14:31:18] info: [auth:g843ra] Starting auth for POST /change-password
[2026-01-28 14:31:18] info: [auth:g843ra] Token from cookie: true
[2026-01-28 14:31:18] info: [auth:g843ra] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:18] info: [authController.changePassword] Password changed successfully
[2026-01-28 14:31:18] info: [POST] /api/auth/change-password - 200
[2026-01-28 14:31:18] info: [POST] /api/auth/login
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1404MB
[2026-01-28 14:31:18] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:18] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:18] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:18] info: [POST] /api/auth/change-password
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1401MB
[2026-01-28 14:31:18] info: [auth:h06ilv] Starting auth for POST /change-password
[2026-01-28 14:31:18] info: [auth:h06ilv] Token from cookie: true
[2026-01-28 14:31:18] info: [auth:h06ilv] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:18] error: [authController.changePassword] Error changing password: Current password is incorrect
[2026-01-28 14:31:18] error: [POST] /api/auth/change-password - ERROR
[2026-01-28 14:31:18] error: Error Current password is incorrect
[2026-01-28 14:31:18] info: [POST] /api/auth/change-password - 401
[2026-01-28 14:31:18] info: [POST] /api/auth/login
[2026-01-28 14:31:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:19] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:19] info: [POST] /api/auth/change-password
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:31:19] info: [auth:a78pmc] Starting auth for POST /change-password
[2026-01-28 14:31:19] info: [auth:a78pmc] Token from cookie: true
[2026-01-28 14:31:19] info: [auth:a78pmc] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:19] warn: [Validation] Input validation failed
[2026-01-28 14:31:19] info: [POST] /api/auth/change-password - 400
[2026-01-28 14:31:19] info: [POST] /api/auth/login
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1403MB
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:19] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:19] info: [GET] /api/auth/profile
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1400MB
[2026-01-28 14:31:19] info: [auth:fr4yc] Starting auth for GET /profile
[2026-01-28 14:31:19] info: [auth:fr4yc] Token from cookie: true
[2026-01-28 14:31:19] warn: [auth:fr4yc] Session too old
[2026-01-28 14:31:19] warn: [auth:fr4yc] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:19] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:19] info: [POST] /api/auth/login
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:19] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:19] info: [GET] /api/auth/profile
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1400MB
[2026-01-28 14:31:19] info: [auth:i3e1bt] Starting auth for GET /profile
[2026-01-28 14:31:19] info: [auth:i3e1bt] Token from cookie: true
[2026-01-28 14:31:19] info: [auth:i3e1bt] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:19] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:19] info: [POST] /api/auth/login
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1402MB
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
[2026-01-28 14:31:19] info: [POST] /api/auth/login - 200
[2026-01-28 14:31:19] info: [GET] /api/auth/profile
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1400MB
[2026-01-28 14:31:19] info: [auth:9f0s2] Starting auth for GET /profile
[2026-01-28 14:31:19] info: [auth:9f0s2] Token from cookie: true
[2026-01-28 14:31:19] info: [auth:9f0s2] Authenticated user b5128c17-bbd1-4efc-b560-058b4e7d9f94
[2026-01-28 14:31:19] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:31:19] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:31:19] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:19] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:31:19] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:31:19.512Z"}
[2026-01-28 14:31:19] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:31:19] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:31:19] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:19] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:31:19] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:31:19.524Z"}
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:19] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:31:19] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:31:19] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:19] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:31:19] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:31:19.545Z"}
[2026-01-28 14:31:19] info: [POST] /api/auth/register
[2026-01-28 14:31:19] warn: [MemoryMonitoring] Memory threshold exceeded: 1405MB
[2026-01-28 14:31:19] warn: [Validation] Input validation failed
[2026-01-28 14:31:19] info: [POST] /api/auth/register - 400
PASS __tests__/integration/session-lifecycle.test.mjs
  Session Lifecycle Management
    CWE-384: Token Regeneration on Login
      ‚àö should delete all existing refresh tokens on login (146 ms)
      ‚àö should create fresh token pair on login (99 ms)
    CWE-613: Token Cleanup on Logout
      ‚àö should delete all refresh tokens on logout (134 ms)
      ‚àö should clear auth cookies on logout (124 ms)
    Force Logout on Password Change
      ‚àö should invalidate all sessions when password is changed (746 ms)
      ‚àö should reject password change with incorrect old password (199 ms)
      ‚àö should validate new password requirements (132 ms)
    CWE-613: Absolute Session Expiry
      ‚àö should reject tokens older than 7 days (128 ms)
      ‚àö should accept tokens less than 7 days old (130 ms)
      ‚àö should calculate token age correctly at the boundary (exactly 7 days) (119 ms)
    Token Cleanup Cron Job
      ‚àö should remove expired refresh tokens (19 ms)
      ‚àö should remove old invalidated tokens (30+ days) (9 ms)
      ‚àö should not remove valid active tokens (22 ms)
    Integration: Complete Session Lifecycle
      ‚àö should handle complete user journey: register -> login -> use session -> change password -> re-login (23 ms)

[2026-01-28 14:31:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:20] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:20] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:20] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:20] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:20] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:20] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:20] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:20] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:20] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:20] info: [POST] /api/horses/foals
[2026-01-28 14:31:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 14:31:20] info: [auth:y3nef] Starting auth for POST /horses/foals
[2026-01-28 14:31:20] info: [auth:y3nef] Token from cookie: false
[2026-01-28 14:31:20] info: [auth:y3nef] Token from header: true
[2026-01-28 14:31:20] info: [auth:y3nef] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:20] info: [auth:njtpvh] Starting auth for POST /foals
[2026-01-28 14:31:20] info: [auth:njtpvh] Token from cookie: false
[2026-01-28 14:31:20] info: [auth:njtpvh] Token from header: true
[2026-01-28 14:31:20] info: [auth:njtpvh] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:20] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 147839 and dam 147839
[2026-01-28 14:31:20] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147839)
[2026-01-28 14:31:20] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147839)
[2026-01-28 14:31:20] info: [horseController.gatherLineage] Gathering lineage for sire 147839 and dam 147839, 3 generations
[2026-01-28 14:31:20] info: [horseController.gatherLineage] Gathered 1 ancestors
[2026-01-28 14:31:20] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)
[2026-01-28 14:31:20] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1
[2026-01-28 14:31:20] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth
[2026-01-28 14:31:20] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75
[2026-01-28 14:31:20] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}
[2026-01-28 14:31:20] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}
[2026-01-28 14:31:20] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 147839 and dam 147839
[2026-01-28 14:31:20] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 147839 and dam 147839
[2026-01-28 14:31:20] info: [atBirthTraits.assessFeedQuality] Mare 147839 feed quality: 70
[2026-01-28 14:31:20] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70
[2026-01-28 14:31:20] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 147839 and dam 147839
[2026-01-28 14:31:20] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions
[2026-01-28 14:31:20] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 147839 and dam 147839
[2026-01-28 14:31:20] info: [atBirthTraits.detectInbreeding] Inbreeding not detected
[2026-01-28 14:31:20] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}
[2026-01-28 14:31:20] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 14:31:20] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}
[2026-01-28 14:31:20] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false
[2026-01-28 14:31:20] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 147840)
[2026-01-28 14:31:20] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 147840)
[2026-01-28 14:31:20] info: [POST] /api/horses/foals - 201
[2026-01-28 14:31:20] info: [POST] /api/foals/147840/enrichment
[2026-01-28 14:31:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB
[2026-01-28 14:31:20] info: [auth:kv45kh] Starting auth for POST /foals/147840/enrichment
[2026-01-28 14:31:20] info: [auth:kv45kh] Token from cookie: false
[2026-01-28 14:31:20] info: [auth:kv45kh] Token from header: true
[2026-01-28 14:31:20] info: [auth:kv45kh] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:20] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns foal 147840
[2026-01-28 14:31:20] info: [foalRoutes] POST /api/foals/147840/enrichment - Day 1, Activity: Feeding Assistance
[2026-01-28 14:31:20] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 147840 on day 1
[2026-01-28 14:31:20] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 5, Stress: 0 -> 0
[2026-01-28 14:31:20] info: [POST] /api/foals/147840/enrichment - 200
[2026-01-28 14:31:20] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147840
[2026-01-28 14:31:20] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147840
[2026-01-28 14:31:20] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147840
[2026-01-28 14:31:20] info: [POST] /api/traits/discover/147840
[2026-01-28 14:31:20] warn: [MemoryMonitoring] Memory threshold exceeded: 1455MB
[2026-01-28 14:31:20] info: [auth:xqctqp] Starting auth for POST /traits/discover/147840
[2026-01-28 14:31:20] info: [auth:xqctqp] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:xqctqp] Token from header: true
[2026-01-28 14:31:21] info: [auth:xqctqp] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147840
[2026-01-28 14:31:21] info: [traitController.discoverTraits] Triggering trait discovery for horse 147840
[2026-01-28 14:31:21] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147840
[2026-01-28 14:31:21] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147840
[2026-01-28 14:31:21] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147840
[2026-01-28 14:31:21] info: [POST] /api/traits/discover/147840 - 200
[2026-01-28 14:31:21] info: [GET] /api/traits/discovery-status/147840
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 14:31:21] info: [auth:l4qwjr] Starting auth for GET /traits/discovery-status/147840
[2026-01-28 14:31:21] info: [auth:l4qwjr] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:l4qwjr] Token from header: true
[2026-01-28 14:31:21] info: [auth:l4qwjr] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147840
[2026-01-28 14:31:21] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 147840
[2026-01-28 14:31:21] info: [GET] /api/traits/discovery-status/147840 - 200
[2026-01-28 14:31:21] info: [POST] /api/milestones/evaluate-milestone
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:21] info: [auth:7edfwy] Starting auth for POST /milestones/evaluate-milestone
[2026-01-28 14:31:21] info: [auth:7edfwy] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:7edfwy] Token from header: true
[2026-01-28 14:31:21] info: [auth:7edfwy] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:ba47w] Starting auth for POST /evaluate-milestone
[2026-01-28 14:31:21] info: [auth:ba47w] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:ba47w] Token from header: true
[2026-01-28 14:31:21] info: [auth:ba47w] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 147840
[2026-01-28 14:31:21] info: [ownership] Found owned horse 147840 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 147840, milestone imprinting
[2026-01-28 14:31:21] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament
[2026-01-28 14:31:21] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 147840: withdrawn (score: -5)
[2026-01-28 14:31:21] info: [POST] /api/milestones/evaluate-milestone - 200
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/environmental-analysis
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 14:31:21] info: [auth:1i40e] Starting auth for GET /horses/147839/environmental-analysis
[2026-01-28 14:31:21] info: [auth:1i40e] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:1i40e] Token from header: true
[2026-01-28 14:31:21] info: [auth:1i40e] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:tu8sf6m] Starting auth for GET /horses/147839/environmental-analysis
[2026-01-28 14:31:21] info: [auth:tu8sf6m] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:tu8sf6m] Token from header: true
[2026-01-28 14:31:21] info: [auth:tu8sf6m] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: Environmental analysis generated for horse 147839 by user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/environmental-analysis - 200
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/trait-matrix
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 14:31:21] info: [auth:9fgfrr] Starting auth for GET /horses/147839/trait-matrix
[2026-01-28 14:31:21] info: [auth:9fgfrr] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:9fgfrr] Token from header: true
[2026-01-28 14:31:21] info: [auth:9fgfrr] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:6iw7s] Starting auth for GET /horses/147839/trait-matrix
[2026-01-28 14:31:21] info: [auth:6iw7s] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:6iw7s] Token from header: true
[2026-01-28 14:31:21] info: [auth:6iw7s] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: Trait interaction matrix generated for horse 147839 by user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/trait-matrix - 200
[2026-01-28 14:31:21] info: [GET] /api/horses/147839
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:21] info: [auth:wr3jck] Starting auth for GET /horses/147839
[2026-01-28 14:31:21] info: [auth:wr3jck] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:wr3jck] Token from header: true
[2026-01-28 14:31:21] info: [auth:wr3jck] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: [GET] /api/horses/147839 - 200
[2026-01-28 14:31:21] info: [POST] /api/training/train
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB
[2026-01-28 14:31:21] info: [auth:307iqt] Starting auth for POST /training/train
[2026-01-28 14:31:21] info: [auth:307iqt] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:307iqt] Token from header: true
[2026-01-28 14:31:21] info: [auth:307iqt] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Found owned horse 147839 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [trainingController.trainRouteHandler] Training request for horse 147839 in Racing
[2026-01-28 14:31:21] info: [trainingController.trainHorse] Attempting to train horse 147839 in Racing
[2026-01-28 14:31:21] info: [trainingController.canTrain] Checking training eligibility for horse 147839 in Racing
[2026-01-28 14:31:21] info: [trainingModel.getHorseAge] Getting age for horse 147839
[2026-01-28 14:31:21] info: [trainingModel.getHorseAge] Horse 147839 is 3 years old
[2026-01-28 14:31:21] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147839 across all disciplines
[2026-01-28 14:31:21] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147839
[2026-01-28 14:31:21] info: [trainingController.canTrain] Horse 147839 is eligible to train in Racing
[2026-01-28 14:31:21] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 147839)
[2026-01-28 14:31:21] info: [trainingController.trainHorse] Horse 147839 has traits: 
[2026-01-28 14:31:21] info: [trainingModel.logTrainingSession] Logging training session for horse 147839 in Racing
[2026-01-28 14:31:21] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9054
[2026-01-28 14:31:21] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147839 by +5
[2026-01-28 14:31:21] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147839 by +5
[2026-01-28 14:31:21] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147839: 0 -> 5
[2026-01-28 14:31:21] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147839
[2026-01-28 14:31:21] info: [xpLogModel.logXpEvent] Logging XP event: User 860e6347-05c1-4267-b91f-c9ff1deacd2c, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing
[2026-01-28 14:31:21] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4477, User 860e6347-05c1-4267-b91f-c9ff1deacd2c, Amount: 5
[2026-01-28 14:31:21] info: [trainingController.trainHorse] Awarded 5 XP to user 860e6347-05c1-4267-b91f-c9ff1deacd2c for training
[2026-01-28 14:31:21] info: [trainingController.trainHorse] Successfully trained horse 147839 in Racing (Log ID: 9054, Score +5)
[2026-01-28 14:31:21] info: [POST] /api/training/train - 200
[2026-01-28 14:31:21] info: [GET] /api/horses/147839
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB
[2026-01-28 14:31:21] info: [auth:f9t32c] Starting auth for GET /horses/147839
[2026-01-28 14:31:21] info: [auth:f9t32c] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:f9t32c] Token from header: true
[2026-01-28 14:31:21] info: [auth:f9t32c] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: [GET] /api/horses/147839 - 200
[2026-01-28 14:31:21] info: [GET] /api/competition/eligibility/147839/Racing
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 14:31:21] info: [auth:1pmduh] Starting auth for GET /competition/eligibility/147839/Racing
[2026-01-28 14:31:21] info: [auth:1pmduh] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:1pmduh] Token from header: true
[2026-01-28 14:31:21] info: [auth:1pmduh] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:9u4wvu] Starting auth for GET /eligibility/147839/Racing
[2026-01-28 14:31:21] info: [auth:9u4wvu] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:9u4wvu] Token from header: true
[2026-01-28 14:31:21] info: [auth:9u4wvu] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147839 in Racing
[2026-01-28 14:31:21] info: [competitionRoutes.GET /eligibility] Horse 147839 eligibility checked for Racing
[2026-01-28 14:31:21] info: [GET] /api/competition/eligibility/147839/Racing - 200
[2026-01-28 14:31:21] info: [POST] /api/competition/enter
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:31:21] info: [auth:o2zj6m] Starting auth for POST /competition/enter
[2026-01-28 14:31:21] info: [auth:o2zj6m] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:o2zj6m] Token from header: true
[2026-01-28 14:31:21] info: [auth:o2zj6m] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:sxn9ai] Starting auth for POST /enter
[2026-01-28 14:31:21] info: [auth:sxn9ai] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:sxn9ai] Token from header: true
[2026-01-28 14:31:21] info: [auth:sxn9ai] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [competitionRoutes.POST /enter] User 860e6347-05c1-4267-b91f-c9ff1deacd2c entering horse 147839 in show 8293
[2026-01-28 14:31:21] info: [ownership] Found owned horse 147839 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [competitionRoutes.POST /enter] Successfully entered horse 147839 in show 8293
[2026-01-28 14:31:21] info: [POST] /api/competition/enter - 201
[2026-01-28 14:31:21] info: [POST] /api/competition/execute
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 14:31:21] info: [auth:1n6hpj] Starting auth for POST /competition/execute
[2026-01-28 14:31:21] info: [auth:1n6hpj] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:1n6hpj] Token from header: true
[2026-01-28 14:31:21] info: [auth:1n6hpj] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:lt7r9t] Starting auth for POST /execute
[2026-01-28 14:31:21] info: [auth:lt7r9t] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:lt7r9t] Token from header: true
[2026-01-28 14:31:21] info: [auth:lt7r9t] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [competitionRoutes.POST /execute] User 860e6347-05c1-4267-b91f-c9ff1deacd2c executing competition for show 8293
[2026-01-28 14:31:21] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 14:31:21] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1769628681494 (Racing)
[2026-01-28 14:31:21] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240
[2026-01-28 14:31:21] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: -2.3%, adjustment: -5.6
[2026-01-28 14:31:21] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 234 (base: 240, trait: +0, luck: -5.6)
[2026-01-28 14:31:21] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 147839) scored 234 in Racing
[2026-01-28 14:31:21] info: [resultModel.saveResult] Successfully updated placeholder result for horse 147839 in show 8293 with score 234
[2026-01-28 14:31:21] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 147839). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:31:21] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place
[2026-01-28 14:31:21] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 14:31:21] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8293
[2026-01-28 14:31:21] info: [POST] /api/competition/execute - 200
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/xp
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB
[2026-01-28 14:31:21] info: [auth:mob63c] Starting auth for GET /horses/147839/xp
[2026-01-28 14:31:21] info: [auth:mob63c] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:mob63c] Token from header: true
[2026-01-28 14:31:21] info: [auth:mob63c] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns horse 147839
[2026-01-28 14:31:21] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 147839)
[2026-01-28 14:31:21] info: [GET] /api/horses/147839/xp - 200
[2026-01-28 14:31:21] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1456MB
[2026-01-28 14:31:21] info: [auth:2qjr7i] Starting auth for GET /leaderboards/competition
[2026-01-28 14:31:21] info: [auth:2qjr7i] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:2qjr7i] Token from header: true
[2026-01-28 14:31:21] info: [auth:2qjr7i] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:6jhwz0h] Starting auth for GET /competition
[2026-01-28 14:31:21] info: [auth:6jhwz0h] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:6jhwz0h] Token from header: true
[2026-01-28 14:31:21] info: [auth:6jhwz0h] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins
[2026-01-28 14:31:21] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 14:31:21] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200
[2026-01-28 14:31:21] info: [GET] /api/grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB
[2026-01-28 14:31:21] info: [auth:ns8ox] Starting auth for GET /grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:ns8ox] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:ns8ox] Token from header: true
[2026-01-28 14:31:21] info: [auth:ns8ox] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:m2m3nw] Starting auth for GET /user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:m2m3nw] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:m2m3nw] Token from header: true
[2026-01-28 14:31:21] info: [auth:m2m3nw] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [groomController.getUserGrooms] Getting grooms for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [GET] /api/grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c - 200
[2026-01-28 14:31:21] info: [POST] /api/grooms/interact
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1459MB
[2026-01-28 14:31:21] info: [auth:mr8f3b] Starting auth for POST /grooms/interact
[2026-01-28 14:31:21] info: [auth:mr8f3b] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:mr8f3b] Token from header: true
[2026-01-28 14:31:21] info: [auth:mr8f3b] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:xgurci] Starting auth for POST /interact
[2026-01-28 14:31:21] info: [auth:xgurci] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:xgurci] Token from header: true
[2026-01-28 14:31:21] info: [auth:xgurci] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Found owned foal 147839 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Found owned groom 74045 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [groomController.recordInteraction] Recording brushing interaction for foal 147839
[2026-01-28 14:31:21] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical
[2026-01-28 14:31:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none
[2026-01-28 14:31:21] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress
[2026-01-28 14:31:21] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 74045 for interaction_completed
[2026-01-28 14:31:21] info: [groomProgressionService.awardGroomXP] Groom 74045 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)
[2026-01-28 14:31:21] info: [groomController.recordInteraction] Awarded 2 XP to groom 74045 for interaction
[2026-01-28 14:31:21] info: [POST] /api/grooms/interact - 200
[2026-01-28 14:31:21] info: [GET] /api/grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 14:31:21] info: [auth:taullj] Starting auth for GET /grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:taullj] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:taullj] Token from header: true
[2026-01-28 14:31:21] info: [auth:taullj] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:gzkcfq] Starting auth for GET /user/860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:gzkcfq] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:gzkcfq] Token from header: true
[2026-01-28 14:31:21] info: [auth:gzkcfq] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [groomController.getUserGrooms] Getting grooms for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [GET] /api/grooms/user/860e6347-05c1-4267-b91f-c9ff1deacd2c - 200
[2026-01-28 14:31:21] info: [GET] /api/grooms/74045/retirement/eligibility
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:31:21] info: [auth:mjobk3] Starting auth for GET /grooms/74045/retirement/eligibility
[2026-01-28 14:31:21] info: [auth:mjobk3] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:mjobk3] Token from header: true
[2026-01-28 14:31:21] info: [auth:mjobk3] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns groom 74045
[2026-01-28 14:31:21] info: [GET] /api/grooms/74045/retirement/eligibility - 200
[2026-01-28 14:31:21] info: [POST] /api/grooms/assign
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1470MB
[2026-01-28 14:31:21] info: [auth:4lhgvo] Starting auth for POST /grooms/assign
[2026-01-28 14:31:21] info: [auth:4lhgvo] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:4lhgvo] Token from header: true
[2026-01-28 14:31:21] info: [auth:4lhgvo] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:rzo44t] Starting auth for POST /assign
[2026-01-28 14:31:21] info: [auth:rzo44t] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:rzo44t] Token from header: true
[2026-01-28 14:31:21] info: [auth:rzo44t] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Found owned foal 147839 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Found owned groom 74045 for user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [groomController.assignGroom] Assigning groom 74045 to foal 147839
[2026-01-28 14:31:21] info: [groomSystem.assignGroomToFoal] Assigning groom 74045 to foal 147839
[2026-01-28 14:31:21] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse
[2026-01-28 14:31:21] info: [POST] /api/grooms/assign - 201
[2026-01-28 14:31:21] info: [GET] /api/grooms/assignments/147839
[2026-01-28 14:31:21] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:31:21] info: [auth:e3tfd9] Starting auth for GET /grooms/assignments/147839
[2026-01-28 14:31:21] info: [auth:e3tfd9] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:e3tfd9] Token from header: true
[2026-01-28 14:31:21] info: [auth:e3tfd9] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [auth:882oy] Starting auth for GET /assignments/147839
[2026-01-28 14:31:21] info: [auth:882oy] Token from cookie: false
[2026-01-28 14:31:21] info: [auth:882oy] Token from header: true
[2026-01-28 14:31:21] info: [auth:882oy] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:21] info: [ownership] Validated ownership: user 860e6347-05c1-4267-b91f-c9ff1deacd2c owns foal 147839
[2026-01-28 14:31:21] info: [groomController.getFoalAssignments] Getting assignments for foal 147839
[2026-01-28 14:31:21] info: [GET] /api/grooms/assignments/147839 - 200
[2026-01-28 14:31:22] info: [GET] /api/memory/status
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:22] info: [auth:roywo] Starting auth for GET /memory/status
[2026-01-28 14:31:22] info: [auth:roywo] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:roywo] Token from header: true
[2026-01-28 14:31:22] info: [auth:roywo] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [auth:mzfli] Starting auth for GET /status
[2026-01-28 14:31:22] info: [auth:mzfli] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:mzfli] Token from header: true
[2026-01-28 14:31:22] info: [auth:mzfli] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [MemoryManagement] Getting memory status
[2026-01-28 14:31:22] info: [GET] /api/memory/status - 200
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1460MB
[2026-01-28 14:31:22] info: [auth:rori8] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:rori8] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:rori8] Token from header: true
[2026-01-28 14:31:22] info: [auth:rori8] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1471MB
[2026-01-28 14:31:22] info: [auth:gj48ug] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:gj48ug] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:gj48ug] Token from header: true
[2026-01-28 14:31:22] info: [auth:gj48ug] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:31:22] info: [auth:2jkox7] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:2jkox7] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:2jkox7] Token from header: true
[2026-01-28 14:31:22] info: [auth:2jkox7] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:22] info: [auth:ofbx5] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:ofbx5] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:ofbx5] Token from header: true
[2026-01-28 14:31:22] info: [auth:ofbx5] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1471MB
[2026-01-28 14:31:22] info: [auth:qw9nk] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:qw9nk] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:qw9nk] Token from header: true
[2026-01-28 14:31:22] info: [auth:qw9nk] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1466MB
[2026-01-28 14:31:22] info: [auth:96y72] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:96y72] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:96y72] Token from header: true
[2026-01-28 14:31:22] info: [auth:96y72] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:22] info: [auth:nnaqak] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:nnaqak] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:nnaqak] Token from header: true
[2026-01-28 14:31:22] info: [auth:nnaqak] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1472MB
[2026-01-28 14:31:22] info: [auth:6ibrk8] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:6ibrk8] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:6ibrk8] Token from header: true
[2026-01-28 14:31:22] info: [auth:6ibrk8] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB
[2026-01-28 14:31:22] info: [auth:m5xuyu] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:m5xuyu] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:m5xuyu] Token from header: true
[2026-01-28 14:31:22] info: [auth:m5xuyu] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1462MB
[2026-01-28 14:31:22] info: [auth:fac1o] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:fac1o] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:fac1o] Token from header: true
[2026-01-28 14:31:22] info: [auth:fac1o] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/memory/status
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1471MB
[2026-01-28 14:31:22] info: [auth:fpe449] Starting auth for GET /memory/status
[2026-01-28 14:31:22] info: [auth:fpe449] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:fpe449] Token from header: true
[2026-01-28 14:31:22] info: [auth:fpe449] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [auth:x4xeef] Starting auth for GET /status
[2026-01-28 14:31:22] info: [auth:x4xeef] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:x4xeef] Token from header: true
[2026-01-28 14:31:22] info: [auth:x4xeef] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [MemoryManagement] Getting memory status
[2026-01-28 14:31:22] info: [GET] /api/memory/status - 200
[2026-01-28 14:31:22] info: [POST] /api/memory/gc
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1461MB
[2026-01-28 14:31:22] info: [auth:v19w9i] Starting auth for POST /memory/gc
[2026-01-28 14:31:22] info: [auth:v19w9i] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:v19w9i] Token from header: true
[2026-01-28 14:31:22] info: [auth:v19w9i] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [auth:6igm] Starting auth for POST /gc
[2026-01-28 14:31:22] info: [auth:6igm] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:6igm] Token from header: true
[2026-01-28 14:31:22] info: [auth:6igm] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:31:22] info: [POST] /api/memory/gc - 400
[2026-01-28 14:31:22] info: [GET] /api/horses
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB
[2026-01-28 14:31:22] info: [auth:c1ye4] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:c1ye4] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:c1ye4] Token from header: true
[2026-01-28 14:31:22] info: [auth:c1ye4] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses - 200
[2026-01-28 14:31:22] info: [GET] /api/horses?page=1&limit=5
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1467MB
[2026-01-28 14:31:22] info: [auth:dupe4l] Starting auth for GET /horses
[2026-01-28 14:31:22] info: [auth:dupe4l] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:dupe4l] Token from header: true
[2026-01-28 14:31:22] info: [auth:dupe4l] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [GET] /api/horses?page=1&limit=5 - 200
[2026-01-28 14:31:22] info: [GET] /api-docs/swagger.json
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1470MB
[2026-01-28 14:31:22] info: [GET] /api-docs/swagger.json - 200
[2026-01-28 14:31:22] info: [GET] /api/docs/health
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:31:22] info: [auth:3ypbgw] Starting auth for GET /health
[2026-01-28 14:31:22] info: [auth:3ypbgw] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:3ypbgw] Token from header: true
[2026-01-28 14:31:22] info: [auth:3ypbgw] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:31:22] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:31:22] info: [GET] /api/docs/health - 200
[2026-01-28 14:31:22] info: [GET] /api/user-docs/search?q=competition
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1473MB
[2026-01-28 14:31:22] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 14:31:22] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:31:22] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:31:22] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:31:22] info: [GET] /api/user-docs/search?q=competition - 200
[2026-01-28 14:31:22] info: [GET] /api/user-docs/feature-guide
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1468MB
[2026-01-28 14:31:22] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:31:22] info: [GET] /api/user-docs/feature-guide - 200
[2026-01-28 14:31:22] info: [GET] /api/user-docs/analytics
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB
[2026-01-28 14:31:22] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:31:22] info: [GET] /api/user-docs/analytics - 200
[2026-01-28 14:31:22] info: [GET] /health
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1476MB
[2026-01-28 14:31:22] info: [GET] /health - 200
[2026-01-28 14:31:22] info: [GET] /ping
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1472MB
[2026-01-28 14:31:22] info: [GET] /ping - 200
[2026-01-28 14:31:22] info: [GET] /api/memory/health
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1465MB
[2026-01-28 14:31:22] info: [auth:2n43ac] Starting auth for GET /memory/health
[2026-01-28 14:31:22] info: [auth:2n43ac] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:2n43ac] Token from header: true
[2026-01-28 14:31:22] info: [auth:2n43ac] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [auth:li4el] Starting auth for GET /health
[2026-01-28 14:31:22] info: [auth:li4el] Token from cookie: false
[2026-01-28 14:31:22] info: [auth:li4el] Token from header: true
[2026-01-28 14:31:22] info: [auth:li4el] Authenticated user 860e6347-05c1-4267-b91f-c9ff1deacd2c
[2026-01-28 14:31:22] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:31:22] info: [GET] /api/memory/health - 200
[2026-01-28 14:31:22] info: [GET] /api/user-docs/health
[2026-01-28 14:31:22] warn: [MemoryMonitoring] Memory threshold exceeded: 1469MB
[2026-01-28 14:31:22] info: [GET] /api/user-docs/health - 200
PASS __tests__/integration/crossSystemValidation.test.mjs
  Cross-System Validation Tests
    Epigenetic Trait System Integration
      ‚àö Trait discovery integration with groom care patterns (272 ms)
      ‚àö Environmental trigger system integration (228 ms)
    Competition System Integration
      ‚àö Training system integration with competition performance (301 ms)
      ‚àö Leaderboard integration with competition results (43 ms)
    Groom System Integration
      ‚àö Groom career progression with horse development (220 ms)
      ‚àö Groom assignment integration with horse care (100 ms)
    Performance System Integration
      ‚àö Memory management integration with API operations (351 ms)
      ‚àö API optimization integration with response compression (59 ms)
    Documentation System Integration
      ‚àö API documentation integration with live endpoints (58 ms)
      ‚àö User documentation integration with search functionality (56 ms)
    System Health and Monitoring
      ‚àö Overall system health validation (79 ms)

[2026-01-28 14:31:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] error: [EmailVerification] Error creating verification token: Maximum pending verification tokens (5) reached
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:23] info: [EmailVerification] Created verification token
[2026-01-28 14:31:23] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:24] info: [EmailVerification] Created verification token
[2026-01-28 14:31:24] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:24] info: [EmailVerification] Created verification token
[2026-01-28 14:31:24] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:24] error: [EmailVerification] Error verifying email token: Verification token has already been used
[2026-01-28 14:31:24] info: [EmailVerification] Created verification token
[2026-01-28 14:31:24] info: [EmailVerification] Created verification token
[2026-01-28 14:31:24] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:24] info: [EmailVerification] Created verification token
[2026-01-28 14:31:24] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:24] info: [EmailVerification] Verification status check
[2026-01-28 14:31:24] info: [EmailVerification] Verification status check
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Resent verification email
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:25] error: [EmailVerification] Error resending verification email: Email is already verified
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Resent verification email
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Resent verification email
[2026-01-28 14:31:25] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:31:25] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:25] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Token cleanup completed
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
[2026-01-28 14:31:25] info: [EmailVerification] Email verified successfully
[2026-01-28 14:31:25] info: [EmailVerification] Created verification token
PASS __tests__/unit/email-verification.test.mjs
  Email Verification Service - Unit Tests
    generateVerificationToken()
      ‚àö should_generate_unique_tokens (135 ms)
      ‚àö should_generate_64_character_hex_tokens (74 ms)
      ‚àö should_generate_cryptographically_secure_tokens (81 ms)
    createVerificationToken()
      ‚àö should_create_token_with_valid_user_id (83 ms)
      ‚àö should_store_token_in_database (80 ms)
      ‚àö should_set_expiration_to_24_hours (77 ms)
      ‚àö should_store_ip_address_and_user_agent (83 ms)
      ‚àö should_enforce_maximum_pending_tokens_limit (83 ms)
      ‚àö should_enforce_rate_limiting_cooldown (82 ms)
      ‚àö should_allow_token_creation_after_cooldown (85 ms)
    verifyEmailToken()
      ‚àö should_verify_valid_token (89 ms)
      ‚àö should_mark_user_email_as_verified (92 ms)
      ‚àö should_mark_token_as_used (88 ms)
      ‚àö should_reject_invalid_token (184 ms)
      ‚àö should_reject_already_used_token (92 ms)
      ‚àö should_reject_expired_token (82 ms)
      ‚àö should_use_atomic_transaction_for_verification (134 ms)
      ‚àö should_implement_timing_safe_response_for_invalid_tokens (191 ms)
    checkVerificationStatus()
      ‚àö should_return_verification_status_for_verified_user (91 ms)
      ‚àö should_return_verification_status_for_unverified_user (75 ms)
      ‚àö should_handle_non_existent_user (81 ms)
    resendVerificationEmail()
      ‚àö should_create_new_token_for_unverified_user (84 ms)
      ‚àö should_reject_resend_for_verified_user (89 ms)
      ‚àö should_cleanup_expired_tokens_before_creating_new (96 ms)
      ‚àö should_enforce_rate_limiting_on_resend (88 ms)
    cleanupExpiredTokens()
      ‚àö should_delete_expired_tokens (84 ms)
      ‚àö should_delete_old_used_tokens (90 ms)
      ‚àö should_keep_active_valid_tokens (80 ms)
    getTokenInfo()
      ‚àö should_return_token_information (79 ms)
      ‚àö should_indicate_used_token (86 ms)
      ‚àö should_indicate_expired_token (78 ms)
      ‚àö should_return_null_for_invalid_token (73 ms)

[2026-01-28 14:31:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:27] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:27] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:27] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:27] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:27] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:27] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:27] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:27] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:27] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:27] info: [GET] /api/competition/disciplines
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1532MB
[2026-01-28 14:31:27] info: [auth:560cnj] Starting auth for GET /competition/disciplines
[2026-01-28 14:31:27] info: [auth:560cnj] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:560cnj] Token from header: true
[2026-01-28 14:31:27] info: [auth:560cnj] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [GET] /api/competition/disciplines - 200
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Racing
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1535MB
[2026-01-28 14:31:27] info: [auth:up0rw] Starting auth for GET /competition/eligibility/147841/Racing
[2026-01-28 14:31:27] info: [auth:up0rw] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:up0rw] Token from header: true
[2026-01-28 14:31:27] info: [auth:up0rw] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [auth:ub8hue] Starting auth for GET /eligibility/147841/Racing
[2026-01-28 14:31:27] info: [auth:ub8hue] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:ub8hue] Token from header: true
[2026-01-28 14:31:27] info: [auth:ub8hue] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [ownership] Validated ownership: user 0c4c225d-621a-45a3-8172-d8deb85f7183 owns horse 147841
[2026-01-28 14:31:27] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147841 in Racing
[2026-01-28 14:31:27] info: [competitionRoutes.GET /eligibility] Horse 147841 eligibility checked for Racing
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Racing - 200
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Gaited
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1539MB
[2026-01-28 14:31:27] info: [auth:ny5qiq] Starting auth for GET /competition/eligibility/147841/Gaited
[2026-01-28 14:31:27] info: [auth:ny5qiq] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:ny5qiq] Token from header: true
[2026-01-28 14:31:27] info: [auth:ny5qiq] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [auth:oqmah] Starting auth for GET /eligibility/147841/Gaited
[2026-01-28 14:31:27] info: [auth:oqmah] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:oqmah] Token from header: true
[2026-01-28 14:31:27] info: [auth:oqmah] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [ownership] Validated ownership: user 0c4c225d-621a-45a3-8172-d8deb85f7183 owns horse 147841
[2026-01-28 14:31:27] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147841 in Gaited
[2026-01-28 14:31:27] info: [competitionRoutes.GET /eligibility] Horse 147841 eligibility checked for Gaited
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Gaited - 200
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/InvalidDiscipline
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1543MB
[2026-01-28 14:31:27] info: [auth:q9b1r8] Starting auth for GET /competition/eligibility/147841/InvalidDiscipline
[2026-01-28 14:31:27] info: [auth:q9b1r8] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:q9b1r8] Token from header: true
[2026-01-28 14:31:27] info: [auth:q9b1r8] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [auth:k2cwpw] Starting auth for GET /eligibility/147841/InvalidDiscipline
[2026-01-28 14:31:27] info: [auth:k2cwpw] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:k2cwpw] Token from header: true
[2026-01-28 14:31:27] info: [auth:k2cwpw] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [ownership] Validated ownership: user 0c4c225d-621a-45a3-8172-d8deb85f7183 owns horse 147841
[2026-01-28 14:31:27] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 147841 in InvalidDiscipline
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/InvalidDiscipline - 400
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Racing
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1533MB
[2026-01-28 14:31:27] info: [auth:zhfh3] Starting auth for GET /competition/eligibility/147841/Racing
[2026-01-28 14:31:27] info: [auth:zhfh3] Token from cookie: false
[2026-01-28 14:31:27] warn: [auth:zhfh3] Access token is required for GET /competition/eligibility/147841/Racing from ::ffff:127.0.0.1
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147841/Racing - 401
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147842/Racing
[2026-01-28 14:31:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1536MB
[2026-01-28 14:31:27] info: [auth:0fx4r] Starting auth for GET /competition/eligibility/147842/Racing
[2026-01-28 14:31:27] info: [auth:0fx4r] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:0fx4r] Token from header: true
[2026-01-28 14:31:27] info: [auth:0fx4r] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [auth:g7c43h] Starting auth for GET /eligibility/147842/Racing
[2026-01-28 14:31:27] info: [auth:g7c43h] Token from cookie: false
[2026-01-28 14:31:27] info: [auth:g7c43h] Token from header: true
[2026-01-28 14:31:27] info: [auth:g7c43h] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] warn: [ownership] horse 147842 not found or not owned by user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:27] info: [GET] /api/competition/eligibility/147842/Racing - 404
[2026-01-28 14:31:28] info: [POST] /api/competition/enter
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1540MB
[2026-01-28 14:31:28] info: [auth:nzif5v] Starting auth for POST /competition/enter
[2026-01-28 14:31:28] info: [auth:nzif5v] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:nzif5v] Token from header: true
[2026-01-28 14:31:28] info: [auth:nzif5v] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:r43itj] Starting auth for POST /enter
[2026-01-28 14:31:28] info: [auth:r43itj] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:r43itj] Token from header: true
[2026-01-28 14:31:28] info: [auth:r43itj] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [competitionRoutes.POST /enter] User 0c4c225d-621a-45a3-8172-d8deb85f7183 entering horse 147841 in show 8294
[2026-01-28 14:31:28] info: [ownership] Found owned horse 147841 for user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [competitionRoutes.POST /enter] Successfully entered horse 147841 in show 8294
[2026-01-28 14:31:28] info: [POST] /api/competition/enter - 201
[2026-01-28 14:31:28] info: [POST] /api/competition/enter
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB
[2026-01-28 14:31:28] info: [auth:7hystr] Starting auth for POST /competition/enter
[2026-01-28 14:31:28] info: [auth:7hystr] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:7hystr] Token from header: true
[2026-01-28 14:31:28] info: [auth:7hystr] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:5jrot] Starting auth for POST /enter
[2026-01-28 14:31:28] info: [auth:5jrot] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:5jrot] Token from header: true
[2026-01-28 14:31:28] info: [auth:5jrot] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [competitionRoutes.POST /enter] User 0c4c225d-621a-45a3-8172-d8deb85f7183 entering horse 147841 in show 8294
[2026-01-28 14:31:28] info: [ownership] Found owned horse 147841 for user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [POST] /api/competition/enter - 400
[2026-01-28 14:31:28] info: [POST] /api/competition/enter
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1536MB
[2026-01-28 14:31:28] info: [auth:81ouav] Starting auth for POST /competition/enter
[2026-01-28 14:31:28] info: [auth:81ouav] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:81ouav] Token from header: true
[2026-01-28 14:31:28] info: [auth:81ouav] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:ujyl3p] Starting auth for POST /enter
[2026-01-28 14:31:28] info: [auth:ujyl3p] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:ujyl3p] Token from header: true
[2026-01-28 14:31:28] info: [auth:ujyl3p] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] warn: [competitionRoutes.POST /enter] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]
[2026-01-28 14:31:28] info: [POST] /api/competition/enter - 400
[2026-01-28 14:31:28] info: [POST] /api/competition/enter
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1539MB
[2026-01-28 14:31:28] info: [auth:tfmlv24] Starting auth for POST /competition/enter
[2026-01-28 14:31:28] info: [auth:tfmlv24] Token from cookie: false
[2026-01-28 14:31:28] warn: [auth:tfmlv24] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:31:28] info: [POST] /api/competition/enter - 401
[2026-01-28 14:31:28] info: [POST] /api/competition/execute
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1539MB
[2026-01-28 14:31:28] info: [auth:kepca] Starting auth for POST /competition/execute
[2026-01-28 14:31:28] info: [auth:kepca] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:kepca] Token from header: true
[2026-01-28 14:31:28] info: [auth:kepca] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:rdblvn] Starting auth for POST /execute
[2026-01-28 14:31:28] info: [auth:rdblvn] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:rdblvn] Token from header: true
[2026-01-28 14:31:28] info: [auth:rdblvn] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [competitionRoutes.POST /execute] User 0c4c225d-621a-45a3-8172-d8deb85f7183 executing competition for show 8294
[2026-01-28 14:31:28] info: [competitionRoutes.POST /execute] Executing competition with 1 entries
[2026-01-28 14:31:28] info: [enhancedCompetitionSimulation] Executing competition: API Test Racing Show_1769628687479_39970_35444 (Racing)
[2026-01-28 14:31:28] info: [calculateCompetitionScore] Horse API Test Horse: Base score for Racing: 205
[2026-01-28 14:31:28] info: [calculateCompetitionScore] Horse API Test Horse: Luck modifier: 5.3%, adjustment: 10.9
[2026-01-28 14:31:28] info: [calculateCompetitionScore] Horse API Test Horse: Final score: 216 (base: 205, trait: +0, luck: 10.9)
[2026-01-28 14:31:28] info: [enhancedCompetitionSimulation] Horse API Test Horse (ID: 147841) scored 216 in Racing
[2026-01-28 14:31:28] info: [resultModel.saveResult] Successfully updated placeholder result for horse 147841 in show 8294 with score 216
[2026-01-28 14:31:28] info: [horseXpModel.addXpToHorse] Added 30 XP to horse API Test Horse (ID: 147841). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:31:28] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to API Test Horse for 1st place
[2026-01-28 14:31:28] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.
[2026-01-28 14:31:28] info: [competitionRoutes.POST /execute] Competition executed successfully for show 8294
[2026-01-28 14:31:28] info: [POST] /api/competition/execute - 200
[2026-01-28 14:31:28] info: [POST] /api/competition/execute
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1538MB
[2026-01-28 14:31:28] info: [auth:v2hbl9] Starting auth for POST /competition/execute
[2026-01-28 14:31:28] info: [auth:v2hbl9] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:v2hbl9] Token from header: true
[2026-01-28 14:31:28] info: [auth:v2hbl9] Authenticated user aa336e0a-893c-4f1c-96f8-d0ed4e54d765
[2026-01-28 14:31:28] info: [auth:rh4b6p] Starting auth for POST /execute
[2026-01-28 14:31:28] info: [auth:rh4b6p] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:rh4b6p] Token from header: true
[2026-01-28 14:31:28] info: [auth:rh4b6p] Authenticated user aa336e0a-893c-4f1c-96f8-d0ed4e54d765
[2026-01-28 14:31:28] info: [competitionRoutes.POST /execute] User aa336e0a-893c-4f1c-96f8-d0ed4e54d765 executing competition for show 8294
[2026-01-28 14:31:28] info: [POST] /api/competition/execute - 403
[2026-01-28 14:31:28] info: [POST] /api/competition/execute
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1541MB
[2026-01-28 14:31:28] info: [auth:vv2lo8] Starting auth for POST /competition/execute
[2026-01-28 14:31:28] info: [auth:vv2lo8] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:vv2lo8] Token from header: true
[2026-01-28 14:31:28] info: [auth:vv2lo8] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:j92afi] Starting auth for POST /execute
[2026-01-28 14:31:28] info: [auth:j92afi] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:j92afi] Token from header: true
[2026-01-28 14:31:28] info: [auth:j92afi] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [competitionRoutes.POST /execute] User 0c4c225d-621a-45a3-8172-d8deb85f7183 executing competition for show 99999
[2026-01-28 14:31:28] info: [POST] /api/competition/execute - 404
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=wins&limit=10
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1543MB
[2026-01-28 14:31:28] info: [auth:dy6j3i] Starting auth for GET /leaderboards/competition
[2026-01-28 14:31:28] info: [auth:dy6j3i] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:dy6j3i] Token from header: true
[2026-01-28 14:31:28] info: [auth:dy6j3i] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:1m32ck] Starting auth for GET /competition
[2026-01-28 14:31:28] info: [auth:1m32ck] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:1m32ck] Token from header: true
[2026-01-28 14:31:28] info: [auth:1m32ck] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins
[2026-01-28 14:31:28] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1537MB
[2026-01-28 14:31:28] info: [auth:hh5bci] Starting auth for GET /leaderboards/competition
[2026-01-28 14:31:28] info: [auth:hh5bci] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:hh5bci] Token from header: true
[2026-01-28 14:31:28] info: [auth:hh5bci] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:nsmswh] Starting auth for GET /competition
[2026-01-28 14:31:28] info: [auth:nsmswh] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:nsmswh] Token from header: true
[2026-01-28 14:31:28] info: [auth:nsmswh] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=earnings
[2026-01-28 14:31:28] info: [leaderboardRoutes.GET /competition] Retrieved 2 leaderboard entries
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing - 200
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=invalid
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB
[2026-01-28 14:31:28] info: [auth:3rrv99] Starting auth for GET /leaderboards/competition
[2026-01-28 14:31:28] info: [auth:3rrv99] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:3rrv99] Token from header: true
[2026-01-28 14:31:28] info: [auth:3rrv99] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] info: [auth:zy6ruu] Starting auth for GET /competition
[2026-01-28 14:31:28] info: [auth:zy6ruu] Token from cookie: false
[2026-01-28 14:31:28] info: [auth:zy6ruu] Token from header: true
[2026-01-28 14:31:28] info: [auth:zy6ruu] Authenticated user 0c4c225d-621a-45a3-8172-d8deb85f7183
[2026-01-28 14:31:28] warn: [leaderboardRoutes.GET /competition] Validation errors: [{"type":"field","value":"invalid","msg":"Metric must be one of: wins, earnings, placements, average_placement","path":"metric","location":"query"}]
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition?metric=invalid - 400
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition
[2026-01-28 14:31:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1538MB
[2026-01-28 14:31:28] info: [auth:5080wp] Starting auth for GET /leaderboards/competition
[2026-01-28 14:31:28] info: [auth:5080wp] Token from cookie: false
[2026-01-28 14:31:28] warn: [auth:5080wp] Access token is required for GET /leaderboards/competition from ::ffff:127.0.0.1
[2026-01-28 14:31:28] info: [GET] /api/leaderboards/competition - 401
PASS tests/integration/competitionAPIEndpoints.integration.test.mjs
  üöÄ INTEGRATION: Competition API Endpoints
    üéØ GET /api/competition/disciplines
      ‚àö should return all available disciplines (50 ms)
    üîç GET /api/competition/eligibility/:horseId/:discipline
      ‚àö should check horse eligibility for Racing discipline (40 ms)
      ‚àö should check horse eligibility for Gaited discipline (37 ms)
      ‚àö should reject invalid discipline (33 ms)
      ‚àö should reject unauthorized access (23 ms)
      ‚àö should reject access to horse not owned by user (320 ms)
    üìù POST /api/competition/enter
      ‚àö should successfully enter horse in competition (55 ms)
      ‚àö should reject duplicate entry (35 ms)
      ‚àö should reject invalid input (34 ms)
      ‚àö should reject unauthorized access (25 ms)
    üèÅ POST /api/competition/execute
      ‚àö should successfully execute competition (67 ms)
      ‚àö should reject execution by non-host user (308 ms)
      ‚àö should reject invalid show ID (30 ms)
    üèÜ GET /api/leaderboard/competition
      ‚àö should get competition leaderboard by wins (44 ms)
      ‚àö should get competition leaderboard by earnings (43 ms)
      ‚àö should reject invalid metric (33 ms)
      ‚àö should reject unauthorized access (25 ms)

[2026-01-28 14:31:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:29] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:29] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:29] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:29] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:29] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:29] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:29] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:29] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:29] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:30] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1596MB
[2026-01-28 14:31:30] info: [auth:93iv9q] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 14:31:30] info: [auth:93iv9q] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:93iv9q] Token from header: true
[2026-01-28 14:31:30] info: [auth:93iv9q] Authenticated user 918826b8-3b39-43d8-a0dc-13f904daee91
[2026-01-28 14:31:30] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1599MB
[2026-01-28 14:31:30] info: [auth:w1o00a] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:31:30] info: [auth:w1o00a] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:w1o00a] Token from header: true
[2026-01-28 14:31:30] info: [auth:w1o00a] Authenticated user 0cb2f7d6-3feb-405b-b1a0-2a356f607d74
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20-- - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1600MB
[2026-01-28 14:31:30] info: [auth:755ern] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:31:30] info: [auth:755ern] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:755ern] Token from header: true
[2026-01-28 14:31:30] info: [auth:755ern] Authenticated user 1b1f1bea-e32b-4838-a51a-b71db9ede5d1
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1601MB
[2026-01-28 14:31:30] info: [auth:tj479d] Starting auth for GET /horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200
[2026-01-28 14:31:30] info: [auth:tj479d] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:tj479d] Token from header: true
[2026-01-28 14:31:30] info: [auth:tj479d] Authenticated user 5842002e-04a6-437c-b292-b5778797f44d
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/0x31
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1601MB
[2026-01-28 14:31:30] info: [auth:0dmwzk] Starting auth for GET /horses/0x31
[2026-01-28 14:31:30] info: [auth:0dmwzk] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:0dmwzk] Token from header: true
[2026-01-28 14:31:30] info: [auth:0dmwzk] Authenticated user d6106063-f141-4d85-9aa8-3035aec9f0b4
[2026-01-28 14:31:30] info: [GET] /api/horses/0x31 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/147848'%20AND%201=1%20AND%20'1'='1
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1602MB
[2026-01-28 14:31:30] info: [auth:1wzy1] Starting auth for GET /horses/147848'%20AND%201=1%20AND%20'1'='1
[2026-01-28 14:31:30] info: [auth:1wzy1] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:1wzy1] Token from header: true
[2026-01-28 14:31:30] info: [auth:1wzy1] Authenticated user 40b885cd-5edc-464d-8ac0-27d60f1f845f
[2026-01-28 14:31:30] info: [GET] /api/horses/147848'%20AND%201=1%20AND%20'1'='1 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:30] info: [auth:z4azev] Starting auth for GET /horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--
[2026-01-28 14:31:30] info: [auth:z4azev] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:z4azev] Token from header: true
[2026-01-28 14:31:30] info: [auth:z4azev] Authenticated user 36077e22-e3d1-446a-9e7a-f085e6cbf23b
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20-- - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:30] info: [auth:o9itsb] Starting auth for GET /horses/1;%20SELECT%20pg_sleep(5);%20--
[2026-01-28 14:31:30] info: [auth:o9itsb] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:o9itsb] Token from header: true
[2026-01-28 14:31:30] info: [auth:o9itsb] Authenticated user 387c5bb5-3330-4d0a-b984-35f9481f17b8
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20-- - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1604MB
[2026-01-28 14:31:30] info: [auth:0ptr55] Starting auth for GET /horses/1'%20AND%20(SELECT%201/0)
[2026-01-28 14:31:30] info: [auth:0ptr55] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:0ptr55] Token from header: true
[2026-01-28 14:31:30] info: [auth:0ptr55] Authenticated user 832e05a1-c026-4767-9ecb-6beb15f4cdb3
[2026-01-28 14:31:30] warn: 404 - Route not found: GET /api/horses/1'%20AND%20(SELECT%201/0) from ::ffff:127.0.0.1
[2026-01-28 14:31:30] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0) - 404
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1607MB
[2026-01-28 14:31:30] info: [auth:1u6yse] Starting auth for GET /horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users
[2026-01-28 14:31:30] info: [auth:1u6yse] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:1u6yse] Token from header: true
[2026-01-28 14:31:30] info: [auth:1u6yse] Authenticated user b6c6d88b-2d43-4b2a-bac6-8c39a4a497ee
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1608MB
[2026-01-28 14:31:30] info: [auth:0eevq9] Starting auth for GET /horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1
[2026-01-28 14:31:30] info: [auth:0eevq9] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:0eevq9] Token from header: true
[2026-01-28 14:31:30] info: [auth:0eevq9] Authenticated user ba4a878c-9ef1-4c8e-a549-08c84c7cb03f
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20ORDER%20BY%20100
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1608MB
[2026-01-28 14:31:30] info: [auth:4v7lp] Starting auth for GET /horses/1%20ORDER%20BY%20100
[2026-01-28 14:31:30] info: [auth:4v7lp] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:4v7lp] Token from header: true
[2026-01-28 14:31:30] info: [auth:4v7lp] Authenticated user 1ec9e633-70df-427c-afab-2ef220fceda3
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20ORDER%20BY%20100 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1609MB
[2026-01-28 14:31:30] info: [auth:rp7veh] Starting auth for GET /horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL
[2026-01-28 14:31:30] info: [auth:rp7veh] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:rp7veh] Token from header: true
[2026-01-28 14:31:30] info: [auth:rp7veh] Authenticated user 6338e629-6bf9-4c1d-943b-f7ab0bb61fb1
[2026-01-28 14:31:30] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:31:30] info: [auth:jbozif] Starting auth for GET /horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200
[2026-01-28 14:31:30] info: [auth:jbozif] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:jbozif] Token from header: true
[2026-01-28 14:31:30] info: [auth:jbozif] Authenticated user 35839e42-6c73-4f12-9a13-096148e3f7c8
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=5eec7bd1-c19c-4086-a8b2-49e3a30adf62
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:31:30] info: [auth:5ebecn] Starting auth for GET /horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=5eec7bd1-c19c-4086-a8b2-49e3a30adf62
[2026-01-28 14:31:30] info: [auth:5ebecn] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:5ebecn] Token from header: true
[2026-01-28 14:31:30] info: [auth:5ebecn] Authenticated user 5eec7bd1-c19c-4086-a8b2-49e3a30adf62
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=5eec7bd1-c19c-4086-a8b2-49e3a30adf62 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1599MB
[2026-01-28 14:31:30] info: [auth:swixr] Starting auth for GET /horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)
[2026-01-28 14:31:30] info: [auth:swixr] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:swixr] Token from header: true
[2026-01-28 14:31:30] info: [auth:swixr] Authenticated user 322e7872-9236-4e21-8c7a-ec5fb787c33f
[2026-01-28 14:31:30] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201) - 400
[2026-01-28 14:31:30] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1601MB
[2026-01-28 14:31:30] info: [auth:lw92yk] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:lw92yk] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:lw92yk] Token from header: true
[2026-01-28 14:31:30] info: [auth:lw92yk] Authenticated user 7ae1de48-2192-4d66-975f-0cb49cc09d6f
[2026-01-28 14:31:30] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:30] info: [auth:udx9iv] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:udx9iv] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:udx9iv] Token from header: true
[2026-01-28 14:31:30] info: [auth:udx9iv] Authenticated user 599823a9-c5da-4c3a-839d-cd303fb6c153
[2026-01-28 14:31:30] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 14:31:30] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:31:30] info: [auth:0e0qao] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:0e0qao] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:0e0qao] Token from header: true
[2026-01-28 14:31:30] info: [auth:0e0qao] Authenticated user fdece64e-f09c-4fdc-866b-0d56d829e432
[2026-01-28 14:31:30] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27 - 200
[2026-01-28 14:31:30] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1608MB
[2026-01-28 14:31:30] info: [auth:ifaz84] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:ifaz84] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:ifaz84] Token from header: true
[2026-01-28 14:31:30] info: [auth:ifaz84] Authenticated user 5d3955a8-2f74-4c4b-9535-7486c1d75617
[2026-01-28 14:31:30] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271 - 200
[2026-01-28 14:31:30] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:31:30] info: [auth:kghdnt] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:kghdnt] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:kghdnt] Token from header: true
[2026-01-28 14:31:30] info: [auth:kghdnt] Authenticated user b4714ecb-9c24-4db8-91ab-a7c75986a580
[2026-01-28 14:31:30] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20-- - 200
[2026-01-28 14:31:30] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1600MB
[2026-01-28 14:31:30] info: [auth:m9vgkn] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:m9vgkn] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:m9vgkn] Token from header: true
[2026-01-28 14:31:30] info: [auth:m9vgkn] Authenticated user 5d6225bd-cf92-423e-9063-132ee5a25dd1
[2026-01-28 14:31:30] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20-- - 200
[2026-01-28 14:31:30] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:30] info: [auth:6hqv6m] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:6hqv6m] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:6hqv6m] Token from header: true
[2026-01-28 14:31:30] info: [auth:6hqv6m] Authenticated user 430c3e13-7c5d-4b40-a8b4-9a4d8f497a5c
[2026-01-28 14:31:30] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:31:30] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20--
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1604MB
[2026-01-28 14:31:30] info: [auth:t160f] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:t160f] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:t160f] Token from header: true
[2026-01-28 14:31:30] info: [auth:t160f] Authenticated user 96620918-d9ac-43db-954a-a517033c6bb4
[2026-01-28 14:31:30] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20-- - 200
[2026-01-28 14:31:30] info: [POST] /api/horses
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1608MB
[2026-01-28 14:31:30] info: [auth:i47xch] Starting auth for POST /horses
[2026-01-28 14:31:30] info: [auth:i47xch] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:i47xch] Token from header: true
[2026-01-28 14:31:30] info: [auth:i47xch] Authenticated user 49502215-0e24-4634-b69d-6024493c6de3
[2026-01-28 14:31:30] info: [POST] /api/horses - 403
[2026-01-28 14:31:30] info: [PUT] /api/auth/profile
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:31:30] info: [auth:4pp3x] Starting auth for PUT /profile
[2026-01-28 14:31:30] info: [auth:4pp3x] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:4pp3x] Token from header: true
[2026-01-28 14:31:30] info: [auth:4pp3x] Authenticated user 04f43951-28da-44c6-bc35-7ab8316662cf
[2026-01-28 14:31:30] warn: [Validation] Input validation failed
[2026-01-28 14:31:30] info: [PUT] /api/auth/profile - 400
[2026-01-28 14:31:30] info: [POST] /api/horses/query
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1609MB
[2026-01-28 14:31:30] info: [auth:xpoqys] Starting auth for POST /horses/query
[2026-01-28 14:31:30] info: [auth:xpoqys] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:xpoqys] Token from header: true
[2026-01-28 14:31:30] info: [auth:xpoqys] Authenticated user 87c30245-63f6-4d27-8283-6976a33f5e22
[2026-01-28 14:31:30] info: [POST] /api/horses/query - 403
[2026-01-28 14:31:30] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22}
[2026-01-28 14:31:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:31:30] info: [auth:pjpya] Starting auth for GET /horses
[2026-01-28 14:31:30] info: [auth:pjpya] Token from cookie: false
[2026-01-28 14:31:30] info: [auth:pjpya] Token from header: true
[2026-01-28 14:31:30] info: [auth:pjpya] Authenticated user d2d301a5-2fc1-4034-abe3-1336c551d7b4
[2026-01-28 14:31:30] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22} - 200
[2026-01-28 14:31:31] info: [POST] /api/horses/search
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1614MB
[2026-01-28 14:31:31] info: [auth:j0mhwp] Starting auth for POST /horses/search
[2026-01-28 14:31:31] info: [auth:j0mhwp] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:j0mhwp] Token from header: true
[2026-01-28 14:31:31] info: [auth:j0mhwp] Authenticated user 4bea39ee-d705-48eb-b7d3-6d7252b89401
[2026-01-28 14:31:31] info: [POST] /api/horses/search - 403
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20version()
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:31] info: [auth:ahr0i] Starting auth for GET /horses/1;%20SELECT%20version()
[2026-01-28 14:31:31] info: [auth:ahr0i] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:ahr0i] Token from header: true
[2026-01-28 14:31:31] info: [auth:ahr0i] Authenticated user 974a2951-a434-4410-bdef-c14c4135d9fd
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20version() - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1604MB
[2026-01-28 14:31:31] info: [auth:gys3q] Starting auth for GET /horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'
[2026-01-28 14:31:31] info: [auth:gys3q] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:gys3q] Token from header: true
[2026-01-28 14:31:31] info: [auth:gys3q] Authenticated user 55ed339f-3a8f-4e59-bdb1-48b236f50090
[2026-01-28 14:31:31] warn: 404 - Route not found: GET /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' from ::ffff:127.0.0.1
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' - 404
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1607MB
[2026-01-28 14:31:31] info: [auth:eahe3m] Starting auth for GET /horses/1;%20SELECT%20pg_read_file('/etc/passwd')
[2026-01-28 14:31:31] info: [auth:eahe3m] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:eahe3m] Token from header: true
[2026-01-28 14:31:31] info: [auth:eahe3m] Authenticated user f9f90ab3-c3c4-454f-a47f-5c7ca00b3d0e
[2026-01-28 14:31:31] warn: 404 - Route not found: GET /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') from ::ffff:127.0.0.1
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') - 404
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1609MB
[2026-01-28 14:31:31] info: [auth:3vaxm] Starting auth for GET /horses/1;%20SELECT%20lo_create(1234)
[2026-01-28 14:31:31] info: [auth:3vaxm] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:3vaxm] Token from header: true
[2026-01-28 14:31:31] info: [auth:3vaxm] Authenticated user 15919fa9-c41c-4ba0-8980-d08d0c507335
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234) - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20CALL%20malicious_procedure()
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1610MB
[2026-01-28 14:31:31] info: [auth:y0ctui] Starting auth for GET /horses/1;%20CALL%20malicious_procedure()
[2026-01-28 14:31:31] info: [auth:y0ctui] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:y0ctui] Token from header: true
[2026-01-28 14:31:31] info: [auth:y0ctui] Authenticated user b9f0fcef-96d9-4479-8e23-8c31e85e7127
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20CALL%20malicious_procedure() - 400
[2026-01-28 14:31:31] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1611MB
[2026-01-28 14:31:31] info: [auth:8kk0lv] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:31] info: [auth:8kk0lv] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:8kk0lv] Token from header: true
[2026-01-28 14:31:31] info: [auth:8kk0lv] Authenticated user 89914df3-bdd0-44a2-9e3f-836bc452ecc0
[2026-01-28 14:31:31] info: [POST] /api/horses/batch-update - 403
[2026-01-28 14:31:31] info: [POST] /api/grooms/batch-delete
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1614MB
[2026-01-28 14:31:31] info: [auth:elvdk8] Starting auth for POST /grooms/batch-delete
[2026-01-28 14:31:31] info: [auth:elvdk8] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:elvdk8] Token from header: true
[2026-01-28 14:31:31] info: [auth:elvdk8] Authenticated user 8bb0258c-db55-4fb1-9e58-202c7e9b3264
[2026-01-28 14:31:31] info: [POST] /api/grooms/batch-delete - 403
[2026-01-28 14:31:31] info: [GET] /api/horses/invalid-sql-injection
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB
[2026-01-28 14:31:31] info: [auth:rej4ga] Starting auth for GET /horses/invalid-sql-injection
[2026-01-28 14:31:31] info: [auth:rej4ga] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:rej4ga] Token from header: true
[2026-01-28 14:31:31] info: [auth:rej4ga] Authenticated user 762e41d9-6b2e-4f0e-a1bf-b41147c74e0c
[2026-01-28 14:31:31] info: [GET] /api/horses/invalid-sql-injection - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1'%20OR%20'1'='1
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1609MB
[2026-01-28 14:31:31] info: [auth:1ygh0s] Starting auth for GET /horses/1'%20OR%20'1'='1
[2026-01-28 14:31:31] info: [auth:1ygh0s] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:1ygh0s] Token from header: true
[2026-01-28 14:31:31] info: [auth:1ygh0s] Authenticated user 1b315beb-2cd6-42f4-af5f-6f2fd0eaf78a
[2026-01-28 14:31:31] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:31:31] info: [auth:9omzob] Starting auth for GET /horses/1;%20DROP%20TABLE%20horses
[2026-01-28 14:31:31] info: [auth:9omzob] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:9omzob] Token from header: true
[2026-01-28 14:31:31] info: [auth:9omzob] Authenticated user 1b315beb-2cd6-42f4-af5f-6f2fd0eaf78a
[2026-01-28 14:31:31] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1618MB
[2026-01-28 14:31:31] info: [auth:yfiw5q] Starting auth for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users
[2026-01-28 14:31:31] info: [auth:yfiw5q] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:yfiw5q] Token from header: true
[2026-01-28 14:31:31] info: [auth:yfiw5q] Authenticated user 1b315beb-2cd6-42f4-af5f-6f2fd0eaf78a
[2026-01-28 14:31:31] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1614MB
[2026-01-28 14:31:31] info: [auth:zx5oyl] Starting auth for GET /horses/1%20AND%20(SELECT%201%20FROM%20users)
[2026-01-28 14:31:31] info: [auth:zx5oyl] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:zx5oyl] Token from header: true
[2026-01-28 14:31:31] info: [auth:zx5oyl] Authenticated user 1b315beb-2cd6-42f4-af5f-6f2fd0eaf78a
[2026-01-28 14:31:31] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users) - 400
[2026-01-28 14:31:31] info: [GET] /api/horses/147881
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1606MB
[2026-01-28 14:31:31] info: [auth:hpmkf] Starting auth for GET /horses/147881
[2026-01-28 14:31:31] info: [auth:hpmkf] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:hpmkf] Token from header: true
[2026-01-28 14:31:31] info: [auth:hpmkf] Authenticated user 1310c9f6-f04d-4709-91ae-bc4d59c42964
[2026-01-28 14:31:31] info: [ownership] Validated ownership: user 1310c9f6-f04d-4709-91ae-bc4d59c42964 owns horse 147881
[2026-01-28 14:31:31] info: [GET] /api/horses/147881 - 200
[2026-01-28 14:31:31] info: [POST] /api/horses
[2026-01-28 14:31:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1612MB
[2026-01-28 14:31:31] info: [auth:yump79] Starting auth for POST /horses
[2026-01-28 14:31:31] info: [auth:yump79] Token from cookie: false
[2026-01-28 14:31:31] info: [auth:yump79] Token from header: true
[2026-01-28 14:31:31] info: [auth:yump79] Authenticated user 16834448-99f3-456c-8cf9-98f68cebdaaa
[2026-01-28 14:31:31] info: [POST] /api/horses - 403
PASS __tests__/integration/security/sql-injection-attempts.test.mjs
  SQL Injection Attempts Integration Tests
    Classic SQL Injection in ID Parameters
      ‚àö should reject SQL injection in horse ID (103 ms)
      ‚àö should reject SQL injection with comment syntax (36 ms)
      ‚àö should reject SQL injection with union select (37 ms)
      ‚àö should reject SQL injection with nested queries (32 ms)
      ‚àö should reject SQL injection with hex encoding (31 ms)
    Blind SQL Injection Attempts
      ‚àö should reject boolean-based blind injection (32 ms)
      ‚àö should reject time-based blind injection (32 ms)
      ‚àö should reject PostgreSQL-specific time injection (32 ms)
      ‚àö should reject error-based blind injection (36 ms)
    Union-Based SQL Injection
      ‚àö should reject UNION SELECT attacks (36 ms)
      ‚àö should reject UNION ALL attacks (34 ms)
      ‚àö should reject UNION with ORDER BY column enumeration (33 ms)
      ‚àö should reject UNION with NULL padding (33 ms)
    Stacked Queries
      ‚àö should reject semicolon-separated queries (35 ms)
      ‚àö should reject multiple statements in ownership check (36 ms)
      ‚àö should reject batch operations via stacking (31 ms)
    SQL Injection in Search/Filter Parameters
      ‚àö should reject SQL injection in breed filter (35 ms)
      ‚àö should reject SQL injection in name search (42 ms)
      ‚àö should reject SQL injection in sort parameter (41 ms)
      ‚àö should reject SQL injection in LIKE wildcards (42 ms)
      ‚àö should reject SQL injection in IN clause (41 ms)
    SQL Injection in JSON/JSONB Queries
      ‚àö should reject SQL injection in JSONB path (39 ms)
      ‚àö should reject SQL injection in JSON operators (31 ms)
      ‚àö should reject SQL injection in JSON array queries (35 ms)
    Second-Order SQL Injection
      ‚àö should sanitize stored data used in subsequent queries (43 ms)
      ‚àö should prevent injection via profile data used in ownership checks (31 ms)
    ORM Bypass Attempts (Prisma)
      ‚àö should reject raw query injection via Prisma (34 ms)
      ‚àö should reject Prisma findRaw injection attempts (38 ms)
      ‚àö should reject $queryRaw parameter injection (33 ms)
    PostgreSQL-Specific Injection Attacks
      ‚àö should reject PostgreSQL function calls (28 ms)
      ‚àö should reject PostgreSQL COPY command (41 ms)
      ‚àö should reject pg_read_file attempts (34 ms)
      ‚àö should reject large object manipulation (32 ms)
      ‚àö should reject PostgreSQL stored procedure execution (32 ms)
    SQL Injection in Batch Operations
      ‚àö should reject SQL injection in batch horse updates (38 ms)
      ‚àö should reject SQL injection in batch groom deletion (37 ms)
    SQL Injection Error Handling
      ‚àö should not leak database structure in error messages (31 ms)
      ‚àö should return consistent error format for all injection attempts (97 ms)
    Parameterized Query Validation
      ‚àö should use parameterized queries for ownership checks (39 ms)
      ‚àö should properly escape special characters in valid data (35 ms)

[2026-01-28 14:31:31] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:31] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:31] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:31] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:32] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:32] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:32] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:32] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:32] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:32] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:32] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:32] info: [GET] /api/horses/147883?id=147883&id=999
[2026-01-28 14:31:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1665MB
[2026-01-28 14:31:32] info: [auth:iic5fm] Starting auth for GET /horses/147883
[2026-01-28 14:31:32] info: [auth:iic5fm] Token from cookie: false
[2026-01-28 14:31:32] info: [auth:iic5fm] Token from header: true
[2026-01-28 14:31:32] info: [auth:iic5fm] Authenticated user 2f0f9df4-c2ef-48f3-9c07-b2990a66b568
[2026-01-28 14:31:32] info: [GET] /api/horses/147883?id=147883&id=999 - 400
[2026-01-28 14:31:32] info: [GET] /api/horses?id=1&id=2&id=3
[2026-01-28 14:31:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:31:32] info: [auth:9kbsb] Starting auth for GET /horses
[2026-01-28 14:31:32] info: [auth:9kbsb] Token from cookie: false
[2026-01-28 14:31:32] info: [auth:9kbsb] Token from header: true
[2026-01-28 14:31:32] info: [auth:9kbsb] Authenticated user 29772c50-55c2-4ab4-8c84-cc94b6f8f6f2
[2026-01-28 14:31:32] info: [GET] /api/horses?id=1&id=2&id=3 - 400
[2026-01-28 14:31:32] info: [GET] /api/horses/147885?sort=name&sort=age
[2026-01-28 14:31:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:31:32] info: [auth:8n66mo] Starting auth for GET /horses/147885
[2026-01-28 14:31:32] info: [auth:8n66mo] Token from cookie: false
[2026-01-28 14:31:32] info: [auth:8n66mo] Token from header: true
[2026-01-28 14:31:32] info: [auth:8n66mo] Authenticated user d23ba909-4614-4dbf-b0dd-84afe894b610
[2026-01-28 14:31:32] info: [ownership] Validated ownership: user d23ba909-4614-4dbf-b0dd-84afe894b610 owns horse 147885
[2026-01-28 14:31:32] info: [GET] /api/horses/147885?sort=name&sort=age - 200
[2026-01-28 14:31:32] info: [PUT] /api/horses/147886
[2026-01-28 14:31:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1662MB
[2026-01-28 14:31:32] info: [auth:642mf8] Starting auth for PUT /horses/147886
[2026-01-28 14:31:32] info: [auth:642mf8] Token from cookie: false
[2026-01-28 14:31:32] info: [auth:642mf8] Token from header: true
[2026-01-28 14:31:32] info: [auth:642mf8] Authenticated user fbd207df-3220-4a04-8586-8ba0d4cee79f
[2026-01-28 14:31:32] info: [ownership] Validated ownership: user fbd207df-3220-4a04-8586-8ba0d4cee79f owns horse 147886
[2026-01-28 14:31:32] info: [PUT] /api/horses/147886 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147887
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1666MB
[2026-01-28 14:31:33] info: [auth:sjbu77] Starting auth for PUT /horses/147887
[2026-01-28 14:31:33] info: [auth:sjbu77] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:sjbu77] Token from header: true
[2026-01-28 14:31:33] info: [auth:sjbu77] Authenticated user cb5210a4-5b45-4e0a-8ac8-2f0e2734dce3
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user cb5210a4-5b45-4e0a-8ac8-2f0e2734dce3 owns horse 147887
[2026-01-28 14:31:33] info: [PUT] /api/horses/147887 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147888
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1668MB
[2026-01-28 14:31:33] info: [auth:jr17m] Starting auth for PUT /horses/147888
[2026-01-28 14:31:33] info: [auth:jr17m] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:jr17m] Token from header: true
[2026-01-28 14:31:33] info: [auth:jr17m] Authenticated user 8b1b4a71-90fd-48b2-bfd2-1d2a30d5ff9b
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 8b1b4a71-90fd-48b2-bfd2-1d2a30d5ff9b owns horse 147888
[2026-01-28 14:31:33] info: [PUT] /api/horses/147888 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147889
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:31:33] info: [auth:mfw93] Starting auth for PUT /horses/147889
[2026-01-28 14:31:33] info: [auth:mfw93] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:mfw93] Token from header: true
[2026-01-28 14:31:33] info: [auth:mfw93] Authenticated user fd9a1963-fb5b-4f48-8849-1a0080ec16f7
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user fd9a1963-fb5b-4f48-8849-1a0080ec16f7 owns horse 147889
[2026-01-28 14:31:33] info: [PUT] /api/horses/147889 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147890
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:31:33] info: [auth:8ssvuc] Starting auth for PUT /horses/147890
[2026-01-28 14:31:33] info: [auth:8ssvuc] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:8ssvuc] Token from header: true
[2026-01-28 14:31:33] info: [auth:8ssvuc] Authenticated user 79679818-510e-4cd4-bd3f-444ed7ebe416
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 79679818-510e-4cd4-bd3f-444ed7ebe416 owns horse 147890
[2026-01-28 14:31:33] info: [PUT] /api/horses/147890 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147891
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:31:33] info: [auth:kgicb5] Starting auth for PUT /horses/147891
[2026-01-28 14:31:33] info: [auth:kgicb5] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:kgicb5] Token from header: true
[2026-01-28 14:31:33] info: [auth:kgicb5] Authenticated user 19883b6d-2da3-490c-b88c-f141a6887e55
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 19883b6d-2da3-490c-b88c-f141a6887e55 owns horse 147891
[2026-01-28 14:31:33] info: [PUT] /api/horses/147891 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147892
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1664MB
[2026-01-28 14:31:33] info: [auth:hv49zjj] Starting auth for PUT /horses/147892
[2026-01-28 14:31:33] info: [auth:hv49zjj] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:hv49zjj] Token from header: true
[2026-01-28 14:31:33] info: [auth:hv49zjj] Authenticated user 8b7368dc-6ac6-4e02-a270-c1c36a32a106
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 8b7368dc-6ac6-4e02-a270-c1c36a32a106 owns horse 147892
[2026-01-28 14:31:33] info: [PUT] /api/horses/147892 - 400
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1668MB
[2026-01-28 14:31:33] info: [auth:j2nfoj] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:33] info: [auth:j2nfoj] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:j2nfoj] Token from header: true
[2026-01-28 14:31:33] info: [auth:j2nfoj] Authenticated user 79ee5d5a-e4c8-43ff-bc6f-3143a94e5e77
[2026-01-28 14:31:33] info: [auth:ub1qy] Starting auth for POST /batch-update
[2026-01-28 14:31:33] info: [auth:ub1qy] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:ub1qy] Token from header: true
[2026-01-28 14:31:33] info: [auth:ub1qy] Authenticated user 79ee5d5a-e4c8-43ff-bc6f-3143a94e5e77
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:31:33] info: [auth:kymcsm] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:33] info: [auth:kymcsm] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:kymcsm] Token from header: true
[2026-01-28 14:31:33] info: [auth:kymcsm] Authenticated user 30442e71-4b02-47f0-9d13-9ee347391309
[2026-01-28 14:31:33] info: [auth:dvlvz] Starting auth for POST /batch-update
[2026-01-28 14:31:33] info: [auth:dvlvz] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:dvlvz] Token from header: true
[2026-01-28 14:31:33] info: [auth:dvlvz] Authenticated user 30442e71-4b02-47f0-9d13-9ee347391309
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:31:33] info: [auth:a42e5h] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:33] info: [auth:a42e5h] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:a42e5h] Token from header: true
[2026-01-28 14:31:33] info: [auth:a42e5h] Authenticated user e9f290e1-18f3-4a89-a52e-2cbf18388fdc
[2026-01-28 14:31:33] info: [auth:4grlob] Starting auth for POST /batch-update
[2026-01-28 14:31:33] info: [auth:4grlob] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:4grlob] Token from header: true
[2026-01-28 14:31:33] info: [auth:4grlob] Authenticated user e9f290e1-18f3-4a89-a52e-2cbf18388fdc
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:31:33] info: [auth:uvt21g] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:33] info: [auth:uvt21g] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:uvt21g] Token from header: true
[2026-01-28 14:31:33] info: [auth:uvt21g] Authenticated user 60bc5e2a-1f37-4d9f-a2d6-2237e37c29c7
[2026-01-28 14:31:33] info: [auth:v1e08uc] Starting auth for POST /batch-update
[2026-01-28 14:31:33] info: [auth:v1e08uc] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:v1e08uc] Token from header: true
[2026-01-28 14:31:33] info: [auth:v1e08uc] Authenticated user 60bc5e2a-1f37-4d9f-a2d6-2237e37c29c7
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1667MB
[2026-01-28 14:31:33] info: [auth:5f30ac] Starting auth for POST /horses/batch-update
[2026-01-28 14:31:33] info: [auth:5f30ac] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:5f30ac] Token from header: true
[2026-01-28 14:31:33] info: [auth:5f30ac] Authenticated user eb41592a-2976-4ce1-9342-51af30639b5a
[2026-01-28 14:31:33] info: [auth:zdi32b] Starting auth for POST /batch-update
[2026-01-28 14:31:33] info: [auth:zdi32b] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:zdi32b] Token from header: true
[2026-01-28 14:31:33] info: [auth:zdi32b] Authenticated user eb41592a-2976-4ce1-9342-51af30639b5a
[2026-01-28 14:31:33] info: [POST] /api/horses/batch-update - 400
[2026-01-28 14:31:33] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1669MB
[2026-01-28 14:31:33] info: [auth:88wi8r] Starting auth for GET /horses
[2026-01-28 14:31:33] info: [auth:88wi8r] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:88wi8r] Token from header: true
[2026-01-28 14:31:33] info: [auth:88wi8r] Authenticated user 8f31a77a-26ef-4fda-a241-86aa8f641ea8
[2026-01-28 14:31:33] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400
[2026-01-28 14:31:33] info: [GET] /api/horses?name[$ne]=null
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1669MB
[2026-01-28 14:31:33] info: [auth:vt6jz5] Starting auth for GET /horses
[2026-01-28 14:31:33] info: [auth:vt6jz5] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:vt6jz5] Token from header: true
[2026-01-28 14:31:33] info: [auth:vt6jz5] Authenticated user ac6dcb5e-21c9-414e-99d5-bc7c930d8fba
[2026-01-28 14:31:33] info: [GET] /api/horses?name[$ne]=null - 400
[2026-01-28 14:31:33] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:31:33] info: [auth:w937ji] Starting auth for GET /horses
[2026-01-28 14:31:33] info: [auth:w937ji] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:w937ji] Token from header: true
[2026-01-28 14:31:33] info: [auth:w937ji] Authenticated user fb52bed3-c75f-4df7-ab76-51dcd2fb032c
[2026-01-28 14:31:33] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E - 400
[2026-01-28 14:31:33] info: [GET] /api/horses?name=Horse%00Admin
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:31:33] info: [auth:8xeiw] Starting auth for GET /horses
[2026-01-28 14:31:33] info: [auth:8xeiw] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:8xeiw] Token from header: true
[2026-01-28 14:31:33] info: [auth:8xeiw] Authenticated user 3b0bc5b8-4856-42b2-979a-08664fab7498
[2026-01-28 14:31:33] info: [GET] /api/horses?name=Horse%00Admin - 400
[2026-01-28 14:31:33] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1671MB
[2026-01-28 14:31:33] info: [auth:tao35t] Starting auth for GET /horses
[2026-01-28 14:31:33] info: [auth:tao35t] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:tao35t] Token from header: true
[2026-01-28 14:31:33] info: [auth:tao35t] Authenticated user 50ba4572-286a-4a6a-aa24-9da56a56b6e7
[2026-01-28 14:31:33] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 414
[2026-01-28 14:31:33] error: [PUT] /api/horses/147903 - ERROR
[2026-01-28 14:31:33] error: Error Unexpected token 'n', "name=HackedName" is not valid JSON
[2026-01-28 14:31:33] info: [PUT] /api/horses/147904
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1669MB
[2026-01-28 14:31:33] info: [auth:nof7gj] Starting auth for PUT /horses/147904
[2026-01-28 14:31:33] info: [auth:nof7gj] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:nof7gj] Token from header: true
[2026-01-28 14:31:33] info: [auth:nof7gj] Authenticated user d26ed60e-af72-44c9-a56b-8ed5f84fbdb1
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user d26ed60e-af72-44c9-a56b-8ed5f84fbdb1 owns horse 147904
[2026-01-28 14:31:33] info: [PUT] /api/horses/147904 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147905
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:31:33] info: [auth:35w4u] Starting auth for PUT /horses/147905
[2026-01-28 14:31:33] info: [auth:35w4u] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:35w4u] Token from header: true
[2026-01-28 14:31:33] info: [auth:35w4u] Authenticated user 2c7be75f-0c01-4a4e-b5be-73066cc3d472
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 2c7be75f-0c01-4a4e-b5be-73066cc3d472 owns horse 147905
[2026-01-28 14:31:33] info: [PUT] /api/horses/147905 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147906
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1673MB
[2026-01-28 14:31:33] info: [auth:flm8ym] Starting auth for PUT /horses/147906
[2026-01-28 14:31:33] info: [auth:flm8ym] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:flm8ym] Token from header: true
[2026-01-28 14:31:33] info: [auth:flm8ym] Authenticated user c5e1e8b9-7d81-4c0d-830e-8fa55273986a
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user c5e1e8b9-7d81-4c0d-830e-8fa55273986a owns horse 147906
[2026-01-28 14:31:33] info: [PUT] /api/horses/147906 - 415
[2026-01-28 14:31:33] info: [PUT] /api/horses/147907
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:31:33] info: [auth:eugap9] Starting auth for PUT /horses/147907
[2026-01-28 14:31:33] info: [auth:eugap9] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:eugap9] Token from header: true
[2026-01-28 14:31:33] info: [auth:eugap9] Authenticated user e650a348-07be-48e6-bb1c-384eccd2da25
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user e650a348-07be-48e6-bb1c-384eccd2da25 owns horse 147907
[2026-01-28 14:31:33] info: [PUT] /api/horses/147907 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147908
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:31:33] info: [auth:u9vffw] Starting auth for PUT /horses/147908
[2026-01-28 14:31:33] info: [auth:u9vffw] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:u9vffw] Token from header: true
[2026-01-28 14:31:33] info: [auth:u9vffw] Authenticated user 1c90c5db-a151-400b-a0e2-1518e6f76d45
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 1c90c5db-a151-400b-a0e2-1518e6f76d45 owns horse 147908
[2026-01-28 14:31:33] info: [PUT] /api/horses/147908 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147909
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1679MB
[2026-01-28 14:31:33] info: [auth:opg6qj] Starting auth for PUT /horses/147909
[2026-01-28 14:31:33] info: [auth:opg6qj] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:opg6qj] Token from header: true
[2026-01-28 14:31:33] info: [auth:opg6qj] Authenticated user 95eb5120-138f-4ce6-ac05-93440317bec2
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 95eb5120-138f-4ce6-ac05-93440317bec2 owns horse 147909
[2026-01-28 14:31:33] info: [PUT] /api/horses/147909 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147910
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB
[2026-01-28 14:31:33] info: [auth:hg43m] Starting auth for PUT /horses/147910
[2026-01-28 14:31:33] info: [auth:hg43m] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:hg43m] Token from header: true
[2026-01-28 14:31:33] info: [auth:hg43m] Authenticated user 1d7f3753-897a-4b5b-a8e2-843a0b589c99
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 1d7f3753-897a-4b5b-a8e2-843a0b589c99 owns horse 147910
[2026-01-28 14:31:33] info: [PUT] /api/horses/147910 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147911
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:31:33] info: [auth:xu82h4] Starting auth for PUT /horses/147911
[2026-01-28 14:31:33] info: [auth:xu82h4] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:xu82h4] Token from header: true
[2026-01-28 14:31:33] info: [auth:xu82h4] Authenticated user e6652472-df2f-48c8-94e1-7d14386371ee
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user e6652472-df2f-48c8-94e1-7d14386371ee owns horse 147911
[2026-01-28 14:31:33] info: [PUT] /api/horses/147911 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147912
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1674MB
[2026-01-28 14:31:33] info: [auth:7ttmcy] Starting auth for PUT /horses/147912
[2026-01-28 14:31:33] info: [auth:7ttmcy] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:7ttmcy] Token from header: true
[2026-01-28 14:31:33] info: [auth:7ttmcy] Authenticated user 34988566-9634-4b2b-a21b-bcf1eb01d4a7
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 34988566-9634-4b2b-a21b-bcf1eb01d4a7 owns horse 147912
[2026-01-28 14:31:33] info: [PUT] /api/horses/147912 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147913
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1676MB
[2026-01-28 14:31:33] info: [auth:zlzlge] Starting auth for PUT /horses/147913
[2026-01-28 14:31:33] info: [auth:zlzlge] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:zlzlge] Token from header: true
[2026-01-28 14:31:33] info: [auth:zlzlge] Authenticated user 90fb9020-3d5a-46c1-a1e8-19959451781b
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 90fb9020-3d5a-46c1-a1e8-19959451781b owns horse 147913
[2026-01-28 14:31:33] info: [PUT] /api/horses/147913 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147914
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1678MB
[2026-01-28 14:31:33] info: [auth:uu3aj] Starting auth for PUT /horses/147914
[2026-01-28 14:31:33] info: [auth:uu3aj] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:uu3aj] Token from header: true
[2026-01-28 14:31:33] info: [auth:uu3aj] Authenticated user 7945e1db-dea3-4d18-a02d-6da34a9f63c5
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 7945e1db-dea3-4d18-a02d-6da34a9f63c5 owns horse 147914
[2026-01-28 14:31:33] info: [PUT] /api/horses/147914 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147915
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:31:33] info: [auth:p7b0k] Starting auth for PUT /horses/147915
[2026-01-28 14:31:33] info: [auth:p7b0k] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:p7b0k] Token from header: true
[2026-01-28 14:31:33] info: [auth:p7b0k] Authenticated user dcea0899-8fc4-4d36-bbbf-3f707532e1f6
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user dcea0899-8fc4-4d36-bbbf-3f707532e1f6 owns horse 147915
[2026-01-28 14:31:33] info: [PUT] /api/horses/147915 - 400
[2026-01-28 14:31:33] info: [PUT] /api/horses/147916
[2026-01-28 14:31:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1682MB
[2026-01-28 14:31:33] info: [auth:9itr8] Starting auth for PUT /horses/147916
[2026-01-28 14:31:33] info: [auth:9itr8] Token from cookie: false
[2026-01-28 14:31:33] info: [auth:9itr8] Token from header: true
[2026-01-28 14:31:33] info: [auth:9itr8] Authenticated user 229f2391-71bf-489b-bc27-59db4321193d
[2026-01-28 14:31:33] info: [ownership] Validated ownership: user 229f2391-71bf-489b-bc27-59db4321193d owns horse 147916
[2026-01-28 14:31:34] info: [PUT] /api/horses/147916 - 400
[2026-01-28 14:31:34] info: [PUT] /api/horses/147917
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1670MB
[2026-01-28 14:31:34] info: [auth:6ks64v] Starting auth for PUT /horses/147917
[2026-01-28 14:31:34] info: [auth:6ks64v] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:6ks64v] Token from header: true
[2026-01-28 14:31:34] info: [auth:6ks64v] Authenticated user 046d8fa4-cc93-4318-8e95-5b44ce3fc913
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user 046d8fa4-cc93-4318-8e95-5b44ce3fc913 owns horse 147917
[2026-01-28 14:31:34] info: [PUT] /api/horses/147917 - 400
[2026-01-28 14:31:34] info: [PUT] /api/horses/147918
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1675MB
[2026-01-28 14:31:34] info: [auth:rshnsm] Starting auth for PUT /horses/147918
[2026-01-28 14:31:34] info: [auth:rshnsm] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:rshnsm] Token from header: true
[2026-01-28 14:31:34] info: [auth:rshnsm] Authenticated user 3b2c867c-5ac1-4e2a-ae21-8940a556c3bc
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user 3b2c867c-5ac1-4e2a-ae21-8940a556c3bc owns horse 147918
[2026-01-28 14:31:34] info: [PUT] /api/horses/147918 - 400
[2026-01-28 14:31:34] info: [PUT] /api/horses/147919
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1677MB
[2026-01-28 14:31:34] info: [auth:hkl00n] Starting auth for PUT /horses/147919
[2026-01-28 14:31:34] info: [auth:hkl00n] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:hkl00n] Token from header: true
[2026-01-28 14:31:34] info: [auth:hkl00n] Authenticated user a7249c11-8c59-4914-aeff-a7428f2a7d2d
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user a7249c11-8c59-4914-aeff-a7428f2a7d2d owns horse 147919
[2026-01-28 14:31:34] info: [PUT] /api/horses/147919 - 400
[2026-01-28 14:31:34] info: [PUT] /api/horses/147920
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1678MB
[2026-01-28 14:31:34] info: [auth:ilhr7] Starting auth for PUT /horses/147920
[2026-01-28 14:31:34] info: [auth:ilhr7] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:ilhr7] Token from header: true
[2026-01-28 14:31:34] info: [auth:ilhr7] Authenticated user b411a0a0-a081-478d-899c-f8f343b79456
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user b411a0a0-a081-478d-899c-f8f343b79456 owns horse 147920
[2026-01-28 14:31:34] info: [PUT] /api/horses/147920 - 400
[2026-01-28 14:31:34] info: [GET] /api/horses/147921
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1680MB
[2026-01-28 14:31:34] info: [auth:3u1eb] Starting auth for GET /horses/147921
[2026-01-28 14:31:34] info: [auth:3u1eb] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:3u1eb] Token from header: true
[2026-01-28 14:31:34] info: [auth:3u1eb] Authenticated user dd21455f-00d6-4843-8f47-7f01c2a8ffe7
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user dd21455f-00d6-4843-8f47-7f01c2a8ffe7 owns horse 147921
[2026-01-28 14:31:34] info: [GET] /api/horses/147921 - 200
[2026-01-28 14:31:34] info: [GET] /api/horses
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 14:31:34] info: [auth:bzblli] Starting auth for GET /horses
[2026-01-28 14:31:34] info: [auth:bzblli] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:bzblli] Token from header: true
[2026-01-28 14:31:34] info: [auth:bzblli] Authenticated user 701dd99a-cfc2-43ca-a863-6be4cff0c3af
[2026-01-28 14:31:34] info: [GET] /api/horses - 400
[2026-01-28 14:31:34] info: [GET] /api/horses/147923
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1683MB
[2026-01-28 14:31:34] info: [auth:x1hs6] Starting auth for GET /horses/147923
[2026-01-28 14:31:34] info: [auth:x1hs6] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:x1hs6] Token from header: true
[2026-01-28 14:31:34] info: [auth:x1hs6] Authenticated user 15aecc2d-e8f0-4f4a-bab2-3a9f43ce08ad
[2026-01-28 14:31:34] info: [GET] /api/horses/147923 - 406
[2026-01-28 14:31:34] info: [PUT] /api/horses/147924
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1672MB
[2026-01-28 14:31:34] info: [auth:muwfw1] Starting auth for PUT /horses/147924
[2026-01-28 14:31:34] info: [auth:muwfw1] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:muwfw1] Token from header: true
[2026-01-28 14:31:34] info: [auth:muwfw1] Authenticated user 12ea07c5-b525-45e6-9187-039312ae9a11
[2026-01-28 14:31:34] info: [PUT] /api/horses/147924
[2026-01-28 14:31:34] warn: [MemoryMonitoring] Memory threshold exceeded: 1684MB
[2026-01-28 14:31:34] info: [auth:f02rd] Starting auth for PUT /horses/147924
[2026-01-28 14:31:34] info: [auth:f02rd] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:f02rd] Token from header: true
[2026-01-28 14:31:34] info: [auth:f02rd] Authenticated user 12ea07c5-b525-45e6-9187-039312ae9a11
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user 12ea07c5-b525-45e6-9187-039312ae9a11 owns horse 147924
[2026-01-28 14:31:34] info: [PUT] /api/horses/147924 - 400
[2026-01-28 14:31:34] info: [ownership] Validated ownership: user 12ea07c5-b525-45e6-9187-039312ae9a11 owns horse 147924
[2026-01-28 14:31:34] info: [PUT] /api/horses/147924 - 400
PASS __tests__/integration/security/parameter-pollution.test.mjs
  Parameter Pollution Attack Integration Tests
    HTTP Parameter Pollution (HPP)
      ‚àö should reject duplicate id parameters in query string (102 ms)
      ‚àö should reject duplicate id parameters in different positions (31 ms)
      ‚àö should use first parameter value when duplicates present (43 ms)
      ‚àö should reject array-syntax parameters where not expected (47 ms)
      ‚àö should reject mixed type parameters (35 ms)
    JSON Parameter Pollution
      ‚àö should reject duplicate keys in JSON payload (40 ms)
      ‚àö should reject nested parameter pollution (34 ms)
      ‚àö should reject prototype pollution attempts (33 ms)
      ‚àö should reject constructor pollution attempts (35 ms)
      ‚àö should sanitize JSON keys with special characters (37 ms)
    Array Parameter Manipulation
      ‚àö should reject oversized arrays in batch operations (35 ms)
      ‚àö should reject mixed-type arrays (37 ms)
      ‚àö should reject negative indices in array parameters (35 ms)
      ‚àö should reject sparse arrays with undefined holes (32 ms)
      ‚àö should enforce maximum array nesting depth (33 ms)
    Query String Pollution
      ‚àö should reject SQL injection in query parameters (29 ms)
      ‚àö should reject NoSQL injection in query parameters (31 ms)
      ‚àö should reject encoded special characters in parameters (31 ms)
      ‚àö should reject null bytes in query strings (32 ms)
      ‚àö should enforce query string length limits (33 ms)
    Content-Type Manipulation
      ‚àö should reject mismatched Content-Type and body format (23 ms)
      ‚àö should reject Content-Type charset manipulation (38 ms)
      ‚àö should reject multipart/form-data without proper boundaries (32 ms)
      ‚àö should accept only allowed Content-Types (32 ms)
    Nested Object Pollution
      ‚àö should reject excessive nesting depth (36 ms)
      ‚àö should reject circular references in objects (35 ms)
      ‚àö should sanitize nested object keys (33 ms)
      ‚àö should reject objects with numeric string keys (35 ms)
    Type Coercion Attacks
      ‚àö should reject boolean as string (33 ms)
      ‚àö should reject object as number (34 ms)
      ‚àö should reject array as string (32 ms)
      ‚àö should reject numeric string with leading zeros (34 ms)
      ‚àö should reject scientific notation where integers expected (34 ms)
      ‚àö should reject Infinity and NaN values (33 ms)
    Mass Assignment Vulnerabilities
      ‚àö should reject attempts to modify protected fields (40 ms)
      ‚àö should reject attempts to set createdAt/updatedAt manually (34 ms)
      ‚àö should only allow whitelisted fields in updates (33 ms)
      ‚àö should reject attempts to add new fields (34 ms)
    Parameter Injection via Headers
      ‚àö should reject parameter injection via custom headers (39 ms)
      ‚àö should reject SQL injection in custom headers (29 ms)
      ‚àö should reject malicious values in Accept header (31 ms)
    Race Condition via Parameter Timing
      ‚àö should prevent race conditions in concurrent updates (59 ms)

[2026-01-28 14:31:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:34] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:34] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:34] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:34] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:31:34] info: [auth:xll66i] Starting auth for GET /status
[2026-01-28 14:31:34] info: [auth:xll66i] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:xll66i] Token from header: true
[2026-01-28 14:31:34] info: [auth:xll66i] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:34] info: [MemoryManagement] Getting memory status
[2026-01-28 14:31:34] info: [auth:0uuazg] Starting auth for GET /status
[2026-01-28 14:31:34] info: [auth:0uuazg] Token from cookie: false
[2026-01-28 14:31:34] warn: [auth:0uuazg] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:31:34] info: [auth:ockw8u] Starting auth for GET /metrics
[2026-01-28 14:31:34] info: [auth:ockw8u] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:ockw8u] Token from header: true
[2026-01-28 14:31:34] info: [auth:ockw8u] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:34] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:31:34] info: [auth:cryt2] Starting auth for GET /metrics
[2026-01-28 14:31:34] info: [auth:cryt2] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:cryt2] Token from header: true
[2026-01-28 14:31:34] info: [auth:cryt2] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:34] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:31:34] info: [auth:hi6km9] Starting auth for GET /metrics
[2026-01-28 14:31:34] info: [auth:hi6km9] Token from cookie: false
[2026-01-28 14:31:34] info: [auth:hi6km9] Token from header: true
[2026-01-28 14:31:34] info: [auth:hi6km9] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:34] info: [MemoryManagement] Getting memory metrics for timeframe: 6h
[2026-01-28 14:31:35] info: [auth:pbv87b] Starting auth for GET /metrics
[2026-01-28 14:31:35] info: [auth:pbv87b] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:pbv87b] Token from header: true
[2026-01-28 14:31:35] info: [auth:pbv87b] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory metrics for timeframe: 24h
[2026-01-28 14:31:35] info: [auth:f4zy4] Starting auth for GET /metrics
[2026-01-28 14:31:35] info: [auth:f4zy4] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:f4zy4] Token from header: true
[2026-01-28 14:31:35] info: [auth:f4zy4] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory metrics for timeframe: 7d
[2026-01-28 14:31:35] info: [auth:ml6ur] Starting auth for GET /metrics
[2026-01-28 14:31:35] info: [auth:ml6ur] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:ml6ur] Token from header: true
[2026-01-28 14:31:35] info: [auth:ml6ur] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:31:35] info: [auth:57jdbe] Starting auth for GET /metrics
[2026-01-28 14:31:35] info: [auth:57jdbe] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:57jdbe] Token from header: true
[2026-01-28 14:31:35] info: [auth:57jdbe] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [auth:jch8nc] Starting auth for GET /resources
[2026-01-28 14:31:35] info: [auth:jch8nc] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:jch8nc] Token from header: true
[2026-01-28 14:31:35] info: [auth:jch8nc] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:31:35] info: [auth:ol8snc] Starting auth for POST /gc
[2026-01-28 14:31:35] info: [auth:ol8snc] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:ol8snc] Token from header: true
[2026-01-28 14:31:35] info: [auth:ol8snc] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Manual GC trigger requested (force: false)
[2026-01-28 14:31:35] info: [auth:p9vqfs] Starting auth for POST /gc
[2026-01-28 14:31:35] info: [auth:p9vqfs] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:p9vqfs] Token from header: true
[2026-01-28 14:31:35] info: [auth:p9vqfs] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [auth:jeea2c] Starting auth for POST /cleanup
[2026-01-28 14:31:35] info: [auth:jeea2c] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:jeea2c] Token from header: true
[2026-01-28 14:31:35] info: [auth:jeea2c] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Resource cleanup requested for: all
[2026-01-28 14:31:35] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:31:35] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:31:35] info: [auth:qzizzl] Starting auth for POST /cleanup
[2026-01-28 14:31:35] info: [auth:qzizzl] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:qzizzl] Token from header: true
[2026-01-28 14:31:35] info: [auth:qzizzl] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Resource cleanup requested for: timers, intervals
[2026-01-28 14:31:35] warn: [MemoryManagement] Selective cleanup not yet implemented
[2026-01-28 14:31:35] info: [auth:2anws8] Starting auth for POST /cleanup
[2026-01-28 14:31:35] info: [auth:2anws8] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:2anws8] Token from header: true
[2026-01-28 14:31:35] info: [auth:2anws8] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [auth:p5odd] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:p5odd] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:p5odd] Token from header: true
[2026-01-28 14:31:35] info: [auth:p5odd] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:31:35] info: [auth:v9ivod] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:v9ivod] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:v9ivod] Token from header: true
[2026-01-28 14:31:35] info: [auth:v9ivod] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:31:35] info: [auth:0rzly3] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:0rzly3] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:0rzly3] Token from header: true
[2026-01-28 14:31:35] info: [auth:0rzly3] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:31:35] info: [auth:nkaahd] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:nkaahd] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:nkaahd] Token from header: true
[2026-01-28 14:31:35] info: [auth:nkaahd] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:31:35] info: [auth:tzeu7] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:tzeu7] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:tzeu7] Token from header: true
[2026-01-28 14:31:35] info: [auth:tzeu7] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory alerts
[2026-01-28 14:31:35] info: [auth:8db4rb] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:8db4rb] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:8db4rb] Token from header: true
[2026-01-28 14:31:35] info: [auth:8db4rb] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [auth:10vlzj] Starting auth for GET /alerts
[2026-01-28 14:31:35] info: [auth:10vlzj] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:10vlzj] Token from header: true
[2026-01-28 14:31:35] info: [auth:10vlzj] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [auth:wjbcbb] Starting auth for GET /health
[2026-01-28 14:31:35] info: [auth:wjbcbb] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:wjbcbb] Token from header: true
[2026-01-28 14:31:35] info: [auth:wjbcbb] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:31:35] info: [auth:7dikm] Starting auth for GET /health
[2026-01-28 14:31:35] info: [auth:7dikm] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:7dikm] Token from header: true
[2026-01-28 14:31:35] info: [auth:7dikm] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:31:35] info: [auth:3wsaw39] Starting auth for GET /health
[2026-01-28 14:31:35] info: [auth:3wsaw39] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:3wsaw39] Token from header: true
[2026-01-28 14:31:35] info: [auth:3wsaw39] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:31:35] info: [auth:15swfc] Starting auth for GET /status
[2026-01-28 14:31:35] info: [auth:15swfc] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:15swfc] Token from header: true
[2026-01-28 14:31:35] warn: [auth:15swfc] Invalid or expired token for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:31:35] info: [auth:2fanx] Starting auth for GET /status
[2026-01-28 14:31:35] info: [auth:2fanx] Token from cookie: false
[2026-01-28 14:31:35] warn: [auth:2fanx] Access token is required for GET /status from ::ffff:127.0.0.1
[2026-01-28 14:31:35] info: [auth:prq57p] Starting auth for GET /metrics
[2026-01-28 14:31:35] info: [auth:prq57p] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:prq57p] Token from header: true
[2026-01-28 14:31:35] info: [auth:prq57p] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:31:35] info: [auth:cc0yfs] Starting auth for GET /resources
[2026-01-28 14:31:35] info: [auth:cc0yfs] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:cc0yfs] Token from header: true
[2026-01-28 14:31:35] info: [auth:cc0yfs] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting resource analytics
[2026-01-28 14:31:35] info: [auth:dnkcgpk] Starting auth for GET /health
[2026-01-28 14:31:35] info: [auth:dnkcgpk] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:dnkcgpk] Token from header: true
[2026-01-28 14:31:35] info: [auth:dnkcgpk] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting system health assessment
[2026-01-28 14:31:35] info: [auth:890nr] Starting auth for GET /status
[2026-01-28 14:31:35] info: [auth:890nr] Token from cookie: false
[2026-01-28 14:31:35] info: [auth:890nr] Token from header: true
[2026-01-28 14:31:35] info: [auth:890nr] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:35] info: [MemoryManagement] Getting memory status
[2026-01-28 14:31:35] warn: [MemoryManager] Memory threshold alert: 1710MB used
[2026-01-28 14:31:36] warn: [MemoryManager] Memory threshold alert: 1711MB used
[2026-01-28 14:31:37] info: [auth:afdppd] Starting auth for GET /metrics
[2026-01-28 14:31:37] info: [auth:afdppd] Token from cookie: false
[2026-01-28 14:31:37] info: [auth:afdppd] Token from header: true
[2026-01-28 14:31:37] info: [auth:afdppd] Authenticated user a6359404-3f43-4478-a27e-6823db7bb5ac
[2026-01-28 14:31:37] info: [MemoryManagement] Getting memory metrics for timeframe: 1h
[2026-01-28 14:31:37] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:31:37] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:31:37] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
PASS __tests__/routes/memoryManagementRoutes.test.mjs
  Memory Management Routes
    GET /api/memory/status
      ‚àö retrieves memory status successfully (35 ms)
      ‚àö requires authentication (17 ms)
    GET /api/memory/metrics
      ‚àö retrieves memory metrics with default timeframe (21 ms)
      ‚àö accepts different timeframe parameters (75 ms)
      ‚àö includes GC data when requested (19 ms)
      ‚àö validates timeframe parameter (19 ms)
    GET /api/memory/resources
      ‚àö retrieves resource analytics successfully (22 ms)
    POST /api/memory/gc
      ‚àö triggers garbage collection when available (1 ms)
      ‚àö handles GC unavailability gracefully (27 ms)
      ‚àö validates request body (15 ms)
    POST /api/memory/cleanup
      ‚àö performs resource cleanup successfully (20 ms)
      ‚àö handles selective cleanup request (19 ms)
      ‚àö validates resource types parameter (15 ms)
    GET /api/memory/alerts
      ‚àö retrieves memory alerts successfully (21 ms)
      ‚àö filters alerts by severity (58 ms)
      ‚àö limits alert results (20 ms)
      ‚àö validates severity parameter (16 ms)
      ‚àö validates limit parameter (22 ms)
    GET /api/memory/health
      ‚àö retrieves system health assessment successfully (26 ms)
      ‚àö provides memory utilization status (20 ms)
      ‚àö provides resource efficiency metrics (21 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (19 ms)
      ‚àö handles missing authorization header (16 ms)
    Performance Validation
      ‚àö memory metrics show realistic values (22 ms)
      ‚àö resource analytics show meaningful data (22 ms)
      ‚àö health assessment provides actionable insights (18 ms)
    Real-time Monitoring Integration
      ‚àö status endpoint reflects current monitoring state (19 ms)
      ‚àö metrics endpoint provides recent data (1525 ms)

[2026-01-28 14:31:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:37] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Token rotation successful
[2026-01-28 14:31:38] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:31:38] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:38] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:31:38] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:38] info: [TokenRotation] Token rotation successful
[2026-01-28 14:31:39] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:31:39] warn: [TokenRotation] Token reuse detected
[2026-01-28 14:31:39] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:39] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:31:39] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:39] warn: [TokenRotation] Token reuse detected during rotation
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:39] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:39] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:39] warn: [TokenRotation] Token family invalidated
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:39] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:39] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:39] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:31:39] warn: [TokenRotation] Skipping refresh token persistence in test env
[2026-01-28 14:31:39] info: [TokenRotation] Created new token pair
PASS __tests__/unit/token-rotation.test.mjs
  Token Rotation Service - Unit Tests
    generateTokenFamily()
      ‚àö should_create_unique_family_id (137 ms)
      ‚àö should_include_timestamp_in_family_id (80 ms)
    createTokenPair()
      ‚àö should_create_access_and_refresh_token_pair (87 ms)
      ‚àö should_create_refresh_token_with_family_id (84 ms)
      ‚àö should_store_refresh_token_in_database (82 ms)
      ‚àö should_set_correct_expiration_times (88 ms)
    validateRefreshToken()
      ‚àö should_validate_legitimate_refresh_token (96 ms)
      ‚àö should_reject_expired_refresh_token (112 ms)
      ‚àö should_reject_token_with_invalid_signature (85 ms)
      ‚àö should_reject_inactive_token_from_database (96 ms)
      ‚àö should_reject_malformed_token (78 ms)
    detectTokenReuse()
      ‚àö should_detect_reuse_of_invalidated_token (90 ms)
      ‚àö should_not_flag_first_use_as_reuse (83 ms)
      ‚àö should_identify_family_for_invalidation (90 ms)
    rotateRefreshToken()
      ‚àö should_create_new_token_and_invalidate_old (97 ms)
      ‚àö should_fail_rotation_for_invalid_token (75 ms)
      ‚àö should_fail_rotation_if_reuse_detected (90 ms)
      ‚àö should_handle_concurrent_rotation_attempts (152 ms)
    invalidateTokenFamily()
      ‚àö should_invalidate_all_tokens_in_family (106 ms)
      ‚àö should_handle_family_that_does_not_exist (77 ms)
      ‚àö should_log_invalidation_for_security_audit (83 ms)
    cleanupExpiredTokens()
      ‚àö should_remove_expired_tokens_from_database (93 ms)
      ‚àö should_remove_old_invalidated_tokens (84 ms)
      ‚àö should_return_cleanup_statistics (82 ms)
    Error Handling and Edge Cases
      ‚àö should_handle_database_connection_errors (84 ms)
      ‚àö should_handle_jwt_verification_errors_gracefully (77 ms)
      ‚àö should_validate_token_family_id_format (79 ms)

[2026-01-28 14:31:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:40] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:40] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:40] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:40] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:40] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:40] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:40] info: [EmailVerification] Created verification token
[2026-01-28 14:31:40] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:40] info: [authController.register] Verification email sent
[2026-01-28 14:31:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:41] info: [EmailVerification] Created verification token
[2026-01-28 14:31:41] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:31:41] info: [authController.register] Verification email sent
[2026-01-28 14:31:41] info: [TokenRotation] Created new token pair
[2026-01-28 14:31:41] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis
PASS tests/auth-simple.test.mjs
  üîê INTEGRATION: Authentication Controller Simple - Core Auth Workflow Testing
    ‚àö should register a new user (417 ms)
    ‚àö should login with valid credentials (596 ms)

[2026-01-28 14:31:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:41] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:42] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:42] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:43] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:43] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:43] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:43] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:43] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:43] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:43] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:43] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB
[2026-01-28 14:31:43] info: [auth:i22srl] Starting auth for GET /horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [auth:i22srl] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:i22srl] Token from header: true
[2026-01-28 14:31:43] info: [auth:i22srl] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [trainingController.getTrainableHorses] Getting trainable horses for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:31:43] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2 - 200
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:31:43] info: [auth:o7o2hn] Starting auth for GET /horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [auth:o7o2hn] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:o7o2hn] Token from header: true
[2026-01-28 14:31:43] info: [auth:o7o2hn] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2 - 200
[2026-01-28 14:31:43] info: [POST] /api/training/train
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1575MB
[2026-01-28 14:31:43] info: [auth:e8njr] Starting auth for POST /training/train
[2026-01-28 14:31:43] info: [auth:e8njr] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:e8njr] Token from header: true
[2026-01-28 14:31:43] info: [auth:e8njr] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [ownership] Found owned horse 147925 for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [trainingController.trainRouteHandler] Training request for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingController.trainHorse] Attempting to train horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147925
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 is eligible to train in Racing
[2026-01-28 14:31:43] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769628703478_3y9cmx (ID: 147925)
[2026-01-28 14:31:43] info: [trainingController.trainHorse] Horse 147925 has traits: 
[2026-01-28 14:31:43] info: [trainingModel.logTrainingSession] Logging training session for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9055
[2026-01-28 14:31:43] info: [horseModel.updateHorseStat] Updating speed by 2 for horse 147925
[2026-01-28 14:31:43] info: [horseModel.updateHorseStat] Updated speed for horse 147925: 50 -> 52 (+2)
[2026-01-28 14:31:43] info: [trainingController.trainHorse] Stat gain: speed +2
[2026-01-28 14:31:43] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147925 by +5
[2026-01-28 14:31:43] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147925 by +5
[2026-01-28 14:31:43] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147925: 0 -> 5
[2026-01-28 14:31:43] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147925
[2026-01-28 14:31:43] info: [xpLogModel.logXpEvent] Logging XP event: User 8436f9db-2882-4890-b638-e4792d4d39e2, Amount: 5, Reason: Trained horse TestHorse_1769628703478_3y9cmx in Racing
[2026-01-28 14:31:43] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4480, User 8436f9db-2882-4890-b638-e4792d4d39e2, Amount: 5
[2026-01-28 14:31:43] info: [trainingController.trainHorse] Awarded 5 XP to user 8436f9db-2882-4890-b638-e4792d4d39e2 for training
[2026-01-28 14:31:43] info: [trainingController.trainHorse] Successfully trained horse 147925 in Racing (Log ID: 9055, Score +5)
[2026-01-28 14:31:43] info: [POST] /api/training/train - 200
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1579MB
[2026-01-28 14:31:43] info: [auth:uywkh3] Starting auth for GET /horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [auth:uywkh3] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:uywkh3] Token from header: true
[2026-01-28 14:31:43] info: [auth:uywkh3] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [trainingController.getTrainableHorses] Getting trainable horses for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 1 horses
[2026-01-28 14:31:43] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2 - 200
[2026-01-28 14:31:43] info: [GET] /api/training/status/147925/Racing
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1580MB
[2026-01-28 14:31:43] info: [auth:efdjuk] Starting auth for GET /training/status/147925/Racing
[2026-01-28 14:31:43] info: [auth:efdjuk] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:efdjuk] Token from header: true
[2026-01-28 14:31:43] info: [auth:efdjuk] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [ownership] Validated ownership: user 8436f9db-2882-4890-b638-e4792d4d39e2 owns horse 147925
[2026-01-28 14:31:43] info: [trainingRoutes.getStatus] User 8436f9db-2882-4890-b638-e4792d4d39e2 getting training status for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Racing
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Last training date for horse 147925 in Racing: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [GET] /api/training/status/147925/Racing - 200
[2026-01-28 14:31:43] info: [GET] /api/training/status/147925
[2026-01-28 14:31:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1576MB
[2026-01-28 14:31:43] info: [auth:69x9ao] Starting auth for GET /training/status/147925
[2026-01-28 14:31:43] info: [auth:69x9ao] Token from cookie: false
[2026-01-28 14:31:43] info: [auth:69x9ao] Token from header: true
[2026-01-28 14:31:43] info: [auth:69x9ao] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:43] info: [ownership] Validated ownership: user 8436f9db-2882-4890-b638-e4792d4d39e2 owns horse 147925
[2026-01-28 14:31:43] info: [trainingRoutes.getStatusAll] User 8436f9db-2882-4890-b638-e4792d4d39e2 getting all training statuses for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Western Pleasure
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Western Pleasure
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Reining
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Reining
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Cutting
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Cutting
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Barrel Racing
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Barrel Racing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Roping
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Roping
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Team Penning
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Team Penning
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Rodeo
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Rodeo
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Hunter
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Hunter
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Saddleseat
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Saddleseat
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Endurance
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Endurance
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Eventing
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Eventing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Dressage
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Dressage
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Show Jumping
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Show Jumping
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Vaulting
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Vaulting
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Polo
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Polo
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Cross Country
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Cross Country
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Combined Driving
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Combined Driving
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Fine Harness
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Fine Harness
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Gaited
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Gaited
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Gymkhana
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Gymkhana
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Steeplechase
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Steeplechase
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 147925 in Harness Racing
[2026-01-28 14:31:43] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in Harness Racing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [horseModel.getHorseById] Successfully found horse: TestHorse_1769628703478_3y9cmx (ID: 147925)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 lacks required trait for Gaited training
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Western Pleasure
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Barrel Racing
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Rodeo
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Endurance
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Dressage
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Show Jumping
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Polo
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Combined Driving
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Gymkhana
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Gaited
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Western Pleasure
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Barrel Racing
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:43] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:43] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:43] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Rodeo
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Endurance
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Dressage
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Show Jumping
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Reining
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Polo
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Combined Driving
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Gymkhana
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Cutting
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Team Penning
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Roping
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Saddleseat
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Hunter
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Gaited
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Vaulting
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Eventing
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Fine Harness
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Harness Racing
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Cross Country
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Reining
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 147925 in Steeplechase
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Cutting
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Team Penning
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Roping
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Saddleseat
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Hunter
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Vaulting
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Eventing
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Fine Harness
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Harness Racing
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Cross Country
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getLastTrainingDate] No training records found for horse 147925 in Steeplechase
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [GET] /api/training/status/147925 - 200
[2026-01-28 14:31:44] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1580MB
[2026-01-28 14:31:44] info: [auth:aeoevl] Starting auth for GET /horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [auth:aeoevl] Token from cookie: false
[2026-01-28 14:31:44] info: [auth:aeoevl] Token from header: true
[2026-01-28 14:31:44] info: [auth:aeoevl] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [GET] /api/horses/trainable/8436f9db-2882-4890-b638-e4792d4d39e2 - 200
[2026-01-28 14:31:44] info: [POST] /api/training/train
[2026-01-28 14:31:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1580MB
[2026-01-28 14:31:44] info: [auth:0opi8r] Starting auth for POST /training/train
[2026-01-28 14:31:44] info: [auth:0opi8r] Token from cookie: false
[2026-01-28 14:31:44] info: [auth:0opi8r] Token from header: true
[2026-01-28 14:31:44] info: [auth:0opi8r] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [POST] /api/training/train - 403
[2026-01-28 14:31:44] info: [POST] /api/training/train
[2026-01-28 14:31:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1582MB
[2026-01-28 14:31:44] info: [auth:rzy62a] Starting auth for POST /training/train
[2026-01-28 14:31:44] info: [auth:rzy62a] Token from cookie: false
[2026-01-28 14:31:44] info: [auth:rzy62a] Token from header: true
[2026-01-28 14:31:44] info: [auth:rzy62a] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] warn: [ownership] horse 99999 not found or not owned by user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [POST] /api/training/train - 404
[2026-01-28 14:31:44] info: [POST] /api/training/train
[2026-01-28 14:31:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1583MB
[2026-01-28 14:31:44] info: [auth:qsc6wb] Starting auth for POST /training/train
[2026-01-28 14:31:44] info: [auth:qsc6wb] Token from cookie: false
[2026-01-28 14:31:44] info: [auth:qsc6wb] Token from header: true
[2026-01-28 14:31:44] info: [auth:qsc6wb] Authenticated user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [ownership] Found owned horse 147925 for user 8436f9db-2882-4890-b638-e4792d4d39e2
[2026-01-28 14:31:44] info: [trainingController.trainRouteHandler] Training request for horse 147925 in InvalidDiscipline
[2026-01-28 14:31:44] info: [trainingController.trainHorse] Attempting to train horse 147925 in InvalidDiscipline
[2026-01-28 14:31:44] info: [trainingController.canTrain] Checking training eligibility for horse 147925 in InvalidDiscipline
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Getting age for horse 147925
[2026-01-28 14:31:44] info: [trainingModel.getHorseAge] Horse 147925 is 4 years old
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147925 across all disciplines
[2026-01-28 14:31:44] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147925: Wed Jan 28 2026 14:31:43 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:31:44] info: [trainingController.canTrain] Horse 147925 still in cooldown for any training (7 days remaining)
[2026-01-28 14:31:44] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:31:44] info: [POST] /api/training/train - 400
PASS tests/training-updated.test.mjs
  üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration
    Age Requirement Tests
      ‚àö should get trainable horses for authenticated user (50 ms)
      ‚àö should block training for horse under 3 years old (110 ms)
      ‚àö should allow training for horse 3+ years old (30 ms)
    Training Status Tests
      ‚àö should get training status for a specific horse and discipline (47 ms)
      ‚àö should get all training status for a horse (390 ms)
    Authenticated API Access Tests
      ‚àö should require authentication to get trainable horses (27 ms)
      ‚àö should require authentication for training requests (27 ms)
    Error Handling Tests
      ‚àö should handle invalid horse ID gracefully (30 ms)
      ‚àö should handle invalid discipline gracefully (38 ms)

[2026-01-28 14:31:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:45] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:45] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:45] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:45] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:45] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:45] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:45] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:45] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:45] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-analysis
[2026-01-28 14:31:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1631MB
[2026-01-28 14:31:45] info: [auth:2vthxf] Starting auth for GET /horses/147926/environmental-analysis
[2026-01-28 14:31:45] info: [auth:2vthxf] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:2vthxf] Token from header: true
[2026-01-28 14:31:45] info: [auth:2vthxf] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [auth:zen0q] Starting auth for GET /horses/147926/environmental-analysis
[2026-01-28 14:31:45] info: [auth:zen0q] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:zen0q] Token from header: true
[2026-01-28 14:31:45] info: [auth:zen0q] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:45] info: Environmental analysis generated for horse 147926 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-analysis - 200
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-forecast?days=30
[2026-01-28 14:31:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1639MB
[2026-01-28 14:31:45] info: [auth:iakpks] Starting auth for GET /horses/147926/environmental-forecast
[2026-01-28 14:31:45] info: [auth:iakpks] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:iakpks] Token from header: true
[2026-01-28 14:31:45] info: [auth:iakpks] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [auth:701zit] Starting auth for GET /horses/147926/environmental-forecast
[2026-01-28 14:31:45] info: [auth:701zit] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:701zit] Token from header: true
[2026-01-28 14:31:45] info: [auth:701zit] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:45] info: Environmental forecast generated for horse 147926 (30 days) by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-forecast?days=30 - 200
[2026-01-28 14:31:45] info: [POST] /api/horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1638MB
[2026-01-28 14:31:45] info: [auth:bia8or] Starting auth for POST /horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:45] info: [auth:bia8or] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:bia8or] Token from header: true
[2026-01-28 14:31:45] info: [auth:bia8or] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [auth:rxku0k] Starting auth for POST /horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:45] info: [auth:rxku0k] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:rxku0k] Token from header: true
[2026-01-28 14:31:45] info: [auth:rxku0k] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:45] info: Trait opportunity evaluated for horse 147926 (confident in early_socialization) by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [POST] /api/horses/147926/evaluate-trait-opportunity - 200
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-analysis
[2026-01-28 14:31:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1635MB
[2026-01-28 14:31:45] info: [auth:2ho7x] Starting auth for GET /horses/147926/environmental-analysis
[2026-01-28 14:31:45] info: [auth:2ho7x] Token from cookie: false
[2026-01-28 14:31:45] warn: [auth:2ho7x] Access token is required for GET /horses/147926/environmental-analysis from ::ffff:127.0.0.1
[2026-01-28 14:31:45] info: [GET] /api/horses/147926/environmental-analysis - 401
[2026-01-28 14:31:45] info: [GET] /api/horses/147928/environmental-analysis
[2026-01-28 14:31:45] warn: [MemoryMonitoring] Memory threshold exceeded: 1635MB
[2026-01-28 14:31:45] info: [auth:llt3pi] Starting auth for GET /horses/147928/environmental-analysis
[2026-01-28 14:31:45] info: [auth:llt3pi] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:llt3pi] Token from header: true
[2026-01-28 14:31:45] info: [auth:llt3pi] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [auth:vubt7] Starting auth for GET /horses/147928/environmental-analysis
[2026-01-28 14:31:45] info: [auth:vubt7] Token from cookie: false
[2026-01-28 14:31:45] info: [auth:vubt7] Token from header: true
[2026-01-28 14:31:45] info: [auth:vubt7] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] warn: [ownership] horse 147928 not found or not owned by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:45] info: [GET] /api/horses/147928/environmental-analysis - 404
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-interactions
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1642MB
[2026-01-28 14:31:46] info: [auth:ljdn8] Starting auth for GET /horses/147927/trait-interactions
[2026-01-28 14:31:46] info: [auth:ljdn8] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:ljdn8] Token from header: true
[2026-01-28 14:31:46] info: [auth:ljdn8] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:rewcor] Starting auth for GET /horses/147927/trait-interactions
[2026-01-28 14:31:46] info: [auth:rewcor] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:rewcor] Token from header: true
[2026-01-28 14:31:46] info: [auth:rewcor] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147927
[2026-01-28 14:31:46] info: Trait interactions analyzed for horse 147927 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-interactions - 200
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-matrix
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1640MB
[2026-01-28 14:31:46] info: [auth:tc0hr] Starting auth for GET /horses/147927/trait-matrix
[2026-01-28 14:31:46] info: [auth:tc0hr] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:tc0hr] Token from header: true
[2026-01-28 14:31:46] info: [auth:tc0hr] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:n6eko] Starting auth for GET /horses/147927/trait-matrix
[2026-01-28 14:31:46] info: [auth:n6eko] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:n6eko] Token from header: true
[2026-01-28 14:31:46] info: [auth:n6eko] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147927
[2026-01-28 14:31:46] info: Trait interaction matrix generated for horse 147927 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-matrix - 200
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-stability
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1638MB
[2026-01-28 14:31:46] info: [auth:wf767l] Starting auth for GET /horses/147927/trait-stability
[2026-01-28 14:31:46] info: [auth:wf767l] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:wf767l] Token from header: true
[2026-01-28 14:31:46] info: [auth:wf767l] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:mquf6p] Starting auth for GET /horses/147927/trait-stability
[2026-01-28 14:31:46] info: [auth:mquf6p] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:mquf6p] Token from header: true
[2026-01-28 14:31:46] info: [auth:mquf6p] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147927
[2026-01-28 14:31:46] info: Trait stability analyzed for horse 147927 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147927/trait-stability - 200
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-windows
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1631MB
[2026-01-28 14:31:46] info: [auth:j96lug] Starting auth for GET /horses/147926/developmental-windows
[2026-01-28 14:31:46] info: [auth:j96lug] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:j96lug] Token from header: true
[2026-01-28 14:31:46] info: [auth:j96lug] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:hn1ovm] Starting auth for GET /horses/147926/developmental-windows
[2026-01-28 14:31:46] info: [auth:hn1ovm] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:hn1ovm] Token from header: true
[2026-01-28 14:31:46] info: [auth:hn1ovm] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:46] info: Developmental windows identified for horse 147926 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-windows - 200
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-forecast?days=60
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1642MB
[2026-01-28 14:31:46] info: [auth:feu9n] Starting auth for GET /horses/147926/developmental-forecast
[2026-01-28 14:31:46] info: [auth:feu9n] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:feu9n] Token from header: true
[2026-01-28 14:31:46] info: [auth:feu9n] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:l60nt] Starting auth for GET /horses/147926/developmental-forecast
[2026-01-28 14:31:46] info: [auth:l60nt] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:l60nt] Token from header: true
[2026-01-28 14:31:46] info: [auth:l60nt] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:46] info: Developmental forecast generated for horse 147926 (60 days) by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-forecast?days=60 - 200
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/critical-period-analysis
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1639MB
[2026-01-28 14:31:46] info: [auth:03ps1i] Starting auth for GET /horses/147926/critical-period-analysis
[2026-01-28 14:31:46] info: [auth:03ps1i] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:03ps1i] Token from header: true
[2026-01-28 14:31:46] info: [auth:03ps1i] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:fikab] Starting auth for GET /horses/147926/critical-period-analysis
[2026-01-28 14:31:46] info: [auth:fikab] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:fikab] Token from header: true
[2026-01-28 14:31:46] info: [auth:fikab] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:46] info: Critical period analysis generated for horse 147926 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/critical-period-analysis - 200
[2026-01-28 14:31:46] info: [POST] /api/horses/147926/coordinate-development
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1640MB
[2026-01-28 14:31:46] info: [auth:sce61j] Starting auth for POST /horses/147926/coordinate-development
[2026-01-28 14:31:46] info: [auth:sce61j] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:sce61j] Token from header: true
[2026-01-28 14:31:46] info: [auth:sce61j] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:p7rmw9] Starting auth for POST /horses/147926/coordinate-development
[2026-01-28 14:31:46] info: [auth:p7rmw9] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:p7rmw9] Token from header: true
[2026-01-28 14:31:46] info: [auth:p7rmw9] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [ownership] Validated ownership: user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5 owns horse 147926
[2026-01-28 14:31:46] info: Development coordination generated for horse 147926 by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [POST] /api/horses/147926/coordinate-development - 200
[2026-01-28 14:31:46] info: [POST] /api/horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1636MB
[2026-01-28 14:31:46] info: [auth:sqsg1n] Starting auth for POST /horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:46] info: [auth:sqsg1n] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:sqsg1n] Token from header: true
[2026-01-28 14:31:46] info: [auth:sqsg1n] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:nzgu2e] Starting auth for POST /horses/147926/evaluate-trait-opportunity
[2026-01-28 14:31:46] info: [auth:nzgu2e] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:nzgu2e] Token from header: true
[2026-01-28 14:31:46] info: [auth:nzgu2e] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [POST] /api/horses/147926/evaluate-trait-opportunity - 400
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-forecast?days=-5
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1642MB
[2026-01-28 14:31:46] info: [auth:gl1c6] Starting auth for GET /horses/147926/developmental-forecast
[2026-01-28 14:31:46] info: [auth:gl1c6] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:gl1c6] Token from header: true
[2026-01-28 14:31:46] info: [auth:gl1c6] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:08v4ru] Starting auth for GET /horses/147926/developmental-forecast
[2026-01-28 14:31:46] info: [auth:08v4ru] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:08v4ru] Token from header: true
[2026-01-28 14:31:46] info: [auth:08v4ru] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/147926/developmental-forecast?days=-5 - 400
[2026-01-28 14:31:46] info: [GET] /api/horses/99999/environmental-analysis
[2026-01-28 14:31:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1633MB
[2026-01-28 14:31:46] info: [auth:99gm2] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 14:31:46] info: [auth:99gm2] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:99gm2] Token from header: true
[2026-01-28 14:31:46] info: [auth:99gm2] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [auth:ko51qh] Starting auth for GET /horses/99999/environmental-analysis
[2026-01-28 14:31:46] info: [auth:ko51qh] Token from cookie: false
[2026-01-28 14:31:46] info: [auth:ko51qh] Token from header: true
[2026-01-28 14:31:46] info: [auth:ko51qh] Authenticated user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] warn: [ownership] horse 99999 not found or not owned by user 4d0cc7a7-ba98-4c3e-88d4-c9c12adac1c5
[2026-01-28 14:31:46] info: [GET] /api/horses/99999/environmental-analysis - 404
PASS tests/routes/advancedEpigeneticRoutes.test.mjs
  Advanced Epigenetic API Routes
    Environmental Trigger Endpoints
      ‚àö GET /api/horses/:id/environmental-analysis should return environmental trigger analysis (192 ms)
      ‚àö GET /api/horses/:id/environmental-forecast should return environmental forecast (51 ms)
      ‚àö POST /api/horses/:id/evaluate-trait-opportunity should evaluate trait development opportunity (55 ms)
      ‚àö should require authentication for environmental endpoints (23 ms)
      ‚àö should validate horse ownership for environmental endpoints (59 ms)
    Trait Interaction Endpoints
      ‚àö GET /api/horses/:id/trait-interactions should return trait interaction analysis (48 ms)
      ‚àö GET /api/horses/:id/trait-matrix should return complete interaction matrix (48 ms)
      ‚àö GET /api/horses/:id/trait-stability should return interaction stability analysis (37 ms)
    Developmental Window Endpoints
      ‚àö GET /api/horses/:id/developmental-windows should return active and upcoming windows (44 ms)
      ‚àö GET /api/horses/:id/developmental-forecast should return developmental forecast (45 ms)
      ‚àö GET /api/horses/:id/critical-period-analysis should return critical period sensitivity (51 ms)
      ‚àö POST /api/horses/:id/coordinate-development should coordinate multi-window development (43 ms)
    Input Validation
      ‚àö should validate trait opportunity evaluation input (33 ms)
      ‚àö should validate forecast days parameter (32 ms)
      ‚àö should handle non-existent horse IDs (35 ms)

[2026-01-28 14:31:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:47] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:47] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:47] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:47] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:47] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:47] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:47] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:47] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:47] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/74087/evolve
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1697MB
[2026-01-28 14:31:47] info: [auth:t1ttgn] Starting auth for POST /personality-evolution/groom/74087/evolve
[2026-01-28 14:31:47] info: [auth:t1ttgn] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:t1ttgn] Token from header: true
[2026-01-28 14:31:47] info: [auth:t1ttgn] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:901s3x] Starting auth for POST /groom/74087/evolve
[2026-01-28 14:31:47] info: [auth:901s3x] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:901s3x] Token from header: true
[2026-01-28 14:31:47] info: [auth:901s3x] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [ownership] Validated ownership: user 63935802-d2be-4139-a7ff-df90d4d82ddb owns groom 74087
[2026-01-28 14:31:47] info: [personalityEvolutionController.evolveGroomPersonalityController] Processing groom evolution for ID: 74087
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 74087
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 74087
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/74087/evolve - 200
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/invalid/evolve
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1695MB
[2026-01-28 14:31:47] info: [auth:bqohq] Starting auth for POST /personality-evolution/groom/invalid/evolve
[2026-01-28 14:31:47] info: [auth:bqohq] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:bqohq] Token from header: true
[2026-01-28 14:31:47] info: [auth:bqohq] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:zsyf7g] Starting auth for POST /groom/invalid/evolve
[2026-01-28 14:31:47] info: [auth:zsyf7g] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:zsyf7g] Token from header: true
[2026-01-28 14:31:47] info: [auth:zsyf7g] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be a positive integer","path":"groomId","location":"params"}]
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/invalid/evolve - 400
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/74087/evolve
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1699MB
[2026-01-28 14:31:47] info: [auth:8l4vwh] Starting auth for POST /personality-evolution/groom/74087/evolve
[2026-01-28 14:31:47] info: [auth:8l4vwh] Token from cookie: false
[2026-01-28 14:31:47] warn: [auth:8l4vwh] Access token is required for POST /personality-evolution/groom/74087/evolve from ::ffff:127.0.0.1
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/groom/74087/evolve - 401
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/horse/147929/evolve
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1698MB
[2026-01-28 14:31:47] info: [auth:j95rvh] Starting auth for POST /personality-evolution/horse/147929/evolve
[2026-01-28 14:31:47] info: [auth:j95rvh] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:j95rvh] Token from header: true
[2026-01-28 14:31:47] info: [auth:j95rvh] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:gf58fb] Starting auth for POST /horse/147929/evolve
[2026-01-28 14:31:47] info: [auth:gf58fb] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:gf58fb] Token from header: true
[2026-01-28 14:31:47] info: [auth:gf58fb] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [ownership] Validated ownership: user 63935802-d2be-4139-a7ff-df90d4d82ddb owns horse 147929
[2026-01-28 14:31:47] info: [personalityEvolutionController.evolveHorseTemperamentController] Processing horse evolution for ID: 147929
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147929
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147929
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/horse/147929/evolve - 200
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/horse/invalid/evolve
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1691MB
[2026-01-28 14:31:47] info: [auth:n73itn] Starting auth for POST /personality-evolution/horse/invalid/evolve
[2026-01-28 14:31:47] info: [auth:n73itn] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:n73itn] Token from header: true
[2026-01-28 14:31:47] info: [auth:n73itn] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:tyhkpp] Starting auth for POST /horse/invalid/evolve
[2026-01-28 14:31:47] info: [auth:tyhkpp] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:tyhkpp] Token from header: true
[2026-01-28 14:31:47] info: [auth:tyhkpp] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 14:31:47] info: [POST] /api/personality-evolution/horse/invalid/evolve - 400
[2026-01-28 14:31:47] info: [GET] /api/personality-evolution/groom/74087/triggers
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1694MB
[2026-01-28 14:31:47] info: [auth:hen447] Starting auth for GET /personality-evolution/groom/74087/triggers
[2026-01-28 14:31:47] info: [auth:hen447] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:hen447] Token from header: true
[2026-01-28 14:31:47] info: [auth:hen447] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:gfnmn7] Starting auth for GET /groom/74087/triggers
[2026-01-28 14:31:47] info: [auth:gfnmn7] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:gfnmn7] Token from header: true
[2026-01-28 14:31:47] info: [auth:gfnmn7] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for groom ID: 74087
[2026-01-28 14:31:47] info: [ownership] Found owned groom 74087 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 74087
[2026-01-28 14:31:47] info: [GET] /api/personality-evolution/groom/74087/triggers - 200
[2026-01-28 14:31:47] info: [GET] /api/personality-evolution/horse/147929/triggers
[2026-01-28 14:31:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1700MB
[2026-01-28 14:31:47] info: [auth:lz3n7] Starting auth for GET /personality-evolution/horse/147929/triggers
[2026-01-28 14:31:47] info: [auth:lz3n7] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:lz3n7] Token from header: true
[2026-01-28 14:31:47] info: [auth:lz3n7] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [auth:hmbyh] Starting auth for GET /horse/147929/triggers
[2026-01-28 14:31:47] info: [auth:hmbyh] Token from cookie: false
[2026-01-28 14:31:47] info: [auth:hmbyh] Token from header: true
[2026-01-28 14:31:47] info: [auth:hmbyh] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for horse ID: 147929
[2026-01-28 14:31:47] info: [ownership] Found owned horse 147929 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:47] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for horse 147929
[2026-01-28 14:31:47] info: [GET] /api/personality-evolution/horse/147929/triggers - 200
[2026-01-28 14:31:47] info: [GET] /api/personality-evolution/invalid/74087/triggers
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1692MB
[2026-01-28 14:31:48] info: [auth:6cy4fq] Starting auth for GET /personality-evolution/invalid/74087/triggers
[2026-01-28 14:31:48] info: [auth:6cy4fq] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:6cy4fq] Token from header: true
[2026-01-28 14:31:48] info: [auth:6cy4fq] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:o7lb9] Starting auth for GET /invalid/74087/triggers
[2026-01-28 14:31:48] info: [auth:o7lb9] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:o7lb9] Token from header: true
[2026-01-28 14:31:48] info: [auth:o7lb9] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"params"}]
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/invalid/74087/triggers - 400
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/stability
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1696MB
[2026-01-28 14:31:48] info: [auth:7dagj] Starting auth for GET /personality-evolution/groom/74087/stability
[2026-01-28 14:31:48] info: [auth:7dagj] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:7dagj] Token from header: true
[2026-01-28 14:31:48] info: [auth:7dagj] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:jalu5p] Starting auth for GET /groom/74087/stability
[2026-01-28 14:31:48] info: [auth:jalu5p] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:jalu5p] Token from header: true
[2026-01-28 14:31:48] info: [auth:jalu5p] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for groom ID: 74087
[2026-01-28 14:31:48] info: [ownership] Found owned groom 74087 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for groom 74087
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/stability - 200
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/horse/147929/stability
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1702MB
[2026-01-28 14:31:48] info: [auth:nyugak] Starting auth for GET /personality-evolution/horse/147929/stability
[2026-01-28 14:31:48] info: [auth:nyugak] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:nyugak] Token from header: true
[2026-01-28 14:31:48] info: [auth:nyugak] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:ngnttc] Starting auth for GET /horse/147929/stability
[2026-01-28 14:31:48] info: [auth:ngnttc] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:ngnttc] Token from header: true
[2026-01-28 14:31:48] info: [auth:ngnttc] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for horse ID: 147929
[2026-01-28 14:31:48] info: [ownership] Found owned horse 147929 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 147929
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/horse/147929/stability - 200
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/predict
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 14:31:48] info: [auth:6dw2h] Starting auth for GET /personality-evolution/groom/74087/predict
[2026-01-28 14:31:48] info: [auth:6dw2h] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:6dw2h] Token from header: true
[2026-01-28 14:31:48] info: [auth:6dw2h] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:puu7vq] Starting auth for GET /groom/74087/predict
[2026-01-28 14:31:48] info: [auth:puu7vq] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:puu7vq] Token from header: true
[2026-01-28 14:31:48] info: [auth:puu7vq] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for groom ID: 74087 over 30 days
[2026-01-28 14:31:48] info: [ownership] Found owned groom 74087 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 74087 over 30 days
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/predict - 200
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/horse/147929/predict?timeframeDays=60
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1698MB
[2026-01-28 14:31:48] info: [auth:5nt0lp] Starting auth for GET /personality-evolution/horse/147929/predict
[2026-01-28 14:31:48] info: [auth:5nt0lp] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:5nt0lp] Token from header: true
[2026-01-28 14:31:48] info: [auth:5nt0lp] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:9r0owh] Starting auth for GET /horse/147929/predict
[2026-01-28 14:31:48] info: [auth:9r0owh] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:9r0owh] Token from header: true
[2026-01-28 14:31:48] info: [auth:9r0owh] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for horse ID: 147929 over 60 days
[2026-01-28 14:31:48] info: [ownership] Found owned horse 147929 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for horse 147929 over 60 days
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/horse/147929/predict?timeframeDays=60 - 200
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/predict?timeframeDays=500
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1704MB
[2026-01-28 14:31:48] info: [auth:1ilhdp] Starting auth for GET /personality-evolution/groom/74087/predict
[2026-01-28 14:31:48] info: [auth:1ilhdp] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:1ilhdp] Token from header: true
[2026-01-28 14:31:48] info: [auth:1ilhdp] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:igzt2a] Starting auth for GET /groom/74087/predict
[2026-01-28 14:31:48] info: [auth:igzt2a] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:igzt2a] Token from header: true
[2026-01-28 14:31:48] info: [auth:igzt2a] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"500","msg":"Timeframe must be between 1 and 365 days","path":"timeframeDays","location":"query"}]
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/predict?timeframeDays=500 - 400
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/history
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB
[2026-01-28 14:31:48] info: [auth:toekql] Starting auth for GET /personality-evolution/groom/74087/history
[2026-01-28 14:31:48] info: [auth:toekql] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:toekql] Token from header: true
[2026-01-28 14:31:48] info: [auth:toekql] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:zax5m] Starting auth for GET /groom/74087/history
[2026-01-28 14:31:48] info: [auth:zax5m] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:zax5m] Token from header: true
[2026-01-28 14:31:48] info: [auth:zax5m] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.getPersonalityEvolutionHistoryController] Getting evolution history for groom ID: 74087
[2026-01-28 14:31:48] info: [ownership] Found owned groom 74087 for user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 74087
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/groom/74087/history - 200
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1700MB
[2026-01-28 14:31:48] info: [auth:xjpzl] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 14:31:48] info: [auth:xjpzl] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:xjpzl] Token from header: true
[2026-01-28 14:31:48] info: [auth:xjpzl] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:hbm4r] Starting auth for POST /apply-effects
[2026-01-28 14:31:48] info: [auth:hbm4r] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:hbm4r] Token from header: true
[2026-01-28 14:31:48] info: [auth:hbm4r] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.applyPersonalityEvolutionEffectsController] Applying evolution effects for groom ID: 74087
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 74087
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/apply-effects - 200
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/apply-effects
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1706MB
[2026-01-28 14:31:48] info: [auth:0txqto] Starting auth for POST /personality-evolution/apply-effects
[2026-01-28 14:31:48] info: [auth:0txqto] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:0txqto] Token from header: true
[2026-01-28 14:31:48] info: [auth:0txqto] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:sx963] Starting auth for POST /apply-effects
[2026-01-28 14:31:48] info: [auth:sx963] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:sx963] Token from header: true
[2026-01-28 14:31:48] info: [auth:sx963] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"body"},{"type":"field","msg":"Invalid evolution type","path":"evolutionType","location":"body"}]
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/apply-effects - 400
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1695MB
[2026-01-28 14:31:48] info: [auth:m14m1j] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 14:31:48] info: [auth:m14m1j] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:m14m1j] Token from header: true
[2026-01-28 14:31:48] info: [auth:m14m1j] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:srivh] Starting auth for POST /batch-evolve
[2026-01-28 14:31:48] info: [auth:srivh] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:srivh] Token from header: true
[2026-01-28 14:31:48] info: [auth:srivh] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [personalityEvolutionController.batchEvolvePersonalitiesController] Processing batch evolution for 2 entities
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 74087
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 74087
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 147929
[2026-01-28 14:31:48] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 147929
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/batch-evolve - 200
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/batch-evolve
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1705MB
[2026-01-28 14:31:48] info: [auth:4ecin9] Starting auth for POST /personality-evolution/batch-evolve
[2026-01-28 14:31:48] info: [auth:4ecin9] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:4ecin9] Token from header: true
[2026-01-28 14:31:48] info: [auth:4ecin9] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:pwtlsd] Starting auth for POST /batch-evolve
[2026-01-28 14:31:48] info: [auth:pwtlsd] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:pwtlsd] Token from header: true
[2026-01-28 14:31:48] info: [auth:pwtlsd] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":[],"msg":"Entities must be an array with 1-50 items","path":"entities","location":"body"}]
[2026-01-28 14:31:48] info: [POST] /api/personality-evolution/batch-evolve - 400
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/config
[2026-01-28 14:31:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1695MB
[2026-01-28 14:31:48] info: [auth:wwqmq] Starting auth for GET /personality-evolution/config
[2026-01-28 14:31:48] info: [auth:wwqmq] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:wwqmq] Token from header: true
[2026-01-28 14:31:48] info: [auth:wwqmq] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [auth:haehbb] Starting auth for GET /config
[2026-01-28 14:31:48] info: [auth:haehbb] Token from cookie: false
[2026-01-28 14:31:48] info: [auth:haehbb] Token from header: true
[2026-01-28 14:31:48] info: [auth:haehbb] Authenticated user 63935802-d2be-4139-a7ff-df90d4d82ddb
[2026-01-28 14:31:48] info: [GET] /api/personality-evolution/config - 200
PASS tests/controllers/personalityEvolutionController.test.mjs
  Personality Evolution Controller API
    POST /api/personality-evolution/groom/:groomId/evolve
      ‚àö should evolve groom personality successfully (57 ms)
      ‚àö should return 400 for invalid groom ID (33 ms)
      ‚àö should return 401 without authentication (22 ms)
    POST /api/personality-evolution/horse/:horseId/evolve
      ‚àö should evolve horse temperament successfully (42 ms)
      ‚àö should return 400 for invalid horse ID (36 ms)
    GET /api/personality-evolution/:entityType/:entityId/triggers
      ‚àö should get evolution triggers for groom (37 ms)
      ‚àö should get evolution triggers for horse (37 ms)
      ‚àö should return 400 for invalid entity type (33 ms)
    GET /api/personality-evolution/:entityType/:entityId/stability
      ‚àö should analyze personality stability for groom (37 ms)
      ‚àö should analyze personality stability for horse (39 ms)
    GET /api/personality-evolution/:entityType/:entityId/predict
      ‚àö should predict personality evolution with default timeframe (34 ms)
      ‚àö should predict personality evolution with custom timeframe (35 ms)
      ‚àö should return 400 for invalid timeframe (33 ms)
    GET /api/personality-evolution/:entityType/:entityId/history
      ‚àö should get personality evolution history (34 ms)
    POST /api/personality-evolution/apply-effects
      ‚àö should apply personality evolution effects successfully (39 ms)
      ‚àö should return 400 for missing required fields (31 ms)
    POST /api/personality-evolution/batch-evolve
      ‚àö should process batch evolution successfully (49 ms)
      ‚àö should return 400 for empty entities array (29 ms)
    GET /api/personality-evolution/config
      ‚àö should get system configuration successfully (35 ms)

[2026-01-28 14:31:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:49] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:49] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:49] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:49] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:49] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:49] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:49] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1755MB
[2026-01-28 14:31:49] info: [auth:60b2q] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:60b2q] Token from cookie: false
[2026-01-28 14:31:49] warn: [auth:60b2q] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [PUT] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1756MB
[2026-01-28 14:31:49] info: [auth:ral94r] Starting auth for PUT /profile
[2026-01-28 14:31:49] info: [auth:ral94r] Token from cookie: false
[2026-01-28 14:31:49] warn: [auth:ral94r] Access token is required for PUT /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [PUT] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [DELETE] /api/users/account
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1753MB
[2026-01-28 14:31:49] info: [auth:h6zymo] Starting auth for DELETE /users/account
[2026-01-28 14:31:49] info: [auth:h6zymo] Token from cookie: false
[2026-01-28 14:31:49] warn: [auth:h6zymo] Access token is required for DELETE /users/account from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [DELETE] /api/users/account - 401
[2026-01-28 14:31:49] info: [GET] /api/horses
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:31:49] info: [auth:uzghso] Starting auth for GET /horses
[2026-01-28 14:31:49] info: [auth:uzghso] Token from cookie: false
[2026-01-28 14:31:49] warn: [auth:uzghso] Access token is required for GET /horses from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/horses - 401
[2026-01-28 14:31:49] info: [POST] /api/horses
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1755MB
[2026-01-28 14:31:49] info: [auth:pndtjn] Starting auth for POST /horses
[2026-01-28 14:31:49] info: [auth:pndtjn] Token from cookie: false
[2026-01-28 14:31:49] warn: [auth:pndtjn] Access token is required for POST /horses from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [POST] /api/horses - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:31:49] info: [auth:n9jxcr] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:n9jxcr] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:n9jxcr] Token from header: true
[2026-01-28 14:31:49] warn: [auth:n9jxcr] Verify failed: invalid signature
[2026-01-28 14:31:49] warn: [auth:n9jxcr] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1765MB
[2026-01-28 14:31:49] info: [auth:hxwtt] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:hxwtt] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:hxwtt] Token from header: true
[2026-01-28 14:31:49] warn: [auth:hxwtt] Verify failed: invalid algorithm
[2026-01-28 14:31:49] warn: [auth:hxwtt] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1761MB
[2026-01-28 14:31:49] info: [auth:9g23of] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:9g23of] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:9g23of] Token from header: true
[2026-01-28 14:31:49] warn: [auth:9g23of] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1756MB
[2026-01-28 14:31:49] info: [auth:ds6fqu] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:ds6fqu] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:ds6fqu] Token from header: true
[2026-01-28 14:31:49] warn: [auth:ds6fqu] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:31:49] info: [auth:r933y] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:r933y] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:r933y] Token from header: true
[2026-01-28 14:31:49] warn: [auth:r933y] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1764MB
[2026-01-28 14:31:49] info: [auth:hr076p] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:hr076p] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:hr076p] Token from header: true
[2026-01-28 14:31:49] warn: [auth:hr076p] Token expired (precheck)
[2026-01-28 14:31:49] warn: [auth:hr076p] Token expired for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:49] info: [GET] /api/auth/profile
[2026-01-28 14:31:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1760MB
[2026-01-28 14:31:49] info: [auth:euboi] Starting auth for GET /profile
[2026-01-28 14:31:49] info: [auth:euboi] Token from cookie: false
[2026-01-28 14:31:49] info: [auth:euboi] Token from header: true
[2026-01-28 14:31:49] warn: [auth:euboi] Session too old
[2026-01-28 14:31:49] warn: [auth:euboi] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:49] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1756MB
[2026-01-28 14:31:50] info: [auth:srmuzh] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:srmuzh] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:srmuzh] Token from header: true
[2026-01-28 14:31:50] info: [auth:srmuzh] Authenticated user 0b9d8468-7050-437c-b762-6bb35cd87795
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1754MB
[2026-01-28 14:31:50] info: [auth:2o4la] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:2o4la] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:2o4la] Token from header: true
[2026-01-28 14:31:50] info: [auth:2o4la] Authenticated user 1fde5719-8cb5-4372-aefd-8ffe303610bc
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1764MB
[2026-01-28 14:31:50] info: [auth:7dope] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:7dope] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:7dope] Token from header: true
[2026-01-28 14:31:50] info: [auth:7dope] Authenticated user 1fde5719-8cb5-4372-aefd-8ffe303610bc
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1760MB
[2026-01-28 14:31:50] info: [auth:hgx3l] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:hgx3l] Token from cookie: true
[2026-01-28 14:31:50] info: [auth:hgx3l] Authenticated user 94380e19-922a-4b97-9e0f-4fe32d38a4ec
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1756MB
[2026-01-28 14:31:50] info: [auth:45j3rl] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:45j3rl] Token from cookie: false
[2026-01-28 14:31:50] warn: [auth:45j3rl] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1766MB
[2026-01-28 14:31:50] info: [auth:3tsmqa] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:3tsmqa] Token from cookie: false
[2026-01-28 14:31:50] warn: [auth:3tsmqa] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1761MB
[2026-01-28 14:31:50] info: [auth:5kgr6f] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:5kgr6f] Token from cookie: false
[2026-01-28 14:31:50] warn: [auth:5kgr6f] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1757MB
[2026-01-28 14:31:50] info: [auth:fqp91d] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:fqp91d] Token from cookie: false
[2026-01-28 14:31:50] warn: [auth:fqp91d] Access token is required for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1767MB
[2026-01-28 14:31:50] info: [auth:we9v2a] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:we9v2a] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:we9v2a] Token from header: true
[2026-01-28 14:31:50] info: [auth:we9v2a] Authenticated user 1b21aaf5-3c46-4e6e-8c1a-40e71fff1346
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1762MB
[2026-01-28 14:31:50] info: [auth:xe34wn] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:xe34wn] Token from cookie: true
[2026-01-28 14:31:50] info: [auth:xe34wn] Authenticated user acc9bffc-f2b4-4833-b29a-3c72f8146082
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1758MB
[2026-01-28 14:31:50] info: [auth:trc5o] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:trc5o] Token from cookie: true
[2026-01-28 14:31:50] info: [auth:trc5o] Authenticated user acc9bffc-f2b4-4833-b29a-3c72f8146082
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1756MB
[2026-01-28 14:31:50] info: [auth:t4yvff] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:t4yvff] Token from cookie: true
[2026-01-28 14:31:50] info: [auth:t4yvff] Authenticated user 6ecd0706-1743-43b1-8cce-160775394bc7
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/users/ba686c11-20b4-4d66-be3d-9a71a607d433
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1767MB
[2026-01-28 14:31:50] info: [auth:d9zx55] Starting auth for GET /users/ba686c11-20b4-4d66-be3d-9a71a607d433
[2026-01-28 14:31:50] info: [auth:d9zx55] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:d9zx55] Token from header: true
[2026-01-28 14:31:50] info: [auth:d9zx55] Authenticated user d2dd66e6-15cf-41f9-aff7-dfe89847f3cc
[2026-01-28 14:31:50] info: [auth:e3km6] Starting auth for GET /ba686c11-20b4-4d66-be3d-9a71a607d433
[2026-01-28 14:31:50] info: [auth:e3km6] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:e3km6] Token from header: true
[2026-01-28 14:31:50] info: [auth:e3km6] Authenticated user d2dd66e6-15cf-41f9-aff7-dfe89847f3cc
[2026-01-28 14:31:50] warn: [userRoutes] Self-access violation: user d2dd66e6-15cf-41f9-aff7-dfe89847f3cc attempted to access user ba686c11-20b4-4d66-be3d-9a71a607d433
[2026-01-28 14:31:50] info: [GET] /api/users/ba686c11-20b4-4d66-be3d-9a71a607d433 - 403
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1769MB
[2026-01-28 14:31:50] info: [auth:9rncq6] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:9rncq6] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:9rncq6] Token from header: true
[2026-01-28 14:31:50] info: [auth:9rncq6] Authenticated user 1549ea53-87f5-4b03-a6b0-cbe05fda913b
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1765MB
[2026-01-28 14:31:50] info: [auth:7cnoz] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:7cnoz] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:7cnoz] Token from header: true
[2026-01-28 14:31:50] info: [auth:7cnoz] Authenticated user e0361d58-27e4-445d-a584-78b75985df35
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1761MB
[2026-01-28 14:31:50] info: [auth:0otvqz] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:0otvqz] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:0otvqz] Token from header: true
[2026-01-28 14:31:50] info: [auth:0otvqz] Authenticated user e0361d58-27e4-445d-a584-78b75985df35
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 200
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1759MB
[2026-01-28 14:31:50] info: [auth:4vo0y7] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:4vo0y7] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:4vo0y7] Token from header: true
[2026-01-28 14:31:50] warn: [auth:4vo0y7] Verify failed: invalid signature
[2026-01-28 14:31:50] warn: [auth:4vo0y7] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1770MB
[2026-01-28 14:31:50] info: [auth:tsumg] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:tsumg] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:tsumg] Token from header: true
[2026-01-28 14:31:50] warn: [auth:tsumg] Invalid or expired token for GET /profile from ::ffff:127.0.0.1
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1765MB
[2026-01-28 14:31:50] info: [auth:plc8ic] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:plc8ic] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:plc8ic] Token from header: true
[2026-01-28 14:31:50] info: [auth:plc8ic] Authenticated user 1' OR '1'='1
[2026-01-28 14:31:50] error: [authController.getProfile] Error retrieving profile: User not found
[2026-01-28 14:31:50] error: [GET] /api/auth/profile - ERROR
[2026-01-28 14:31:50] error: Error User not found
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 404
[2026-01-28 14:31:50] info: [GET] /api/auth/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1766MB
[2026-01-28 14:31:50] info: [auth:of2qzd] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:of2qzd] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:of2qzd] Token from header: true
[2026-01-28 14:31:50] info: [auth:of2qzd] Authenticated user undefined
[2026-01-28 14:31:50] error: [authController.getProfile] Error retrieving profile: Authentication error, user not found in request
[2026-01-28 14:31:50] error: [GET] /api/auth/profile - ERROR
[2026-01-28 14:31:50] error: Error Authentication error, user not found in request
[2026-01-28 14:31:50] info: [GET] /api/auth/profile - 401
[2026-01-28 14:31:50] info: [GET] /api/users/profile
[2026-01-28 14:31:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1765MB
[2026-01-28 14:31:50] info: [auth:h2ap8] Starting auth for GET /users/profile
[2026-01-28 14:31:50] info: [auth:h2ap8] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:h2ap8] Token from header: true
[2026-01-28 14:31:50] info: [auth:h2ap8] Authenticated user not-a-number
[2026-01-28 14:31:50] info: [auth:x8c1i8] Starting auth for GET /profile
[2026-01-28 14:31:50] info: [auth:x8c1i8] Token from cookie: false
[2026-01-28 14:31:50] info: [auth:x8c1i8] Token from header: true
[2026-01-28 14:31:50] info: [auth:x8c1i8] Authenticated user not-a-number
[2026-01-28 14:31:50] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"profile","msg":"User ID must be a valid UUID","path":"id","location":"params"}]
[2026-01-28 14:31:50] info: [GET] /api/users/profile - 400
PASS __tests__/integration/security/auth-bypass-attempts.test.mjs
  Authentication Bypass Attempts Integration Tests
    Direct Endpoint Access Without Authentication
      ‚àö should reject GET /api/users/profile without token (83 ms)
      ‚àö should reject PUT /api/users/profile without token (28 ms)
      ‚àö should reject DELETE /api/users/account without token (26 ms)
      ‚àö should reject GET /api/horses without token (26 ms)
      ‚àö should reject POST /api/horses without token (24 ms)
    Forged JWT Tokens
      ‚àö should reject token with wrong signature (25 ms)
      ‚àö should reject token signed with different algorithm (25 ms)
      ‚àö should reject token with modified payload (22 ms)
      ‚àö should reject token with algorithm none (21 ms)
      ‚àö should reject completely malformed token (22 ms)
    Expired Token Usage
      ‚àö should reject JWT token past expiration time (46 ms)
      ‚àö should reject token older than 7 days (CWE-613) (21 ms)
      ‚àö should accept token exactly 7 days old (26 ms)
    Token Replay Attacks
      ‚àö should allow same token for multiple valid requests (expected behavior) (49 ms)
      ‚àö should accept token from both cookie and header (cookie preferred) (22 ms)
    Authorization Header Manipulation
      ‚àö should reject token without Bearer prefix (22 ms)
      ‚àö should reject token with wrong scheme (20 ms)
      ‚àö should reject empty Authorization header (18 ms)
      ‚àö should reject Authorization header with only Bearer (19 ms)
      ‚àö should reject multiple Authorization headers (24 ms)
    Cookie Theft Simulation
      ‚àö should reject stolen cookie with different IP (if IP binding enabled) (39 ms)
      ‚àö should reject cookie with HttpOnly flag missing (client-side) (23 ms)
    Multi-User Session Conflicts
      ‚àö should prevent user A from accessing user B resources with valid token (36 ms)
      ‚àö should allow user to access their own resources only (24 ms)
      ‚àö should prevent concurrent logins from invalidating each other (stateless tokens) (41 ms)
    Edge Cases and Attack Vectors
      ‚àö should reject token with null bytes in payload (21 ms)
      ‚àö should reject extremely long token (DoS prevention) (22 ms)
      ‚àö should reject token with SQL injection in payload (28 ms)
      ‚àö should handle token with missing userId gracefully (28 ms)
      ‚àö should reject token with non-numeric userId (32 ms)

[2026-01-28 14:31:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:51] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:51] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:51] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:51] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:51] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:51] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:51] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1819MB
[2026-01-28 14:31:51] info: [auth:gccok3] Starting auth for GET /grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:51] info: [auth:gccok3] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:gccok3] Token from header: true
[2026-01-28 14:31:51] info: [auth:gccok3] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [auth:nk7a5j] Starting auth for GET /interactions/74088/147930
[2026-01-28 14:31:51] info: [auth:nk7a5j] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:nk7a5j] Token from header: true
[2026-01-28 14:31:51] info: [auth:nk7a5j] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [ownership] Validated ownership: user c03abac0-1a85-4f96-950b-0e8e8384cd73 owns groom 74088
[2026-01-28 14:31:51] info: [ownership] Validated ownership: user c03abac0-1a85-4f96-950b-0e8e8384cd73 owns horse 147930
[2026-01-28 14:31:51] info: [enhancedGroomController] Getting enhanced interactions for groom 74088 and horse 147930
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/74088/147930 - 200
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/99999/147930
[2026-01-28 14:31:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1826MB
[2026-01-28 14:31:51] info: [auth:6e2ap] Starting auth for GET /grooms/enhanced/interactions/99999/147930
[2026-01-28 14:31:51] info: [auth:6e2ap] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:6e2ap] Token from header: true
[2026-01-28 14:31:51] info: [auth:6e2ap] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [auth:qz2354] Starting auth for GET /interactions/99999/147930
[2026-01-28 14:31:51] info: [auth:qz2354] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:qz2354] Token from header: true
[2026-01-28 14:31:51] info: [auth:qz2354] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] warn: [ownership] groom 99999 not found or not owned by user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/99999/147930 - 404
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/74088/99999
[2026-01-28 14:31:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1819MB
[2026-01-28 14:31:51] info: [auth:lu6urw] Starting auth for GET /grooms/enhanced/interactions/74088/99999
[2026-01-28 14:31:51] info: [auth:lu6urw] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:lu6urw] Token from header: true
[2026-01-28 14:31:51] info: [auth:lu6urw] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [auth:ky82kh] Starting auth for GET /interactions/74088/99999
[2026-01-28 14:31:51] info: [auth:ky82kh] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:ky82kh] Token from header: true
[2026-01-28 14:31:51] info: [auth:ky82kh] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [ownership] Validated ownership: user c03abac0-1a85-4f96-950b-0e8e8384cd73 owns groom 74088
[2026-01-28 14:31:51] warn: [ownership] horse 99999 not found or not owned by user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:51] info: [GET] /api/grooms/enhanced/interactions/74088/99999 - 404
[2026-01-28 14:31:51] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:51] warn: [MemoryMonitoring] Memory threshold exceeded: 1816MB
[2026-01-28 14:31:51] info: [auth:98xo4m] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:51] info: [auth:98xo4m] Token from cookie: false
[2026-01-28 14:31:51] info: [auth:98xo4m] Token from header: true
[2026-01-28 14:31:52] info: [auth:98xo4m] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:amrjk] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:amrjk] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:amrjk] Token from header: true
[2026-01-28 14:31:52] info: [auth:amrjk] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomController] Performing enhanced daily_care interaction
[2026-01-28 14:31:52] info: [ownership] Found owned groom 74088 for user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomInteractions] Special event triggered: Learning Moment
[2026-01-28 14:31:52] info: [enhancedGroomInteractions] Calculated effects: +12 bonding, -7 stress, quality: excellent
[2026-01-28 14:31:52] info: [enhancedGroomController] Enhanced interaction completed: +12 bonding, -7 stress
[2026-01-28 14:31:52] info: [enhancedGroomController] Special event occurred: Learning Moment
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1816MB
[2026-01-28 14:31:52] info: [auth:0pghfpg] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:0pghfpg] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:0pghfpg] Token from header: true
[2026-01-28 14:31:52] info: [auth:0pghfpg] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:d9j4dk] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:d9j4dk] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:d9j4dk] Token from header: true
[2026-01-28 14:31:52] info: [auth:d9j4dk] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomController] Performing enhanced enrichment interaction
[2026-01-28 14:31:52] info: [ownership] Found owned groom 74088 for user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomInteractions] Calculated effects: +6 bonding, -6 stress, quality: good
[2026-01-28 14:31:52] info: [enhancedGroomController] Enhanced interaction completed: +6 bonding, -6 stress
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1827MB
[2026-01-28 14:31:52] info: [auth:hnpsw] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:hnpsw] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:hnpsw] Token from header: true
[2026-01-28 14:31:52] info: [auth:hnpsw] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:dzp9nd] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:dzp9nd] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:dzp9nd] Token from header: true
[2026-01-28 14:31:52] info: [auth:dzp9nd] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 14:31:52] info: [ownership] Found owned groom 74088 for user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomInteractions] Calculated effects: +18 bonding, -8 stress, quality: exceptional
[2026-01-28 14:31:52] info: [enhancedGroomController] Enhanced interaction completed: +18 bonding, -8 stress
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 201
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1823MB
[2026-01-28 14:31:52] info: [auth:8grncw] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:8grncw] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:8grncw] Token from header: true
[2026-01-28 14:31:52] info: [auth:8grncw] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:0lr1do] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:0lr1do] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:0lr1do] Token from header: true
[2026-01-28 14:31:52] info: [auth:0lr1do] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomController] Performing enhanced bonding_time interaction
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:31:52] info: [auth:u0i6m] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:u0i6m] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:u0i6m] Token from header: true
[2026-01-28 14:31:52] info: [auth:u0i6m] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:hnpxgs] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:hnpxgs] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:hnpxgs] Token from header: true
[2026-01-28 14:31:52] info: [auth:hnpxgs] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","msg":"Invalid value","path":"interactionType","location":"body"},{"type":"field","msg":"Interaction type must be a non-empty string (max 50 characters)","path":"interactionType","location":"body"},{"type":"field","msg":"Invalid value","path":"variation","location":"body"},{"type":"field","msg":"Variation must be a non-empty string (max 100 characters)","path":"variation","location":"body"},{"type":"field","msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1826MB
[2026-01-28 14:31:52] info: [auth:j4n0e] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:j4n0e] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:j4n0e] Token from header: true
[2026-01-28 14:31:52] info: [auth:j4n0e] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:xnh0ol] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:xnh0ol] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:xnh0ol] Token from header: true
[2026-01-28 14:31:52] info: [auth:xnh0ol] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [enhancedGroomController] Performing enhanced invalid_type interaction
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1820MB
[2026-01-28 14:31:52] info: [auth:nr9nz] Starting auth for POST /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:nr9nz] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:nr9nz] Token from header: true
[2026-01-28 14:31:52] info: [auth:nr9nz] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:41xyo7] Starting auth for POST /interact
[2026-01-28 14:31:52] info: [auth:41xyo7] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:41xyo7] Token from header: true
[2026-01-28 14:31:52] info: [auth:41xyo7] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","value":200,"msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]
[2026-01-28 14:31:52] info: [POST] /api/grooms/enhanced/interact - 400
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/relationship/74088/147930
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1827MB
[2026-01-28 14:31:52] info: [auth:qa9txm] Starting auth for GET /grooms/enhanced/relationship/74088/147930
[2026-01-28 14:31:52] info: [auth:qa9txm] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:qa9txm] Token from header: true
[2026-01-28 14:31:52] info: [auth:qa9txm] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:79la] Starting auth for GET /relationship/74088/147930
[2026-01-28 14:31:52] info: [auth:79la] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:79la] Token from header: true
[2026-01-28 14:31:52] info: [auth:79la] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [ownership] Validated ownership: user c03abac0-1a85-4f96-950b-0e8e8384cd73 owns groom 74088
[2026-01-28 14:31:52] info: [ownership] Validated ownership: user c03abac0-1a85-4f96-950b-0e8e8384cd73 owns horse 147930
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/relationship/74088/147930 - 200
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1824MB
[2026-01-28 14:31:52] info: [auth:4c13z] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 14:31:52] info: [auth:4c13z] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:4c13z] Token from header: true
[2026-01-28 14:31:52] info: [auth:4c13z] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [auth:ic4mlu] Starting auth for GET /interactions/types
[2026-01-28 14:31:52] info: [auth:ic4mlu] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:ic4mlu] Token from header: true
[2026-01-28 14:31:52] info: [auth:ic4mlu] Authenticated user c03abac0-1a85-4f96-950b-0e8e8384cd73
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/types - 200
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:31:52] info: [auth:tev1zc] Starting auth for GET /grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:52] info: [auth:tev1zc] Token from cookie: false
[2026-01-28 14:31:52] warn: [auth:tev1zc] Access token is required for GET /grooms/enhanced/interactions/74088/147930 from ::ffff:127.0.0.1
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/74088/147930 - 401
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interact
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:31:52] info: [auth:a5ryme] Starting auth for GET /grooms/enhanced/interact
[2026-01-28 14:31:52] info: [auth:a5ryme] Token from cookie: false
[2026-01-28 14:31:52] warn: [auth:a5ryme] Access token is required for GET /grooms/enhanced/interact from ::ffff:127.0.0.1
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interact - 401
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/relationship/74088/147930
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:31:52] info: [auth:79gxq] Starting auth for GET /grooms/enhanced/relationship/74088/147930
[2026-01-28 14:31:52] info: [auth:79gxq] Token from cookie: false
[2026-01-28 14:31:52] warn: [auth:79gxq] Access token is required for GET /grooms/enhanced/relationship/74088/147930 from ::ffff:127.0.0.1
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/relationship/74088/147930 - 401
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/types
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1818MB
[2026-01-28 14:31:52] info: [auth:numux] Starting auth for GET /grooms/enhanced/interactions/types
[2026-01-28 14:31:52] info: [auth:numux] Token from cookie: false
[2026-01-28 14:31:52] warn: [auth:numux] Access token is required for GET /grooms/enhanced/interactions/types from ::ffff:127.0.0.1
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/types - 401
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1819MB
[2026-01-28 14:31:52] info: [auth:6jr53m] Starting auth for GET /grooms/enhanced/interactions/74088/147930
[2026-01-28 14:31:52] info: [auth:6jr53m] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:6jr53m] Token from header: true
[2026-01-28 14:31:52] info: [auth:6jr53m] Authenticated user facf0cbc-edad-442e-9c51-50ca25e42652
[2026-01-28 14:31:52] info: [auth:rrm416] Starting auth for GET /interactions/74088/147930
[2026-01-28 14:31:52] info: [auth:rrm416] Token from cookie: false
[2026-01-28 14:31:52] info: [auth:rrm416] Token from header: true
[2026-01-28 14:31:52] info: [auth:rrm416] Authenticated user facf0cbc-edad-442e-9c51-50ca25e42652
[2026-01-28 14:31:52] warn: [ownership] groom 74088 not found or not owned by user facf0cbc-edad-442e-9c51-50ca25e42652
[2026-01-28 14:31:52] info: [GET] /api/grooms/enhanced/interactions/74088/147930 - 404
PASS tests/integration/enhancedGroomInteractions.test.mjs
  Enhanced Groom Interactions Integration Tests
    1. Get Available Enhanced Interactions
      ‚àö should get available interactions for groom-horse pair (113 ms)
      ‚àö should return 404 for non-existent groom (39 ms)
      ‚àö should return 404 for non-existent horse (39 ms)
    2. Perform Enhanced Interactions
      ‚àö should perform a basic enhanced interaction (62 ms)
      ‚àö should perform enrichment interaction with higher effects (63 ms)
      ‚àö should prevent multiple interactions per day (84 ms)
      ‚àö should validate required fields (32 ms)
      ‚àö should validate interaction type (37 ms)
      ‚àö should validate duration bounds (33 ms)
    3. Relationship Details
      ‚àö should get detailed relationship information (42 ms)
    4. Information Endpoints
      ‚àö should get interaction types (38 ms)
    5. Authentication and Authorization
      ‚àö should require authentication for all endpoints (87 ms)
      ‚àö should prevent access to other users' grooms and horses (42 ms)

[2026-01-28 14:31:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:53] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:53] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:53] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:53] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:53] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:53] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:53] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:53] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:53] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147933
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1880MB
[2026-01-28 14:31:53] info: [auth:q5ztne] Starting auth for POST /traits/discover/147933
[2026-01-28 14:31:53] info: [auth:q5ztne] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:q5ztne] Token from header: true
[2026-01-28 14:31:53] info: [auth:q5ztne] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147933
[2026-01-28 14:31:53] info: [traitController.discoverTraits] Triggering trait discovery for horse 147933
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147933
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 147933
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 147933: athletic, calm, resilient
[2026-01-28 14:31:53] info: [traitController.discoverTraits] Discovered 3 traits for horse 147933 (High Bond Foal)
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147933 - 200
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147934
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1877MB
[2026-01-28 14:31:53] info: [auth:93hiu] Starting auth for POST /traits/discover/147934
[2026-01-28 14:31:53] info: [auth:93hiu] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:93hiu] Token from header: true
[2026-01-28 14:31:53] info: [auth:93hiu] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147934
[2026-01-28 14:31:53] info: [traitController.discoverTraits] Triggering trait discovery for horse 147934
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147934
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 147934
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 147934
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147934 - 200
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147935
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1882MB
[2026-01-28 14:31:53] info: [auth:4lc12ab] Starting auth for POST /traits/discover/147935
[2026-01-28 14:31:53] info: [auth:4lc12ab] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:4lc12ab] Token from header: true
[2026-01-28 14:31:53] info: [auth:4lc12ab] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147935
[2026-01-28 14:31:53] info: [traitController.discoverTraits] Triggering trait discovery for horse 147935
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147935
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147935
[2026-01-28 14:31:53] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147935
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/147935 - 200
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/99999
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1886MB
[2026-01-28 14:31:53] info: [auth:amm1bp] Starting auth for POST /traits/discover/99999
[2026-01-28 14:31:53] info: [auth:amm1bp] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:amm1bp] Token from header: true
[2026-01-28 14:31:53] info: [auth:amm1bp] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/99999 - 404
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/invalid
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1886MB
[2026-01-28 14:31:53] info: [auth:qngya8] Starting auth for POST /traits/discover/invalid
[2026-01-28 14:31:53] info: [auth:qngya8] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:qngya8] Token from header: true
[2026-01-28 14:31:53] info: [auth:qngya8] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]
[2026-01-28 14:31:53] info: [POST] /api/traits/discover/invalid - 400
[2026-01-28 14:31:53] info: [GET] /api/traits/progress/147933
[2026-01-28 14:31:53] warn: [MemoryMonitoring] Memory threshold exceeded: 1887MB
[2026-01-28 14:31:53] info: [auth:8px4ye] Starting auth for GET /traits/progress/147933
[2026-01-28 14:31:53] info: [auth:8px4ye] Token from cookie: false
[2026-01-28 14:31:53] info: [auth:8px4ye] Token from header: true
[2026-01-28 14:31:53] info: [auth:8px4ye] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:53] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147933
[2026-01-28 14:31:53] info: [traitRoutes] GET /progress/147933 - Getting discovery progress
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/147933 - 200
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/99999
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1876MB
[2026-01-28 14:31:54] info: [auth:xuesbq] Starting auth for GET /traits/progress/99999
[2026-01-28 14:31:54] info: [auth:xuesbq] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:xuesbq] Token from header: true
[2026-01-28 14:31:54] info: [auth:xuesbq] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/99999 - 404
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1878MB
[2026-01-28 14:31:54] info: [auth:bgy6mr] Starting auth for POST /traits/batch-discover
[2026-01-28 14:31:54] info: [auth:bgy6mr] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:bgy6mr] Token from header: true
[2026-01-28 14:31:54] info: [auth:bgy6mr] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitController.batchDiscoverTraits] Processing batch discovery for 2 horses
[2026-01-28 14:31:54] info: [ownership] Found owned horse 147933 for user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147933
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 147933
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 147933: intelligent, bold
[2026-01-28 14:31:54] info: [ownership] Found owned horse 147934 for user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147934
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 147934
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 147934
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1877MB
[2026-01-28 14:31:54] info: [auth:c54n5q] Starting auth for POST /traits/batch-discover
[2026-01-28 14:31:54] info: [auth:c54n5q] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:c54n5q] Token from header: true
[2026-01-28 14:31:54] info: [auth:c54n5q] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitController.batchDiscoverTraits] Processing batch discovery for 3 horses
[2026-01-28 14:31:54] info: [ownership] Found owned horse 147933 for user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147933
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147933
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147933
[2026-01-28 14:31:54] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Found owned horse 147935 for user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147935
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 147935
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 147935
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1887MB
[2026-01-28 14:31:54] info: [auth:e2wm7s] Starting auth for POST /traits/batch-discover
[2026-01-28 14:31:54] info: [auth:e2wm7s] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:e2wm7s] Token from header: true
[2026-01-28 14:31:54] info: [auth:e2wm7s] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] warn: [traitRoutes] Validation errors: [{"type":"field","value":[],"msg":"horseIds must be an array with 1-10 elements","path":"horseIds","location":"body"}]
[2026-01-28 14:31:54] info: [POST] /api/traits/batch-discover - 400
[2026-01-28 14:31:54] info: [GET] /api/traits/conditions
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1887MB
[2026-01-28 14:31:54] info: [auth:vi1qfn] Starting auth for GET /traits/conditions
[2026-01-28 14:31:54] info: [auth:vi1qfn] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:vi1qfn] Token from header: true
[2026-01-28 14:31:54] info: [auth:vi1qfn] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [traitRoutes] GET /conditions - Getting discovery conditions
[2026-01-28 14:31:54] info: [GET] /api/traits/conditions - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/147933
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1878MB
[2026-01-28 14:31:54] info: [auth:fqal3c] Starting auth for POST /traits/check-conditions/147933
[2026-01-28 14:31:54] info: [auth:fqal3c] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:fqal3c] Token from header: true
[2026-01-28 14:31:54] info: [auth:fqal3c] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147933
[2026-01-28 14:31:54] info: [traitRoutes] POST /check-conditions/147933 - Checking conditions without discovery
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/147933 - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/99999
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1889MB
[2026-01-28 14:31:54] info: [auth:ubbvvm] Starting auth for POST /traits/check-conditions/99999
[2026-01-28 14:31:54] info: [auth:ubbvvm] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:ubbvvm] Token from header: true
[2026-01-28 14:31:54] info: [auth:ubbvvm] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] warn: [ownership] horse 99999 not found or not owned by user test-trait-discovery-user
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/99999 - 404
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/147936
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1890MB
[2026-01-28 14:31:54] info: [auth:xrui2u] Starting auth for GET /traits/progress/147936
[2026-01-28 14:31:54] info: [auth:xrui2u] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:xrui2u] Token from header: true
[2026-01-28 14:31:54] info: [auth:xrui2u] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147936
[2026-01-28 14:31:54] info: [traitRoutes] GET /progress/147936 - Getting discovery progress
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/147936 - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/147936
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1879MB
[2026-01-28 14:31:54] info: [auth:ef22n] Starting auth for POST /traits/check-conditions/147936
[2026-01-28 14:31:54] info: [auth:ef22n] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:ef22n] Token from header: true
[2026-01-28 14:31:54] info: [auth:ef22n] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147936
[2026-01-28 14:31:54] info: [traitRoutes] POST /check-conditions/147936 - Checking conditions without discovery
[2026-01-28 14:31:54] info: [POST] /api/traits/check-conditions/147936 - 200
[2026-01-28 14:31:54] info: [POST] /api/traits/discover/147936
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1884MB
[2026-01-28 14:31:54] info: [auth:993tog] Starting auth for POST /traits/discover/147936
[2026-01-28 14:31:54] info: [auth:993tog] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:993tog] Token from header: true
[2026-01-28 14:31:54] info: [auth:993tog] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147936
[2026-01-28 14:31:54] info: [traitController.discoverTraits] Triggering trait discovery for horse 147936
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 147936
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 147936
[2026-01-28 14:31:54] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 147936: athletic, bold, calm
[2026-01-28 14:31:54] info: [traitController.discoverTraits] Discovered 3 traits for horse 147936 (Fresh Workflow Foal)
[2026-01-28 14:31:54] info: [POST] /api/traits/discover/147936 - 200
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/147936
[2026-01-28 14:31:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1889MB
[2026-01-28 14:31:54] info: [auth:06mdpi] Starting auth for GET /traits/progress/147936
[2026-01-28 14:31:54] info: [auth:06mdpi] Token from cookie: false
[2026-01-28 14:31:54] info: [auth:06mdpi] Token from header: true
[2026-01-28 14:31:54] info: [auth:06mdpi] Authenticated user test-trait-discovery-user
[2026-01-28 14:31:54] info: [ownership] Validated ownership: user test-trait-discovery-user owns horse 147936
[2026-01-28 14:31:54] info: [traitRoutes] GET /progress/147936 - Getting discovery progress
[2026-01-28 14:31:54] info: [GET] /api/traits/progress/147936 - 200
PASS tests/traitDiscoveryIntegration.test.mjs
  Trait Discovery API Integration Tests
    POST /api/traits/discover/:foalId
      ‚àö should discover traits for foal with high bonding (69 ms)
      ‚àö should handle foal with no discoverable traits (33 ms)
      ‚àö should allow trait discovery for adult horses (36 ms)
      ‚àö should return 404 for non-existent foal (28 ms)
      ‚àö should return 400 for invalid foal ID (26 ms)
    GET /api/traits/progress/:foalId
      ‚àö should return discovery progress for foal (37 ms)
      ‚àö should return 404 for non-existent foal (28 ms)
    POST /api/traits/batch-discover
      ‚àö should process multiple foals in batch (60 ms)
      ‚àö should handle mixed valid and invalid foals (45 ms)
      ‚àö should return 400 for invalid request body (27 ms)
    GET /api/traits/conditions
      ‚àö should return all discovery conditions (32 ms)
    POST /api/traits/check-conditions/:foalId
      ‚àö should check conditions without triggering discovery (38 ms)
      ‚àö should return 404 for non-existent foal (27 ms)
    Real-time trait discovery workflow
      ‚àö should demonstrate complete trait discovery workflow (152 ms)

[2026-01-28 14:31:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:55] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:55] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:55] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:55] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:55] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:55] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:55] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:55] info: [GET] /api/grooms/74089/retirement/eligibility
[2026-01-28 14:31:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1937MB
[2026-01-28 14:31:55] info: [auth:ptedri] Starting auth for GET /grooms/74089/retirement/eligibility
[2026-01-28 14:31:55] info: [auth:ptedri] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:ptedri] Token from header: true
[2026-01-28 14:31:55] info: [auth:ptedri] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [ownership] Validated ownership: user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9 owns groom 74089
[2026-01-28 14:31:55] info: [GET] /api/grooms/74089/retirement/eligibility - 200
[2026-01-28 14:31:55] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 14:31:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1942MB
[2026-01-28 14:31:55] info: [auth:kprnzd] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 14:31:55] info: [auth:kprnzd] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:kprnzd] Token from header: true
[2026-01-28 14:31:55] info: [auth:kprnzd] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [auth:r6gihj] Starting auth for GET /retirement/statistics
[2026-01-28 14:31:55] info: [auth:r6gihj] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:r6gihj] Token from header: true
[2026-01-28 14:31:55] info: [auth:r6gihj] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [GET] /api/grooms/retirement/statistics - 200
[2026-01-28 14:31:55] info: [GET] /api/grooms/retirement/approaching
[2026-01-28 14:31:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1938MB
[2026-01-28 14:31:55] info: [auth:7b4m1c] Starting auth for GET /grooms/retirement/approaching
[2026-01-28 14:31:55] info: [auth:7b4m1c] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:7b4m1c] Token from header: true
[2026-01-28 14:31:55] info: [auth:7b4m1c] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [auth:qm461h] Starting auth for GET /retirement/approaching
[2026-01-28 14:31:55] info: [auth:qm461h] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:qm461h] Token from header: true
[2026-01-28 14:31:55] info: [auth:qm461h] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [GET] /api/grooms/retirement/approaching - 200
[2026-01-28 14:31:55] info: [GET] /api/grooms/74096/legacy/eligibility
[2026-01-28 14:31:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:31:55] info: [auth:8uv9m3] Starting auth for GET /grooms/74096/legacy/eligibility
[2026-01-28 14:31:55] info: [auth:8uv9m3] Token from cookie: false
[2026-01-28 14:31:55] info: [auth:8uv9m3] Token from header: true
[2026-01-28 14:31:55] info: [auth:8uv9m3] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:55] info: [ownership] Validated ownership: user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9 owns groom 74096
[2026-01-28 14:31:55] info: [GET] /api/grooms/74096/legacy/eligibility - 200
[2026-01-28 14:31:56] info: [GET] /api/grooms/legacy/history
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 14:31:56] info: [auth:pocgs5o] Starting auth for GET /grooms/legacy/history
[2026-01-28 14:31:56] info: [auth:pocgs5o] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:pocgs5o] Token from header: true
[2026-01-28 14:31:56] info: [auth:pocgs5o] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [auth:tyywm] Starting auth for GET /legacy/history
[2026-01-28 14:31:56] info: [auth:tyywm] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:tyywm] Token from header: true
[2026-01-28 14:31:56] info: [auth:tyywm] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [GET] /api/grooms/legacy/history - 200
[2026-01-28 14:31:56] info: [GET] /api/grooms/talents/definitions
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1944MB
[2026-01-28 14:31:56] info: [auth:lg3wde] Starting auth for GET /grooms/talents/definitions
[2026-01-28 14:31:56] info: [auth:lg3wde] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:lg3wde] Token from header: true
[2026-01-28 14:31:56] info: [auth:lg3wde] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 14:31:56] info: [GET] /api/grooms/74101/talents
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1948MB
[2026-01-28 14:31:56] info: [auth:bpaiz8] Starting auth for GET /grooms/74101/talents
[2026-01-28 14:31:56] info: [auth:bpaiz8] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:bpaiz8] Token from header: true
[2026-01-28 14:31:56] info: [auth:bpaiz8] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [ownership] Validated ownership: user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9 owns groom 74101
[2026-01-28 14:31:56] info: [GET] /api/grooms/74101/talents - 200
[2026-01-28 14:31:56] info: [POST] /api/grooms/74103/talents/validate
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1938MB
[2026-01-28 14:31:56] info: [auth:ud9gzt] Starting auth for POST /grooms/74103/talents/validate
[2026-01-28 14:31:56] info: [auth:ud9gzt] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:ud9gzt] Token from header: true
[2026-01-28 14:31:56] info: [auth:ud9gzt] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [ownership] Validated ownership: user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9 owns groom 74103
[2026-01-28 14:31:56] info: [POST] /api/grooms/74103/talents/validate - 200
[2026-01-28 14:31:56] info: [POST] /api/grooms/74105/talents/select
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1944MB
[2026-01-28 14:31:56] info: [auth:2vzuyp] Starting auth for POST /grooms/74105/talents/select
[2026-01-28 14:31:56] info: [auth:2vzuyp] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:2vzuyp] Token from header: true
[2026-01-28 14:31:56] info: [auth:2vzuyp] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [ownership] Validated ownership: user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9 owns groom 74105
[2026-01-28 14:31:56] info: Groom 74105 selected talent gentle_hands for tier1
[2026-01-28 14:31:56] info: [POST] /api/grooms/74105/talents/select - 200
[2026-01-28 14:31:56] info: [GET] /api/grooms/74107/retirement/eligibility
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:31:56] info: [auth:crdui] Starting auth for GET /grooms/74107/retirement/eligibility
[2026-01-28 14:31:56] info: [auth:crdui] Token from cookie: false
[2026-01-28 14:31:56] warn: [auth:crdui] Access token is required for GET /grooms/74107/retirement/eligibility from ::ffff:127.0.0.1
[2026-01-28 14:31:56] info: [GET] /api/grooms/74107/retirement/eligibility - 401
[2026-01-28 14:31:56] info: [GET] /api/grooms/retirement/statistics
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1946MB
[2026-01-28 14:31:56] info: [auth:hvtuty] Starting auth for GET /grooms/retirement/statistics
[2026-01-28 14:31:56] info: [auth:hvtuty] Token from cookie: false
[2026-01-28 14:31:56] warn: [auth:hvtuty] Access token is required for GET /grooms/retirement/statistics from ::ffff:127.0.0.1
[2026-01-28 14:31:56] info: [GET] /api/grooms/retirement/statistics - 401
[2026-01-28 14:31:56] info: [GET] /api/grooms/74107/talents
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1945MB
[2026-01-28 14:31:56] info: [auth:pmw2f] Starting auth for GET /grooms/74107/talents
[2026-01-28 14:31:56] info: [auth:pmw2f] Token from cookie: false
[2026-01-28 14:31:56] warn: [auth:pmw2f] Access token is required for GET /grooms/74107/talents from ::ffff:127.0.0.1
[2026-01-28 14:31:56] info: [GET] /api/grooms/74107/talents - 401
[2026-01-28 14:31:56] info: [GET] /api/grooms/talents/definitions
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1946MB
[2026-01-28 14:31:56] info: [auth:nkxj08] Starting auth for GET /grooms/talents/definitions
[2026-01-28 14:31:56] info: [auth:nkxj08] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:nkxj08] Token from header: true
[2026-01-28 14:31:56] info: [auth:nkxj08] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] info: [GET] /api/grooms/talents/definitions - 200
[2026-01-28 14:31:56] info: [GET] /api/grooms/invalid/retirement/eligibility
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1949MB
[2026-01-28 14:31:56] info: [auth:potm8] Starting auth for GET /grooms/invalid/retirement/eligibility
[2026-01-28 14:31:56] info: [auth:potm8] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:potm8] Token from header: true
[2026-01-28 14:31:56] info: [auth:potm8] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be an integer","path":"id","location":"params"}]
[2026-01-28 14:31:56] info: [GET] /api/grooms/invalid/retirement/eligibility - 400
[2026-01-28 14:31:56] info: [POST] /api/grooms/74113/talents/select
[2026-01-28 14:31:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:31:56] info: [auth:mq6u9q] Starting auth for POST /grooms/74113/talents/select
[2026-01-28 14:31:56] info: [auth:mq6u9q] Token from cookie: false
[2026-01-28 14:31:56] info: [auth:mq6u9q] Token from header: true
[2026-01-28 14:31:56] info: [auth:mq6u9q] Authenticated user c43d44ee-a2d5-45f0-a7a2-a6bc5134d7b9
[2026-01-28 14:31:56] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid_tier","msg":"Invalid tier","path":"tier","location":"body"}]
[2026-01-28 14:31:56] info: [POST] /api/grooms/74113/talents/select - 400
PASS tests/routes/groomRetirementRoutes.test.mjs
  Groom Retirement Routes
    Retirement Endpoints
      ‚àö GET /api/grooms/:id/retirement/eligibility should check eligibility (79 ms)
      ‚àö GET /api/grooms/retirement/statistics should return user stats (117 ms)
      ‚àö GET /api/grooms/retirement/approaching should return approaching retirement grooms (50 ms)
    Legacy Endpoints
      ‚àö GET /api/grooms/:id/legacy/eligibility should check legacy eligibility (48 ms)
      ‚àö GET /api/grooms/legacy/history should return legacy history (47 ms)
    Talent Endpoints
      ‚àö GET /api/grooms/talents/definitions should return talent definitions (41 ms)
      ‚àö GET /api/grooms/:id/talents should return groom talent selections (45 ms)
      ‚àö POST /api/grooms/:id/talents/validate should validate talent selection (52 ms)
      ‚àö POST /api/grooms/:id/talents/select should select talent (46 ms)
    Authentication
      ‚àö should require authentication for protected endpoints (83 ms)
      ‚àö should require authentication for talent definitions (38 ms)
    Validation
      ‚àö should validate groom ID parameter (35 ms)
      ‚àö should validate talent selection data (36 ms)

[2026-01-28 14:31:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:56] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:57] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:57] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:57] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:57] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:57] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:57] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:57] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:58] info: [groomPerformanceService] Updated metrics for groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceService] Recorded performance for groom 74115: grooming
[2026-01-28 14:31:58] info: [groomPerformanceService] Updated metrics for groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceService] Recorded performance for groom 74115: training
[2026-01-28 14:31:58] info: [groomPerformanceService] Updated metrics for groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceService] Recorded performance for groom 74115: training
[2026-01-28 14:31:58] info: [groomPerformanceService] Updated metrics for groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceService] Recorded performance for groom 74115: training
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1776MB
[2026-01-28 14:31:58] info: [auth:9m5z2] Starting auth for POST /groom-performance/record
[2026-01-28 14:31:58] info: [auth:9m5z2] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:9m5z2] Token from header: true
[2026-01-28 14:31:58] info: [auth:9m5z2] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:29tfkl] Starting auth for POST /record
[2026-01-28 14:31:58] info: [auth:29tfkl] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:29tfkl] Token from header: true
[2026-01-28 14:31:58] info: [auth:29tfkl] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [groomPerformanceController] Recording performance for groom 74115
[2026-01-28 14:31:58] info: [ownership] Found owned groom 74115 for user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [ownership] Found owned horse 147937 for user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [groomPerformanceService] Updated metrics for groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceService] Recorded performance for groom 74115: enrichment
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record - 201
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74115
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1775MB
[2026-01-28 14:31:58] info: [auth:rfamts] Starting auth for GET /groom-performance/groom/74115
[2026-01-28 14:31:58] info: [auth:rfamts] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:rfamts] Token from header: true
[2026-01-28 14:31:58] info: [auth:rfamts] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:7v4jij] Starting auth for GET /groom/74115
[2026-01-28 14:31:58] info: [auth:7v4jij] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:7v4jij] Token from header: true
[2026-01-28 14:31:58] info: [auth:7v4jij] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [ownership] Validated ownership: user ce0e38b5-e9c2-445f-b2d6-917c7c685162 owns groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceController] Getting performance for groom 74115
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74115 - 200
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/top?limit=5
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1772MB
[2026-01-28 14:31:58] info: [auth:cjc3r] Starting auth for GET /groom-performance/top
[2026-01-28 14:31:58] info: [auth:cjc3r] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:cjc3r] Token from header: true
[2026-01-28 14:31:58] info: [auth:cjc3r] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:hqpbon] Starting auth for GET /top
[2026-01-28 14:31:58] info: [auth:hqpbon] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:hqpbon] Token from header: true
[2026-01-28 14:31:58] info: [auth:hqpbon] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [groomPerformanceController] Getting top performers for user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/top?limit=5 - 200
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/config
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1780MB
[2026-01-28 14:31:58] info: [auth:ag39al] Starting auth for GET /groom-performance/config
[2026-01-28 14:31:58] info: [auth:ag39al] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:ag39al] Token from header: true
[2026-01-28 14:31:58] info: [auth:ag39al] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:cmipve] Starting auth for GET /config
[2026-01-28 14:31:58] info: [auth:cmipve] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:cmipve] Token from header: true
[2026-01-28 14:31:58] info: [auth:cmipve] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [groomPerformanceController] Getting performance config for user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/config - 200
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/analytics/74115?days=30
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1774MB
[2026-01-28 14:31:58] info: [auth:ymau7zl] Starting auth for GET /groom-performance/analytics/74115
[2026-01-28 14:31:58] info: [auth:ymau7zl] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:ymau7zl] Token from header: true
[2026-01-28 14:31:58] info: [auth:ymau7zl] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:oyr7n] Starting auth for GET /analytics/74115
[2026-01-28 14:31:58] info: [auth:oyr7n] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:oyr7n] Token from header: true
[2026-01-28 14:31:58] info: [auth:oyr7n] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [ownership] Validated ownership: user ce0e38b5-e9c2-445f-b2d6-917c7c685162 owns groom 74115
[2026-01-28 14:31:58] info: [groomPerformanceController] Getting analytics for groom 74115, last 30 days
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/analytics/74115?days=30 - 200
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74116
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1771MB
[2026-01-28 14:31:58] info: [auth:ky8xgp] Starting auth for GET /groom-performance/groom/74116
[2026-01-28 14:31:58] info: [auth:ky8xgp] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:ky8xgp] Token from header: true
[2026-01-28 14:31:58] info: [auth:ky8xgp] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:iywj0l] Starting auth for GET /groom/74116
[2026-01-28 14:31:58] info: [auth:iywj0l] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:iywj0l] Token from header: true
[2026-01-28 14:31:58] info: [auth:iywj0l] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] warn: [ownership] groom 74116 not found or not owned by user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74116 - 404
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1779MB
[2026-01-28 14:31:58] info: [auth:pcuwon] Starting auth for POST /groom-performance/record
[2026-01-28 14:31:58] info: [auth:pcuwon] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:pcuwon] Token from header: true
[2026-01-28 14:31:58] info: [auth:pcuwon] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:jpaww6] Starting auth for POST /record
[2026-01-28 14:31:58] info: [auth:jpaww6] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:jpaww6] Token from header: true
[2026-01-28 14:31:58] info: [auth:jpaww6] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] warn: [Validation] Input validation failed
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1772MB
[2026-01-28 14:31:58] info: [auth:8rzg8x] Starting auth for POST /groom-performance/record
[2026-01-28 14:31:58] info: [auth:8rzg8x] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:8rzg8x] Token from header: true
[2026-01-28 14:31:58] info: [auth:8rzg8x] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:jy5uf] Starting auth for POST /record
[2026-01-28 14:31:58] info: [auth:jy5uf] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:jy5uf] Token from header: true
[2026-01-28 14:31:58] info: [auth:jy5uf] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] warn: [Validation] Input validation failed
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1778MB
[2026-01-28 14:31:58] info: [auth:lqulka] Starting auth for POST /groom-performance/record
[2026-01-28 14:31:58] info: [auth:lqulka] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:lqulka] Token from header: true
[2026-01-28 14:31:58] info: [auth:lqulka] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] info: [auth:drkkjf] Starting auth for POST /record
[2026-01-28 14:31:58] info: [auth:drkkjf] Token from cookie: false
[2026-01-28 14:31:58] info: [auth:drkkjf] Token from header: true
[2026-01-28 14:31:58] info: [auth:drkkjf] Authenticated user ce0e38b5-e9c2-445f-b2d6-917c7c685162
[2026-01-28 14:31:58] warn: [Validation] Input validation failed
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record - 400
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1775MB
[2026-01-28 14:31:58] info: [auth:1q4l1] Starting auth for POST /groom-performance/record
[2026-01-28 14:31:58] info: [auth:1q4l1] Token from cookie: false
[2026-01-28 14:31:58] warn: [auth:1q4l1] Access token is required for POST /groom-performance/record from ::ffff:127.0.0.1
[2026-01-28 14:31:58] info: [POST] /api/groom-performance/record - 401
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74115
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1774MB
[2026-01-28 14:31:58] info: [auth:qzjkg] Starting auth for GET /groom-performance/groom/74115
[2026-01-28 14:31:58] info: [auth:qzjkg] Token from cookie: false
[2026-01-28 14:31:58] warn: [auth:qzjkg] Access token is required for GET /groom-performance/groom/74115 from ::ffff:127.0.0.1
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/groom/74115 - 401
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/top
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1775MB
[2026-01-28 14:31:58] info: [auth:lez46] Starting auth for GET /groom-performance/top
[2026-01-28 14:31:58] info: [auth:lez46] Token from cookie: false
[2026-01-28 14:31:58] warn: [auth:lez46] Access token is required for GET /groom-performance/top from ::ffff:127.0.0.1
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/top - 401
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/config
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1775MB
[2026-01-28 14:31:58] info: [auth:quwqx] Starting auth for GET /groom-performance/config
[2026-01-28 14:31:58] info: [auth:quwqx] Token from cookie: false
[2026-01-28 14:31:58] warn: [auth:quwqx] Access token is required for GET /groom-performance/config from ::ffff:127.0.0.1
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/config - 401
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/analytics/74115
[2026-01-28 14:31:58] warn: [MemoryMonitoring] Memory threshold exceeded: 1775MB
[2026-01-28 14:31:58] info: [auth:nbdape] Starting auth for GET /groom-performance/analytics/74115
[2026-01-28 14:31:58] info: [auth:nbdape] Token from cookie: false
[2026-01-28 14:31:58] warn: [auth:nbdape] Access token is required for GET /groom-performance/analytics/74115 from ::ffff:127.0.0.1
[2026-01-28 14:31:58] info: [GET] /api/groom-performance/analytics/74115 - 401
PASS tests/integration/groomPerformanceSystem.test.mjs
  Groom Performance System
    Performance Recording
      ‚àö should record groom performance successfully (11 ms)
      ‚àö should update groom metrics after recording performance (21 ms)
    API Endpoints
      ‚àö should record performance via API (72 ms)
      ‚àö should get groom performance summary (49 ms)
      ‚àö should get top performing grooms (37 ms)
      ‚àö should get performance configuration (36 ms)
      ‚àö should get groom analytics (43 ms)
      ‚àö should validate groom ownership (51 ms)
      ‚àö should validate input parameters (99 ms)
    Service Functions
      ‚àö should calculate performance summary correctly (7 ms)
      ‚àö should get top performing grooms correctly (3 ms)
    Authentication
      ‚àö should require authentication for POST /api/groom-performance/record (23 ms)
      ‚àö should require authentication for GET /api/groom-performance/groom/:groomId (22 ms)
      ‚àö should require authentication for GET /api/groom-performance/top (22 ms)
      ‚àö should require authentication for GET /api/groom-performance/config (22 ms)
      ‚àö should require authentication for GET /api/groom-performance/analytics/:groomId (22 ms)

[2026-01-28 14:31:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:31:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:31:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:31:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:31:59] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:31:59] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:31:59] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:31:59] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:31:59] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:31:59] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:31:59] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:31:59] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:31:59] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:31:59] info: [POST] /api/auth/register
[2026-01-28 14:31:59] warn: [MemoryMonitoring] Memory threshold exceeded: 1831MB
[2026-01-28 14:32:00] info: [TokenRotation] Created new token pair
[2026-01-28 14:32:00] info: [EmailVerification] Created verification token
[2026-01-28 14:32:00] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:32:00] info: [authController.register] Verification email sent
[2026-01-28 14:32:00] info: [POST] /api/auth/register - 201
[2026-01-28 14:32:00] info: [POST] /api/training/train
[2026-01-28 14:32:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1840MB
[2026-01-28 14:32:00] info: [auth:u20wll] Starting auth for POST /training/train
[2026-01-28 14:32:00] info: [auth:u20wll] Token from cookie: false
[2026-01-28 14:32:00] info: [auth:u20wll] Token from header: true
[2026-01-28 14:32:00] info: [auth:u20wll] Authenticated user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [ownership] Found owned horse 147938 for user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [trainingController.trainRouteHandler] Training request for horse 147938 in Racing
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Attempting to train horse 147938 in Racing
[2026-01-28 14:32:00] info: [trainingController.canTrain] Checking training eligibility for horse 147938 in Racing
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Getting age for horse 147938
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Horse 147938 is 2 years old
[2026-01-28 14:32:00] info: [trainingController.canTrain] Horse 147938 is too young (2 years old)
[2026-01-28 14:32:00] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:32:00] info: [POST] /api/training/train - 400
[2026-01-28 14:32:00] info: [POST] /api/training/train
[2026-01-28 14:32:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1832MB
[2026-01-28 14:32:00] info: [auth:b40tke] Starting auth for POST /training/train
[2026-01-28 14:32:00] info: [auth:b40tke] Token from cookie: false
[2026-01-28 14:32:00] info: [auth:b40tke] Token from header: true
[2026-01-28 14:32:00] info: [auth:b40tke] Authenticated user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [ownership] Found owned horse 147939 for user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [trainingController.trainRouteHandler] Training request for horse 147939 in Racing
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Attempting to train horse 147939 in Racing
[2026-01-28 14:32:00] info: [trainingController.canTrain] Checking training eligibility for horse 147939 in Racing
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Getting age for horse 147939
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Horse 147939 is 4 years old
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147939 across all disciplines
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] No training records found for horse 147939
[2026-01-28 14:32:00] info: [trainingController.canTrain] Horse 147939 is eligible to train in Racing
[2026-01-28 14:32:00] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 147939)
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Horse 147939 has traits: 
[2026-01-28 14:32:00] info: [trainingModel.logTrainingSession] Logging training session for horse 147939 in Racing
[2026-01-28 14:32:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9056
[2026-01-28 14:32:00] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 147939 by +5
[2026-01-28 14:32:00] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 147939 by +5
[2026-01-28 14:32:00] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 147939: 0 -> 5
[2026-01-28 14:32:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 147939
[2026-01-28 14:32:00] info: [xpLogModel.logXpEvent] Logging XP event: User c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing
[2026-01-28 14:32:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4481, User c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2, Amount: 5
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Awarded 5 XP to user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2 for training
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Successfully trained horse 147939 in Racing (Log ID: 9056, Score +5)
[2026-01-28 14:32:00] info: [POST] /api/training/train - 200
[2026-01-28 14:32:00] info: [POST] /api/training/train
[2026-01-28 14:32:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1835MB
[2026-01-28 14:32:00] info: [auth:tgh4gz] Starting auth for POST /training/train
[2026-01-28 14:32:00] info: [auth:tgh4gz] Token from cookie: false
[2026-01-28 14:32:00] info: [auth:tgh4gz] Token from header: true
[2026-01-28 14:32:00] info: [auth:tgh4gz] Authenticated user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [ownership] Found owned horse 147939 for user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [trainingController.trainRouteHandler] Training request for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Attempting to train horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.canTrain] Checking training eligibility for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Getting age for horse 147939
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Horse 147939 is 4 years old
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147939 across all disciplines
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147939: Wed Jan 28 2026 14:32:00 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:00] info: [trainingController.canTrain] Horse 147939 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:00] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:32:00] info: [POST] /api/training/train - 400
[2026-01-28 14:32:00] info: [POST] /api/training/train
[2026-01-28 14:32:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1842MB
[2026-01-28 14:32:00] info: [auth:nwmtgc] Starting auth for POST /training/train
[2026-01-28 14:32:00] info: [auth:nwmtgc] Token from cookie: false
[2026-01-28 14:32:00] info: [auth:nwmtgc] Token from header: true
[2026-01-28 14:32:00] info: [auth:nwmtgc] Authenticated user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [ownership] Found owned horse 147939 for user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [trainingController.trainRouteHandler] Training request for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Attempting to train horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.canTrain] Checking training eligibility for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Getting age for horse 147939
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Horse 147939 is 4 years old
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147939 across all disciplines
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147939: Wed Jan 28 2026 14:32:00 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:00] info: [trainingController.canTrain] Horse 147939 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:00] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:32:00] info: [POST] /api/training/train - 400
[2026-01-28 14:32:00] info: [POST] /api/training/train
[2026-01-28 14:32:00] warn: [MemoryMonitoring] Memory threshold exceeded: 1833MB
[2026-01-28 14:32:00] info: [auth:fbp9pu] Starting auth for POST /training/train
[2026-01-28 14:32:00] info: [auth:fbp9pu] Token from cookie: false
[2026-01-28 14:32:00] info: [auth:fbp9pu] Token from header: true
[2026-01-28 14:32:00] info: [auth:fbp9pu] Authenticated user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [ownership] Found owned horse 147939 for user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2
[2026-01-28 14:32:00] info: [trainingController.trainRouteHandler] Training request for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Attempting to train horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingController.canTrain] Checking training eligibility for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Getting age for horse 147939
[2026-01-28 14:32:00] info: [trainingModel.getHorseAge] Horse 147939 is 4 years old
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 147939 across all disciplines
[2026-01-28 14:32:00] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 147939: Tue Jan 20 2026 14:32:00 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:00] info: [trainingController.canTrain] Horse 147939 is eligible to train in Dressage
[2026-01-28 14:32:00] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 147939)
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Horse 147939 has traits: 
[2026-01-28 14:32:00] info: [trainingModel.logTrainingSession] Logging training session for horse 147939 in Dressage
[2026-01-28 14:32:00] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9057
[2026-01-28 14:32:00] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 147939 by +5
[2026-01-28 14:32:00] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 147939 by +5
[2026-01-28 14:32:00] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 147939: 0 -> 5
[2026-01-28 14:32:00] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 147939
[2026-01-28 14:32:00] info: [xpLogModel.logXpEvent] Logging XP event: User c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage
[2026-01-28 14:32:00] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4482, User c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2, Amount: 5
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Awarded 5 XP to user c73a2a77-5e0f-41e3-8e9d-ede05b14e6d2 for training
[2026-01-28 14:32:00] info: [trainingController.trainHorse] Successfully trained horse 147939 in Dressage (Log ID: 9057, Score +5)
[2026-01-28 14:32:00] info: [POST] /api/training/train - 200
PASS tests/integration/trainingProgression.integration.test.mjs
  üèãÔ∏è INTEGRATION: Complete Training Progression Workflow
    üîê STEP 1: User Setup & Authentication
      ‚àö should create user for training progression testing (537 ms)
    üê¥ STEP 2: Horse Creation & Age Validation
      ‚àö should create young horse (under training age) (10 ms)
      ‚àö should create mature horse (training eligible) (6 ms)
    üö´ STEP 3: Age Restriction Enforcement
      ‚àö should block training for young horse (under 3 years) (53 ms)
    üèãÔ∏è STEP 4: First Training Session
      ‚àö should successfully train mature horse for first time (84 ms)
    ‚è∞ STEP 5: Training Cooldown Management
      ‚àö should enforce 7-day cooldown period (41 ms)
      ‚àö should allow training after cooldown expires (using test data manipulation) (112 ms)
    üéØ STEP 6: User Progression Tracking
      ‚àö should track user XP and level progression from training (5 ms)
    üèÜ STEP 7: Competition Readiness Validation
      ‚àö should validate horse is ready for competition (5 ms)
    üéä STEP 8: End-to-End Workflow Validation
      ‚àö should validate complete training progression integrity (8 ms)
      ‚àö should validate all business rules were enforced throughout progression (6 ms)

[2026-01-28 14:32:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:01] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:01] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:01] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:01] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:01] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:01] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:01] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:02] info: [GET] /api/horses/147941
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1886MB
[2026-01-28 14:32:02] info: [auth:c7bnk] Starting auth for GET /horses/147941
[2026-01-28 14:32:02] info: [auth:c7bnk] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:c7bnk] Token from header: true
[2026-01-28 14:32:02] info: [auth:c7bnk] Authenticated user f8201e6a-68c6-46ba-a0f5-57e4da70fc14
[2026-01-28 14:32:02] warn: [ownership] horse 147941 not found or not owned by user f8201e6a-68c6-46ba-a0f5-57e4da70fc14
[2026-01-28 14:32:02] info: [GET] /api/horses/147941 - 404
[2026-01-28 14:32:02] info: [GET] /api/horses/147942
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1891MB
[2026-01-28 14:32:02] info: [auth:7bnww6] Starting auth for GET /horses/147942
[2026-01-28 14:32:02] info: [auth:7bnww6] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:7bnww6] Token from header: true
[2026-01-28 14:32:02] info: [auth:7bnww6] Authenticated user dce8d9b4-1162-48de-a71d-b1a12b4b48b7
[2026-01-28 14:32:02] info: [ownership] Validated ownership: user dce8d9b4-1162-48de-a71d-b1a12b4b48b7 owns horse 147942
[2026-01-28 14:32:02] info: [GET] /api/horses/147942 - 200
[2026-01-28 14:32:02] info: [PUT] /api/horses/147945
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1898MB
[2026-01-28 14:32:02] info: [auth:awj3ii] Starting auth for PUT /horses/147945
[2026-01-28 14:32:02] info: [auth:awj3ii] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:awj3ii] Token from header: true
[2026-01-28 14:32:02] info: [auth:awj3ii] Authenticated user ee7bf141-79c5-4b37-9d8f-03bd83387998
[2026-01-28 14:32:02] warn: [ownership] horse 147945 not found or not owned by user ee7bf141-79c5-4b37-9d8f-03bd83387998
[2026-01-28 14:32:02] info: [PUT] /api/horses/147945 - 404
[2026-01-28 14:32:02] info: [PUT] /api/horses/147946
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1891MB
[2026-01-28 14:32:02] info: [auth:nt9mu] Starting auth for PUT /horses/147946
[2026-01-28 14:32:02] info: [auth:nt9mu] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:nt9mu] Token from header: true
[2026-01-28 14:32:02] info: [auth:nt9mu] Authenticated user a6eafbf7-b9f7-4af3-b27c-202c7c4ddbef
[2026-01-28 14:32:02] info: [ownership] Validated ownership: user a6eafbf7-b9f7-4af3-b27c-202c7c4ddbef owns horse 147946
[2026-01-28 14:32:02] info: [horseRoutes] User a6eafbf7-b9f7-4af3-b27c-202c7c4ddbef updated horse: Updated Horse Name (ID: 147946)
[2026-01-28 14:32:02] info: [PUT] /api/horses/147946 - 200
[2026-01-28 14:32:02] info: [DELETE] /api/horses/147949
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1899MB
[2026-01-28 14:32:02] info: [auth:tumb5k] Starting auth for DELETE /horses/147949
[2026-01-28 14:32:02] info: [auth:tumb5k] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:tumb5k] Token from header: true
[2026-01-28 14:32:02] info: [auth:tumb5k] Authenticated user 3ccf340a-6e77-4971-9842-0157dc8e229a
[2026-01-28 14:32:02] warn: [ownership] horse 147949 not found or not owned by user 3ccf340a-6e77-4971-9842-0157dc8e229a
[2026-01-28 14:32:02] info: [DELETE] /api/horses/147949 - 404
[2026-01-28 14:32:02] info: [DELETE] /api/horses/147948
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1899MB
[2026-01-28 14:32:02] info: [auth:qrlnjs] Starting auth for DELETE /horses/147948
[2026-01-28 14:32:02] info: [auth:qrlnjs] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:qrlnjs] Token from header: true
[2026-01-28 14:32:02] info: [auth:qrlnjs] Authenticated user 3ccf340a-6e77-4971-9842-0157dc8e229a
[2026-01-28 14:32:02] info: [ownership] Validated ownership: user 3ccf340a-6e77-4971-9842-0157dc8e229a owns horse 147948
[2026-01-28 14:32:02] info: [horseRoutes] User 3ccf340a-6e77-4971-9842-0157dc8e229a deleted horse ID: 147948
[2026-01-28 14:32:02] info: [DELETE] /api/horses/147948 - 200
[2026-01-28 14:32:02] info: [GET] /api/grooms/74128/profile
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1891MB
[2026-01-28 14:32:02] info: [auth:l7ckdu] Starting auth for GET /grooms/74128/profile
[2026-01-28 14:32:02] info: [auth:l7ckdu] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:l7ckdu] Token from header: true
[2026-01-28 14:32:02] info: [auth:l7ckdu] Authenticated user 0a8a8548-2319-4b15-afd7-bb3da1c7fa61
[2026-01-28 14:32:02] warn: [ownership] groom 74128 not found or not owned by user 0a8a8548-2319-4b15-afd7-bb3da1c7fa61
[2026-01-28 14:32:02] info: [GET] /api/grooms/74128/profile - 404
[2026-01-28 14:32:02] info: [GET] /api/grooms/74129/profile
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1897MB
[2026-01-28 14:32:02] info: [auth:sc5xnq] Starting auth for GET /grooms/74129/profile
[2026-01-28 14:32:02] info: [auth:sc5xnq] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:sc5xnq] Token from header: true
[2026-01-28 14:32:02] info: [auth:sc5xnq] Authenticated user fe340325-87e6-46f2-b14a-3d1c172d3c57
[2026-01-28 14:32:02] info: [ownership] Validated ownership: user fe340325-87e6-46f2-b14a-3d1c172d3c57 owns groom 74129
[2026-01-28 14:32:02] info: [groomController.getGroomProfile] Retrieved profile for groom 74129
[2026-01-28 14:32:02] info: [GET] /api/grooms/74129/profile - 200
[2026-01-28 14:32:02] info: [GET] /api/horses/abc
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1901MB
[2026-01-28 14:32:02] info: [auth:u055re] Starting auth for GET /horses/abc
[2026-01-28 14:32:02] info: [auth:u055re] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:u055re] Token from header: true
[2026-01-28 14:32:02] info: [auth:u055re] Authenticated user 25971d00-d031-48ae-9c96-494b0f96c5d6
[2026-01-28 14:32:02] info: [GET] /api/horses/abc - 400
[2026-01-28 14:32:02] info: [GET] /api/horses/999999
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1892MB
[2026-01-28 14:32:02] info: [auth:zoskp] Starting auth for GET /horses/999999
[2026-01-28 14:32:02] info: [auth:zoskp] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:zoskp] Token from header: true
[2026-01-28 14:32:02] info: [auth:zoskp] Authenticated user f7c0b2b8-a33f-40b4-9c56-264dbaca6cd0
[2026-01-28 14:32:02] warn: [ownership] horse 999999 not found or not owned by user f7c0b2b8-a33f-40b4-9c56-264dbaca6cd0
[2026-01-28 14:32:02] info: [GET] /api/horses/999999 - 404
[2026-01-28 14:32:02] info: [GET] /api/horses/147957
[2026-01-28 14:32:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1894MB
[2026-01-28 14:32:02] info: [auth:kz29lg] Starting auth for GET /horses/147957
[2026-01-28 14:32:02] info: [auth:kz29lg] Token from cookie: false
[2026-01-28 14:32:02] info: [auth:kz29lg] Token from header: true
[2026-01-28 14:32:02] info: [auth:kz29lg] Authenticated user f7c0b2b8-a33f-40b4-9c56-264dbaca6cd0
[2026-01-28 14:32:02] warn: [ownership] horse 147957 not found or not owned by user f7c0b2b8-a33f-40b4-9c56-264dbaca6cd0
[2026-01-28 14:32:02] info: [GET] /api/horses/147957 - 404
PASS __tests__/integration/security/ownership-violations.test.mjs
  Ownership Violation Attempts Integration Tests
    Cross-user horse access
      ‚àö denies access to an unowned horse (155 ms)
      ‚àö allows owners to fetch their own horse (53 ms)
      ‚àö blocks cross-user updates and preserves data integrity (59 ms)
      ‚àö allows owners to update their horse with a valid payload (60 ms)
      ‚àö blocks cross-user deletes and allows owner deletes (79 ms)
    Groom ownership
      ‚àö denies access to an unowned groom profile (50 ms)
      ‚àö allows owners to view their groom profile (55 ms)
    Parameter validation and enumeration safety
      ‚àö rejects invalid horse identifiers (46 ms)
      ‚àö returns the same 404 for missing and unowned horses (70 ms)

[2026-01-28 14:32:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:03] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:03] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:03] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:03] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:03] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:03] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:03] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:03] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:03] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:03] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:32:03] info: [auth:zsvln] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:03] info: [auth:zsvln] Token from cookie: false
[2026-01-28 14:32:03] warn: [auth:zsvln] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:03] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:03] info: [GET] /api/competition/show/1/results
[2026-01-28 14:32:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1950MB
[2026-01-28 14:32:03] info: [auth:s163mv] Starting auth for GET /competition/show/1/results
[2026-01-28 14:32:03] info: [auth:s163mv] Token from cookie: false
[2026-01-28 14:32:03] warn: [auth:s163mv] Access token is required for GET /competition/show/1/results from ::ffff:127.0.0.1
[2026-01-28 14:32:03] info: [GET] /api/competition/show/1/results - 401
[2026-01-28 14:32:03] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:32:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1950MB
[2026-01-28 14:32:03] info: [auth:09cdbd] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:32:03] info: [auth:09cdbd] Token from cookie: false
[2026-01-28 14:32:03] info: [auth:09cdbd] Token from header: true
[2026-01-28 14:32:03] info: [auth:09cdbd] Authenticated user test-user-uuid-123
[2026-01-28 14:32:03] info: [auth:e9tmt] Starting auth for GET /horse/1/results
[2026-01-28 14:32:03] info: [auth:e9tmt] Token from cookie: false
[2026-01-28 14:32:03] info: [auth:e9tmt] Token from header: true
[2026-01-28 14:32:03] info: [auth:e9tmt] Authenticated user test-user-uuid-123
[2026-01-28 14:32:03] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 14:32:03] info: [GET] /api/competition/horse/1/results - 404
[2026-01-28 14:32:03] info: [GET] /api/competition/eligibility/1/showjumping
[2026-01-28 14:32:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1952MB
[2026-01-28 14:32:03] info: [auth:sj273u] Starting auth for GET /competition/eligibility/1/showjumping
[2026-01-28 14:32:03] info: [auth:sj273u] Token from cookie: false
[2026-01-28 14:32:03] info: [auth:sj273u] Token from header: true
[2026-01-28 14:32:04] info: [auth:sj273u] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [auth:3wrhod] Starting auth for GET /eligibility/1/showjumping
[2026-01-28 14:32:04] info: [auth:3wrhod] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:3wrhod] Token from header: true
[2026-01-28 14:32:04] info: [auth:3wrhod] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] warn: [ownership] horse 1 not found or not owned by user test-user-uuid-123
[2026-01-28 14:32:04] info: [GET] /api/competition/eligibility/1/showjumping - 404
[2026-01-28 14:32:04] info: [POST] /api/competition/enter-show
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1956MB
[2026-01-28 14:32:04] info: [auth:z4axg] Starting auth for POST /competition/enter-show
[2026-01-28 14:32:04] info: [auth:z4axg] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:z4axg] Token from header: true
[2026-01-28 14:32:04] info: [auth:z4axg] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/enter-show - 403
[2026-01-28 14:32:04] info: [POST] /api/competition/enter
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1958MB
[2026-01-28 14:32:04] info: [auth:1tm3ec] Starting auth for POST /competition/enter
[2026-01-28 14:32:04] info: [auth:1tm3ec] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:1tm3ec] Token from header: true
[2026-01-28 14:32:04] info: [auth:1tm3ec] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/enter - 403
[2026-01-28 14:32:04] info: [POST] /api/competition/execute
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1960MB
[2026-01-28 14:32:04] info: [auth:ouw65] Starting auth for POST /competition/execute
[2026-01-28 14:32:04] info: [auth:ouw65] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:ouw65] Token from header: true
[2026-01-28 14:32:04] info: [auth:ouw65] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/execute - 403
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1947MB
[2026-01-28 14:32:04] info: [auth:cxu69a] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:04] info: [auth:cxu69a] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:cxu69a] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:04] info: [POST] /api/competition/enter
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1948MB
[2026-01-28 14:32:04] info: [auth:3j5xnm] Starting auth for POST /competition/enter
[2026-01-28 14:32:04] info: [auth:3j5xnm] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:3j5xnm] Token from header: true
[2026-01-28 14:32:04] info: [auth:3j5xnm] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/enter - 403
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:cfez4b] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:04] info: [auth:cfez4b] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:cfez4b] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:04] info: [GET] /api/competition/horse/1/results
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:6udgd] Starting auth for GET /competition/horse/1/results
[2026-01-28 14:32:04] info: [auth:6udgd] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:6udgd] Access token is required for GET /competition/horse/1/results from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/horse/1/results - 401
[2026-01-28 14:32:04] info: [POST] /api/competition/enter
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:3anao] Starting auth for POST /competition/enter
[2026-01-28 14:32:04] info: [auth:3anao] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:3anao] Access token is required for POST /competition/enter from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [POST] /api/competition/enter - 401
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:8f8gbc] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:04] info: [auth:8f8gbc] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:8f8gbc] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:mb0ibf] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:04] info: [auth:mb0ibf] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:mb0ibf] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1951MB
[2026-01-28 14:32:04] info: [auth:8qyvq5] Starting auth for GET /competition/disciplines
[2026-01-28 14:32:04] info: [auth:8qyvq5] Token from cookie: false
[2026-01-28 14:32:04] warn: [auth:8qyvq5] Access token is required for GET /competition/disciplines from ::ffff:127.0.0.1
[2026-01-28 14:32:04] info: [GET] /api/competition/disciplines - 401
[2026-01-28 14:32:04] info: [GET] /api/competition/horse/999/results
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1950MB
[2026-01-28 14:32:04] info: [auth:v251w] Starting auth for GET /competition/horse/999/results
[2026-01-28 14:32:04] info: [auth:v251w] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:v251w] Token from header: true
[2026-01-28 14:32:04] info: [auth:v251w] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [auth:gnzq8q] Starting auth for GET /horse/999/results
[2026-01-28 14:32:04] info: [auth:gnzq8q] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:gnzq8q] Token from header: true
[2026-01-28 14:32:04] info: [auth:gnzq8q] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] warn: [ownership] horse 999 not found or not owned by user test-user-uuid-123
[2026-01-28 14:32:04] info: [GET] /api/competition/horse/999/results - 404
[2026-01-28 14:32:04] info: [POST] /api/competition/execute
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1954MB
[2026-01-28 14:32:04] info: [auth:gk2ncp] Starting auth for POST /competition/execute
[2026-01-28 14:32:04] info: [auth:gk2ncp] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:gk2ncp] Token from header: true
[2026-01-28 14:32:04] info: [auth:gk2ncp] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/execute - 403
[2026-01-28 14:32:04] info: [POST] /api/competition/enter
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1956MB
[2026-01-28 14:32:04] info: [auth:gju22k] Starting auth for POST /competition/enter
[2026-01-28 14:32:04] info: [auth:gju22k] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:gju22k] Token from header: true
[2026-01-28 14:32:04] info: [auth:gju22k] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/enter - 403
[2026-01-28 14:32:04] info: [POST] /api/competition/enter
[2026-01-28 14:32:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1957MB
[2026-01-28 14:32:04] info: [auth:701a78] Starting auth for POST /competition/enter
[2026-01-28 14:32:04] info: [auth:701a78] Token from cookie: false
[2026-01-28 14:32:04] info: [auth:701a78] Token from header: true
[2026-01-28 14:32:04] info: [auth:701a78] Authenticated user test-user-uuid-123
[2026-01-28 14:32:04] info: [POST] /api/competition/enter - 403
PASS __tests__/integration/competition-rate-limiting.test.mjs
  Competition Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      ‚àö should apply queryRateLimiter to GET /api/competition/disciplines (38 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/show/:showId/results (22 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/horse/:horseId/results (83 ms)
      ‚àö should apply queryRateLimiter to GET /api/competition/eligibility/:horseId/:discipline (31 ms)
    Mutation Rate Limiting (POST endpoints)
      ‚àö should apply mutationRateLimiter to POST /api/competition/enter-show (35 ms)
      ‚àö should apply mutationRateLimiter to POST /api/competition/enter (25 ms)
      ‚àö should apply mutationRateLimiter to POST /api/competition/execute (30 ms)
    Rate Limit Enforcement
      ‚àö should enforce different limits for query vs mutation operations (51 ms)
    Public vs Authenticated Endpoints
      ‚àö should rate limit public endpoints without requiring auth (24 ms)
      ‚àö should require auth for horse-specific endpoints (24 ms)
      ‚àö should require auth for competition entry endpoints (23 ms)
    Rate Limit Headers
      ‚àö should include all standard rate limit headers (22 ms)
      ‚àö should decrement remaining count with each request (41 ms)
    Security Integration
      ‚àö should validate horse ownership before allowing results access (31 ms)
      ‚àö should rate limit competition execution for show hosts only (25 ms)
    Input Validation with Rate Limiting
      ‚àö should rate limit invalid competition entry requests (26 ms)
      ‚àö should rate limit requests with missing required fields (26 ms)

[2026-01-28 14:32:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:04] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:04] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:04] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:05] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:05] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:32:05] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/competition.test.mjs
  üèÜ UNIT: Competition Trait Match Fairness - Statistical Validation
    ‚àö should demonstrate trait match fairness for Show Jumping competition (165 ms)
    ‚àö should demonstrate trait match fairness for Racing competition (151 ms)
    ‚àö should demonstrate trait match fairness for Dressage competition (151 ms)
    ‚àö should demonstrate trait match fairness for Cross Country competition (155 ms)
    ‚àö should verify trait advantage is consistent across multiple test runs (275 ms)

[2026-01-28 14:32:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:05] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:06] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:06] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:06] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:06] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:06] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:06] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:06] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:06] info: [GET] /api/flags/health
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2028MB
[2026-01-28 14:32:06] info: [auth:jwp2s9n] Starting auth for GET /flags/health
[2026-01-28 14:32:06] info: [auth:jwp2s9n] Token from cookie: false
[2026-01-28 14:32:06] info: [auth:jwp2s9n] Token from header: true
[2026-01-28 14:32:06] info: [auth:jwp2s9n] Authenticated user test-user-epigenetic-1769628726755
[2026-01-28 14:32:06] info: [GET] /api/flags/health - 200
[2026-01-28 14:32:06] info: [POST] /api/flags/evaluate
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2034MB
[2026-01-28 14:32:06] info: [auth:khxjo6] Starting auth for POST /flags/evaluate
[2026-01-28 14:32:06] info: [auth:khxjo6] Token from cookie: false
[2026-01-28 14:32:06] warn: [auth:khxjo6] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 14:32:06] info: [POST] /api/flags/evaluate - 401
[2026-01-28 14:32:06] info: [GET] /api/flags/horses/123/flags
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2034MB
[2026-01-28 14:32:06] info: [auth:fqi7c8] Starting auth for GET /flags/horses/123/flags
[2026-01-28 14:32:06] info: [auth:fqi7c8] Token from cookie: false
[2026-01-28 14:32:06] warn: [auth:fqi7c8] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 14:32:06] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 14:32:06] info: [GET] /api/flags/definitions
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2034MB
[2026-01-28 14:32:06] info: [auth:x74npn] Starting auth for GET /flags/definitions
[2026-01-28 14:32:06] info: [auth:x74npn] Token from cookie: false
[2026-01-28 14:32:06] warn: [auth:x74npn] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 14:32:06] info: [GET] /api/flags/definitions - 401
[2026-01-28 14:32:06] info: [POST] /api/flags/batch-evaluate
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2035MB
[2026-01-28 14:32:06] info: [auth:9inokm] Starting auth for POST /flags/batch-evaluate
[2026-01-28 14:32:06] info: [auth:9inokm] Token from cookie: false
[2026-01-28 14:32:06] warn: [auth:9inokm] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 14:32:06] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 14:32:06] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 14:32:06] warn: [MemoryMonitoring] Memory threshold exceeded: 2035MB
[2026-01-28 14:32:06] info: [auth:dia1ma] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 14:32:06] info: [auth:dia1ma] Token from cookie: false
[2026-01-28 14:32:06] warn: [auth:dia1ma] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 14:32:06] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 14:32:07] info: [POST] /api/flags/evaluate
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2035MB
[2026-01-28 14:32:07] info: [auth:2jtuuq] Starting auth for POST /flags/evaluate
[2026-01-28 14:32:07] info: [auth:2jtuuq] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:2jtuuq] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [POST] /api/flags/evaluate - 401
[2026-01-28 14:32:07] info: [GET] /api/flags/horses/123/flags
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2035MB
[2026-01-28 14:32:07] info: [auth:6gl3lg] Starting auth for GET /flags/horses/123/flags
[2026-01-28 14:32:07] info: [auth:6gl3lg] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:6gl3lg] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [GET] /api/flags/horses/123/flags - 401
[2026-01-28 14:32:07] info: [GET] /api/flags/definitions
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2033MB
[2026-01-28 14:32:07] info: [auth:b4k06q] Starting auth for GET /flags/definitions
[2026-01-28 14:32:07] info: [auth:b4k06q] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:b4k06q] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [GET] /api/flags/definitions - 401
[2026-01-28 14:32:07] info: [POST] /api/flags/batch-evaluate
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2032MB
[2026-01-28 14:32:07] info: [auth:572t0s] Starting auth for POST /flags/batch-evaluate
[2026-01-28 14:32:07] info: [auth:572t0s] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:572t0s] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [POST] /api/flags/batch-evaluate - 401
[2026-01-28 14:32:07] info: [GET] /api/flags/horses/123/care-patterns
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2032MB
[2026-01-28 14:32:07] info: [auth:3hczkd] Starting auth for GET /flags/horses/123/care-patterns
[2026-01-28 14:32:07] info: [auth:3hczkd] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:3hczkd] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [GET] /api/flags/horses/123/care-patterns - 401
[2026-01-28 14:32:07] info: [GET] /api/flags/health
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2030MB
[2026-01-28 14:32:07] info: [auth:4bxi1v] Starting auth for GET /flags/health
[2026-01-28 14:32:07] info: [auth:4bxi1v] Token from cookie: false
[2026-01-28 14:32:07] warn: [auth:4bxi1v] Access token is required for GET /flags/health from ::ffff:127.0.0.1
[2026-01-28 14:32:07] info: [GET] /api/flags/health - 401
[2026-01-28 14:32:07] info: [GET] /api/flags/health
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2032MB
[2026-01-28 14:32:07] info: [auth:kweov] Starting auth for GET /flags/health
[2026-01-28 14:32:07] info: [auth:kweov] Token from cookie: false
[2026-01-28 14:32:07] info: [auth:kweov] Token from header: true
[2026-01-28 14:32:07] info: [auth:kweov] Authenticated user test-user-epigenetic-1769628727147
[2026-01-28 14:32:07] info: [GET] /api/flags/health - 200
[2026-01-28 14:32:07] info: [GET] /api/flags/health
[2026-01-28 14:32:07] warn: [MemoryMonitoring] Memory threshold exceeded: 2034MB
[2026-01-28 14:32:07] info: [auth:32ofoh] Starting auth for GET /flags/health
[2026-01-28 14:32:07] info: [auth:32ofoh] Token from cookie: false
[2026-01-28 14:32:07] info: [auth:32ofoh] Token from header: true
[2026-01-28 14:32:07] info: [auth:32ofoh] Authenticated user test-user-epigenetic-1769628727176
[2026-01-28 14:32:07] info: [GET] /api/flags/health - 200
PASS tests/integration/epigeneticFlagRoutes.test.mjs
  Epigenetic Flag Routes Integration Tests
    Health Check
      ‚àö should return system health status (101 ms)
    Authentication Requirements
      ‚àö should require authentication for flag evaluation (37 ms)
      ‚àö should require authentication for horse flags (29 ms)
      ‚àö should require authentication for flag definitions (29 ms)
      ‚àö should require authentication for batch evaluation (31 ms)
      ‚àö should require authentication for care patterns (27 ms)
    Route Structure
      ‚àö should have all required endpoints mounted (137 ms)
    System Integration
      ‚àö should have epigenetic flag routes mounted in main app (29 ms)
      ‚àö should handle CORS and security headers (29 ms)

[2026-01-28 14:32:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:08] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:08] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:08] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:08] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:08] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:08] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:08] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:08] info: [GET] /api/horses
[2026-01-28 14:32:08] warn: [MemoryMonitoring] Memory threshold exceeded: 2087MB
[2026-01-28 14:32:08] info: [auth:rdsl9h] Starting auth for GET /horses
[2026-01-28 14:32:08] info: [auth:rdsl9h] Token from cookie: false
[2026-01-28 14:32:08] info: [auth:rdsl9h] Token from header: true
[2026-01-28 14:32:08] info: [auth:rdsl9h] Authenticated user test-user-uuid-123
[2026-01-28 14:32:08] info: [GET] /api/horses - 200
PASS __tests__/integration/horse-rate-limiting.test.mjs
  Horse routes rate limiting
    ‚àö should apply query rate limiter to GET /api/horses (96 ms)

[2026-01-28 14:32:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:10] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:10] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:10] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:10] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:10] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:10] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:10] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/players/level?limit=10&offset=0
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1935MB
[2026-01-28 14:32:10] info: [auth:seqjb] Starting auth for GET /leaderboards/players/level
[2026-01-28 14:32:10] info: [auth:seqjb] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:seqjb] Token from header: true
[2026-01-28 14:32:10] info: [auth:seqjb] Authenticated user e7e770e9-9c9c-4d8a-a78a-06f7e5bb864b
[2026-01-28 14:32:10] info: [auth:svbr6t] Starting auth for GET /players/level
[2026-01-28 14:32:10] info: [auth:svbr6t] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:svbr6t] Token from header: true
[2026-01-28 14:32:10] info: [auth:svbr6t] Authenticated user e7e770e9-9c9c-4d8a-a78a-06f7e5bb864b
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/players/level?limit=10&offset=0 - 200
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/players/level
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1936MB
[2026-01-28 14:32:10] info: [auth:dnpaea] Starting auth for GET /leaderboards/players/level
[2026-01-28 14:32:10] info: [auth:dnpaea] Token from cookie: false
[2026-01-28 14:32:10] warn: [auth:dnpaea] Access token is required for GET /leaderboards/players/level from ::ffff:127.0.0.1
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/players/level - 401
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/horses/earnings
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1941MB
[2026-01-28 14:32:10] info: [auth:lgtrbe] Starting auth for GET /leaderboards/horses/earnings
[2026-01-28 14:32:10] info: [auth:lgtrbe] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:lgtrbe] Token from header: true
[2026-01-28 14:32:10] info: [auth:lgtrbe] Authenticated user d9eecea2-94b7-488a-85ac-450b147aa9a9
[2026-01-28 14:32:10] info: [auth:fqypa7] Starting auth for GET /horses/earnings
[2026-01-28 14:32:10] info: [auth:fqypa7] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:fqypa7] Token from header: true
[2026-01-28 14:32:10] info: [auth:fqypa7] Authenticated user d9eecea2-94b7-488a-85ac-450b147aa9a9
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/horses/earnings - 200
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/recent-winners
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1941MB
[2026-01-28 14:32:10] info: [auth:3olhk9] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 14:32:10] info: [auth:3olhk9] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:3olhk9] Token from header: true
[2026-01-28 14:32:10] info: [auth:3olhk9] Authenticated user 820f3079-ee6e-4289-83fd-92c1d2c942de
[2026-01-28 14:32:10] info: [auth:rnz44s] Starting auth for GET /recent-winners
[2026-01-28 14:32:10] info: [auth:rnz44s] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:rnz44s] Token from header: true
[2026-01-28 14:32:10] info: [auth:rnz44s] Authenticated user 820f3079-ee6e-4289-83fd-92c1d2c942de
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/recent-winners - 200
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1939MB
[2026-01-28 14:32:10] info: [auth:g5fs72] Starting auth for GET /leaderboards/recent-winners
[2026-01-28 14:32:10] info: [auth:g5fs72] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:g5fs72] Token from header: true
[2026-01-28 14:32:10] info: [auth:g5fs72] Authenticated user fa824a64-6824-4c36-8ee6-c240ad415517
[2026-01-28 14:32:10] info: [auth:8q3oo] Starting auth for GET /recent-winners
[2026-01-28 14:32:10] info: [auth:8q3oo] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:8q3oo] Token from header: true
[2026-01-28 14:32:10] info: [auth:8q3oo] Authenticated user fa824a64-6824-4c36-8ee6-c240ad415517
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage - 200
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/stats
[2026-01-28 14:32:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1937MB
[2026-01-28 14:32:10] info: [auth:wjqfp] Starting auth for GET /leaderboards/stats
[2026-01-28 14:32:10] info: [auth:wjqfp] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:wjqfp] Token from header: true
[2026-01-28 14:32:10] info: [auth:wjqfp] Authenticated user bc179362-9633-4093-86a4-fd10691a83e1
[2026-01-28 14:32:10] info: [auth:j2fppa] Starting auth for GET /stats
[2026-01-28 14:32:10] info: [auth:j2fppa] Token from cookie: false
[2026-01-28 14:32:10] info: [auth:j2fppa] Token from header: true
[2026-01-28 14:32:10] info: [auth:j2fppa] Authenticated user bc179362-9633-4093-86a4-fd10691a83e1
[2026-01-28 14:32:10] info: [GET] /api/leaderboards/stats - 200
PASS tests/integration/leaderboardRoutes.test.mjs
  üèÜ INTEGRATION: Leaderboard API - Real Database Integration
    GET /api/leaderboards/players/level
      ‚àö should return top players by level (212 ms)
      ‚àö should handle unauthorized access (56 ms)
    GET /api/leaderboards/horses/earnings
      ‚àö should return top horses by earnings (92 ms)
    GET /api/leaderboards/recent-winners
      ‚àö should return recent competition winners (70 ms)
      ‚àö should filter by discipline (66 ms)
    GET /api/leaderboards/stats
      ‚àö should return comprehensive leaderboard statistics (83 ms)

[2026-01-28 14:32:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:11] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:11] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:11] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:11] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:11] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:11] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:11] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:11] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:11] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:11] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:32:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1987MB
[2026-01-28 14:32:11] info: [auth:7g28af] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:32:11] info: [auth:7g28af] Token from cookie: false
[2026-01-28 14:32:11] info: [auth:7g28af] Token from header: true
[2026-01-28 14:32:11] info: [auth:7g28af] Authenticated user test-user-uuid-123
[2026-01-28 14:32:11] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:32:11] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1990MB
[2026-01-28 14:32:12] info: [auth:x5u8ro] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:32:12] info: [auth:x5u8ro] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:x5u8ro] Token from header: true
[2026-01-28 14:32:12] info: [auth:x5u8ro] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 14:32:12] info: [GET] /api/user/dashboard/test-user-uuid-123
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1992MB
[2026-01-28 14:32:12] info: [auth:pk6m9f] Starting auth for GET /user/dashboard/test-user-uuid-123
[2026-01-28 14:32:12] info: [auth:pk6m9f] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:pk6m9f] Token from header: true
[2026-01-28 14:32:12] info: [auth:pk6m9f] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/dashboard/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/dashboard/test-user-uuid-123 - 404
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1993MB
[2026-01-28 14:32:12] info: [auth:pfcb8s] Starting auth for GET /user/test-user-uuid-123
[2026-01-28 14:32:12] info: [auth:pfcb8s] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:pfcb8s] Token from header: true
[2026-01-28 14:32:12] info: [auth:pfcb8s] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123 from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123 - 404
[2026-01-28 14:32:12] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1995MB
[2026-01-28 14:32:12] info: [auth:ffxzjg] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 14:32:12] info: [auth:ffxzjg] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:ffxzjg] Token from header: true
[2026-01-28 14:32:12] info: [auth:ffxzjg] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:32:12] info: [POST] /api/user/test-user-uuid-123/add-xp
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1997MB
[2026-01-28 14:32:12] info: [auth:0brv9b] Starting auth for POST /user/test-user-uuid-123/add-xp
[2026-01-28 14:32:12] info: [auth:0brv9b] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:0brv9b] Token from header: true
[2026-01-28 14:32:12] info: [auth:0brv9b] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] info: [POST] /api/user/test-user-uuid-123/add-xp - 403
[2026-01-28 14:32:12] info: [DELETE] /api/user/test-user-uuid-123
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1998MB
[2026-01-28 14:32:12] info: [auth:8j5r9v] Starting auth for DELETE /user/test-user-uuid-123
[2026-01-28 14:32:12] info: [auth:8j5r9v] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:8j5r9v] Token from header: true
[2026-01-28 14:32:12] info: [auth:8j5r9v] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] info: [DELETE] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1999MB
[2026-01-28 14:32:12] info: [auth:abchhh] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:32:12] info: [auth:abchhh] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:abchhh] Token from header: true
[2026-01-28 14:32:12] info: [auth:abchhh] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:32:12] info: [PUT] /api/user/test-user-uuid-123
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2000MB
[2026-01-28 14:32:12] info: [auth:6tc87t] Starting auth for PUT /user/test-user-uuid-123
[2026-01-28 14:32:12] info: [auth:6tc87t] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:6tc87t] Token from header: true
[2026-01-28 14:32:12] info: [auth:6tc87t] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] info: [PUT] /api/user/test-user-uuid-123 - 403
[2026-01-28 14:32:12] info: [GET] /api/user/other-user-uuid-456/progress
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 2001MB
[2026-01-28 14:32:12] info: [auth:4cr6dm] Starting auth for GET /user/other-user-uuid-456/progress
[2026-01-28 14:32:12] info: [auth:4cr6dm] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:4cr6dm] Token from header: true
[2026-01-28 14:32:12] info: [auth:4cr6dm] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/other-user-uuid-456/progress from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/other-user-uuid-456/progress - 404
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1989MB
[2026-01-28 14:32:12] info: [auth:gr0ntb] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:32:12] info: [auth:gr0ntb] Token from cookie: false
[2026-01-28 14:32:12] warn: [auth:gr0ntb] Access token is required for GET /user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress - 401
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1990MB
[2026-01-28 14:32:12] info: [auth:yh1n8j] Starting auth for GET /user/test-user-uuid-123/progress
[2026-01-28 14:32:12] info: [auth:yh1n8j] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:yh1n8j] Token from header: true
[2026-01-28 14:32:12] info: [auth:yh1n8j] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/progress from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/progress - 404
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1993MB
[2026-01-28 14:32:12] info: [auth:aqc1f7] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:32:12] info: [auth:aqc1f7] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:aqc1f7] Token from header: true
[2026-01-28 14:32:12] info: [auth:aqc1f7] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity - 404
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity
[2026-01-28 14:32:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1993MB
[2026-01-28 14:32:12] info: [auth:yufutj] Starting auth for GET /user/test-user-uuid-123/activity
[2026-01-28 14:32:12] info: [auth:yufutj] Token from cookie: false
[2026-01-28 14:32:12] info: [auth:yufutj] Token from header: true
[2026-01-28 14:32:12] info: [auth:yufutj] Authenticated user test-user-uuid-123
[2026-01-28 14:32:12] warn: 404 - Route not found: GET /api/user/test-user-uuid-123/activity from ::ffff:127.0.0.1
[2026-01-28 14:32:12] info: [GET] /api/user/test-user-uuid-123/activity - 404
PASS __tests__/integration/user-rate-limiting.test.mjs
  User Routes Rate Limiting Integration Tests
    Query Rate Limiting (GET endpoints)
      ‚àö should apply queryRateLimiter to GET /api/user/:id/progress (47 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/:id/activity (27 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/dashboard/:userId (25 ms)
      ‚àö should apply queryRateLimiter to GET /api/user/:id (25 ms)
    Mutation Rate Limiting (PUT/POST/DELETE endpoints)
      ‚àö should apply mutationRateLimiter to PUT /api/user/:id (40 ms)
      ‚àö should apply mutationRateLimiter to POST /api/user/:id/add-xp (26 ms)
      ‚àö should apply mutationRateLimiter to DELETE /api/user/:id (24 ms)
    Rate Limit Enforcement
      ‚àö should enforce different limits for query vs mutation operations (53 ms)
    Security Integration
      ‚àö should enforce ownership validation before rate limiting (26 ms)
      ‚àö should require authentication for all user endpoints (24 ms)
    Rate Limit Headers
      ‚àö should include all standard rate limit headers (28 ms)
      ‚àö should decrement remaining count with each request (50 ms)

[2026-01-28 14:32:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:12] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:12] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:13] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:13] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:13] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:13] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:13] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:13] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:13] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:13] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:13] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 147976
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 147976
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 147976
[2026-01-28 14:32:13] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 14:32:13] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 74135
[2026-01-28 14:32:13] info: [groomRareTraitPerks] Assigned perk: Phoenix Whisperer to groom 74135
[2026-01-28 14:32:13] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 74135
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/definitions
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2051MB
[2026-01-28 14:32:13] info: [auth:egk7ng] Starting auth for GET /ultra-rare-traits/definitions
[2026-01-28 14:32:13] info: [auth:egk7ng] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:egk7ng] Token from header: true
[2026-01-28 14:32:13] info: [auth:egk7ng] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/definitions - 200
[2026-01-28 14:32:13] info: [POST] /api/ultra-rare-traits/evaluate/147976
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2056MB
[2026-01-28 14:32:13] info: [auth:5o4vs] Starting auth for POST /ultra-rare-traits/evaluate/147976
[2026-01-28 14:32:13] info: [auth:5o4vs] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:5o4vs] Token from header: true
[2026-01-28 14:32:13] info: [auth:5o4vs] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [auth:tsfyq8] Starting auth for POST /evaluate/147976
[2026-01-28 14:32:13] info: [auth:tsfyq8] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:tsfyq8] Token from header: true
[2026-01-28 14:32:13] info: [auth:tsfyq8] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 147976
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 147976
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 147976
[2026-01-28 14:32:13] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 147976
[2026-01-28 14:32:13] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')
[2026-01-28 14:32:13] info: [POST] /api/ultra-rare-traits/evaluate/147976 - 200
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147976
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2054MB
[2026-01-28 14:32:13] info: [auth:scxlgl] Starting auth for GET /ultra-rare-traits/horse/147976
[2026-01-28 14:32:13] info: [auth:scxlgl] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:scxlgl] Token from header: true
[2026-01-28 14:32:13] info: [auth:scxlgl] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [auth:89llll] Starting auth for GET /horse/147976
[2026-01-28 14:32:13] info: [auth:89llll] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:89llll] Token from header: true
[2026-01-28 14:32:13] info: [auth:89llll] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 147976
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147976 - 200
[2026-01-28 14:32:13] info: [POST] /api/ultra-rare-traits/groom/74135/assign-perks
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2048MB
[2026-01-28 14:32:13] info: [auth:qjat6h] Starting auth for POST /ultra-rare-traits/groom/74135/assign-perks
[2026-01-28 14:32:13] info: [auth:qjat6h] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:qjat6h] Token from header: true
[2026-01-28 14:32:13] info: [auth:qjat6h] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [auth:fh9ezg] Starting auth for POST /groom/74135/assign-perks
[2026-01-28 14:32:13] info: [auth:fh9ezg] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:fh9ezg] Token from header: true
[2026-01-28 14:32:13] info: [auth:fh9ezg] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [ownership] Validated ownership: user test-ultra-rare-user owns groom 74135
[2026-01-28 14:32:13] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 74135
[2026-01-28 14:32:13] info: [POST] /api/ultra-rare-traits/groom/74135/assign-perks - 200
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147976
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2056MB
[2026-01-28 14:32:13] info: [auth:3sm3ee] Starting auth for GET /ultra-rare-traits/horse/147976
[2026-01-28 14:32:13] info: [auth:3sm3ee] Token from cookie: false
[2026-01-28 14:32:13] warn: [auth:3sm3ee] Access token is required for GET /ultra-rare-traits/horse/147976 from ::ffff:127.0.0.1
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147976 - 401
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147977
[2026-01-28 14:32:13] warn: [MemoryMonitoring] Memory threshold exceeded: 2056MB
[2026-01-28 14:32:13] info: [auth:kkcc0s] Starting auth for GET /ultra-rare-traits/horse/147977
[2026-01-28 14:32:13] info: [auth:kkcc0s] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:kkcc0s] Token from header: true
[2026-01-28 14:32:13] info: [auth:kkcc0s] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] info: [auth:mg2cj] Starting auth for GET /horse/147977
[2026-01-28 14:32:13] info: [auth:mg2cj] Token from cookie: false
[2026-01-28 14:32:13] info: [auth:mg2cj] Token from header: true
[2026-01-28 14:32:13] info: [auth:mg2cj] Authenticated user test-ultra-rare-user
[2026-01-28 14:32:13] warn: [ownership] horse 147977 not found or not owned by user test-ultra-rare-user
[2026-01-28 14:32:13] info: [GET] /api/ultra-rare-traits/horse/147977 - 404
PASS tests/ultraRareTraits.test.mjs
  Ultra-Rare & Exotic Traits System
    Trait Definitions System
      ‚àö should retrieve all ultra-rare trait definitions (3 ms)
      ‚àö should retrieve all exotic trait definitions (1 ms)
      ‚àö should get specific trait definition by name (1 ms)
    Trigger Evaluation Engine
      ‚àö should evaluate ultra-rare trait triggers with proper conditions (14 ms)
      ‚àö should evaluate exotic trait unlocks with complex conditions (9 ms)
    Groom Perk System
      ‚àö should assign rare trait booster perks to eligible grooms (7 ms)
      ‚àö should apply rare trait booster effects to probability calculations (3 ms)
    Mechanical Effects Integration
      ‚àö should apply ultra-rare stress effects correctly (2 ms)
      ‚àö should apply ultra-rare competition effects correctly (1 ms)
      ‚àö should check ultra-rare abilities correctly (1 ms)
    API Endpoints
      ‚àö GET /api/ultra-rare-traits/definitions should return all trait definitions (42 ms)
      ‚àö POST /api/ultra-rare-traits/evaluate/:horseId should evaluate traits for owned horse (66 ms)
      ‚àö GET /api/ultra-rare-traits/horse/:horseId should return horse ultra-rare traits (38 ms)
      ‚àö POST /api/ultra-rare-traits/groom/:groomId/assign-perks should assign perks to owned groom (43 ms)
      ‚àö should reject unauthorized access to horse traits (22 ms)
      ‚àö should reject access to non-owned horse (52 ms)

[2026-01-28 14:32:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:14] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:15] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:15] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:15] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:15] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:15] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:15] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:15] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:15] info: [GET] /api/admin/cron/status
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2108MB
[2026-01-28 14:32:15] info: [auth:fcgcls] Starting auth for GET /cron/status
[2026-01-28 14:32:15] info: [auth:fcgcls] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:fcgcls] Token from header: true
[2026-01-28 14:32:15] info: [auth:fcgcls] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /cron/status
[2026-01-28 14:32:15] info: [adminRoutes] GET /api/admin/cron/status
[2026-01-28 14:32:15] info: [GET] /api/admin/cron/status - 200
[2026-01-28 14:32:15] info: [POST] /api/admin/traits/evaluate
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2115MB
[2026-01-28 14:32:15] info: [auth:es2mie] Starting auth for POST /traits/evaluate
[2026-01-28 14:32:15] info: [auth:es2mie] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:es2mie] Token from header: true
[2026-01-28 14:32:15] info: [auth:es2mie] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /traits/evaluate
[2026-01-28 14:32:15] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered
[2026-01-28 14:32:15] info: [POST] /api/admin/traits/evaluate - 200
[2026-01-28 14:32:15] info: [GET] /api/admin/foals/development
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2104MB
[2026-01-28 14:32:15] info: [auth:oqqgkn] Starting auth for GET /foals/development
[2026-01-28 14:32:15] info: [auth:oqqgkn] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:oqqgkn] Token from header: true
[2026-01-28 14:32:15] info: [auth:oqqgkn] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /foals/development
[2026-01-28 14:32:15] info: [adminRoutes] GET /api/admin/foals/development
[2026-01-28 14:32:15] info: [GET] /api/admin/foals/development - 200
[2026-01-28 14:32:15] info: [GET] /api/admin/traits/definitions
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2108MB
[2026-01-28 14:32:15] info: [auth:ttnqbl] Starting auth for GET /traits/definitions
[2026-01-28 14:32:15] info: [auth:ttnqbl] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:ttnqbl] Token from header: true
[2026-01-28 14:32:15] info: [auth:ttnqbl] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for GET /traits/definitions
[2026-01-28 14:32:15] info: [adminRoutes] GET /api/admin/traits/definitions
[2026-01-28 14:32:15] info: [GET] /api/admin/traits/definitions - 200
[2026-01-28 14:32:15] info: [POST] /api/admin/cron/start
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2105MB
[2026-01-28 14:32:15] info: [auth:b8apqq] Starting auth for POST /cron/start
[2026-01-28 14:32:15] info: [auth:b8apqq] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:b8apqq] Token from header: true
[2026-01-28 14:32:15] info: [auth:b8apqq] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/start
[2026-01-28 14:32:15] info: [adminRoutes] POST /api/admin/cron/start
[2026-01-28 14:32:15] info: [POST] /api/admin/cron/start - 200
[2026-01-28 14:32:15] info: [POST] /api/admin/cron/stop
[2026-01-28 14:32:15] warn: [MemoryMonitoring] Memory threshold exceeded: 2109MB
[2026-01-28 14:32:15] info: [auth:w43pok] Starting auth for POST /cron/stop
[2026-01-28 14:32:15] info: [auth:w43pok] Token from cookie: false
[2026-01-28 14:32:15] info: [auth:w43pok] Token from header: true
[2026-01-28 14:32:15] info: [auth:w43pok] Authenticated user admin-user-uuid-456
[2026-01-28 14:32:15] info: [auth] Authorized user admin-user-uuid-456 with role 'admin' for POST /cron/stop
[2026-01-28 14:32:15] info: [adminRoutes] POST /api/admin/cron/stop
[2026-01-28 14:32:15] info: [POST] /api/admin/cron/stop - 200
PASS tests/cronJobsIntegration.test.mjs
  ‚è∞ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API
    Daily Trait Evaluation
      ‚àö should evaluate traits for foals with good bonding and low stress (3 ms)
      ‚àö should evaluate traits for foals with poor bonding and high stress (1 ms)
      ‚àö should not evaluate foals that have completed development (9 ms)
      ‚àö should handle foals without development records (1 ms)
      ‚àö should not reveal duplicate traits (2 ms)
      ‚àö should handle multiple foals in single evaluation (1 ms)
    Admin API Endpoints
      ‚àö should get cron job status (45 ms)
      ‚àö should manually trigger trait evaluation (33 ms)
      ‚àö should get foals in development (31 ms)
      ‚àö should get trait definitions (41 ms)
      ‚àö should start and stop cron job service (59 ms)
    Error Handling
      ‚àö should handle database errors gracefully (1 ms)
      ‚àö should handle missing epigeneticModifiers field (1 ms)

[2026-01-28 14:32:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:15] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:15] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:32:15] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 147999 and mare 148000
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148010 and mare 148006
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148015 and mare 148016
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148017 and mare 148013
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148014 and mare 148013
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148020 and mare 148021
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148022 and mare 148023
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148024 and mare 148021
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148029 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148029 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148029 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148029 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148029 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148029 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148029 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148029 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148032 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148032 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148032 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148032 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148032 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148032 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148032 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148032 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148027 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148027 and mare 148031
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148027 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148027 and mare 148030
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148027 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148027 and mare 148028
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148027 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148027 and mare 148033
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148034 and mare 148035
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148034 and mare 148035
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148041 and mare 148042
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148043 and mare 148044
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148045 and mare 148042
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148050 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148050 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148050 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148050 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148052 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148052 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148050 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148052 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148052 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148052 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148048 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148051
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148048 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148049
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148048 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148053
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 148048 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 148048 and mare 148054
[2026-01-28 14:32:16] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses
PASS tests/unit/geneticDiversityTracking.test.mjs
  üß¨ Genetic Diversity Tracking System
    üî¨ Advanced Genetic Diversity Algorithms
      ‚àö should calculate comprehensive genetic diversity metrics (262 ms)
      ‚àö should calculate effective population size (49 ms)
      ‚àö should identify genetic founders and their contributions (62 ms)
    üîç Enhanced Inbreeding Analysis
      ‚àö should calculate detailed inbreeding coefficients (48 ms)
      ‚àö should detect inbreeding in population (38 ms)
    üìä Population Genetic Health Tracking
      ‚àö should track population genetic health metrics (85 ms)
      ‚àö should analyze genetic trends over time (74 ms)
    üéØ Optimal Breeding Recommendations
      ‚àö should generate optimal breeding recommendations (177 ms)
      ‚àö should assess breeding pair compatibility (34 ms)
    üìà Genetic Diversity Tracking Over Time
      ‚àö should track genetic diversity changes over time (90 ms)
      ‚àö should generate comprehensive genetic diversity report (211 ms)

[2026-01-28 14:32:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:17] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:17] info: [RateLimit:test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:rl] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:fallback] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:circuit-log] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:under-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:exceed-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:user-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:ip-limit] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:bypass-test] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:env-override] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:error-handling] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:custom-handler] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:32:17] info: [RateLimit:retry-after] Redis not connected - using in-memory rate limiting (per-process)
  console.error
    ValidationError: The hit count for ip:127.0.0.1 was incremented more than once for a single request. See https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/ for more information.
        at Object.singleCount (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:214:13)
        at Object.wrappedValidations.<computed> [as singleCount] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:715:26
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5 {
      code: 'ERR_ERL_DOUBLE_COUNT',
      help: 'https://express-rate-limit.github.io/ERR_ERL_DOUBLE_COUNT/'
    }

      at Object.wrappedValidations.<computed> [as singleCount] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at node_modules/express-rate-limit/dist/index.mjs:715:26
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:32:17] info: [RateLimit:distributed] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:17] info: [RateLimit:multi-process] Redis not connected - using in-memory rate limiting (per-process)
PASS __tests__/integration/rate-limit-circuit-breaker.test.mjs
  Rate Limiting Circuit Breaker Integration Tests
    Rate Limiter Initialization
      ‚àö should create rate limiter successfully (6 ms)
      ‚àö should validate configuration parameters (3 ms)
      ‚àö should use default configuration when not provided (2 ms)
    Circuit Breaker Fallback Behavior
      ‚àö should fall back to in-memory rate limiting when circuit is open (60 ms)
      ‚àö should log circuit open state when falling back (2 ms)
    Rate Limiting with Circuit Breaker
      ‚àö should allow requests under the limit (184 ms)
      ‚àö should configure rate limiter with blocking capability (3 ms)
      ‚àö should use user ID for authenticated rate limiting (62 ms)
      ‚àö should fall back to IP for unauthenticated requests (62 ms)
    Test Environment Bypasses
      ‚àö should bypass rate limiting with test header (79 ms)
      ‚àö should respect test environment overrides (3 ms)
    Health Status Monitoring
      ‚àö should report rate limiting health status (2 ms)
      ‚àö should include circuit breaker metrics when available
      ‚àö should report degraded status when Redis unavailable (1 ms)
    Circuit State Detection
      ‚àö should detect when Redis connection is available (1 ms)
      ‚àö should return false when circuit breaker is open (1 ms)
    Error Handling and Recovery
      ‚àö should handle Redis connection errors gracefully (2 ms)
      ‚àö should recover when Redis becomes available (1 ms)
    Rate Limiter Custom Handler
      ‚àö should return proper error response when limit exceeded (129 ms)
      ‚àö should include retry-after information in response (123 ms)
    Distributed Rate Limiting
      ‚àö should use Redis store for distributed rate limiting when available (3 ms)
      ‚àö should synchronize rate limits across multiple processes (183 ms)

[2026-01-28 14:32:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:19] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:19] info: [Sentry] Sentry DSN not configured. Skipping initialization.
[2026-01-28 14:32:19] info: [RateLimit:rl:global] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:19] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:19] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:19] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
[2026-01-28 14:32:19] info: [Sentry] Sentry error handler not attached (DSN not configured).
[2026-01-28 14:32:19] info: [POST] /api/horses/foals
[2026-01-28 14:32:19] warn: [MemoryMonitoring] Memory threshold exceeded: 2194MB
[2026-01-28 14:32:19] info: [auth:ezmugli] Starting auth for POST /horses/foals
[2026-01-28 14:32:19] info: [auth:ezmugli] Token from cookie: false
[2026-01-28 14:32:19] warn: [auth:ezmugli] Access token is required for POST /horses/foals from ::ffff:127.0.0.1
[2026-01-28 14:32:19] info: [POST] /api/horses/foals - 401
PASS tests/foalCreationIntegration.test.mjs
  üê¥ INTEGRATION: Foal Creation Integration - API Endpoint Validation
    ‚àö should accept valid foal creation data structure (51 ms)

[2026-01-28 14:32:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:19] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.2%, adjustment: -0.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 209 (base: 210, trait: +0, luck: -0.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.0%, adjustment: -2.1
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 208 (base: 210, trait: +0, luck: -2.1)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.5%, adjustment: 17.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 228 (base: 210, trait: +0, luck: 17.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.0%, adjustment: -12.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 197 (base: 210, trait: +0, luck: -12.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.3%, adjustment: -16.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -16.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -5.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -5.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -14.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -14.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.8%, adjustment: -17.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -17.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.3%, adjustment: 0.9
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 0.9)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.2%, adjustment: -12.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -12.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.7%, adjustment: -20.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 280 (base: 300, trait: +0, luck: -20.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.4%, adjustment: -19.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 281 (base: 300, trait: +0, luck: -19.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.3%, adjustment: -25.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 275 (base: 300, trait: +0, luck: -25.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.8%, adjustment: 17.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 317 (base: 300, trait: +0, luck: 17.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.2%, adjustment: -21.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -21.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -25.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -25.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.3%, adjustment: 1.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 1.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.2%, adjustment: 9.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 9.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.2%, adjustment: -12.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -12.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -16.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -16.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.1%, adjustment: -18.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -18.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.1%, adjustment: -0.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 300 (base: 300, trait: +0, luck: -0.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.1%, adjustment: -21.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -21.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 13.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 13.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.8%, adjustment: 17.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 317 (base: 300, trait: +0, luck: 17.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.6%, adjustment: 7.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 7.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.3%, adjustment: 7.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.5%, adjustment: 10.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 10.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 10.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 10.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 8.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.4%, adjustment: -16.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -16.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 7.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 7.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.1%, adjustment: 18.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 18.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.3%, adjustment: -12.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -12.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.1%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 303 (base: 300, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 14.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 14.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.1%, adjustment: 15.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 15.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 1.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 302 (base: 300, trait: +0, luck: 1.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.5%, adjustment: -16.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -16.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 5.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.0%, adjustment: 24.1
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 324 (base: 300, trait: +0, luck: 24.1)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.7%, adjustment: 20.1
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 320 (base: 300, trait: +0, luck: 20.1)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.4%, adjustment: -25.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 275 (base: 300, trait: +0, luck: -25.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -15.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -15.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.3%, adjustment: -13.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -13.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 7.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.2%, adjustment: 0.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 0.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.6%, adjustment: 7.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 7.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -17.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -17.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.4%, adjustment: 10.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 310 (base: 300, trait: +0, luck: 10.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.8%, adjustment: -26.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -26.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -25.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -25.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -4.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 76 (base: 80, trait: +0, luck: -4.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.3%, adjustment: -5.6
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -5.6)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.7%, adjustment: -7.4
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -7.4)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 0.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +0, luck: 0.7)
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:32:19] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string
[2026-01-28 14:32:19] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.6%, adjustment: -13.8
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 180, trait: +0, luck: -13.8)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.7%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 173 (base: 180, trait: +0, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:19] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0
[2026-01-28 14:32:20] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)
PASS tests/competitionScore.test.mjs
  üèÜ UNIT: Competition Score Calculation - Scoring Algorithm Validation
    calculateCompetitionScore
      ‚àö should calculate correct base score for Racing discipline (6 ms)
      ‚àö should calculate correct base score for Show Jumping discipline (3 ms)
      ‚àö should calculate correct base score for Dressage discipline (3 ms)
      ‚àö should calculate correct base score for Cross Country discipline (7 ms)
      ‚àö should apply +5 trait bonus for matching discipline affinity (7 ms)
      ‚àö should NOT apply trait bonus for non-matching discipline (3 ms)
      ‚àö should apply ¬±9% random luck modifier (130 ms)
      ‚àö should handle missing stats by defaulting to 0 (6 ms)
      ‚àö should handle missing epigeneticModifiers gracefully (7 ms)
      ‚àö should handle null epigeneticModifiers.positive gracefully (5 ms)
      ‚àö should throw error for invalid horse input (8 ms)
      ‚àö should throw error for invalid event type (7 ms)
      ‚àö should handle unknown event types with default calculation (5 ms)
      ‚àö should return rounded integer scores (6 ms)
    Trait Match Logic - 20 Competition Simulation Tests
      ‚àö should demonstrate trait advantage in Show Jumping competitions (discipline_affinity_show_jumping) (121 ms)
      ‚àö should demonstrate trait advantage in Racing competitions (discipline_affinity_racing) (119 ms)
      ‚àö should demonstrate trait advantage in Dressage competitions (discipline_affinity_dressage) (122 ms)
      ‚àö should demonstrate trait advantage in Cross Country competitions (discipline_affinity_cross_country) (126 ms)
      ‚àö should show no advantage when trait does not match discipline (102 ms)
      ‚àö should handle horse missing epigeneticModifiers without throwing error (176 ms)
    Deterministic Tests with Controlled Randomness
      ‚àö should apply exact +5 bonus with controlled randomness (7 ms)
      ‚àö should handle minimum luck modifier (0) (6 ms)
      ‚àö should handle maximum luck modifier (1) (4 ms)
      ‚àö should demonstrate consistent trait advantage with controlled randomness (63 ms)
      ‚àö should verify trait bonus is applied correctly across all disciplines (27 ms)
      ‚àö should verify no bonus when trait does not match discipline (5 ms)
    getDisciplineStatWeights
      ‚àö should return correct weights for Racing (2 ms)
      ‚àö should return correct weights for Show Jumping
      ‚àö should return default weights for unknown discipline
    validateHorseForCompetition
      ‚àö should return true for valid horse with required stats (4 ms)
      ‚àö should return false for invalid horse input (1 ms)
      ‚àö should return true if horse has at least one required stat
      ‚àö should return false if horse has no valid stats (1 ms)

[2026-01-28 14:32:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:21] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:21] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:21] info: [TokenRotation] Created new token pair
[2026-01-28 14:32:21] info: [EmailVerification] Created verification token
[2026-01-28 14:32:21] info: [EmailService] Email verification (DEV MODE - not sent)
[2026-01-28 14:32:21] info: [authController.register] Verification email sent
[2026-01-28 14:32:21] info: [auth:g11o55] Starting auth for GET /api/horses/trainable/f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:g11o55] Token from cookie: false
[2026-01-28 14:32:21] info: [auth:g11o55] Token from header: true
[2026-01-28 14:32:21] info: [auth:g11o55] Authenticated user f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:lshymd] Starting auth for GET /api/horses/trainable/f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:lshymd] Token from cookie: false
[2026-01-28 14:32:21] info: [auth:lshymd] Token from header: true
[2026-01-28 14:32:21] info: [auth:lshymd] Authenticated user f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:wko2nm] Starting auth for POST /api/training/train
[2026-01-28 14:32:21] info: [auth:wko2nm] Token from cookie: false
[2026-01-28 14:32:21] info: [auth:wko2nm] Token from header: true
[2026-01-28 14:32:21] info: [auth:wko2nm] Authenticated user f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:ug2nxb] Starting auth for POST /api/training/train
[2026-01-28 14:32:21] info: [auth:ug2nxb] Token from cookie: false
[2026-01-28 14:32:21] info: [auth:ug2nxb] Token from header: true
[2026-01-28 14:32:21] info: [auth:ug2nxb] Authenticated user f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:k8getd] Starting auth for GET /api/horses/trainable/f92658d7-bad2-4683-8dad-670eac043b8b
[2026-01-28 14:32:21] info: [auth:k8getd] Token from cookie: false
[2026-01-28 14:32:22] warn: [auth:k8getd] Access token is required for GET /api/horses/trainable/f92658d7-bad2-4683-8dad-670eac043b8b from ::ffff:127.0.0.1
PASS tests/training-complete.test.mjs
  üèãÔ∏è INTEGRATION: Training System Complete - End-to-End Workflow
    Authentication and Setup
      ‚àö should have created test user and horses (1 ms)
    Trainable Horses
      ‚àö should get trainable horses for authenticated user (24 ms)
    Training Functionality
      ‚àö should successfully train an adult horse (36 ms)
      ‚àö should reject training for young horse (21 ms)
    Authentication Protection
      ‚àö should reject unauthenticated requests (13 ms)

[2026-01-28 14:32:22] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:22] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:22] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:22] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:22] info: [auth:g7awip] Starting auth for GET /health
[2026-01-28 14:32:22] info: [auth:g7awip] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:g7awip] Token from header: true
[2026-01-28 14:32:22] info: [auth:g7awip] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation health status
[2026-01-28 14:32:22] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:22] info: [auth:w9nyl] Starting auth for GET /health
[2026-01-28 14:32:22] info: [auth:w9nyl] Token from cookie: false
[2026-01-28 14:32:22] warn: [auth:w9nyl] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:32:22] info: [auth:3en97c] Starting auth for GET /metrics
[2026-01-28 14:32:22] info: [auth:3en97c] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:3en97c] Token from header: true
[2026-01-28 14:32:22] info: [auth:3en97c] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:32:22] info: [auth:end8u] Starting auth for GET /metrics
[2026-01-28 14:32:22] info: [auth:end8u] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:end8u] Token from header: true
[2026-01-28 14:32:22] info: [auth:end8u] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:32:22] info: [auth:tkklq1] Starting auth for GET /validation
[2026-01-28 14:32:22] info: [auth:tkklq1] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:tkklq1] Token from header: true
[2026-01-28 14:32:22] info: [auth:tkklq1] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Validating OpenAPI specification
[2026-01-28 14:32:22] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:22] info: [auth:icyio] Starting auth for POST /generate
[2026-01-28 14:32:22] info: [auth:icyio] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:icyio] Token from header: true
[2026-01-28 14:32:22] info: [auth:icyio] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:32:22] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:32:22] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:32:22] info: [auth:mkhjta] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:mkhjta] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:mkhjta] Token from header: true
[2026-01-28 14:32:22] info: [auth:mkhjta] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: POST /api/horses
[2026-01-28 14:32:22] info: [auth:85tv7g] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:85tv7g] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:85tv7g] Token from header: true
[2026-01-28 14:32:22] info: [auth:85tv7g] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [auth:y2283i] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:y2283i] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:y2283i] Token from header: true
[2026-01-28 14:32:22] info: [auth:y2283i] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get
[2026-01-28 14:32:22] info: [auth:s230zd] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:s230zd] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:s230zd] Token from header: true
[2026-01-28 14:32:22] info: [auth:s230zd] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post
[2026-01-28 14:32:22] info: [auth:yoguo] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:yoguo] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:yoguo] Token from header: true
[2026-01-28 14:32:22] info: [auth:yoguo] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put
[2026-01-28 14:32:22] info: [auth:751oj] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:751oj] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:751oj] Token from header: true
[2026-01-28 14:32:22] info: [auth:751oj] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete
[2026-01-28 14:32:22] info: [auth:icb2su] Starting auth for POST /endpoints
[2026-01-28 14:32:22] info: [auth:icb2su] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:icb2su] Token from header: true
[2026-01-28 14:32:22] info: [auth:icb2su] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch
[2026-01-28 14:32:22] info: [auth:yiacla] Starting auth for POST /schemas
[2026-01-28 14:32:22] info: [auth:yiacla] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:yiacla] Token from header: true
[2026-01-28 14:32:22] info: [auth:yiacla] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 14:32:22] info: [auth:75j8m5] Starting auth for POST /schemas
[2026-01-28 14:32:22] info: [auth:75j8m5] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:75j8m5] Token from header: true
[2026-01-28 14:32:22] info: [auth:75j8m5] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [auth:ya4dlm] Starting auth for GET /coverage
[2026-01-28 14:32:22] info: [auth:ya4dlm] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:ya4dlm] Token from header: true
[2026-01-28 14:32:22] info: [auth:ya4dlm] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation coverage analysis
[2026-01-28 14:32:22] info: [auth:auh2aj] Starting auth for GET /analytics
[2026-01-28 14:32:22] info: [auth:auh2aj] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:auh2aj] Token from header: true
[2026-01-28 14:32:22] info: [auth:auh2aj] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 14:32:22] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:22] info: [auth:lg0wds] Starting auth for GET /analytics
[2026-01-28 14:32:22] info: [auth:lg0wds] Token from cookie: false
[2026-01-28 14:32:22] info: [auth:lg0wds] Token from header: true
[2026-01-28 14:32:22] info: [auth:lg0wds] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:22] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d
[2026-01-28 14:32:22] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:22] info: [auth:h91wb] Starting auth for GET /analytics
[2026-01-28 14:32:23] info: [auth:h91wb] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:h91wb] Token from header: true
[2026-01-28 14:32:23] info: [auth:h91wb] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d
[2026-01-28 14:32:23] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:23] info: [auth:dvty2d] Starting auth for GET /analytics
[2026-01-28 14:32:23] info: [auth:dvty2d] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:dvty2d] Token from header: true
[2026-01-28 14:32:23] info: [auth:dvty2d] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d
[2026-01-28 14:32:23] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:32:23] info: [auth:k3hah] Starting auth for GET /analytics
[2026-01-28 14:32:23] info: [auth:k3hah] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:k3hah] Token from header: true
[2026-01-28 14:32:23] info: [auth:k3hah] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [auth:lkthu] Starting auth for GET /health
[2026-01-28 14:32:23] info: [auth:lkthu] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:lkthu] Token from header: true
[2026-01-28 14:32:23] warn: [auth:lkthu] Invalid or expired token for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:32:23] info: [auth:u2eiah] Starting auth for GET /health
[2026-01-28 14:32:23] info: [auth:u2eiah] Token from cookie: false
[2026-01-28 14:32:23] warn: [auth:u2eiah] Access token is required for GET /health from ::ffff:127.0.0.1
[2026-01-28 14:32:23] info: [auth:z6wllp] Starting auth for POST /endpoints
[2026-01-28 14:32:23] info: [auth:z6wllp] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:z6wllp] Token from header: true
[2026-01-28 14:32:23] info: [auth:z6wllp] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Registering endpoint: GET /api/users
[2026-01-28 14:32:23] info: [auth:lvefu] Starting auth for POST /endpoints
[2026-01-28 14:32:23] info: [auth:lvefu] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:lvefu] Token from header: true
[2026-01-28 14:32:23] info: [auth:lvefu] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Registering endpoint: POST /api/users
[2026-01-28 14:32:23] info: [auth:9fgf9] Starting auth for POST /endpoints
[2026-01-28 14:32:23] info: [auth:9fgf9] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:9fgf9] Token from header: true
[2026-01-28 14:32:23] info: [auth:9fgf9] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Registering endpoint: GET /api/horses
[2026-01-28 14:32:23] info: [auth:upsih] Starting auth for GET /metrics
[2026-01-28 14:32:23] info: [auth:upsih] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:upsih] Token from header: true
[2026-01-28 14:32:23] info: [auth:upsih] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Getting documentation metrics
[2026-01-28 14:32:23] info: [auth:eo361] Starting auth for POST /schemas
[2026-01-28 14:32:23] info: [auth:eo361] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:eo361] Token from header: true
[2026-01-28 14:32:23] info: [auth:eo361] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Registering schema: User
[2026-01-28 14:32:23] info: [auth:wt829c] Starting auth for POST /schemas
[2026-01-28 14:32:23] info: [auth:wt829c] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:wt829c] Token from header: true
[2026-01-28 14:32:23] info: [auth:wt829c] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Registering schema: Horse
[2026-01-28 14:32:23] info: [auth:uf53otm] Starting auth for POST /generate
[2026-01-28 14:32:23] info: [auth:uf53otm] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:uf53otm] Token from header: true
[2026-01-28 14:32:23] info: [auth:uf53otm] Authenticated user b29282f8-bd25-496e-bf7a-b45f609b675d
[2026-01-28 14:32:23] info: [DocumentationRoutes] Generating API documentation
[2026-01-28 14:32:23] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:32:23] info: [ApiDocService] Documentation generated for 0 endpoints
PASS __tests__/routes/documentationRoutes.test.mjs
  Documentation Routes
    GET /api/docs/health
      ‚àö retrieves documentation health successfully (46 ms)
      ‚àö requires authentication (14 ms)
    GET /api/docs/metrics
      ‚àö retrieves documentation metrics successfully (24 ms)
      ‚àö provides meaningful analytics data (23 ms)
    GET /api/docs/validation
      ‚àö validates OpenAPI specification successfully (24 ms)
    POST /api/docs/generate
      ‚àö generates documentation successfully (33 ms)
    POST /api/docs/endpoints
      ‚àö registers endpoint successfully (29 ms)
      ‚àö validates endpoint data (22 ms)
      ‚àö accepts valid HTTP methods (87 ms)
    POST /api/docs/schemas
      ‚àö registers schema successfully (16 ms)
      ‚àö validates schema data (18 ms)
    GET /api/docs/coverage
      ‚àö retrieves coverage analysis successfully (25 ms)
    GET /api/docs/analytics
      ‚àö retrieves analytics with default timeframe (26 ms)
      ‚àö accepts different timeframe parameters (72 ms)
      ‚àö validates timeframe parameter (20 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (18 ms)
      ‚àö handles missing authorization header (16 ms)
    Integration with Documentation Service
      ‚àö endpoints registration reflects in metrics (70 ms)
      ‚àö schema registration reflects in generation (58 ms)

[2026-01-28 14:32:23] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:23] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:23] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:23] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:23] info: [auth:o68ntu] Starting auth for GET /metrics
[2026-01-28 14:32:23] info: [auth:o68ntu] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:o68ntu] Token from header: true
[2026-01-28 14:32:23] info: [auth:o68ntu] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:5pxd5h] Starting auth for GET /metrics
[2026-01-28 14:32:23] info: [auth:5pxd5h] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:5pxd5h] Token from header: true
[2026-01-28 14:32:23] info: [auth:5pxd5h] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:4mjxpm] Starting auth for GET /metrics
[2026-01-28 14:32:23] info: [auth:4mjxpm] Token from cookie: false
[2026-01-28 14:32:23] warn: [auth:4mjxpm] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:32:23] info: [auth:um0ww] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:um0ww] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:um0ww] Token from header: true
[2026-01-28 14:32:23] info: [auth:um0ww] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:hd4gqp] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:hd4gqp] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:hd4gqp] Token from header: true
[2026-01-28 14:32:23] info: [auth:hd4gqp] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 14:32:23] info: [auth:d30lbb] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:d30lbb] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:d30lbb] Token from header: true
[2026-01-28 14:32:23] info: [auth:d30lbb] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:bti5db] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:bti5db] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:bti5db] Token from header: true
[2026-01-28 14:32:23] info: [auth:bti5db] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting performance metrics for timeframe: 1h
[2026-01-28 14:32:23] info: [auth:6nlye] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:6nlye] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:6nlye] Token from header: true
[2026-01-28 14:32:23] info: [auth:6nlye] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:f5b0t9] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:f5b0t9] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:f5b0t9] Token from header: true
[2026-01-28 14:32:23] info: [auth:f5b0t9] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting performance metrics for timeframe: 24h
[2026-01-28 14:32:23] info: [auth:5zrdo5] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:5zrdo5] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:5zrdo5] Token from header: true
[2026-01-28 14:32:23] info: [auth:5zrdo5] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:pfrct] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:pfrct] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:pfrct] Token from header: true
[2026-01-28 14:32:23] info: [auth:pfrct] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting performance metrics for timeframe: 7d
[2026-01-28 14:32:23] info: [auth:bwmwkr] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:bwmwkr] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:bwmwkr] Token from header: true
[2026-01-28 14:32:23] info: [auth:bwmwkr] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:bgr07n] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:bgr07n] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:bgr07n] Token from header: true
[2026-01-28 14:32:23] info: [auth:bgr07n] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting performance metrics for timeframe: 30d
[2026-01-28 14:32:23] info: [auth:x5z3qf] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:x5z3qf] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:x5z3qf] Token from header: true
[2026-01-28 14:32:23] info: [auth:x5z3qf] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:8hfxl] Starting auth for GET /performance
[2026-01-28 14:32:23] info: [auth:8hfxl] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:8hfxl] Token from header: true
[2026-01-28 14:32:23] info: [auth:8hfxl] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:cxq6ug] Starting auth for GET /compression-stats
[2026-01-28 14:32:23] info: [auth:cxq6ug] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:cxq6ug] Token from header: true
[2026-01-28 14:32:23] info: [auth:cxq6ug] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [auth:un240q] Starting auth for GET /compression-stats
[2026-01-28 14:32:23] info: [auth:un240q] Token from cookie: false
[2026-01-28 14:32:23] info: [auth:un240q] Token from header: true
[2026-01-28 14:32:23] info: [auth:un240q] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:23] info: [ApiOptimization] Getting compression statistics
[2026-01-28 14:32:24] info: [auth:11mw98] Starting auth for GET /cache-analytics
[2026-01-28 14:32:24] info: [auth:11mw98] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:11mw98] Token from header: true
[2026-01-28 14:32:24] info: [auth:11mw98] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:r1pxr8] Starting auth for GET /cache-analytics
[2026-01-28 14:32:24] info: [auth:r1pxr8] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:r1pxr8] Token from header: true
[2026-01-28 14:32:24] info: [auth:r1pxr8] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Getting cache analytics
[2026-01-28 14:32:24] info: [auth:b5xieh] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:b5xieh] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:b5xieh] Token from header: true
[2026-01-28 14:32:24] info: [auth:b5xieh] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:ojgru] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:ojgru] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:ojgru] Token from header: true
[2026-01-28 14:32:24] info: [auth:ojgru] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:32:24] info: [auth:4fhov] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:4fhov] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:4fhov] Token from header: true
[2026-01-28 14:32:24] info: [auth:4fhov] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:06e2h6] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:06e2h6] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:06e2h6] Token from header: true
[2026-01-28 14:32:24] info: [auth:06e2h6] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:2i5u4] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:2i5u4] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:2i5u4] Token from header: true
[2026-01-28 14:32:24] info: [auth:2i5u4] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:xpz21f] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:xpz21f] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:xpz21f] Token from header: true
[2026-01-28 14:32:24] info: [auth:xpz21f] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:32:24] info: [auth:3e4ivh] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:3e4ivh] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:3e4ivh] Token from header: true
[2026-01-28 14:32:24] info: [auth:3e4ivh] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:l9b1vi] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:l9b1vi] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:l9b1vi] Token from header: true
[2026-01-28 14:32:24] info: [auth:l9b1vi] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing compression with algorithm: brotli
[2026-01-28 14:32:24] info: [auth:uzd8ls] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:uzd8ls] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:uzd8ls] Token from header: true
[2026-01-28 14:32:24] info: [auth:uzd8ls] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:0squ] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:0squ] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:0squ] Token from header: true
[2026-01-28 14:32:24] info: [auth:0squ] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing compression with algorithm: deflate
[2026-01-28 14:32:24] info: [auth:a7iuxa] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:a7iuxa] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:a7iuxa] Token from header: true
[2026-01-28 14:32:24] info: [auth:a7iuxa] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:13v56p] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:13v56p] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:13v56p] Token from header: true
[2026-01-28 14:32:24] info: [auth:13v56p] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing offset pagination with 100 items
[2026-01-28 14:32:24] info: [auth:euyylm] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:euyylm] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:euyylm] Token from header: true
[2026-01-28 14:32:24] info: [auth:euyylm] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:6dvis7] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:6dvis7] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:6dvis7] Token from header: true
[2026-01-28 14:32:24] info: [auth:6dvis7] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing cursor pagination with 100 items
[2026-01-28 14:32:24] info: [auth:c344i4] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:c344i4] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:c344i4] Token from header: true
[2026-01-28 14:32:24] info: [auth:c344i4] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:q0hotr] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:q0hotr] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:q0hotr] Token from header: true
[2026-01-28 14:32:24] info: [auth:q0hotr] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:amb4q] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:amb4q] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:amb4q] Token from header: true
[2026-01-28 14:32:24] info: [auth:amb4q] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:banz1] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:banz1] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:banz1] Token from header: true
[2026-01-28 14:32:24] info: [auth:banz1] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:14p3xa] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:14p3xa] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:14p3xa] Token from header: true
[2026-01-28 14:32:24] info: [auth:14p3xa] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:tnqk9] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:tnqk9] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:tnqk9] Token from header: true
[2026-01-28 14:32:24] info: [auth:tnqk9] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:i1zoon] Starting auth for GET /recommendations
[2026-01-28 14:32:24] info: [auth:i1zoon] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:i1zoon] Token from header: true
[2026-01-28 14:32:24] info: [auth:i1zoon] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:k3nim] Starting auth for GET /recommendations
[2026-01-28 14:32:24] info: [auth:k3nim] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:k3nim] Token from header: true
[2026-01-28 14:32:24] info: [auth:k3nim] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Generating optimization recommendations
[2026-01-28 14:32:24] info: [auth:9hlo4] Starting auth for GET /metrics
[2026-01-28 14:32:24] info: [auth:9hlo4] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:9hlo4] Token from header: true
[2026-01-28 14:32:24] warn: [auth:9hlo4] Invalid or expired token for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:32:24] info: [auth:ua9xmk] Starting auth for GET /metrics
[2026-01-28 14:32:24] info: [auth:ua9xmk] Token from cookie: false
[2026-01-28 14:32:24] warn: [auth:ua9xmk] Access token is required for GET /metrics from ::ffff:127.0.0.1
[2026-01-28 14:32:24] info: [auth:5qphg] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:5qphg] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:5qphg] Token from header: true
[2026-01-28 14:32:24] info: [auth:5qphg] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:bq3vui] Starting auth for POST /test-compression
[2026-01-28 14:32:24] info: [auth:bq3vui] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:bq3vui] Token from header: true
[2026-01-28 14:32:24] info: [auth:bq3vui] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing compression with algorithm: gzip
[2026-01-28 14:32:24] info: [auth:16ew9a] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:16ew9a] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:16ew9a] Token from header: true
[2026-01-28 14:32:24] info: [auth:16ew9a] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [auth:ta3u6d] Starting auth for POST /test-pagination
[2026-01-28 14:32:24] info: [auth:ta3u6d] Token from cookie: false
[2026-01-28 14:32:24] info: [auth:ta3u6d] Token from header: true
[2026-01-28 14:32:24] info: [auth:ta3u6d] Authenticated user 465382c1-1d83-4d57-86ad-bd74a511b69e
[2026-01-28 14:32:24] info: [ApiOptimization] Testing offset pagination with 1000 items
PASS __tests__/routes/apiOptimizationRoutes.test.mjs
  API Optimization Routes
    GET /api/optimization/metrics
      ‚àö retrieves optimization metrics successfully (36 ms)
      ‚àö requires authentication (14 ms)
    GET /api/optimization/performance
      ‚àö retrieves performance analytics with default timeframe (29 ms)
      ‚àö accepts different timeframe parameters (98 ms)
      ‚àö validates timeframe parameter (24 ms)
    GET /api/optimization/compression-stats
      ‚àö retrieves compression statistics successfully (26 ms)
    GET /api/optimization/cache-analytics
      ‚àö retrieves cache analytics successfully (28 ms)
    POST /api/optimization/test-compression
      ‚àö tests compression on sample data successfully (33 ms)
      ‚àö validates required data parameter (23 ms)
      ‚àö accepts different compression algorithms (67 ms)
    POST /api/optimization/test-pagination
      ‚àö tests offset pagination successfully (25 ms)
      ‚àö tests cursor pagination successfully (23 ms)
      ‚àö validates pagination parameters (65 ms)
    GET /api/optimization/recommendations
      ‚àö generates optimization recommendations successfully (26 ms)
    Error Handling
      ‚àö handles invalid authentication tokens (14 ms)
      ‚àö handles missing authorization header (16 ms)
    Performance Validation
      ‚àö compression test shows meaningful results (25 ms)
      ‚àö pagination test shows performance metrics (23 ms)

[2026-01-28 14:32:24] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:24] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:24] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:24] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:24] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 14:32:24] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
[2026-01-28 14:32:24] warn: [API Key] Invalid or missing API key
[2026-01-28 14:32:24] warn: [API Key] Invalid or missing API key
[2026-01-28 14:32:24] warn: [API Key] Invalid or missing API key
[2026-01-28 14:32:24] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:32:24] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:32:24] warn: CORS blocked request from origin: https://evil.com
[2026-01-28 14:32:24] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:32:24] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5
        at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\middleware\security.test.mjs:447:7)

    [0m [90m 445 |[39m
     [90m 446 |[39m       [90m// First request should succeed[39m
    [31m[1m>[22m[39m[90m 447 |[39m       [36mawait[39m testLimiter(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 448 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 449 |[39m
     [90m 450 |[39m       [90m// Reset mocks[39m[0m

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5
      at Object.<anonymous> (__tests__/middleware/security.test.mjs:447:7)

[2026-01-28 14:32:24] warn: Rate limit exceeded for IP: 192.168.1.100
PASS __tests__/middleware/security.test.mjs
  Security Middleware
    enforceHttps()
      Development environment
        ‚àö should allow HTTP requests in development (4 ms)
      Production environment
        ‚àö should allow HTTPS requests (req.secure) (2 ms)
        ‚àö should allow HTTPS requests (x-forwarded-proto header) (2 ms)
        ‚àö should allow HTTPS requests (x-forwarded-ssl header) (1 ms)
        ‚àö should redirect HTTP to HTTPS with 301 status (10 ms)
        ‚àö should preserve query parameters in redirect (2 ms)
    addSecurityHeaders()
      ‚àö should add HSTS header in production (1 ms)
      ‚àö should NOT add HSTS header in development (2 ms)
      ‚àö should add X-Frame-Options header (2 ms)
      ‚àö should add X-Content-Type-Options header (1 ms)
      ‚àö should add X-XSS-Protection header (1 ms)
      ‚àö should add Referrer-Policy header (2 ms)
      ‚àö should add Permissions-Policy header (1 ms)
      ‚àö should add all 6 security headers in production (2 ms)
    validateApiKey()
      Requests WITH origin header
        ‚àö should skip API key validation for browser requests (2 ms)
        ‚àö should skip validation even if X-API-Key is missing (5 ms)
      Requests WITHOUT origin header (mobile/API clients)
        ‚àö should accept valid API key (2 ms)
        ‚àö should reject missing API key (3 ms)
        ‚àö should reject invalid API key (3 ms)
        ‚àö should be case-sensitive for API key (3 ms)
      Missing API_KEY environment variable
        ‚àö should allow requests without API key (backward compatibility) (3 ms)
        ‚àö should log warning when API_KEY not configured (2 ms)
    CORS Configuration
      ‚àö should have credentials enabled (1 ms)
      ‚àö should allow standard HTTP methods (1 ms)
      ‚àö should allow required headers (2 ms)
      corsOptions.origin()
        ‚àö should allow localhost:3000 (5 ms)
        ‚àö should allow localhost:3001 (1 ms)
        ‚àö should allow 127.0.0.1:3000 (1 ms)
        ‚àö should allow additional origins from environment (1 ms)
        ‚àö should block unknown origins (3 ms)
        ‚àö should allow requests with no origin (mobile apps) (2 ms)
        ‚àö should allow requests with null origin (2 ms)
    createRateLimiter()
      ‚àö should create a rate limiter with custom window and max (6 ms)
      ‚àö should create rate limiter with default values (2 ms)
      ‚àö should return rate limiter middleware (2 ms)
    Rate Limiter Instances
      ‚àö should export apiLimiter (1 ms)
      ‚àö should trigger rate limit handler when limit exceeded (8 ms)
    createSecurityMiddleware()
      ‚àö should return an array of middleware functions (2 ms)
      ‚àö should include all required middleware in correct order (2 ms)

[2026-01-28 14:32:25] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:25] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:25] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:25] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:25] warn: [Session] Session expired due to inactivity
[2026-01-28 14:32:25] warn: [Session] Session expired due to inactivity
[2026-01-28 14:32:25] error: [Session] Error tracking session activity: Database connection error
[2026-01-28 14:32:25] warn: [Session] Too many concurrent sessions
[2026-01-28 14:32:25] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:32:25] warn: [Session] Too many concurrent sessions
[2026-01-28 14:32:25] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:32:25] warn: [Session] Too many concurrent sessions
[2026-01-28 14:32:25] info: [Session] Removed oldest sessions to enforce limit
[2026-01-28 14:32:25] error: [Session] Error enforcing concurrent sessions: Database query failed
[2026-01-28 14:32:25] error: [Session] Error fetching active sessions: Database connection lost
[2026-01-28 14:32:25] info: [Session] Session revoked by user
[2026-01-28 14:32:25] error: [Session] Error revoking session: Database connection failed
PASS __tests__/middleware/sessionManagement.test.mjs
  Session Management Middleware
    trackSessionActivity()
      ‚àö should skip tracking for unauthenticated requests (10 ms)
      ‚àö should skip tracking when no user ID (1 ms)
      ‚àö should skip tracking when no refresh token cookie (49 ms)
      Active session tracking
        ‚àö should update lastActivityAt for valid session (14 ms)
        ‚àö should allow session within timeout window (14 minutes) (10 ms)
        ‚àö should expire session after 15 minutes of inactivity (15 ms)
        ‚àö should clear cookies when session expires (10 ms)
        ‚àö should use createdAt if lastActivityAt is null (9 ms)
        ‚àö should handle database errors gracefully (7 ms)
        ‚àö should catch and log Prisma errors during activity tracking (8 ms)
      Custom timeout configuration
        ‚àö should respect custom SESSION_TIMEOUT_MS (9 ms)
    enforceConcurrentSessions()
      ‚àö should skip enforcement for unauthenticated requests (5 ms)
      ‚àö should allow user with 1 session (8 ms)
      ‚àö should allow user with exactly MAX_CONCURRENT_SESSIONS (5) (11 ms)
      ‚àö should delete oldest session when limit exceeded (6 sessions) (102 ms)
      ‚àö should delete multiple oldest sessions when far over limit (10 sessions) (172 ms)
      ‚àö should keep most recent sessions (132 ms)
      ‚àö should handle database errors gracefully (3 ms)
      ‚àö should catch and log Prisma errors during session enforcement (4 ms)
      Custom limit configuration
        ‚àö should respect custom MAX_CONCURRENT_SESSIONS (90 ms)
    addSessionSecurityHeaders()
      ‚àö should add cache control headers (3 ms)
      ‚àö should add pragma header (2 ms)
      ‚àö should add expires header (1 ms)
      ‚àö should call next() to continue middleware chain (2 ms)
    getActiveSessions()
      ‚àö should return 401 for unauthenticated requests (1 ms)
      ‚àö should return empty array for user with no sessions (5 ms)
      ‚àö should return all active sessions for user (6 ms)
      ‚àö should NOT expose token values in response (4 ms)
      ‚àö should handle database errors (8 ms)
    revokeSession()
      ‚àö should return 401 for unauthenticated requests (2 ms)
      ‚àö should return 400 when sessionId missing (3 ms)
      ‚àö should successfully revoke own session (8 ms)
      ‚àö should return 404 when session not found (4 ms)
      ‚àö should NOT allow revoking another user's session (7 ms)
      ‚àö should handle database errors (3 ms)

[2026-01-28 14:32:26] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:26] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:26] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:26] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:26] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:26] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:32:26] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:32:26.924Z"}
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:26] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:26] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:26.938Z"}
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:26] info: [cronJobService] Token cleanup completed. Removed 5 expired/invalidated tokens
[2026-01-28 14:32:26] info: [cronJobService] Manual token cleanup completed: {"removed":5,"expired":5,"invalidated":0,"timestamp":"2026-01-28T19:32:26.960Z"}
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:26] info: [cronJobService] Token cleanup completed. Removed 2 expired/invalidated tokens
[2026-01-28 14:32:26] info: [cronJobService] Manual token cleanup completed: {"removed":2,"expired":2,"invalidated":0,"timestamp":"2026-01-28T19:32:26.973Z"}
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:26] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:26] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:26] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:26] info: [cronJobService] Token cleanup completed. Removed 3 expired/invalidated tokens
[2026-01-28 14:32:26] info: [cronJobService] Manual token cleanup completed: {"removed":3,"expired":3,"invalidated":0,"timestamp":"2026-01-28T19:32:26.991Z"}
[2026-01-28 14:32:26] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:26] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:27.007Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:27.019Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:32:27.032Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] error: [TokenRotation] Error cleaning up tokens: Database connection failed
[2026-01-28 14:32:27] error: [cronJobService] Token cleanup error: Database connection failed
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2026-01-28T19:32:27.046Z","error":"Database connection failed"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:27] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Initializing cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs initialized and started
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] Stopped job: weeklySalaries
[2026-01-28 14:32:27] info: [cronJobService] Stopped job: tokenCleanup
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:27.080Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 10 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":10,"expired":10,"invalidated":0,"timestamp":"2026-01-28T19:32:27.107Z"}
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:27.150Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2026-01-28T19:32:27.166Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2026-01-28T19:32:27.180Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
[2026-01-28 14:32:27] info: [cronJobService] Manually triggering token cleanup...
[2026-01-28 14:32:27] info: [cronJobService] Starting expired token cleanup...
[2026-01-28 14:32:27] info: [TokenRotation] Token cleanup completed
[2026-01-28 14:32:27] info: [cronJobService] Token cleanup completed. Removed 100 expired/invalidated tokens
[2026-01-28 14:32:27] info: [cronJobService] Manual token cleanup completed: {"removed":100,"expired":100,"invalidated":0,"timestamp":"2026-01-28T19:32:27.401Z"}
[2026-01-28 14:32:27] info: [cronJobService] Stopping all cron jobs...
[2026-01-28 14:32:27] info: [cronJobService] All cron jobs stopped
PASS __tests__/services/cronJobService.test.mjs
  Cron Job Service
    initializeCronJobs()
      ‚àö should initialize weekly salary job (172 ms)
      ‚àö should initialize token cleanup job (13 ms)
      ‚àö should start all jobs after initialization (10 ms)
      ‚àö should initialize exactly 2 cron jobs (7 ms)
      ‚àö should use UTC timezone for all jobs (7 ms)
    stopCronJobs()
      ‚àö should stop all running jobs (12 ms)
      ‚àö should handle stopping when no jobs initialized (6 ms)
      ‚àö should clear all job references (8 ms)
    getCronJobStatus()
      ‚àö should return status for all initialized jobs (11 ms)
      ‚àö should return empty status when no jobs initialized (4 ms)
      ‚àö should include running and scheduled flags (10 ms)
    triggerTokenCleanup() - Manual Execution
      ‚àö should remove expired tokens (73 ms)
      ‚àö should NOT remove valid tokens (14 ms)
      ‚àö should remove multiple expired tokens (19 ms)
      ‚àö should remove expired tokens for all users (13 ms)
      ‚àö should remove only expired tokens from mixed set (23 ms)
      ‚àö should return timestamp of cleanup (12 ms)
      ‚àö should handle cleanup when no expired tokens exist (11 ms)
      ‚àö should handle tokens expiring at exact current time (15 ms)
      ‚àö should include error message on failure (12 ms)
    Token Cleanup Scheduling
      ‚àö should schedule daily cleanup at 3 AM UTC (9 ms)
      ‚àö should execute token cleanup callback when triggered (16 ms)
    Edge Cases
      ‚àö should handle tokens with null expiresAt (should not crash) (8 ms)
      ‚àö should handle concurrent cleanup executions (73 ms)
      ‚àö should handle very old expired tokens (13 ms)
      ‚àö should handle tokens expiring in the future (14 ms)
    Performance
      ‚àö should efficiently remove large number of expired tokens (221 ms)

[2026-01-28 14:32:27] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:27] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:27] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:27] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitMetadataValidation.test.mjs
  Trait Metadata Validation
    Required Trait Structure
      ‚àö should have complete metadata for confident (4 ms)
      ‚àö should have complete metadata for resilient (1 ms)
      ‚àö should have complete metadata for presentationBoosted (1 ms)
      ‚àö should have complete metadata for bonded (9 ms)
      ‚àö should have complete metadata for fearful (1 ms)
      ‚àö should have complete metadata for easilyOverwhelmed (1 ms)
    Trait Categories
      ‚àö should have epigenetic traits (2 ms)
      ‚àö should have bond traits (1 ms)
      ‚àö should have situational traits (1 ms)
      ‚àö should categorize all traits correctly (1 ms)
    Trait Descriptions
      ‚àö should have proper description format for confident trait (1 ms)
      ‚àö should have proper description format for resilient trait (1 ms)
      ‚àö should have proper description format for presentationBoosted trait (1 ms)
      ‚àö should have proper description format for bonded trait (1 ms)
      ‚àö should have proper description format for fearful trait (1 ms)
      ‚àö should have proper description format for easilyOverwhelmed trait (1 ms)
      ‚àö should have descriptions for all traits (10 ms)
    Trait Conflicts
      ‚àö should have bidirectional conflicts (5 ms)
      ‚àö should validate specific conflict relationships (1 ms)
      ‚àö should not have self-conflicts (2 ms)
    Task Influence Map Integration
      ‚àö should have all traits referenced in task influence map (4 ms)
      ‚àö should validate specific task-trait mappings (1 ms)
      ‚àö should have valid daily values for all tasks (2 ms)
    Trait Type Distribution
      ‚àö should have balanced positive and negative traits
      ‚àö should have appropriate rarity distribution (1 ms)
    Foal Development Integration
      ‚àö should support foal milestone evaluation traits (1 ms)
      ‚àö should support presentation and show traits (2 ms)
    Error Handling
      ‚àö should handle invalid trait names gracefully (1 ms)
      ‚àö should handle empty category queries (3 ms)

[2026-01-28 14:32:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:28] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:32:28] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:32:28] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:28] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:28] info: [UserDocService] Built search index with 111 terms
[2026-01-28 14:32:28] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting all documentation list
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "horse training"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting table of contents
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: non-existent
[2026-01-28 14:32:28] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting sections for document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting sections for document: non-existent
[2026-01-28 14:32:28] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching in document "non-existent" for: "test"
[2026-01-28 14:32:28] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:32:28] info: [UserDocRoutes] Refreshing documentation cache
[2026-01-28 14:32:28] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:28] info: [UserDocService] Built search index with 111 terms
[2026-01-28 14:32:28] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "horse"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "training"
[2026-01-28 14:32:28] info: [UserDocRoutes] Searching documentation for: "competition"
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: strategy-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting documentation analytics
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
[2026-01-28 14:32:28] info: [UserDocRoutes] Getting document: feature-guide
PASS __tests__/routes/userDocumentationRoutes.test.mjs
  User Documentation Routes
    GET /api/user-docs
      ‚àö retrieves all documentation successfully (36 ms)
      ‚àö includes table of contents in response (15 ms)
    GET /api/user-docs/search
      ‚àö searches documentation successfully (16 ms)
      ‚àö validates search query parameter (13 ms)
      ‚àö respects search parameters (12 ms)
      ‚àö handles empty search results (10 ms)
    GET /api/user-docs/analytics
      ‚àö retrieves analytics successfully (53 ms)
    GET /api/user-docs/toc
      ‚àö retrieves table of contents successfully (12 ms)
    GET /api/user-docs/:docName
      ‚àö retrieves specific document successfully (16 ms)
      ‚àö returns 404 for non-existent document (13 ms)
      ‚àö serves markdown format correctly (14 ms)
      ‚àö serves text format correctly (12 ms)
      ‚àö tracks view analytics (35 ms)
    GET /api/user-docs/:docName/sections
      ‚àö retrieves document sections successfully (17 ms)
      ‚àö returns 404 for non-existent document sections (13 ms)
    GET /api/user-docs/:docName/search
      ‚àö searches within specific document successfully (14 ms)
      ‚àö validates search query for document search (9 ms)
      ‚àö highlights search terms in document search (10 ms)
      ‚àö returns 404 for document search on non-existent document (14 ms)
    POST /api/user-docs/refresh
      ‚àö refreshes documentation cache successfully (17 ms)
    GET /api/user-docs/health
      ‚àö returns system health status (13 ms)
    Error Handling
      ‚àö handles invalid route gracefully (10 ms)
      ‚àö handles malformed search parameters (10 ms)
    Integration with Documentation Service
      ‚àö search analytics are tracked across API calls (43 ms)
      ‚àö view analytics are tracked across API calls (43 ms)
      ‚àö document content is consistent across different endpoints (24 ms)

[2026-01-28 14:32:28] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:28] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:28] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:28] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:29] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:29] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:29] info: [SwaggerSetup] OpenAPI specification loaded successfully
[2026-01-28 14:32:29] info: [SwaggerSetup] API documentation setup completed
[2026-01-28 14:32:29] info: [SwaggerSetup] Interactive docs available at: /api-docs
[2026-01-28 14:32:29] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json
[2026-01-28 14:32:29] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml
PASS __tests__/integration/security/rate-limit-enforcement.test.mjs
  Rate Limit Enforcement Integration Tests
    ‚àö should pass a dummy test with app (2 ms)

[2026-01-28 14:32:29] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:29] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:29] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:29] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:30] warn: [ResourceManagement] Slow request detected: GET /test-slow took 11ms
[2026-01-28 14:32:30] warn: [MemoryMonitoring] Memory threshold exceeded: 2184MB
[2026-01-28 14:32:30] warn: [MemoryMonitoring] Memory threshold exceeded: 2190MB
[2026-01-28 14:32:30] warn: [DatabaseMonitoring] High query count: 15 queries in 1ms for GET /test-many-queries
[2026-01-28 14:32:30] warn: [ResourceManagement] Request timeout: GET /test-timeout
[2026-01-28 14:32:30] warn: [MemoryMonitoring] Memory threshold exceeded: 2189MB
[2026-01-28 14:32:30] warn: [MemoryMonitoring] Memory threshold exceeded: 2181MB
[2026-01-28 14:32:30] warn: [ResourceManagement] Slow request detected: GET /test-thresholds took 6ms
[2026-01-28 14:32:30] warn: [ResourceManagement] High memory usage: GET /test-thresholds used 1MB
PASS __tests__/middleware/resourceManagement.test.mjs
  Resource Management Middleware
    Resource Management Middleware
      ‚àö adds resource tracking helpers to request (27 ms)
      ‚àö tracks and cleans up timers automatically (12 ms)
      ‚àö adds performance headers to response (23 ms)
      ‚àö handles request errors gracefully (125 ms)
      ‚àö tracks memory usage per request (10 ms)
      ‚àö warns about slow requests (25 ms)
    Memory Monitoring Middleware
      ‚àö adds memory headers to response (12 ms)
      ‚àö handles memory threshold checking (15 ms)
      ‚àö triggers GC when enabled and threshold exceeded (1 ms)
    Database Connection Middleware
      ‚àö tracks database queries (11 ms)
      ‚àö warns about high query counts (11 ms)
      ‚àö restores original methods after request (116 ms)
    Request Timeout Middleware
      ‚àö handles normal requests without timeout (10 ms)
      ‚àö times out slow requests (118 ms)
      ‚àö tracks timeout timer as resource (13 ms)
      ‚àö cleans up timeout timer on completion (9 ms)
    Middleware Integration
      ‚àö multiple middleware work together correctly (12 ms)
      ‚àö handles errors across middleware stack (15 ms)
    Configuration Options
      ‚àö respects disabled tracking options (11 ms)
      ‚àö uses custom thresholds correctly (21 ms)

[2026-01-28 14:32:30] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:30] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:30] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:30] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/foalAuthRoutes.test.mjs
  Foal routes auth enforcement
    ‚àö rejects unauthenticated access to foal development (20 ms)
    ‚àö rejects unauthenticated access to foal enrichment (25 ms)
    ‚àö rejects unauthenticated access to foal activity (10 ms)
    ‚àö rejects unauthenticated access to advance-day (9 ms)
    ‚àö rate limits foal activity endpoints (41 ms)
    ‚àö rate limits foal enrichment endpoints (36 ms)
    ‚àö rejects access to foal development when not owned (10 ms)

[2026-01-28 14:32:31] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:31] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:31] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:31] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomHiringWorkflow.test.mjs
  Groom Hiring Workflow Tests
    1. Required Field Validation
      ‚àö should validate name is required (70 ms)
      ‚àö should validate speciality is required (12 ms)
      ‚àö should validate skill_level is required (10 ms)
      ‚àö should validate personality is required (14 ms)
      ‚àö should validate all required fields at once (10 ms)
    2. Field Value Validation
      ‚àö should validate speciality against defined values (9 ms)
      ‚àö should validate skill_level against defined values (9 ms)
      ‚àö should validate personality against defined values (9 ms)
      ‚àö should accept all valid speciality values (50 ms)
      ‚àö should accept all valid skill_level values (36 ms)
      ‚àö should accept all valid personality values (37 ms)
    3. Optional Field Handling
      ‚àö should use default experience value when not provided (14 ms)
      ‚àö should calculate session rate based on skill level when not provided (16 ms)
      ‚àö should use provided session rate when specified (19 ms)
      ‚àö should store bio when provided (17 ms)
      ‚àö should store availability when provided (16 ms)
    4. User Account Hiring Limits
      ‚àö should enforce maximum groom limit per user (77 ms)
      ‚àö should validate user has sufficient funds for hiring (15 ms)
      ‚àö should allow wealthy users to hire expensive grooms (14 ms)
    5. Error Handling & Edge Cases
      ‚àö should handle empty strings for required fields (10 ms)
      ‚àö should handle extremely long names (9 ms)
      ‚àö should handle negative experience values (8 ms)
      ‚àö should handle negative session rates (13 ms)
      ‚àö should handle missing user ID (11 ms)
    6. System Integration
      ‚àö should retrieve groom definitions with all required data (10 ms)

[2026-01-28 14:32:32] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:32] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:32] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:32] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148058 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148058
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148058 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148058 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148058
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148058 is eligible to train in Dressage
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148060 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148060
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148060 is 2 years old
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148060 is too young (2 years old)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148061 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148061 still in cooldown for any training (4 days remaining)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148062 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148062
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148062 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148062 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148062: Tue Jan 20 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148062 is eligible to train in Dressage
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:32] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:32:32] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer
[2026-01-28 14:32:32] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:32:32] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148063 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148063
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148063 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148063 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148063: Wed Jan 21 2026 14:32:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148063 is eligible to train in Dressage
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Attempting to train horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148058
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148058 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148058 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148058
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148058 is eligible to train in Racing
[2026-01-28 14:32:32] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 148058)
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Horse 148058 has traits: 
[2026-01-28 14:32:32] info: [trainingModel.logTrainingSession] Logging training session for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9061
[2026-01-28 14:32:32] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 148058 by +5
[2026-01-28 14:32:32] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 148058 by +5
[2026-01-28 14:32:32] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 148058: 0 -> 5
[2026-01-28 14:32:32] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 148058
[2026-01-28 14:32:32] info: [xpLogModel.logXpEvent] Logging XP event: User 418eff5f-c9ed-49f4-80ea-697dd56271e0, Amount: 5, Reason: Trained horse Eligible Horse in Racing
[2026-01-28 14:32:32] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4483, User 418eff5f-c9ed-49f4-80ea-697dd56271e0, Amount: 5
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Awarded 5 XP to user 418eff5f-c9ed-49f4-80ea-697dd56271e0 for training
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Successfully trained horse 148058 in Racing (Log ID: 9061, Score +5)
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Attempting to train horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148060
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148060 is 2 years old
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148060 is too young (2 years old)
[2026-01-28 14:32:32] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Attempting to train horse 148061 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148061 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148061 still in cooldown for any training (4 days remaining)
[2026-01-28 14:32:32] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Attempting to train horse 148058 in Dressage
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148058 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148058
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148058 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148058 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148058
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148058 is eligible to train in Dressage
[2026-01-28 14:32:32] info: [horseModel.getHorseById] Successfully found horse: Eligible Horse (ID: 148058)
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Horse 148058 has traits: 
[2026-01-28 14:32:32] info: [trainingModel.logTrainingSession] Logging training session for horse 148058 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9062
[2026-01-28 14:32:32] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 148058 by +5
[2026-01-28 14:32:32] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 148058 by +5
[2026-01-28 14:32:32] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 148058: 0 -> 5
[2026-01-28 14:32:32] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 148058
[2026-01-28 14:32:32] info: [xpLogModel.logXpEvent] Logging XP event: User 418eff5f-c9ed-49f4-80ea-697dd56271e0, Amount: 5, Reason: Trained horse Eligible Horse in Dressage
[2026-01-28 14:32:32] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4484, User 418eff5f-c9ed-49f4-80ea-697dd56271e0, Amount: 5
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Awarded 5 XP to user 418eff5f-c9ed-49f4-80ea-697dd56271e0 for training
[2026-01-28 14:32:32] info: [trainingController.trainHorse] Successfully trained horse 148058 in Dressage (Log ID: 9062, Score +5)
[2026-01-28 14:32:32] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148058
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148058 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148058 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148058
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148058 is eligible to train in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148058
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148058 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] No training records found for horse 148058 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148058 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148058
[2026-01-28 14:32:32] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148061 in Dressage
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148061 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148061 still in cooldown for any training (4 days remaining)
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148061 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] No training records found for horse 148061 in Dressage
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148064 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148064 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148064
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148064 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148064 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148064: Tue Jan 20 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148064 is eligible to train in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148064
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148064 is 4 years old
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148064 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] Last training date for horse 148064 in Racing: Tue Jan 20 2026 14:32:32 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148064 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148064: Tue Jan 20 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:32] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingController.canTrain] Checking training eligibility for horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148060
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148060 is 2 years old
[2026-01-28 14:32:32] info: [trainingController.canTrain] Horse 148060 is too young (2 years old)
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Getting age for horse 148060
[2026-01-28 14:32:32] info: [trainingModel.getHorseAge] Horse 148060 is 2 years old
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getLastTrainingDate] No training records found for horse 148060 in Racing
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148060 across all disciplines
[2026-01-28 14:32:32] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148060
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148061 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148061 still in cooldown for any training (4 days remaining)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148061 in Show Jumping
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148061
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148061 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148061 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148061: Sun Jan 25 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148061 still in cooldown for any training (4 days remaining)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148065 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148065
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148065 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148065 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148065: Wed Jan 21 2026 14:32:32 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148065 is eligible to train in Racing
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user e9a11c7e-1823-4715-95a5-e80facd8b90a
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] User e9a11c7e-1823-4715-95a5-e80facd8b90a has no horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee
[2026-01-28 14:32:33] warn: [trainingController.getTrainableHorses] User aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee not found
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 4 horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 418eff5f-c9ed-49f4-80ea-697dd56271e0
[2026-01-28 14:32:33] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
[2026-01-28 14:32:33] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required
PASS tests/trainingController.test.mjs
  üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic
    canTrain
      ‚àö should return eligible true for horse that meets all requirements (15 ms)
      ‚àö should return eligible false for horse under 3 years old (8 ms)
      ‚àö should return eligible false for horse with recent training in any discipline (12 ms)
      ‚àö should return eligible true for horse with old training (8+ days ago) (26 ms)
      ‚àö should return eligible false for non-existent horse (7 ms)
      ‚àö should throw error for invalid horse ID (6 ms)
      ‚àö should throw error for missing discipline (6 ms)
      ‚àö should throw error for missing horse ID (3 ms)
      ‚àö should handle database errors gracefully (2 ms)
      ‚àö should calculate cooldown correctly for edge case (exactly 7 days) (17 ms)
    trainHorse
      ‚àö should successfully train eligible horse (41 ms)
      ‚àö should reject training for ineligible horse (under age) (10 ms)
      ‚àö should reject training for horse in cooldown (10 ms)
      ‚àö should handle training log errors gracefully (1 ms)
      ‚àö should award +5 XP after successful training (37 ms)
      ‚àö should handle XP system errors gracefully without breaking training (2 ms)
    getTrainingStatus
      ‚àö should return complete status for eligible horse with no training history (20 ms)
      ‚àö should return complete status for horse in active cooldown (20 ms)
      ‚àö should return complete status for horse with expired cooldown (29 ms)
      ‚àö should return status for ineligible horse (under age) (15 ms)
      ‚àö should handle database errors gracefully (2 ms)
    Integration scenarios
      ‚àö should handle different disciplines with global cooldown (18 ms)
      ‚àö should handle edge case of exactly 7 days cooldown (18 ms)
      ‚àö should handle complete training workflow (2 ms)
    getTrainableHorses
      ‚àö should return trainable horses for user with eligible horses (14 ms)
      ‚àö should return empty array for player with no horses (14 ms)
      ‚àö should return empty array for non-existent player (6 ms)
      ‚àö should filter out horses under 3 years old (9 ms)
      ‚àö should exclude horses with recent training (global cooldown) (11 ms)
      ‚àö should handle database errors gracefully for individual horses (2 ms)
      ‚àö should throw error for missing player ID (4 ms)
      ‚àö should handle player model errors (2 ms)
    trainRouteHandler
      ‚àö should handle successful training workflow - placeholder for integration testing (2 ms)
      ‚àö should handle validation errors - placeholder for integration testing (1 ms)
      ‚àö should handle missing data gracefully - placeholder for integration testing (1 ms)
      ‚àö should handle server errors gracefully - placeholder for integration testing (2 ms)
      ‚àö should handle trait effects in training - placeholder for integration testing (1 ms)

[2026-01-28 14:32:33] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:33] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:33] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:33] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148066
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148066 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148066 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148066
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148066 is eligible to train in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148067
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148067 is 2 years old
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148067 is too young (2 years old)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148068
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148068 is 5 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148068 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148068: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148068 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:33] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:32:33] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer
[2026-01-28 14:32:33] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:32:33] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required
[2026-01-28 14:32:33] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148071
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148071 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148071 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148071
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148071 is eligible to train in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148071
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148071 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] No training records found for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148071 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148071
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148071
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148071 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148071 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148071
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148071 is eligible to train in Racing
[2026-01-28 14:32:33] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 148071)
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Horse 148071 has traits: 
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Logging training session for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9066
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 148071 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 148071 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 148071: 0 -> 5
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 148071
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Logging XP event: User 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4485, User 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a, Amount: 5
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Awarded 5 XP to user 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a for training
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Successfully trained horse 148071 in Racing (Log ID: 9066, Score +5)
[2026-01-28 14:32:33] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148071
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148071 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148071 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148071: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148071 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148071
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148071 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148071 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Last training date for horse 148071 in Racing: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148071 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148071: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148067
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148067 is 2 years old
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148067 is too young (2 years old)
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148068
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148068 is 5 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148068 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148068: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148068 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:33] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Horse not found
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148066 in 
[2026-01-28 14:32:33] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:32:33] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required
[2026-01-28 14:32:33] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148066
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148066 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148066 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148066
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148066 is eligible to train in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148066
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148066 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] No training records found for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148066 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148066
[2026-01-28 14:32:33] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 148068 in Racing
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148068 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148068
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148068 is 5 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148068 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148068: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148068 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148068
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148068 is 5 years old
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 148068 in Racing
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Last training date for horse 148068 in Racing: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148068 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148068: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.getTrainingStatus] Cache MISS - Getting training status for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:33] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a1
[2026-01-28 14:32:33] warn: [trainingController.getTrainableHorses] User 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a1 not found
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a
[2026-01-28 14:32:33] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 3 horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 7a16fa63-0df9-4f32-b79f-3d22d9d9a35a
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148066
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148066 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148066 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148066
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148066 is eligible to train in Dressage
[2026-01-28 14:32:33] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 148066)
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Horse 148066 has traits: 
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Logging training session for horse 148066 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9067
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 148066 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 148066 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 148066: 0 -> 5
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 148066
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Logging XP event: User 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4486, User 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55, Amount: 5
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Awarded 5 XP to user 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55 for training
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Successfully trained horse 148066 in Dressage (Log ID: 9067, Score +5)
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Getting trainable horses for user 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55
[2026-01-28 14:32:33] info: [trainingModel.getRecentTrainingForMultipleHorses] Fetching latest training for 3 horses
[2026-01-28 14:32:33] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55
[2026-01-28 14:32:33] info: [trainingController.trainRouteHandler] Training request for horse 148072 in Show Jumping
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148072 in Show Jumping
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148072 in Show Jumping
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148072
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148072 is 4 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148072 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] No training records found for horse 148072
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148072 is eligible to train in Show Jumping
[2026-01-28 14:32:33] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 148072)
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Horse 148072 has traits: 
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Logging training session for horse 148072 in Show Jumping
[2026-01-28 14:32:33] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 9068
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 148072 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 148072 by +5
[2026-01-28 14:32:33] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 148072: 0 -> 5
[2026-01-28 14:32:33] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 148072
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Logging XP event: User 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping
[2026-01-28 14:32:33] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 4487, User 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55, Amount: 5
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Awarded 5 XP to user 2a6e1681-4b92-4eef-bb8b-f7faadc0fa55 for training
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Successfully trained horse 148072 in Show Jumping (Log ID: 9068, Score +5)
[2026-01-28 14:32:33] info: [trainingController.trainRouteHandler] Training request for horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148067 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148067
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148067 is 2 years old
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148067 is too young (2 years old)
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Horse is under age
[2026-01-28 14:32:33] info: [trainingController.trainRouteHandler] Training request for horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 148068 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 148068
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 148068 is 5 years old
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 148068 across all disciplines
[2026-01-28 14:32:33] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 148068: Wed Jan 28 2026 14:32:33 GMT-0500 (Eastern Standard Time) (discipline: Racing)
[2026-01-28 14:32:33] info: [trainingController.canTrain] Horse 148068 still in cooldown for any training (7 days remaining)
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse
[2026-01-28 14:32:33] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Getting age for horse 99999
[2026-01-28 14:32:33] info: [trainingModel.getHorseAge] Horse 99999 not found or missing dateOfBirth
[2026-01-28 14:32:33] warn: [trainingController.canTrain] Horse 99999 not found
[2026-01-28 14:32:33] warn: [trainingController.trainHorse] Training rejected: Horse not found
[2026-01-28 14:32:33] info: [trainingController.trainRouteHandler] Training request for horse 148066 in 
[2026-01-28 14:32:33] info: [trainingController.trainHorse] Attempting to train horse 148066 in 
[2026-01-28 14:32:33] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required
[2026-01-28 14:32:33] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required
[2026-01-28 14:32:33] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required
PASS tests/trainingController-business-logic.test.mjs
  üèãÔ∏è INTEGRATION: Training Controller Business Logic - Complete Training Workflow
    BUSINESS RULE: canTrain() Function Validation
      ‚àö RETURNS eligible true for horse that meets all requirements (12 ms)
      ‚àö RETURNS eligible false for horse under 3 years old (8 ms)
      ‚àö RETURNS eligible false for horse with recent training (global cooldown) (8 ms)
      ‚àö RETURNS eligible false for non-existent horse (6 ms)
      ‚àö THROWS error for invalid input parameters (6 ms)
    BUSINESS RULE: trainHorse() Function Complete Workflow
      ‚àö EXECUTES successful training workflow for eligible horse (80 ms)
      ‚àö RETURNS error for ineligible horse (age restriction) (7 ms)
      ‚àö RETURNS error for horse in cooldown (9 ms)
      ‚àö RETURNS error for non-existent horse (9 ms)
      ‚àö THROWS error for invalid discipline (3 ms)
    BUSINESS RULE: getTrainingStatus() Function Validation
      ‚àö RETURNS accurate status for horse with no training history (18 ms)
      ‚àö RETURNS accurate status for horse with training history (18 ms)
      ‚àö RETURNS error status for non-existent horse (17 ms)
    BUSINESS RULE: getTrainableHorses() Function Validation
      ‚àö RETURNS empty array for user with no horses (4 ms)
      ‚àö RETURNS array of trainable horses for user (9 ms)
      ‚àö RETURNS empty array after training (horse in cooldown) (40 ms)
    API INTEGRATION: trainRouteHandler() Function Validation
      ‚àö PROCESSES valid training request and RETURNS success response (39 ms)
      ‚àö RETURNS error response for ineligible horse (10 ms)
      ‚àö RETURNS error response for horse in cooldown (10 ms)
      ‚àö RETURNS error response for non-existent horse (8 ms)
      ‚àö RETURNS error response for invalid discipline (7 ms)

[2026-01-28 14:32:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:34] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:34] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:34] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:34] info: Created legacy prot√©g√© Young Apprentice (ID: 74172) from mentor Retired Master Groom 1769628754304 (ID: 74171)
[2026-01-28 14:32:34] info: Inherited perk: Gentle Hands
[2026-01-28 14:32:34] error: Error generating legacy prot√©g√© for mentor 74174: Mentor groom 74174 is not eligible for legacy creation: insufficient_level
[2026-01-28 14:32:34] info: Created legacy prot√©g√© History Test Apprentice (ID: 74178) from mentor Retired Master Groom 1769628754392 (ID: 74177)
[2026-01-28 14:32:34] info: Inherited perk: Patience Mastery
PASS tests/services/groomLegacyService.test.mjs
  Groom Legacy Service
    Legacy Eligibility
      ‚àö should identify eligible retired groom (77 ms)
      ‚àö should reject non-retired groom (35 ms)
      ‚àö should reject low-level retired groom (21 ms)
      ‚àö should reject groom with existing legacy (27 ms)
    Prot√©g√© Generation
      ‚àö should generate prot√©g√© with inherited perks (33 ms)
      ‚àö should reject generation for ineligible mentor (23 ms)
    Legacy Perks
      ‚àö should get available perks for personality type (16 ms)
      ‚àö should handle unknown personality type (13 ms)
    Legacy History
      ‚àö should track user legacy history (34 ms)

[2026-01-28 14:32:34] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:34] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:34] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:34] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/environmentalTriggerSystem.test.mjs
  Environmental Trigger System
    detectEnvironmentalTriggers
      ‚àö should detect environmental triggers from interaction patterns (58 ms)
      ‚àö should handle horses with no environmental exposure (4 ms)
      ‚àö should detect multiple environmental trigger types (5 ms)
    calculateTriggerThresholds
      ‚àö should calculate age-appropriate trigger thresholds (5 ms)
      ‚àö should apply stress-based threshold modifications (4 ms)
    evaluateTraitExpressionProbability
      ‚àö should calculate trait expression probability based on environmental exposure (9 ms)
      ‚àö should handle trait expression for different trait types (11 ms)
    processSeasonalTriggers
      ‚àö should process seasonal environmental triggers (5 ms)
      ‚àö should handle different seasonal variations (5 ms)
    analyzeStressEnvironmentTriggers
      ‚àö should analyze stress-based environmental triggers (6 ms)
    trackCumulativeExposure
      ‚àö should track cumulative environmental exposure over time (6 ms)
    assessCriticalPeriodSensitivity
      ‚àö should assess critical period environmental sensitivity (3 ms)
      ‚àö should show reduced sensitivity for older horses (2 ms)
    generateEnvironmentalReport
      ‚àö should generate comprehensive environmental analysis report (133 ms)

[2026-01-28 14:32:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:35] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:35] info: [facilityManagementService.getUserFacilities] Getting facilities for user fc204b48-9a35-430e-b11b-c45abbfa9908
[2026-01-28 14:32:35] info: [facilityManagementService.getUserFacilities] Getting facilities for user 378e1a2c-d902-4f4d-8bb9-5fc74afff264
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2
[2026-01-28 14:32:35] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3
[2026-01-28 14:32:35] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4
[2026-01-28 14:32:35] info: [facilityManagementService.purchaseFacilityUpgrade] User a84edc28-051c-4352-843b-db78a1e58fc7 purchasing automated_care upgrade to level 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.purchaseFacilityUpgrade] User 846f7099-f3da-455e-8256-d68048b86e6a purchasing competition_hosting upgrade to level 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.purchaseFacilityUpgrade] User 2e3cf005-86d0-4d08-bfd8-9eac72f9f572 purchasing ventilation upgrade to level 2
[2026-01-28 14:32:35] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9906
[2026-01-28 14:32:35] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 9908
[2026-01-28 14:32:35] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user a02031f8-593d-45b9-821f-27ca7f04fa9f
[2026-01-28 14:32:35] info: [facilityManagementService.getUserFacilities] Getting facilities for user a02031f8-593d-45b9-821f-27ca7f04fa9f
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user bf8350b7-320c-4092-8984-a337ed303137
[2026-01-28 14:32:35] info: [facilityManagementService.getUserFacilities] Getting facilities for user bf8350b7-320c-4092-8984-a337ed303137
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1
[2026-01-28 14:32:35] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 9914
[2026-01-28 14:32:35] info: [facilityManagementService.purchaseFacilityUpgrade] User efa483e5-aaf9-453f-a6cb-4520addd4a48 purchasing stable_management upgrade to level 2
[2026-01-28 14:32:35] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2
[2026-01-28 14:32:35] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9915
[2026-01-28 14:32:35] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9918
[2026-01-28 14:32:35] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9918
[2026-01-28 14:32:35] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 9920
[2026-01-28 14:32:35] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 9920
PASS tests/unit/facilityManagementSystem.test.mjs
  üè¢ Facility Management System
    üèóÔ∏è Facility Types and Configuration
      ‚àö should return available facility types with specifications (80 ms)
      ‚àö should include different facility categories (13 ms)
    üë§ User Facility Management
      ‚àö should retrieve user facilities with current status (16 ms)
      ‚àö should calculate environmental mitigation for facilities (12 ms)
    üí∞ Upgrade Cost Calculation
      ‚àö should calculate upgrade costs accurately (16 ms)
      ‚àö should handle invalid upgrade parameters (19 ms)
      ‚àö should calculate progressive cost increases (15 ms)
    üõí Facility Upgrade Purchase
      ‚àö should successfully purchase valid upgrades (22 ms)
      ‚àö should reject upgrades with insufficient funds (15 ms)
      ‚àö should reject invalid facility ownership (19 ms)
    üåø Environmental Mitigation
      ‚àö should calculate environmental mitigation effects (10 ms)
      ‚àö should provide better mitigation for higher-level facilities (9 ms)
    üìä Facility Effectiveness Assessment
      ‚àö should assess facility effectiveness comprehensively (13 ms)
      ‚àö should provide upgrade-specific effectiveness ratings (15 ms)
    üí° Facility Recommendations
      ‚àö should generate actionable facility recommendations (46 ms)
      ‚àö should prioritize recommendations based on cost-benefit analysis (35 ms)
    üîß Maintenance and Operations
      ‚àö should calculate maintenance costs accurately (13 ms)
      ‚àö should track facility upgrade history (23 ms)
    üìà Return on Investment Analysis
      ‚àö should calculate facility ROI accurately (14 ms)
      ‚àö should provide benefit breakdown by category (17 ms)

[2026-01-28 14:32:35] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:35] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:35] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:35] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/traitInteractionMatrix.test.mjs
  Trait Interaction Matrix
    analyzeTraitInteractions
      ‚àö should analyze trait interactions for synergistic traits (10 ms)
      ‚àö should analyze trait interactions for conflicting traits (9 ms)
      ‚àö should handle horses with minimal traits (6 ms)
    calculateTraitSynergies
      ‚àö should calculate synergies for compatible traits (6 ms)
      ‚àö should calculate amplification effects correctly (6 ms)
      ‚àö should categorize synergies by type (5 ms)
    identifyTraitConflicts
      ‚àö should identify conflicts between opposing traits (5 ms)
      ‚àö should calculate suppression effects (7 ms)
      ‚àö should handle horses with no conflicts (5 ms)
    evaluateTraitDominance
      ‚àö should evaluate trait dominance hierarchy (5 ms)
      ‚àö should identify primary and secondary traits correctly (5 ms)
    processComplexInteractions
      ‚àö should process complex multi-trait interactions (6 ms)
      ‚àö should identify emergent properties from trait combinations (5 ms)
      ‚àö should calculate complexity scores appropriately (8 ms)
    assessInteractionStability
      ‚àö should assess stability of trait interactions (5 ms)
      ‚àö should identify volatility risks in conflicting traits (5 ms)
    modelTemporalInteractions
      ‚àö should model trait interactions over time (5 ms)
      ‚àö should project future interaction changes (5 ms)
    generateInteractionMatrix
      ‚àö should generate comprehensive interaction matrix (12 ms)
      ‚àö should create matrix visualization data (8 ms)

[2026-01-28 14:32:36] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:36] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:36] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:36] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakData.test.mjs
  Foal Task Log and Streak Data
    Task Log JSON Storage
      ‚àö should initialize with null task log (77 ms)
      ‚àö should store task log as JSON object (22 ms)
      ‚àö should handle empty task log object (16 ms)
      ‚àö should update existing task counts (19 ms)
      ‚àö should handle complex task log with all foal tasks (16 ms)
    Consecutive Days Foal Care Tracking
      ‚àö should initialize with zero consecutive days (18 ms)
      ‚àö should track consecutive days of care (16 ms)
      ‚àö should handle streak increments (17 ms)
      ‚àö should handle streak resets (18 ms)
      ‚àö should support high streak counts (19 ms)
    Last Care Date Tracking
      ‚àö should initialize with null last groomed date (11 ms)
      ‚àö should store last care date timestamp (14 ms)
      ‚àö should update last care date on subsequent care (16 ms)
      ‚àö should handle current timestamp updates (16 ms)
    Combined Task Log and Streak Data
      ‚àö should update all foal care fields together (14 ms)
      ‚àö should simulate realistic foal development progression (18 ms)
      ‚àö should handle streak reset with task log preservation (16 ms)
    Data Integrity and Edge Cases
      ‚àö should handle null values gracefully (18 ms)
      ‚àö should handle negative consecutive days (should not occur in practice) (13 ms)
      ‚àö should handle very large task counts (13 ms)
      ‚àö should preserve data types correctly (14 ms)

[2026-01-28 14:32:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:37] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:37] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:37] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
[2026-01-28 14:32:37] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter
[2026-01-28 14:32:37] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis
PASS __tests__/unit/auth-rate-limiter.test.mjs
  Authentication Rate Limiter (Unit)
    Rate Limiter Configuration
      ‚àö should_create_rate_limiter_with_default_config (3 ms)
      ‚àö should_create_rate_limiter_with_custom_config (2 ms)
      ‚àö should_validate_configuration_parameters (3 ms)
    Request Tracking
      ‚àö should_track_requests_by_ip_address (2 ms)
      ‚àö should_allow_requests_within_limit (6 ms)
      ‚àö should_block_requests_exceeding_limit (3 ms)
    Rate Limit Headers
      ‚àö should_set_ratelimit_headers_on_every_request (2 ms)
      ‚àö should_update_remaining_count_with_each_request (3 ms)
      ‚àö should_calculate_accurate_reset_timestamp (2 ms)
    Time Window Reset
      ‚àö should_reset_count_after_time_window (3 ms)
      ‚àö should_maintain_separate_windows_for_different_ips (2 ms)
    Success Reset Mechanism
      ‚àö should_reset_count_on_successful_authentication (2 ms)
      ‚àö should_provide_method_to_reset_specific_ip (6 ms)
    Error Handling
      ‚àö should_handle_missing_ip_address (3 ms)
      ‚àö should_handle_concurrent_requests_atomically (2 ms)
      ‚àö should_not_crash_on_invalid_configuration (3 ms)
    Memory Management
      ‚àö should_clean_up_expired_entries (2 ms)
      ‚àö should_have_configurable_cleanup_interval (2 ms)
      ‚àö should_limit_maximum_storage_size (3 ms)
    Integration with Express
      ‚àö should_work_as_express_middleware (2 ms)
      ‚àö should_call_next_when_within_limit (5 ms)
      ‚àö should_not_call_next_when_rate_limited (4 ms)
    Response Format
      ‚àö should_send_consistent_429_response_format (4 ms)
      ‚àö should_include_retry_after_in_seconds (2 ms)

[2026-01-28 14:32:37] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:37] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:37] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:37] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/carePatternAnalyzerEnhanced.test.mjs
  Enhanced Care Pattern Analyzer
    calculateAdvancedConsistencyScore
      ‚àö should calculate weighted consistency score with multiple factors (24 ms)
      ‚àö should detect inconsistent care patterns (10 ms)
    detectCareQualityTrends
      ‚àö should detect improving care quality trends (7 ms)
      ‚àö should detect declining care quality trends (8 ms)
    analyzeGroomEffectiveness
      ‚àö should analyze individual groom effectiveness (4 ms)
      ‚àö should identify most and least effective grooms (3 ms)
    calculateCareRiskScore
      ‚àö should calculate comprehensive care risk assessment (4 ms)
      ‚àö should identify specific risk factors (3 ms)
    Enhanced Care Pattern Integration
      ‚àö should integrate all enhanced features for comprehensive analysis (11 ms)

[2026-01-28 14:32:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:38] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStreakIntegration.test.mjs
  Foal Task Log and Streak Data Integration
    Real-World Foal Development Scenarios
      ‚àö should handle week 1 of foal care with enrichment tasks (94 ms)
      ‚àö should handle streak break and recovery (24 ms)
      ‚àö should achieve burnout immunity after 7 consecutive days (29 ms)
    Task Log and Trait Evaluation Integration
      ‚àö should support trait point calculation from stored task log (19 ms)
      ‚àö should track task progression over time (20 ms)
    Grace Period and Streak Maintenance
      ‚àö should maintain streak within 2-day grace period (20 ms)
      ‚àö should break streak beyond grace period (20 ms)
    Care Summary Statistics
      ‚àö should provide comprehensive care statistics (14 ms)
    Data Persistence and Integrity
      ‚àö should maintain data integrity across multiple updates (38 ms)

[2026-01-28 14:32:38] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:38] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:38] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:38] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingSystem.test.mjs
  Horse Aging System
    Age Calculation
      ‚àö should calculate age correctly from dateOfBirth (171 ms)
      ‚àö should handle leap years correctly (7 ms)
      ‚àö should handle timezone differences (7 ms)
    Horse Age Updates
      ‚àö should update horse age when birthday occurs (35 ms)
      ‚àö should not update age when no birthday occurs (14 ms)
      ‚àö should handle horses with incorrect stored age (17 ms)
    Milestone Detection
      ‚àö should detect age 1 milestone and trigger trait evaluation (19 ms)
      ‚àö should not trigger milestone for non-milestone ages (9 ms)
      ‚àö should detect retirement milestone at age 21 (5 ms)
    Batch Processing
      ‚àö should process multiple horses with birthdays (105 ms)
    Integration with Existing Systems
      ‚àö should maintain compatibility with training age requirements (25 ms)
      ‚àö should handle retirement at age 21 (11 ms)

[2026-01-28 14:32:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:39] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:39] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse invalid has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse -1 has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 0 has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse null has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 1 has trait ''
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 1 has trait 'null'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 1 has trait 'undefined'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 1 has trait '123'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse invalid
[2026-01-28 14:32:39] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse -1
[2026-01-28 14:32:39] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 0
[2026-01-28 14:32:39] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse invalid
[2026-01-28 14:32:39] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse -1
[2026-01-28 14:32:39] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 0
[2026-01-28 14:32:39] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse invalid
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse -1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse 0
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait '' to category 'positive' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'null' to category 'positive' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait '123' to category 'positive' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category 'invalid' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid category 'invalid'. Must be one of: positive, negative
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category 'hidden' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid category 'hidden'. Must be one of: positive, negative
[2026-01-28 14:32:39] info: [horseModel.addTrait] Adding trait 'trait' to category '' for horse 1
[2026-01-28 14:32:39] error: [horseModel.addTrait] Error adding trait: Invalid category ''. Must be one of: positive, negative
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 14:32:39] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 14:32:39] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 14:32:39] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 14:32:39] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
[2026-01-28 14:32:39] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'
[2026-01-28 14:32:39] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found
[2026-01-28 14:32:39] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999
[2026-01-28 14:32:39] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found
[2026-01-28 14:32:39] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999
[2026-01-28 14:32:39] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found
PASS tests/horseModelTask7.test.mjs
  üê¥ UNIT: Horse Model Task 7 - Instance-Style Helper Methods Validation
    API Validation Tests (without database)
      ‚àö should validate hasTrait function signature (2 ms)
      ‚àö should validate getPositiveTraitsArray function signature (1 ms)
      ‚àö should validate getNegativeTraitsArray function signature (1 ms)
      ‚àö should validate addTrait function signature (1 ms)
      ‚àö should validate createHorse still works with epigenetic_modifiers (1 ms)
    Input Validation Tests
      ‚àö should reject invalid horse IDs in hasTrait (9 ms)
      ‚àö should reject invalid trait names in hasTrait (10 ms)
      ‚àö should reject invalid horse IDs in getPositiveTraitsArray (6 ms)
      ‚àö should reject invalid horse IDs in getNegativeTraitsArray (5 ms)
      ‚àö should reject invalid inputs in addTrait (14 ms)
    Function Behavior Tests
      ‚àö should handle non-existent horse IDs gracefully (57 ms)
      ‚àö should validate that functions return correct types (13 ms)
    Integration with Existing System
      ‚àö should verify epigenetic_modifiers default structure is supported (1 ms)
      ‚àö should verify trait categories are properly defined (1 ms)
    TASK 7 Requirements Verification
      ‚àö should verify all requested helper methods exist (1 ms)
      ‚àö should verify method signatures match requirements (1 ms)
      ‚àö should verify epigenetic_modifiers field structure (1 ms)

[2026-01-28 14:32:39] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:39] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:39] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:39] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:40] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:32:40] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:32:40] info: Flag insecure triggered for horse Test Foal Week 1769628760022: Frequent groom changes with declining bond or neglect
[2026-01-28 14:32:40] info: Flag aloof triggered for horse Test Foal Week 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Flag skittish triggered for horse Test Foal Week 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Assigned 3 new flags to horse Test Foal Week 1769628760022: insecure, aloof, skittish
[2026-01-28 14:32:40] info: Starting weekly flag evaluation process
[2026-01-28 14:32:40] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:32:40] info: Flag aloof triggered for horse Test Foal Month 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Flag skittish triggered for horse Test Foal Month 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Assigned 2 new flags to horse Test Foal Month 1769628760022: aloof, skittish
[2026-01-28 14:32:40] info: Flag aloof triggered for horse Test Horse 2yo 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Flag skittish triggered for horse Test Horse 2yo 1769628760022: Generic negative flag evaluation
[2026-01-28 14:32:40] info: Assigned 2 new flags to horse Test Horse 2yo 1769628760022: aloof, skittish
[2026-01-28 14:32:40] info: Weekly flag evaluation completed: 4 flags assigned to 3 horses
[2026-01-28 14:32:40] info: Starting weekly flag evaluation process
[2026-01-28 14:32:40] info: Found 3 horses eligible for flag evaluation
[2026-01-28 14:32:40] info: Weekly flag evaluation completed: 0 flags assigned to 3 horses
PASS tests/services/weeklyFlagEvaluationService.test.mjs
  Weekly Flag Evaluation Service
    getEligibleHorsesForFlagEvaluation
      ‚àö should return only horses under 3 years old (9 ms)
      ‚àö should include horses with existing flags (6 ms)
    processHorseForFlagEvaluation
      ‚àö should evaluate horse for new flags based on care patterns (23 ms)
      ‚àö should respect maximum 5 flags per horse limit (17 ms)
    evaluateWeeklyFlags
      ‚àö should process all eligible horses and return summary (39 ms)
      ‚àö should handle horses with no groom interactions gracefully (29 ms)

[2026-01-28 14:32:40] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:40] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:40] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:40] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:40] info: Groom 74192 selected talent gentle_hands for tier1
[2026-01-28 14:32:40] info: Groom 74194 selected talent gentle_hands for tier1
[2026-01-28 14:32:40] info: Groom 74195 selected talent gentle_hands for tier1
[2026-01-28 14:32:40] info: Groom 74195 selected talent stress_whisperer for tier2
[2026-01-28 14:32:40] info: Groom 74195 selected talent master_bonding for tier3
[2026-01-28 14:32:40] error: Error selecting talent for groom 74196: Invalid talent selection: invalid_talent
[2026-01-28 14:32:40] error: Error selecting talent for groom 74198: Invalid talent selection: insufficient_level
[2026-01-28 14:32:40] info: Groom 74199 selected talent gentle_hands for tier1
[2026-01-28 14:32:40] info: Groom 74200 selected talent gentle_hands for tier1
[2026-01-28 14:32:40] info: Groom 74200 selected talent stress_whisperer for tier2
[2026-01-28 14:32:40] info: Groom 74202 selected talent gentle_hands for tier1
PASS tests/services/groomTalentService.test.mjs
  Groom Talent Service
    Talent Tree Definitions
      ‚àö should return complete talent tree definitions (73 ms)
      ‚àö should have consistent talent requirements (16 ms)
    Talent Selection Validation
      ‚àö should validate valid talent selection (13 ms)
      ‚àö should reject selection for insufficient level (17 ms)
      ‚àö should reject invalid talent for personality (11 ms)
      ‚àö should reject selection if tier already selected (15 ms)
      ‚àö should require prerequisite tiers (12 ms)
    Talent Selection
      ‚àö should successfully select tier 1 talent (14 ms)
      ‚àö should successfully select multiple tiers in sequence (21 ms)
      ‚àö should reject invalid talent selection (12 ms)
      ‚àö should reject selection for insufficient level (16 ms)
    Talent Effects
      ‚àö should apply talent effects to groom interactions (14 ms)
      ‚àö should handle multiple talent effects (19 ms)
      ‚àö should handle groom with no talent selections (10 ms)
    Talent Retrieval
      ‚àö should get groom talent selections (17 ms)
      ‚àö should return null for groom with no selections (8 ms)

[2026-01-28 14:32:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:41] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseAgingIntegration.test.mjs
  Horse Aging Integration
    Complete Aging Workflow
      ‚àö should process foal birthday with trait milestone evaluation (101 ms)
      ‚àö should handle multiple horses with different milestone scenarios (112 ms)
      ‚àö should handle foal with minimal task history (26 ms)
      ‚àö should handle foal with no task history (22 ms)
    Error Handling
      ‚àö should handle database errors gracefully (16 ms)

[2026-01-28 14:32:41] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:41] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:41] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:41] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogStorage.test.mjs
  Foal Task Log Storage
    Task Log JSON Storage
      ‚àö should initialize with null task log (79 ms)
      ‚àö should store task log as JSON object (19 ms)
      ‚àö should handle empty task log object (17 ms)
      ‚àö should update existing task counts (18 ms)
      ‚àö should handle complex task log with all foal tasks (18 ms)
    Last Care Date Tracking
      ‚àö should initialize with null last groomed date (12 ms)
      ‚àö should store last care date timestamp (14 ms)
      ‚àö should update last care date on subsequent care (17 ms)
      ‚àö should handle current timestamp updates (15 ms)
    Combined Task Log and Care Date
      ‚àö should update task log and last care date together (14 ms)
      ‚àö should simulate realistic foal development progression (18 ms)
    Data Integrity and Edge Cases
      ‚àö should handle null values gracefully (13 ms)
      ‚àö should handle very large task counts (18 ms)
      ‚àö should preserve data types correctly (14 ms)

[2026-01-28 14:32:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:42] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:42] info: [RateLimit:rl:auth] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:training] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:query] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:profile] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:mutation] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:admin] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:foal] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:breeding] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [RateLimit:rl:competition] Redis not connected - using in-memory rate limiting (per-process)
[2026-01-28 14:32:42] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment
PASS __tests__/unit/security/rate-limit-keys.test.mjs
  Rate Limit Key Generation Unit Tests
    IP-Based Key Generation
      ‚àö should generate key based on IP address (2 ms)
      ‚àö should handle IPv4 addresses (1 ms)
      ‚àö should handle IPv6 addresses (1 ms)
      ‚àö should handle localhost IPv4 (1 ms)
      ‚àö should handle localhost IPv6 (1 ms)
      ‚àö should handle IP from X-Forwarded-For header (1 ms)
      ‚àö should handle IP from X-Real-IP header (7 ms)
    User-Based Key Generation
      ‚àö should generate key based on user ID when authenticated (2 ms)
      ‚àö should handle authenticated user with IP fallback (2 ms)
      ‚àö should handle unauthenticated user (null) (1 ms)
      ‚àö should handle unauthenticated user (undefined) (1 ms)
      ‚àö should handle user with string ID (1 ms)
      ‚àö should handle user with numeric ID (1 ms)
    Route-Based Key Generation
      ‚àö should generate different keys for different routes (1 ms)
      ‚àö should handle parameterized routes (1 ms)
      ‚àö should handle query parameters (1 ms)
      ‚àö should handle nested routes (1 ms)
      ‚àö should handle trailing slashes (1 ms)
      ‚àö should handle root path (1 ms)
    Combined Key Generation
      ‚àö should generate unique keys for user+route combination (1 ms)
      ‚àö should generate unique keys for IP+route combination (1 ms)
      ‚àö should generate unique keys for user+IP+route combination (1 ms)
      ‚àö should generate different keys for same user on different IPs (1 ms)
      ‚àö should generate different keys for different users on same IP (1 ms)
    Key Consistency
      ‚àö should generate consistent keys for same request parameters (1 ms)
      ‚àö should generate consistent keys across requests (1 ms)
      ‚àö should not be affected by request method
      ‚àö should not be affected by request headers (except proxy headers)
      ‚àö should not be affected by request body (1 ms)
    Key Security
      ‚àö should not expose sensitive user information in key (1 ms)
      ‚àö should handle SQL injection attempts in user ID (6 ms)
      ‚àö should handle special characters in IP (1 ms)
      ‚àö should handle null bytes in path (1 ms)
      ‚àö should handle extremely long user IDs (2 ms)
      ‚àö should handle extremely long IPs (IPv6) (2 ms)
    Key Storage Format
      ‚àö should generate Redis-compatible keys (2 ms)
      ‚àö should use colon as delimiter (1 ms)
      ‚àö should handle paths with slashes in keys (2 ms)
    Edge Cases
      ‚àö should handle missing IP address (2 ms)
      ‚àö should handle missing path (1 ms)
      ‚àö should handle empty string IP (2 ms)
      ‚àö should handle empty string path (1 ms)
      ‚àö should handle object as IP (edge case) (1 ms)
      ‚àö should handle array as path (edge case) (1 ms)

[2026-01-28 14:32:42] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:42] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:42] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:42] info: [envValidator] Test environment validation complete. Success: true
PASS seed/horseSeed.test.mjs
  Horse Seed Integration Tests
    checkHorseExists - Real Database Operations
      ‚àö should return true if horse exists in database (35 ms)
      ‚àö should return false if horse does not exist in database (5 ms)
      ‚àö should handle database errors gracefully (3 ms)
    findOrCreateBreed - Real Database Operations
      ‚àö should return existing breed if found in database (8 ms)
      ‚àö should create new breed if not found in database (6 ms)
      ‚àö should return null for undefined breed name (2 ms)
      ‚àö should handle database errors gracefully (3 ms)
    ensureReferencedRecordsExist - Real Database Operations
      ‚àö should create users and stables if they do not exist in database (20 ms)
      ‚àö should update existing users and stables if they already exist (19 ms)
      ‚àö should handle database constraints gracefully (8 ms)
    seedHorses - Real Database Operations
      ‚àö should log a warning and return an empty array if no users are provided (8 ms)
      ‚àö should create breeds and horses for the provided user in database (34 ms)
      ‚àö should handle database constraints and validation errors gracefully (24 ms)
      ‚àö should handle edge cases and maintain data integrity (30 ms)
    Complete Horse Seeding Integration Test
      ‚àö should execute complete seeding workflow with real database operations (34 ms)
      ‚àö should maintain database integrity throughout complete seeding process (24 ms)

[2026-01-28 14:32:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 10
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 10)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: coat_check, count: 3
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: presentationBoosted (total: 15)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 10
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: calm (total: 50)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 4
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: presentationBoosted (total: 35)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 6
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: showCalm (total: 50)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 12
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: bonded (total: 60)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: resilient (total: 60)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 8
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: confident (total: 40)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 5
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: crowdReady (total: 25)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 65)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 35, total: 45, chance: 45%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 50, total: 60, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 50, total: 60, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 60, total: 70, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 60, total: 70, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 65, total: 75, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 25, total: 35, chance: 35%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 30.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["presentationBoosted","calm","showCalm","bonded","resilient","confident","crowdReady"]
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 3
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 3)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 1
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: calm (total: 5)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 5, total: 5, chance: 5%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 7.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 7.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 7.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 8
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 8)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 10
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: confident (total: 50)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 6
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: crowdReady (total: 30)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 80)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 80, total: 90, chance: 60%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 40.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 30, total: 40, chance: 40%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 40.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 4
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: calm (total: 20)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 20, total: 20, chance: 20%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 10.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 6
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: bonded (total: 30)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: resilient (total: 30)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 4
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: confident (total: 20)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 15.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 30, total: 30, chance: 30%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 15.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 30, total: 30, chance: 30%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 15.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 20, total: 20, chance: 20%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 15.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 2
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 10)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 6
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 30)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 20.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: showCalm (rolled: 20.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 40, chance: 40%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 20.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 40, chance: 40%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 20.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 30, total: 30, chance: 30%
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 20.00)
[2026-01-28 14:32:43] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]
PASS tests/traitMilestoneIntegration.test.mjs
  Trait Milestone Integration
    Age 1 Milestone Evaluation
      ‚àö should evaluate traits from comprehensive foal development history (109 ms)
      ‚àö should handle minimal development with no streak bonus (24 ms)
      ‚àö should handle specialized development paths (24 ms)
      ‚àö should integrate with real database persistence (27 ms)
      ‚àö should handle edge case of no task history (17 ms)
    Milestone Timing and Business Rules
      ‚àö should demonstrate age 1 milestone evaluation timing (25 ms)
      ‚àö should support trait development progression tracking (42 ms)

[2026-01-28 14:32:43] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:43] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:43] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:43] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:43] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 148168 and mare 148169, 3 generations
[2026-01-28 14:32:43] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 148171 and mare 148172, 2 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations
[2026-01-28 14:32:44] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 148173 and mare 148174
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 148173 and mare 148174, 3 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 148175 and mare 148176
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 148175 and mare 148176
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 148177 and mare 148178
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 148177 and mare 148178
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0
[2026-01-28 14:32:44] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations
PASS tests/unit/advancedLineageAnalysis.test.mjs
  üå≥ Advanced Lineage Analysis System
    üå≤ Lineage Tree Generation
      ‚àö should generate hierarchical tree structure from lineage data (89 ms)
      ‚àö should include parent-child relationships in tree nodes (39 ms)
      ‚àö should handle missing lineage data gracefully (7 ms)
    üß¨ Genetic Diversity Metrics
      ‚àö should calculate comprehensive genetic diversity metrics (4 ms)
      ‚àö should identify genetic bottlenecks in lineage (1 ms)
      ‚àö should calculate inbreeding coefficient accurately (9 ms)
    üèÜ Performance Analysis
      ‚àö should analyze performance trends across generations (4 ms)
      ‚àö should identify top performing ancestors (2 ms)
    üìä Visualization Data Generation
      ‚àö should create visualization-ready data structure (23 ms)
    üéØ Breeding Recommendations
      ‚àö should generate comprehensive breeding recommendations (28 ms)
      ‚àö should identify breeding risks and mitigation strategies (26 ms)

[2026-01-28 14:32:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:44] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/trainingAnalyticsService.test.mjs
  Training Analytics Service
    Training Session Log
      ‚àö should provide complete training session history (69 ms)
      ‚àö should order training history by date (most recent first) (9 ms)
    Training Frequency Analysis
      ‚àö should track training frequency and recent activity (11 ms)
      ‚àö should calculate sessions per discipline correctly (8 ms)
    Discipline Training Balance
      ‚àö should show training distribution across disciplines (10 ms)
      ‚àö should calculate training percentages correctly (8 ms)
    Error Handling
      ‚àö should handle non-existent horse gracefully (8 ms)
      ‚àö should handle horse with no training history (21 ms)

[2026-01-28 14:32:44] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:44] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:44] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:44] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 74204
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 74204
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 74205
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 74204
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 148181
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 148181
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 148182
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 148181
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 74204 over 30 days
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 74204
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 74204
[2026-01-28 14:32:45] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 148181
PASS tests/services/personalityEvolutionSystem.test.mjs
  Personality Evolution System
    Groom Personality Evolution
      ‚àö should evolve groom personality based on interaction patterns (37 ms)
      ‚àö should not evolve personality with insufficient interaction data (19 ms)
      ‚àö should calculate personality evolution triggers accurately (7 ms)
    Horse Temperament Evolution
      ‚àö should evolve horse temperament based on care history (29 ms)
      ‚àö should maintain temperament stability with mixed care patterns (27 ms)
      ‚àö should analyze personality stability accurately (5 ms)
    Personality Evolution Prediction
      ‚àö should predict future personality evolution accurately (3 ms)
      ‚àö should get personality evolution history (7 ms)
      ‚àö should apply personality evolution effects correctly (2 ms)
    Cross-Species Personality Influence
      ‚àö should detect personality convergence between groom and horse (38 ms)

[2026-01-28 14:32:45] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:45] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:45] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:45] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/developmentalWindowSystem.test.mjs
  Developmental Window System
    identifyDevelopmentalWindows
      ‚àö should identify active developmental windows for newborn foal (165 ms)
      ‚àö should identify multiple active windows for appropriate ages (83 ms)
      ‚àö should show closed windows for older foals (131 ms)
    calculateWindowSensitivity
      ‚àö should calculate high sensitivity for critical periods (4 ms)
      ‚àö should calculate reduced sensitivity outside critical periods (3 ms)
      ‚àö should apply environmental modifiers correctly (4 ms)
    evaluateTraitDevelopmentOpportunity
      ‚àö should evaluate trait development opportunities during active windows (7 ms)
      ‚àö should show higher opportunities for window-aligned traits (7 ms)
      ‚àö should provide appropriate recommendations (4 ms)
    trackDevelopmentalMilestones
      ‚àö should track developmental milestones with interactions (10 ms)
      ‚àö should show progression over time (8 ms)
    assessWindowClosure
      ‚àö should assess window closure effects (5 ms)
      ‚àö should show open status for active windows (3 ms)
      ‚àö should identify compensatory mechanisms for closed windows (3 ms)
    coordinateMultiWindowDevelopment
      ‚àö should coordinate development across multiple windows (3 ms)
      ‚àö should identify window conflicts and resolutions (3 ms)
    analyzeCriticalPeriodSensitivity
      ‚àö should analyze critical period sensitivity comprehensively (11 ms)
      ‚àö should identify age-appropriate risk factors (15 ms)
    generateDevelopmentalForecast
      ‚àö should generate comprehensive developmental forecast (3 ms)
      ‚àö should project trait development accurately (4 ms)
      ‚àö should provide actionable recommendations (4 ms)

[2026-01-28 14:32:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 60, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 148188). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 148188). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 150 XP to horse XP Test Horse (ID: 148188). New XP: 150, Stat points gained: 1, Available: 1
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 200 XP to horse XP Test Horse (ID: 148188). New XP: 200, Stat points gained: 2, Available: 2
[2026-01-28 14:32:46] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 148188). New speed: 76, Remaining points: 1
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 50 XP to horse XP Test Horse (ID: 148188). New XP: 50, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 80, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 148188). New XP: 105, Stat points gained: 1, Available: 1
[2026-01-28 14:32:46] info: [horseXpModel.getHorseXpHistory] Retrieved 3 XP events for horse 148188
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 30, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 148188). New XP: 57, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 148188). New XP: 87, Stat points gained: 0, Available: 0
[2026-01-28 14:32:46] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 148188). New XP: 112, Stat points gained: 1, Available: 1
[2026-01-28 14:32:46] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 148188). New speed: 77, Remaining points: 0
[2026-01-28 14:32:46] info: [horseXpModel.getHorseXpHistory] Retrieved 4 XP events for horse 148188
PASS tests/horseXpIntegration.test.mjs
  üêé INTEGRATION: Horse XP System - Core Functionality Integration
    Competition Integration
      ‚àö should award horse XP when horse places in competition (25 ms)
      ‚àö should award stat points when horse reaches 100 XP (38 ms)
    Horse XP Model Integration
      ‚àö should get horse XP status directly from model (12 ms)
      ‚àö should allocate stat points directly via model (22 ms)
      ‚àö should get horse XP history directly from model (27 ms)
    Complete Workflow Integration
      ‚àö should complete full horse XP workflow: competition ‚Üí XP ‚Üí stat allocation (43 ms)

[2026-01-28 14:32:46] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:46] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:46] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:46] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: 2.1%, adjustment: 3.6
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Final score: 174 (base: 165, trait: +5, luck: 3.6)
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: 7.0%, adjustment: 8.1
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 123 (base: 115, trait: +0, luck: 8.1)
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -3.9%, adjustment: -6.7
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Star: Final score: 163 (base: 165, trait: +5, luck: -6.7)
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: -2.0%, adjustment: -2.3
[2026-01-28 14:32:47] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 113 (base: 115, trait: +0, luck: -2.3)
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148189 in show 8313 with score 85.5
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148189 in show 8313 with score 90
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148190 in show 8313 with score 85
[2026-01-28 14:32:47] info: [resultModel.getResultsByShow] Found 3 results for show 8313
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148189 in show 8313 with score 88
[2026-01-28 14:32:47] info: [resultModel.getResultsByShow] Found 0 results for show 99999
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148189 in show 8313 with score 92
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148191 in show 8313 with score 84
[2026-01-28 14:32:47] info: [resultModel.saveResult] Successfully created new result for horse 148190 in show 8313 with score 88
PASS tests/competitionController-business-logic.test.mjs
  üèÜ INTEGRATION: Competition Controller Business Logic - Real Competition Workflow
    Competition Scoring Business Logic
      ‚àö CALCULATES realistic competition scores based on horse stats (9 ms)
      ‚àö APPLIES trait bonuses correctly in competition scoring (11 ms)
    Competition Result Persistence
      ‚àö PERSISTS competition results in database correctly (10 ms)
      ‚àö RETRIEVES competition results by show correctly (18 ms)
      ‚àö MAINTAINS database integrity with proper relationships (11 ms)
    Error Handling and Edge Cases
      ‚àö HANDLES invalid result data gracefully (4 ms)
      ‚àö HANDLES non-existent show ID gracefully (4 ms)
      ‚àö MAINTAINS data consistency during concurrent operations (64 ms)

[2026-01-28 14:32:47] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:47] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:47] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:47] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/horseTemperamentAnalysis.test.mjs
  Horse Temperament Analysis
    analyzeHorseTemperament
      ‚àö should analyze temperament for nervous horse with interaction history (17 ms)
      ‚àö should analyze temperament for confident horse (14 ms)
      ‚àö should analyze temperament for horse with no interaction history (4 ms)
    classifyTemperamentFromFlags
      ‚àö should classify temperament from positive flags (1 ms)
      ‚àö should classify temperament from negative flags (1 ms)
      ‚àö should handle mixed flags appropriately (1 ms)
      ‚àö should handle empty flags array (1 ms)
    analyzeBehavioralTrends
      ‚àö should analyze behavioral trends over time (10 ms)
    identifyStressResponsePatterns
      ‚àö should identify stress response patterns (6 ms)
    analyzeBondingPreferences
      ‚àö should analyze bonding preferences (4 ms)
    detectTemperamentChanges
      ‚àö should detect temperament changes over time (5 ms)

[2026-01-28 14:32:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.5%, adjustment: 4.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 4.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 7.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 142 (base: 130, trait: +5, luck: 7.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.4%, adjustment: -4.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -4.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.9%, adjustment: 14.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 194 (base: 175, trait: +5, luck: 14.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.0%, adjustment: -10.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 175, trait: +0, luck: -10.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.3%, adjustment: -9.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 161 (base: 165, trait: +5, luck: -9.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.7%, adjustment: 7.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 173 (base: 165, trait: +0, luck: 7.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 3.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 165, trait: +5, luck: 3.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -12.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 153 (base: 165, trait: +0, luck: -12.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.7%, adjustment: 9.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 160, trait: +5, luck: 9.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.6%, adjustment: 4.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 160, trait: +0, luck: 4.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 1.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 1.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.2%, adjustment: 2.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 175, trait: +0, luck: 2.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.1%, adjustment: 8.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 184 (base: 175, trait: +0, luck: 8.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 1.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 1.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.4%, adjustment: -11.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 164 (base: 175, trait: +0, luck: -11.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.4%, adjustment: -13.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 162 (base: 175, trait: +0, luck: -13.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -9.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -9.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 15.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 191 (base: 175, trait: +0, luck: 15.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.3%, adjustment: -14.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 161 (base: 175, trait: +0, luck: -14.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.8%, adjustment: 4.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 175, trait: +0, luck: 4.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.3%, adjustment: 14.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 190 (base: 175, trait: +0, luck: 14.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.7%, adjustment: -1.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 175, trait: +0, luck: -1.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.4%, adjustment: 2.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 175, trait: +0, luck: 2.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 172 (base: 175, trait: +0, luck: -3.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.8%, adjustment: 8.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 175, trait: +0, luck: 8.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.1%, adjustment: -0.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 175 (base: 175, trait: +0, luck: -0.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -6.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 168 (base: 175, trait: +0, luck: -6.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.0%, adjustment: 12.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 187 (base: 175, trait: +0, luck: 12.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 1.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 1.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.2%, adjustment: 12.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 175, trait: +0, luck: 12.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.6%, adjustment: -2.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 128 (base: 130, trait: +0, luck: -2.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -6.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -6.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.2%, adjustment: 4.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 4.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.4%, adjustment: 8.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 144 (base: 130, trait: +5, luck: 8.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -2.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -2.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 0.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 0.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.1%, adjustment: 0.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: 0.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.2%, adjustment: -0.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: -0.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.4%, adjustment: -6.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +5, luck: -6.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 3.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 3.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 8.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 143 (base: 130, trait: +5, luck: 8.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -2.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -2.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.4%, adjustment: -3.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -3.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.5%, adjustment: 9.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +0, luck: 9.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -6.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 128 (base: 130, trait: +5, luck: -6.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 2.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 2.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.3%, adjustment: 11.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 146 (base: 130, trait: +5, luck: 11.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 7.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 7.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -1.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.3%, adjustment: -6.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -6.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -5.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -5.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.8%, adjustment: -5.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +0, luck: -5.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.7%, adjustment: -10.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.9%, adjustment: 8.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +0, luck: 8.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.2%, adjustment: -8.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +5, luck: -8.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.0%, adjustment: 1.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +0, luck: 1.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 5.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 5.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -1.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -1.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -2.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -2.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.0%, adjustment: -0.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +0, luck: -0.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 4.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 4.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -6.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -6.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.7%, adjustment: -7.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +5, luck: -7.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.3%, adjustment: -8.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 122 (base: 130, trait: +0, luck: -8.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 6.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 6.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -6.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -6.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 1.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.7)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.9%, adjustment: 11.5
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 142 (base: 130, trait: +0, luck: 11.5)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.7%, adjustment: -10.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.7%, adjustment: -10.1
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 120 (base: 130, trait: +0, luck: -10.1)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.7%, adjustment: -10.4
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.4)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.4%, adjustment: 5.8
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 5.8)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.1%, adjustment: -0.2
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +5, luck: -0.2)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.0%, adjustment: -2.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +0, luck: -2.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -6.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 128 (base: 130, trait: +5, luck: -6.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.1%, adjustment: -6.6
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +0, luck: -6.6)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.4%, adjustment: 1.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.3%, adjustment: 8.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 8.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.9%, adjustment: 5.3
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.3)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.1%, adjustment: 7.9
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 7.9)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.2%, adjustment: 11.0
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 146 (base: 130, trait: +5, luck: 11.0)
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.0%, adjustment: -2.7
[2026-01-28 14:32:48] info: [calculateCompetitionScore] Horse Test Horse: Final score: 127 (base: 130, trait: +0, luck: -2.7)
PASS tests/enhancedCompetitionIntegration.test.mjs
  üèÜ INTEGRATION: Enhanced Competition Integration - Trait Scoring Validation
    Basic Integration Tests
      ‚àö should successfully import and use calculateCompetitionScore function (6 ms)
      ‚àö should apply trait bonuses correctly for each discipline (44 ms)
      ‚àö should not apply trait bonus when trait does not match discipline (58 ms)
      ‚àö should handle horses with missing epigeneticModifiers (5 ms)
      ‚àö should provide consistent scoring results with variance (40 ms)
      ‚àö should demonstrate that trait integration is working (128 ms)

[2026-01-28 14:32:48] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:48] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:48] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:48] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Simulating breeding outcomes
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Simulating breeding outcomes
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Simulating breeding outcomes
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Simulating breeding outcomes
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating multi-generational predictions
[2026-01-28 14:32:48] info: Calculating multi-generational predictions
[2026-01-28 14:32:48] info: Calculating genetic diversity impact
[2026-01-28 14:32:48] info: Calculating genetic diversity impact
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
[2026-01-28 14:32:48] info: Calculating enhanced genetic probabilities
PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  üß¨ Enhanced Genetic Probability Calculator
    üéØ Enhanced Trait Inheritance Probability Calculator
      ‚àö should calculate detailed trait inheritance probabilities (8 ms)
      ‚àö should calculate stat inheritance probabilities (3 ms)
      ‚àö should handle edge cases with minimal genetic data (2 ms)
    ü§ù Genetic Compatibility Scoring System
      ‚àö should calculate genetic compatibility score (2 ms)
      ‚àö should identify trait conflicts (2 ms)
      ‚àö should calculate stat compatibility (5 ms)
    üé≤ Breeding Outcome Simulation
      ‚àö should simulate multiple breeding outcomes (127 ms)
      ‚àö should provide confidence intervals (54 ms)
      ‚àö should handle deterministic simulation with seed (26 ms)
    üå≥ Multi-Generational Prediction Engine
      ‚àö should calculate multi-generational predictions (4 ms)
      ‚àö should weight recent generations more heavily (4 ms)
    üåà Genetic Diversity Impact Calculator
      ‚àö should calculate genetic diversity impact (2 ms)
      ‚àö should detect inbreeding risks (2 ms)
    ‚ö° Trait Interaction Modeling
      ‚àö should calculate trait interactions (2 ms)
      ‚àö should identify athletic + intelligent synergy (1 ms)
    üí° Breeding Recommendation Engine
      ‚àö should generate breeding recommendations (3 ms)
      ‚àö should provide specific optimization suggestions (2 ms)
    üèÜ Performance Prediction Algorithm
      ‚àö should predict offspring performance (4 ms)
      ‚àö should identify performance strengths and weaknesses (2 ms)

[2026-01-28 14:32:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:49] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:49] info: Flag brave triggered for horse Test Foal 6mo 1769628769244: Consistent care with good stress management and task diversity
[2026-01-28 14:32:49] info: Flag confident triggered for horse Test Foal 6mo 1769628769244: Strong bond growth with diverse, high-quality experiences
[2026-01-28 14:32:49] info: Flag resilient triggered for horse Test Foal 6mo 1769628769244: Generic positive flag evaluation
[2026-01-28 14:32:49] error: Error evaluating triggers for flag fearful: Cannot read properties of undefined (reading 'length')
[2026-01-28 14:32:49] error: Error evaluating triggers for flag insecure: Cannot read properties of undefined (reading 'neglectRatio')
PASS tests/services/flagAssignmentEngineEnhanced.test.mjs
  Enhanced Flag Assignment Engine
    evaluatePersonalityModifiedTriggers
      ‚àö should apply calm groom personality modifiers correctly (8 ms)
      ‚àö should apply energetic groom personality modifiers correctly (4 ms)
    calculateFlagAssignmentScore
      ‚àö should calculate comprehensive flag assignment scores (5 ms)
      ‚àö should apply age-based sensitivity modifiers (7 ms)
    analyzeTemporalPatterns
      ‚àö should analyze temporal patterns in care quality (14 ms)
      ‚àö should identify critical periods for flag assignment (3 ms)
    Advanced Flag Assignment Integration
      ‚àö should integrate all enhancement features for comprehensive evaluation (52 ms)

[2026-01-28 14:32:49] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:49] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:49] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:49] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/performanceAnalyticsService.test.mjs
  Performance Analytics Service
    Personal Performance Metrics
      ‚àö should calculate overall win rate correctly (10 ms)
      ‚àö should calculate win rate by discipline (6 ms)
      ‚àö should track placement trends over time (4 ms)
      ‚àö should calculate performance consistency score (4 ms)
    Historical Performance Tracking
      ‚àö should provide complete competition history (5 ms)
      ‚àö should track total earnings by discipline (5 ms)
      ‚àö should track performance improvement over time (10 ms)
    Discipline Analysis
      ‚àö should identify strongest disciplines (5 ms)
      ‚àö should identify weakest disciplines (4 ms)
    Error Handling
      ‚àö should handle non-existent horse gracefully (4 ms)
      ‚àö should handle horse with no competition history (22 ms)

[2026-01-28 14:32:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:50] info: [UserDocService] Loaded 1 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 34 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] warn: [UserDocService] Document not found: non-existent
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 5 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] warn: [UserDocService] Documentation directory not found
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 0 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation refreshed successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
[2026-01-28 14:32:50] info: [UserDocService] Loaded 4 documentation files
[2026-01-28 14:32:50] info: [UserDocService] Built search index with 95 terms
[2026-01-28 14:32:50] info: [UserDocService] Documentation system initialized successfully
PASS __tests__/services/userDocumentation.test.mjs
  User Documentation Service
    Documentation Loading
      ‚àö loads all documentation files correctly (14 ms)
      ‚àö extracts document metadata correctly (14 ms)
      ‚àö extracts sections correctly (10 ms)
      ‚àö builds search index correctly (8 ms)
    Document Retrieval
      ‚àö retrieves existing document correctly (7 ms)
      ‚àö returns null for non-existent document (11 ms)
      ‚àö tracks view analytics correctly (7 ms)
      ‚àö gets all documents correctly (8 ms)
    Search Functionality
      ‚àö searches documentation content successfully (8 ms)
      ‚àö handles single word searches (10 ms)
      ‚àö returns empty results for non-matching search (7 ms)
      ‚àö tracks search analytics (8 ms)
      ‚àö finds matching sections in search results (7 ms)
      ‚àö respects search options (7 ms)
    Analytics and Reporting
      ‚àö generates analytics correctly (10 ms)
      ‚àö tracks popular documents correctly (7 ms)
      ‚àö limits search query history (7 ms)
    Table of Contents
      ‚àö generates table of contents correctly (8 ms)
      ‚àö creates proper anchors for sections (10 ms)
    Content Parsing
      ‚àö counts words correctly (7 ms)
      ‚àö extracts searchable words correctly (7 ms)
      ‚àö normalizes search queries correctly (7 ms)
      ‚àö identifies stop words correctly (7 ms)
    System Management
      ‚àö refreshes documentation successfully (13 ms)
      ‚àö handles refresh errors gracefully (9 ms)
    Helper Functions
      ‚àö getDocument helper function works (7 ms)
      ‚àö searchDocumentation helper function works (10 ms)
      ‚àö getAllDocuments helper function works (7 ms)
      ‚àö getDocumentationAnalytics helper function works (7 ms)
      ‚àö getTableOfContents helper function works (7 ms)

[2026-01-28 14:32:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:50] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:50] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:32:50] warn: CORS blocked request from origin: http://malicious-site.com
[2026-01-28 14:32:50] warn: Rate limit exceeded for IP: ::ffff:127.0.0.1
[2026-01-28 14:32:50] warn: [CORS] Request with no origin detected - API key validation required
[2026-01-28 14:32:50] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
PASS tests/middleware/security.test.mjs
  Security Middleware
    CORS Configuration
      ‚àö should allow requests from localhost:3000 (4 ms)
      ‚àö should allow requests from localhost:3001 (2 ms)
      ‚àö should allow requests with no origin (2 ms)
      ‚àö should block requests from unauthorized origins (2 ms)
      ‚àö should allow origins from environment variable (1 ms)
    Rate Limiter
      ‚àö should create rate limiter with default values (2 ms)
      ‚àö should create rate limiter with custom values (6 ms)
      ‚àö should limit requests when threshold is exceeded (38 ms)
    Helmet Configuration
      ‚àö should have proper CSP directives (1 ms)
      ‚àö should have HSTS configuration (1 ms)
      ‚àö should disable crossOriginEmbedderPolicy for API compatibility (1 ms)
    Security Middleware Factory
      ‚àö should create security middleware array (6 ms)
      ‚àö should apply security headers through helmet (16 ms)

[2026-01-28 14:32:50] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:50] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:50] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:50] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/flagEffectIntegration.test.mjs
  Flag Effect Integration
    calculateFlagEffects
      ‚àö should calculate cumulative effects for positive flags (4 ms)
      ‚àö should calculate cumulative effects for negative flags (1 ms)
      ‚àö should handle conflicting flags appropriately (1 ms)
      ‚àö should return neutral effects for horses with no flags (2 ms)
    applyFlagEffectsToCompetition
      ‚àö should apply positive flag effects to competition performance (2 ms)
      ‚àö should apply negative flag effects to competition performance (1 ms)
      ‚àö should handle discipline-specific flag effects (1 ms)
    applyFlagEffectsToTraining
      ‚àö should apply flag effects to training effectiveness (1 ms)
      ‚àö should reduce training effectiveness for negative flags
    applyFlagEffectsToBreeding
      ‚àö should apply flag effects to breeding trait probabilities (1 ms)
      ‚àö should handle breeding between horses with conflicting flags (1 ms)
    resolveFlagConflicts
      ‚àö should identify and resolve flag conflicts (1 ms)
      ‚àö should handle no conflicts gracefully (1 ms)

[2026-01-28 14:32:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:51] info: [envValidator] Test environment validation complete. Success: true
PASS tests/services/groomPersonalityTraits.test.mjs
  Groom Personality Trait System
    getGroomPersonalityTraits
      ‚àö should return detailed personality traits for calm groom (5 ms)
      ‚àö should return detailed personality traits for energetic groom (3 ms)
      ‚àö should return detailed personality traits for methodical groom (2 ms)
    calculatePersonalityModifiers
      ‚àö should calculate modifiers for calm groom with nervous horse (8 ms)
      ‚àö should calculate modifiers for energetic groom with confident horse (4 ms)
      ‚àö should calculate modifiers for energetic groom with nervous horse (4 ms)
      ‚àö should calculate modifiers for methodical groom with any horse (3 ms)
    analyzePersonalityCompatibility
      ‚àö should analyze compatibility between groom and horse personalities (4 ms)
      ‚àö should identify poor compatibility combinations (3 ms)
    updatePersonalityTraits
      ‚àö should update personality traits based on interaction outcomes (11 ms)
    getPersonalityTraitDefinitions
      ‚àö should return comprehensive trait definitions (2 ms)

[2026-01-28 14:32:51] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:51] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:51] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:51] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:51] warn: [ownership] Missing user for horse ownership check
[2026-01-28 14:32:51] warn: [ownership] Missing user for horse ownership check
[2026-01-28 14:32:51] warn: [ownership] Invalid horse ID: invalid
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 14:32:51] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns foal 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns groom 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns groom-assignment 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns breeding 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns competition-entry 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns training-session 1
[2026-01-28 14:32:51] error: [ownership] Unexpected error: Database connection error
[2026-01-28 14:32:51] info: [ownership] Found owned horse 1 for user user-123
[2026-01-28 14:32:51] info: [ownership] Batch validation: user user-123 owns 2/2 horses
[2026-01-28 14:32:51] warn: [ownership] horse 1 not found or not owned by user user-123
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns horse 1
[2026-01-28 14:32:51] info: [ownership] Validated ownership: user user-123 owns horse 1
PASS __tests__/middleware/ownership.test.mjs
  Ownership Middleware
    requireOwnership()
      Authentication validation
        ‚àö should return 401 if user is not authenticated (13 ms)
        ‚àö should return 401 if user.id is missing (4 ms)
      Resource ID validation
        ‚àö should return 400 if resource ID is not a number (3 ms)
      Ownership validation - Horse
        ‚àö should allow access to owned horse (8 ms)
        ‚àö should return 404 if horse does not exist (3 ms)
      Ownership validation - Other resource types
        ‚àö should validate foal ownership (3 ms)
        ‚àö should validate groom ownership (3 ms)
        ‚àö should validate groom-assignment ownership (3 ms)
        ‚àö should validate breeding ownership (maps to horse) (3 ms)
        ‚àö should validate competition-entry ownership (maps to competitionResult) (3 ms)
        ‚àö should validate training-session ownership (maps to trainingLog) (6 ms)
      Error handling
        ‚àö should handle database errors gracefully (3 ms)
    findOwnedResource()
      ‚àö should return owned horse (2 ms)
    validateBatchOwnership()
      ‚àö should return all owned horses (2 ms)
    Security tests
      ‚àö should prevent ownership disclosure (CWE-639) (3 ms)
      ‚àö should prevent TOCTOU vulnerabilities by using atomic single query (2 ms)
      ‚àö should validate user ID from token, not from request params (3 ms)

[2026-01-28 14:32:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:52] info: [envValidator] Test environment validation complete. Success: true
PASS tests/dbConnection.test.mjs
  üîå INTEGRATION: Database Connection - Alternative Prisma Client Path Testing
    ‚àö should connect to the database and fetch users (50 ms)

[2026-01-28 14:32:52] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:52] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:52] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:52] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:52] warn: [Validation] Input validation failed
[2026-01-28 14:32:52] warn: [Validation] Input validation failed
[2026-01-28 14:32:52] warn: [Validation] Input validation failed
PASS __tests__/middleware/validationErrorHandler.test.mjs
  Validation Error Handler
    handleValidationErrors()
      ‚àö should call next() when no validation errors (12 ms)
      ‚àö should return 400 when validation errors exist (5 ms)
      ‚àö should handle single validation error (3 ms)
      ‚àö should handle nested field validation errors (3 ms)
    sanitizeRequestData() - XSS Prevention
      No validation errors
        ‚àö should sanitize body data and remove extra fields (3 ms)
        ‚àö should sanitize query parameters (7 ms)
        ‚àö should sanitize route parameters (4 ms)
        ‚àö should handle multiple request sources simultaneously (4 ms)
        ‚àö should preserve validated data with special characters (3 ms)
        ‚àö should handle empty validated data (2 ms)
        ‚àö should handle optional fields (2 ms)
      With validation errors
        ‚àö should NOT modify request data when validation failed (3 ms)
        ‚àö should still call next() to allow handleValidationErrors to run (2 ms)
      XSS Attack Scenarios
        ‚àö should prevent <script> injection (2 ms)
        ‚àö should prevent event handler injection (6 ms)
        ‚àö should prevent iframe injection (2 ms)
        ‚àö should prevent SVG XSS (2 ms)
      Parameter Pollution Prevention (CWE-20)
        ‚àö should prevent array parameter pollution (4 ms)
        ‚àö should prevent object parameter pollution (4 ms)
        ‚àö should prevent duplicate parameter names (3 ms)

[2026-01-28 14:32:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:53] info: [envValidator] Test environment validation complete. Success: true
PASS tests/simple-db.test.mjs
  Simple Database Test
    ‚àö should connect to database (148 ms)
    ‚àö should create a simple user (15 ms)

[2026-01-28 14:32:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 4
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: bonded (total: 20)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: resilient (total: 20)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: calm (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 20, total: 20, chance: 20%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 20, total: 20, chance: 20%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 20, chance: 20%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 20, chance: 20%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 20
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: bonded (total: 100)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: resilient (total: 100)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 15
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 75 points for trait: confident (total: 75)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 100, total: 100, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 50.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 100, total: 100, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 50.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 75, total: 75, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 50.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 90.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 90.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 5, chance: 5%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 90.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] No valid task log provided
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 1
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: crowdReady (total: 5)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 4.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 5, total: 5, chance: 5%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 4.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident","crowdReady"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: calm (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 5
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 25)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: crowdReady (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 40)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 6
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: calm (total: 30)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 4
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 30)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: presentationBoosted (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 50, chance: 50%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 50, chance: 50%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 40, total: 50, chance: 50%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 15, total: 25, chance: 25%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 30, total: 40, chance: 40%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 30, total: 40, chance: 40%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 10, total: 20, chance: 20%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: presentationBoosted (rolled: 30.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm","showCalm"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: -5
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: -5)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 50
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: bonded (total: 250)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: resilient (total: 250)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 30
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 150 points for trait: confident (total: 150)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 250, total: 250, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 70.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 250, total: 250, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 70.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 150, total: 150, chance: 60%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 70.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 12.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 12.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 12.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 20.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 20.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 20.00)
[2026-01-28 14:32:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []
PASS tests/traitMilestoneEvaluation.test.mjs
  Trait Milestone Evaluation
    evaluateEpigeneticTagsFromFoalTasks
      ‚àö should evaluate traits from task log without streak bonus (25 ms)
      ‚àö should apply streak bonus when consecutive days >= 7 (15 ms)
      ‚àö should cap trait probability at 60% (15 ms)
      ‚àö should not assign traits when random chance is too high (11 ms)
      ‚àö should handle empty task log (3 ms)
      ‚àö should handle null task log (2 ms)
      ‚àö should handle tasks not in influence map (12 ms)
      ‚àö should handle multiple tasks influencing same trait (10 ms)
      ‚àö should return unique traits only (16 ms)
      ‚àö should handle comprehensive foal development scenario (30 ms)
      ‚àö should handle edge case with zero task counts (5 ms)
      ‚àö should handle negative streak values (8 ms)
      ‚àö should handle very high task counts with capping (14 ms)
      ‚àö should demonstrate probability distribution (38 ms)

[2026-01-28 14:32:53] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:53] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:53] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:53] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:32:53] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 2 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 3 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:53] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:53] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] warn: [MemoryManager] Potential memory leak detected: 2MB per sample
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] warn: [MemoryManager] Memory threshold alert: 90MB used
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:32:54] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting memory and resource monitoring
[2026-01-28 14:32:54] info: [MemoryManager] Stopping memory and resource monitoring
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
[2026-01-28 14:32:54] info: [MemoryManager] Starting resource cleanup
[2026-01-28 14:32:54] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned
(node:35444) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:35444) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:35444) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:35444) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:35444) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 unhandledRejection listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
PASS __tests__/services/memoryResourceManagement.test.mjs
  Memory and Resource Management System
    Memory Manager Initialization
      ‚àö creates memory manager with default options (7 ms)
      ‚àö creates memory manager with custom options (11 ms)
      ‚àö returns singleton instance (4 ms)
    Memory Monitoring
      ‚àö starts and stops monitoring correctly (6 ms)
      ‚àö collects memory metrics correctly (5 ms)
      ‚àö stores memory metrics history (8 ms)
      ‚àö limits memory metrics history to 1000 entries (13 ms)
    Resource Tracking
      ‚àö tracks and untracks timers correctly (4 ms)
      ‚àö tracks and untracks intervals correctly (6 ms)
      ‚àö tracks event listeners correctly (10 ms)
      ‚àö gets resource counts correctly (5 ms)
    Resource Cleanup
      ‚àö cleans up all tracked resources (6 ms)
      ‚àö handles cleanup errors gracefully (9 ms)
    Memory Leak Detection
      ‚àö calculates memory trend correctly (4 ms)
      ‚àö detects memory leaks with consistent growth (5 ms)
    Memory Threshold Monitoring
      ‚àö triggers alert when memory threshold exceeded (6 ms)
      ‚àö does not trigger alert when memory is below threshold (9 ms)
    Garbage Collection
      ‚àö optimizes garbage collection when available (4 ms)
      ‚àö handles GC unavailability gracefully (4 ms)
    Comprehensive Report Generation
      ‚àö generates complete memory and resource report (5 ms)
    Helper Functions
      ‚àö trackResource helper function works correctly (4 ms)
      ‚àö untrackResource helper function works correctly (8 ms)
      ‚àö getMemoryReport helper function works correctly (5 ms)
      ‚àö initializeMemoryManagement starts monitoring (7 ms)
    Event Handling
      ‚àö emits monitoring events correctly (9 ms)
      ‚àö emits metrics collection events (4 ms)

[2026-01-28 14:32:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:54] info: [auth:73ca1] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:73ca1] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:73ca1] Authenticated user 4049
[2026-01-28 14:32:54] info: [auth:e8lgu9] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:e8lgu9] Token from cookie: false
[2026-01-28 14:32:54] info: [auth:e8lgu9] Token from header: true
[2026-01-28 14:32:54] info: [auth:e8lgu9] Authenticated user 64
[2026-01-28 14:32:54] info: [auth:zdzby] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:zdzby] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:zdzby] Authenticated user 1
[2026-01-28 14:32:54] info: [auth:7k3ti] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:7k3ti] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:7k3ti] Authenticated user 478
[2026-01-28 14:32:54] info: [auth:igb2bm] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:igb2bm] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:igb2bm] Token expired (precheck)
[2026-01-28 14:32:54] warn: [auth:igb2bm] Token expired for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:1uh4q] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:1uh4q] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:1uh4q] Session too old
[2026-01-28 14:32:54] warn: [auth:1uh4q] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:jfgy6b] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:jfgy6b] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:jfgy6b] Authenticated user 4446
[2026-01-28 14:32:54] info: [auth:b4lta] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:b4lta] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:b4lta] Session too old
[2026-01-28 14:32:54] warn: [auth:b4lta] Session expired. Please login again. for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:sn5a5a] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:sn5a5a] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:sn5a5a] Token decode failed: Unexpected token 'ÔøΩ', "ÔøΩ{⁄ñ'" is not valid JSON
[2026-01-28 14:32:54] warn: [auth:sn5a5a] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:eewxf] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:eewxf] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:eewxf] Verify failed: invalid signature
[2026-01-28 14:32:54] warn: [auth:eewxf] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:9ybzd8] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:9ybzd8] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:9ybzd8] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:zd2m0ed] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:zd2m0ed] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:zd2m0ed] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:bvhhva] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:bvhhva] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:bvhhva] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:peh32] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:peh32] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:peh32] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:2gffvvj7] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:2gffvvj7] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:2gffvvj7] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:2pq0ql] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:2pq0ql] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:2pq0ql] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:kxruj6] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:kxruj6] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:kxruj6] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:9nnal] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:9nnal] Token from cookie: false
[2026-01-28 14:32:54] warn: [auth:9nnal] Access token is required for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:u8r82n] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:u8r82n] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:u8r82n] Authenticated user 12345
[2026-01-28 14:32:54] info: [auth:qezthh] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:qezthh] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:qezthh] Authenticated user 99999
[2026-01-28 14:32:54] info: [auth:4jwy6] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:4jwy6] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:4jwy6] Authenticated user 8174
[2026-01-28 14:32:54] info: [auth:45a3l] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:45a3l] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:45a3l] Authenticated user 2167
[2026-01-28 14:32:54] info: [auth:0np4dr] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:0np4dr] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:0np4dr] Invalid or expired token for GET /api/test from 127.0.0.1
[2026-01-28 14:32:54] info: [auth:99qt9n] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:99qt9n] Token from cookie: true
[2026-01-28 14:32:54] info: [auth:99qt9n] Authenticated user undefined
[2026-01-28 14:32:54] info: [auth:5zc11e] Starting auth for GET /api/test
[2026-01-28 14:32:54] info: [auth:5zc11e] Token from cookie: true
[2026-01-28 14:32:54] warn: [auth:5zc11e] Invalid or expired token for GET /api/test from 127.0.0.1
PASS __tests__/unit/security/token-validation.test.mjs
  Token Validation Unit Tests
    Valid Token Scenarios
      ‚àö should authenticate with valid token in cookie (10 ms)
      ‚àö should authenticate with valid token in Authorization header (5 ms)
      ‚àö should prefer cookie token over Authorization header (11 ms)
      ‚àö should accept token with additional custom payload (5 ms)
    Expired Token Scenarios
      ‚àö should reject expired token (6 ms)
      ‚àö should reject token older than 7 days (CWE-613) (5 ms)
      ‚àö should accept token exactly 7 days old (5 ms)
      ‚àö should reject token slightly over 7 days old (9 ms)
    Malformed Token Scenarios
      ‚àö should reject malformed token (4 ms)
      ‚àö should reject token with invalid signature (5 ms)
      ‚àö should reject completely invalid token string (3 ms)
      ‚àö should reject empty token string (3 ms)
      ‚àö should reject null token (6 ms)
      ‚àö should reject undefined token (3 ms)
    Missing Token Scenarios
      ‚àö should return 401 when no token in cookie or header (3 ms)
      ‚àö should return 401 when Authorization header has no Bearer token (3 ms)
      ‚àö should return 401 when Authorization header has wrong scheme (4 ms)
      ‚àö should return 401 when Authorization header has no space (3 ms)
    Token Payload Validation
      ‚àö should extract userId from token payload (8 ms)
      ‚àö should handle legacy id field mapping (5 ms)
      ‚àö should include iat (issued at) timestamp in user object (5 ms)
      ‚àö should include exp (expiration) timestamp in user object (5 ms)
    Security Edge Cases
      ‚àö should reject token with modified payload (3 ms)
      ‚àö should reject token without userId field (5 ms)
      ‚àö should reject token signed with algorithm none (6 ms)

[2026-01-28 14:32:54] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:54] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:54] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:54] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z
[2026-01-28 14:32:54] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z
PASS tests/unit/environmentalFactorEngine.test.mjs
  üå§Ô∏è Environmental Factor Engine
    üå°Ô∏è Weather System
      ‚àö should calculate current weather conditions (12 ms)
      ‚àö should generate realistic weather patterns for different seasons (83 ms)
      ‚àö should account for location factors in weather calculation (4 ms)
    üçÇ Seasonal Cycles
      ‚àö should calculate seasonal factors for horse development (3 ms)
      ‚àö should provide seasonal transition effects (2 ms)
    ‚ö° Environmental Triggers
      ‚àö should calculate environmental triggers for trait expression (2 ms)
      ‚àö should identify stress triggers based on weather conditions (1 ms)
      ‚àö should account for horse traits in trigger calculation (1 ms)
    üéØ Environmental Impact Calculation
      ‚àö should calculate environmental impact on horse development (6 ms)
      ‚àö should provide different impacts for different environmental conditions (1 ms)
    üîÆ Weather Forecasting
      ‚àö should generate weather forecast for planning (9 ms)
      ‚àö should provide seasonal forecast trends (30 ms)
    üìä Comfort Zone Analysis
      ‚àö should calculate horse comfort zone based on traits and preferences (1 ms)
      ‚àö should adjust comfort zone based on horse traits (1 ms)
    ‚ö†Ô∏è Environmental Stress Assessment
      ‚àö should assess environmental stress levels (2 ms)
      ‚àö should provide stress mitigation recommendations (1 ms)

[2026-01-28 14:32:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:32:55] info: [simulateCompetition] Horse TraitMatch: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:32:55] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:32:55] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/simulateCompetition.test.mjs
  üèá UNIT: Competition Simulation System - Horse Performance & Ranking
    getStatScore
      ‚àö should calculate correct weighted score for Racing discipline (2 ms)
      ‚àö should calculate correct weighted score for Show Jumping discipline (1 ms)
      ‚àö should handle missing stats by defaulting to 0 (1 ms)
      ‚àö should throw error for invalid discipline (4 ms)
      ‚àö should throw error for missing horse object (1 ms)
    getHealthModifier
      ‚àö should return correct modifiers for all health ratings (1 ms)
      ‚àö should return 0 for unknown health rating
    applyRiderModifiers
      ‚àö should apply bonus correctly (1 ms)
      ‚àö should apply penalty correctly (1 ms)
      ‚àö should apply both bonus and penalty (1 ms)
      ‚àö should handle default values
      ‚àö should validate input ranges (1 ms)
    simulateCompetition
      ‚àö should simulate competition with 5 horses and return correct rankings (11 ms)
      ‚àö should calculate discipline affinity trait bonus correctly (52 ms)
      ‚àö should handle horses with missing optional fields (2 ms)
      ‚àö should handle empty horse array (1 ms)
      ‚àö should validate inputs (2 ms)
      ‚àö should handle calculation errors gracefully (1 ms)
      ‚àö should verify complete scoring formula with random luck modifier (8 ms)
      ‚àö should apply random luck modifier causing score variation (1 ms)

[2026-01-28 14:32:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:55] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:32:55] warn: [FeatureFlag] Flag overridden at runtime
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
[2026-01-28 14:32:55] info: [FeatureFlag] All runtime overrides cleared
PASS __tests__/unit/featureFlagService.test.mjs
  Feature Flag Service
    isFeatureEnabled
      ‚àö should return false for undefined flags (10 ms)
      ‚àö should return true for flags set to "true" in environment (66 ms)
      ‚àö should return false for flags set to "false" in environment (2 ms)
      ‚àö should handle case-insensitive boolean strings (2 ms)
      ‚àö should use default value from FLAG_DEFINITIONS (2 ms)
      ‚àö should respect environment override over defaults (2 ms)
    Percentage-based rollout
      ‚àö should consistently hash same user to same bucket (2 ms)
      ‚àö should return false when percentage is 0 (9 ms)
      ‚àö should return true when percentage is 100 (2 ms)
    getFeatureVariant
      ‚àö should return string value from environment (2 ms)
      ‚àö should return default value for undefined flags (2 ms)
      ‚àö should return default when value is not a string (2 ms)
    getAllFlags
      ‚àö should return all defined flags (3 ms)
      ‚àö should evaluate flags with provided context (2 ms)
    getEvaluationStats
      ‚àö should track flag evaluations (2 ms)
      ‚àö should calculate enabled rate correctly (2 ms)
    overrideFlag
      ‚àö should allow runtime flag override (7 ms)
    clearOverrides
      ‚àö should clear all runtime overrides (4 ms)
    Error Handling
      ‚àö should return false on evaluation error (2 ms)

[2026-01-28 14:32:55] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:55] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:55] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:55] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/cookieConfig.test.mjs
  Cookie Configuration Module
    Access Token Cookie Options
      ‚àö should have correct security properties in development (7 ms)
      ‚àö should have correct security properties in production (4 ms)
      ‚àö should use custom domain when COOKIE_DOMAIN is set (5 ms)
      ‚àö should have httpOnly true (XSS protection) (3 ms)
      ‚àö should have sameSite strict (CSRF protection) (3 ms)
      ‚àö should have maxAge matching access token expiry (15 minutes) (5 ms)
      ‚àö should have path set to root (5 ms)
    Refresh Token Cookie Options
      ‚àö should have correct security properties (4 ms)
      ‚àö should have maxAge matching refresh token expiry (7 days) (9 ms)
      ‚àö should have path scoped to refresh endpoint (least privilege) (4 ms)
    CSRF Token Cookie Options
      ‚àö should have httpOnly false (client must read for X-CSRF-Token header) (4 ms)
      ‚àö should have correct security properties (4 ms)
      ‚àö should have maxAge matching access token (session-tied) (4 ms)
    Clear Cookie Options
      ‚àö should match access token options (except maxAge) (3 ms)
      ‚àö should match refresh token options (except maxAge) (4 ms)
      ‚àö should have same path as original cookie (required for proper deletion) (5 ms)
      ‚àö should have same domain as original cookie (required for proper deletion) (4 ms)
    Environment-Specific Behavior
      ‚àö should have secure: false in development (3 ms)
      ‚àö should have secure: false in test (3 ms)
      ‚àö should have secure: true in production (5 ms)
    Cookie Configuration Summary
      ‚àö should return configuration summary (5 ms)
      ‚àö should show production environment correctly (4 ms)
      ‚àö should show custom domain when set (4 ms)
      ‚àö should show same-domain when COOKIE_DOMAIN not set (8 ms)
    Security Compliance
      ‚àö should have all security flags enabled in production (4 ms)
      ‚àö should prevent JavaScript access to auth tokens (XSS mitigation) (3 ms)
      ‚àö should require HTTPS in production (MitM mitigation) (3 ms)
      ‚àö should prevent cross-site requests (CSRF mitigation) (3 ms)
    Exports
      ‚àö should export all required constants (5 ms)

[2026-01-28 14:32:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/database.test.mjs
  üîå INTEGRATION: Database Connection - Core Infrastructure Validation
    ‚àö should connect to the database (51 ms)
    ‚àö should be able to query the User table (4 ms)
    ‚àö should be able to perform basic database operations (2 ms)
    ‚àö should handle database errors gracefully (12 ms)

[2026-01-28 14:32:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/schema-field-test.test.mjs
  Schema Field Test
    ‚àö should create horse with consecutiveDaysFoalCare field (90 ms)

[2026-01-28 14:32:56] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:56] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:56] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:56] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityTraitIntegration.test.mjs
  Burnout Immunity & Trait Integration
    Complete Foal Development Workflow
      ‚àö should demonstrate full workflow from consistent care to trait rewards (6 ms)
      ‚àö should handle streak loss and recovery scenario (2 ms)
      ‚àö should demonstrate per-horse independent tracking (9 ms)
    Grace Period Edge Cases
      ‚àö should handle exactly 2-day grace period with trait evaluation (1 ms)
      ‚àö should handle 3-day gap (beyond grace period) (1 ms)
    Trait Assignment with Streak Bonuses
      ‚àö should demonstrate streak bonus impact on trait assignment (2 ms)
      ‚àö should validate trait metadata for all assigned traits (3 ms)
    Real-World Player Scenarios
      ‚àö should handle casual player with weekend-only care (2 ms)
      ‚àö should handle dedicated player with consistent daily care (1 ms)

[2026-01-28 14:32:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: strict
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for strict: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task feeding
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task grooming
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare
[2026-01-28 14:32:57] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: 
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none
[2026-01-28 14:32:57] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: invalid_personality
[2026-01-28 14:32:57] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for invalid_personality: none
PASS tests/groomSystemLogic.test.mjs
  üßÆ UNIT: Groom System Logic - Pure Business Logic Validation
    calculateGroomInteractionEffects
      ‚àö should calculate basic interaction effects (7 ms)
      ‚àö should apply foal care specialty bonuses correctly (13 ms)
      ‚àö should apply skill level modifiers correctly (5 ms)
      ‚àö should apply personality modifiers correctly (5 ms)
      ‚àö should apply experience bonuses correctly (9 ms)
      ‚àö should scale cost with duration and session rate (6 ms)
      ‚àö should handle different interaction types (7 ms)
      ‚àö should handle edge cases gracefully (11 ms)
    System Constants
      ‚àö should have all required groom specialties (3 ms)
      ‚àö should have all required skill levels (2 ms)
      ‚àö should have all required personality traits (1 ms)
      ‚àö should have valid default groom profiles (6 ms)
    Modifier Calculations
      ‚àö should combine modifiers correctly (3 ms)
      ‚àö should handle invalid modifiers gracefully (3 ms)

[2026-01-28 14:32:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:57] info: [envValidator] Test environment validation complete. Success: true
PASS tests/data-check.test.mjs
  üîç INTEGRATION: Database Data Check - Live Data Validation & Debugging
    ‚àö should check what users exist (51 ms)
    ‚àö should check what players exist (using user table) (5 ms)
    ‚àö should check what horses exist (5 ms)

[2026-01-28 14:32:57] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:57] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:57] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:57] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:32:57] info: [cacheHelper] Cache statistics reset
PASS __tests__/integration/caching-circuit-breaker.test.mjs
  Caching Circuit Breaker Integration Tests
    Multi-Tier Caching (L1: In-Memory, L2: Redis)
      ‚àö should use in-memory cache when Redis is unavailable (5 ms)
      ‚àö should cache data in both tiers when Redis is available (9 ms)
      ‚àö should handle TTL expiration in local cache (12 ms)
    Circuit Breaker Protection
      ‚àö should include circuit breaker status in health statistics (3 ms)
      ‚àö should not throw errors when circuit breaker is unavailable (2 ms)
      ‚àö should track cache statistics correctly (3 ms)
    Graceful Degradation
      ‚àö should fall back to query execution if cache fails (2 ms)
      ‚àö should handle null and undefined query results (7 ms)
      ‚àö should handle query function errors gracefully (4 ms)
    Cache Invalidation
      ‚àö should invalidate specific cache keys (2 ms)
      ‚àö should invalidate cache by pattern (3 ms)
      ‚àö should handle invalidation when Redis is unavailable (2 ms)
    Cache Key Generation
      ‚àö should generate standardized cache keys (2 ms)
      ‚àö should sanitize cache key components (2 ms)
      ‚àö should filter out null and undefined components (1 ms)
    Statistics and Monitoring
      ‚àö should calculate hit rate correctly (2 ms)
      ‚àö should track error counts (2 ms)
      ‚àö should provide timestamp of last update (23 ms)
    Performance and Limits
      ‚àö should handle multiple concurrent cache requests (3 ms)
      ‚àö should handle large data objects (3 ms)

[2026-01-28 14:32:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:58] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/groomBondingSystem.comprehensive.test.mjs
  ü§ù COMPREHENSIVE: Groom Bonding System & Task Eligibility
    Age-Based Task Eligibility
      ‚àö should return enrichment tasks for newborn foals (0-2 years) (3 ms)
      ‚àö should return appropriate tasks for young foals (1-2 years) (3 ms)
      ‚àö should return grooming tasks for yearlings (1-2 years) (1 ms)
      ‚àö should return general tasks for mature horses (3+ years) (8 ms)
      ‚àö should handle age boundary conditions correctly (1 ms)
    Grooming Eligibility Validation
      ‚àö should validate eligibility for young foal enrichment (2 ms)
      ‚àö should validate eligibility for yearling grooming (1 ms)
      ‚àö should validate eligibility for mature horse general care
      ‚àö should reject inappropriate tasks for age groups (1 ms)
      ‚àö should handle edge cases in age validation (1 ms)
    Bonding Effect Calculations
      ‚àö should calculate bonding effects for grooming tasks (1 ms)
      ‚àö should calculate bonding effects for non-grooming tasks (1 ms)
      ‚àö should handle maximum bonding score scenarios (1 ms)
      ‚àö should handle minimum bonding score scenarios
    Task Categorization
      ‚àö should categorize enrichment tasks correctly (1 ms)
      ‚àö should categorize grooming tasks correctly (1 ms)
      ‚àö should categorize general care tasks correctly (1 ms)
      ‚àö should handle unknown task types
    Age Group Descriptions
      ‚àö should provide correct descriptions for different age groups (2 ms)
      ‚àö should handle boundary ages consistently (1 ms)
    Input Validation and Error Handling
      ‚àö should handle invalid age values gracefully (1 ms)
      ‚àö should handle missing horse data gracefully (1 ms)
      ‚àö should handle invalid bonding calculation data (4 ms)
      ‚àö should handle null and undefined inputs (1 ms)
    System Integration Scenarios
      ‚àö should provide consistent results across related functions (1 ms)
      ‚àö should maintain logical progression through age groups (1 ms)

[2026-01-28 14:32:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
PASS __tests__/unit/security/csrf-validation.test.mjs
  CSRF Token Validation Unit Tests
    CSRF Token Generation
      ‚àö should generate a CSRF token (6 ms)
      ‚àö should store CSRF token in session (2 ms)
      ‚àö should generate unique tokens for each request (2 ms)
      ‚àö should generate token with sufficient length (2 ms)
      ‚àö should generate token with cryptographically secure randomness (2 ms)
    CSRF Token Validation - Valid Scenarios
      ‚àö should accept valid CSRF token in body (1 ms)
      ‚àö should accept valid CSRF token in header (1 ms)
      ‚àö should prefer body token over header token (6 ms)
      ‚àö should skip CSRF for GET requests (1 ms)
      ‚àö should skip CSRF for HEAD requests (1 ms)
      ‚àö should skip CSRF for OPTIONS requests (1 ms)
    CSRF Token Validation - Invalid Scenarios
      ‚àö should reject POST request without CSRF token (1 ms)
      ‚àö should reject PUT request without CSRF token
      ‚àö should reject DELETE request without CSRF token (1 ms)
      ‚àö should reject PATCH request without CSRF token (1 ms)
      ‚àö should reject mismatched CSRF token (1 ms)
      ‚àö should reject empty CSRF token (1 ms)
      ‚àö should reject null CSRF token (1 ms)
      ‚àö should reject undefined CSRF token (1 ms)
      ‚àö should reject when session has no CSRF token (1 ms)
      ‚àö should reject when session is missing (1 ms)
    CSRF Token Security Edge Cases
      ‚àö should reject token with extra whitespace
      ‚àö should reject token with newline characters
      ‚àö should reject token with special characters appended (1 ms)
      ‚àö should be case-sensitive for token validation (1 ms)
      ‚àö should reject partial token match (1 ms)
      ‚àö should use timing-safe comparison for tokens (1 ms)
    CSRF Error Handling
      ‚àö should return proper error response for CSRF failure (1 ms)
      ‚àö should not leak session token in error message (1 ms)
      ‚àö should not leak provided token in error message (1 ms)
    CSRF Token Rotation
      ‚àö should allow token regeneration (8 ms)
      ‚àö should invalidate old token after regeneration (2 ms)
    CSRF Double-Submit Cookie Pattern
      ‚àö should validate CSRF token from cookie
    CSRF Integration with Different Content Types
      ‚àö should validate CSRF for application/json (1 ms)
      ‚àö should validate CSRF for application/x-www-form-urlencoded (1 ms)
      ‚àö should validate CSRF for multipart/form-data (1 ms)

[2026-01-28 14:32:58] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:58] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:58] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:58] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] error: [CSRF] Token generation failed: Token generation failed
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] warn: [CSRF] Invalid token detected
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
[2026-01-28 14:32:58] info: [CSRF] Token generated
PASS __tests__/middleware/csrf.test.mjs
  CSRF Protection Middleware
    getCsrfToken
      ‚àö should generate and return CSRF token (6 ms)
      ‚àö should handle token generation failure (5 ms)
      ‚àö should generate token without user (unauthenticated) (2 ms)
    applyCsrfProtection
      ‚àö should apply CSRF protection to POST requests (2 ms)
      ‚àö should apply CSRF protection to PUT requests (1 ms)
      ‚àö should apply CSRF protection to DELETE requests (1 ms)
      ‚àö should apply CSRF protection to PATCH requests (1 ms)
      ‚àö should skip CSRF protection for GET requests (1 ms)
      ‚àö should skip CSRF protection for HEAD requests (1 ms)
      ‚àö should skip CSRF protection for OPTIONS requests (5 ms)
    csrfErrorHandler
      ‚àö should handle CSRF validation errors (EBADCSRFTOKEN) (2 ms)
      ‚àö should pass non-CSRF errors to next handler (1 ms)
      ‚àö should handle CSRF error without user context (2 ms)
      ‚àö should include security logging context on CSRF error (2 ms)
    Security Scenarios
      ‚àö should protect against missing CSRF token (2 ms)
      ‚àö should protect against invalid CSRF token (2 ms)
      ‚àö should provide user-friendly error message (1 ms)
    Integration with Cookie Configuration
      ‚àö getCsrfToken should work without authentication (1 ms)
      ‚àö should handle concurrent token generation (3 ms)
    HTTP Method Classification
      ‚àö should NOT require CSRF token for GET requests (1 ms)
      ‚àö should NOT require CSRF token for HEAD requests (1 ms)
      ‚àö should NOT require CSRF token for OPTIONS requests (1 ms)
      ‚àö should require CSRF token for POST requests
      ‚àö should require CSRF token for PUT requests
      ‚àö should require CSRF token for DELETE requests (4 ms)
      ‚àö should require CSRF token for PATCH requests

[2026-01-28 14:32:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:59] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 3 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 730
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 3 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 1095
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"trusting":3,"brave":3,"nervous":-3}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait trusting (epigenetic: false)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait brave (epigenetic: false)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_nervous (epigenetic: false)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 3 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":2,"aloof":-3,"affectionate":1,"friendly":1,"playful":1,"independent":-1}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 200
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":1,"patient":1,"aloof":-1}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Trait bonded already exists, skipping
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)
[2026-01-28 14:32:59] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits
PASS tests/milestoneTraitEvaluator.test.mjs
  Milestone Trait Evaluator
    evaluateTraitMilestones
      ‚àö should assign positive trait when encouraged 3+ times at age 1 (16 ms)
      ‚àö should assign resistance trait when discouraged 3+ times at age 2 (5 ms)
      ‚àö should not mark traits as epigenetic at age 3 (10 ms)
      ‚àö should calculate net trait scores correctly with mixed influences (6 ms)
      ‚àö should not evaluate if already completed for that milestone (2 ms)
      ‚àö should not evaluate if not a milestone age (2 ms)
      ‚àö should handle empty task log gracefully (3 ms)
      ‚àö should handle task log with unknown tasks (3 ms)
      ‚àö should prevent duplicate trait assignment (10 ms)
    calculateTraitScores
      ‚àö should calculate correct scores for single task type (1 ms)
      ‚àö should calculate net scores for mixed task types (1 ms)
      ‚àö should handle empty task log
      ‚àö should ignore unknown tasks
    checkMilestoneEligibility
      ‚àö should return eligible for milestone age without completion (1 ms)
      ‚àö should return not eligible if already evaluated
      ‚àö should return not eligible for non-milestone age (1 ms)
    getMilestoneSummary
      ‚àö should return correct summary for horse with completed milestones (1 ms)
      ‚àö should return correct summary for horse with all milestones complete (2 ms)
    Configuration Validation
      ‚àö should have correct milestone ages defined
      ‚àö should have correct trait thresholds defined
      ‚àö should have valid task trait influence map (9 ms)

[2026-01-28 14:32:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/epigeneticFlagDefinitions.test.mjs
  Epigenetic Flag Definitions
    Constants
      ‚àö should have correct flag types (3 ms)
      ‚àö should have correct source categories (1 ms)
      ‚àö should have correct max flags limit (1 ms)
      ‚àö should have correct age range
    Flag Definitions Structure
      ‚àö should have exactly 9 starter flags (7 ms)
      ‚àö should have all required starter flags (1 ms)
      ‚àö each flag should have required properties (11 ms)
      ‚àö each flag should have valid influences structure (7 ms)
    Flag Type Distribution
      ‚àö should have correct distribution of flag types (1 ms)
      ‚àö should have correct distribution of source categories (1 ms)
    Helper Functions
      getAllFlagDefinitions
        ‚àö should return all flag definitions (1 ms)
      getFlagDefinition
        ‚àö should return correct flag definition for valid name (1 ms)
        ‚àö should return correct flag definition for uppercase name
        ‚àö should return null for invalid flag name
        ‚àö should handle empty string (4 ms)
      getFlagsByType
        ‚àö should return positive flags (1 ms)
        ‚àö should return negative flags (1 ms)
        ‚àö should return empty array for adaptive flags (1 ms)
        ‚àö should return empty array for invalid type
      getFlagsBySourceCategory
        ‚àö should return flags by bonding category
        ‚àö should return flags by novelty category (1 ms)
        ‚àö should return flags by environment category (1 ms)
        ‚àö should return empty array for invalid category
    Specific Flag Validation
      ‚àö BRAVE flag should have correct properties
      ‚àö FEARFUL flag should have correct properties (1 ms)
      ‚àö RESILIENT flag should have correct properties (1 ms)

[2026-01-28 14:32:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitCalculation.test.mjs
  üß¨ UNIT: Epigenetic Traits Calculation System
    Edge Cases
      ‚àö should handle extreme bonding values (3 ms)
      ‚àö should handle extreme stress values (1 ms)
      ‚àö should handle empty trait arrays (1 ms)
    Trait Combinations
      ‚àö should handle complementary positive traits (1 ms)
      ‚àö should handle opposing traits appropriately (1 ms)
    Environmental Influence
      ‚àö should produce more positive traits in ideal conditions
      ‚àö should test trait inheritance probability (1 ms)
    Rare Trait Generation
      ‚àö should occasionally produce rare traits (2 ms)
    Input Validation
      ‚àö should handle missing parameters gracefully (4 ms)
      ‚àö should handle invalid parameter types (1 ms)
    Deterministic Behavior
      ‚àö should produce consistent results with the same seed (1 ms)
      ‚àö should produce different results with different seeds (9 ms)
    getTraitDefinition
      ‚àö should return trait definition for valid traits (1 ms)
      ‚àö should return null for invalid traits (1 ms)
      ‚àö should return correct definition for rare traits
    getTraitsByType
      ‚àö should return all traits when type is "all" (1 ms)
      ‚àö should return only positive traits when type is "positive" (1 ms)
      ‚àö should return only negative traits when type is "negative" (1 ms)
      ‚àö should default to "all" when no type specified (1 ms)
    checkTraitConflict
      ‚àö should detect conflicts between opposing traits (1 ms)
      ‚àö should return false for non-conflicting traits
      ‚àö should return false for unknown traits
      ‚àö should handle self-comparison correctly (1 ms)
    Boundary Value Testing
      ‚àö should handle bond score boundaries (0, 50, 100) (1 ms)
      ‚àö should handle stress level boundaries (0, 50, 100) (1 ms)
      ‚àö should reject out-of-bounds values (2 ms)

[2026-01-28 14:32:59] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:32:59] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:32:59] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:32:59] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirth.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth - Breeding Condition Analysis
    Input Validation
      ‚àö should throw error when mare is not provided (8 ms)
      ‚àö should handle missing optional parameters (2 ms)
    Low Stress and Premium Feed Conditions
      ‚àö should assign resilient trait with low stress and premium feed (1 ms)
      ‚àö should assign peopleTrusting trait with low stress and premium feed (1 ms)
      ‚àö should not assign positive traits with high stress (1 ms)
      ‚àö should not assign positive traits with poor feed quality (1 ms)
    Inbreeding Detection and Negative Traits
      ‚àö should assign fragile trait with high inbreeding (2 ms)
      ‚àö should assign reactive trait with moderate inbreeding (1 ms)
      ‚àö should assign low_immunity trait with inbreeding (2 ms)
      ‚àö should not assign inbreeding traits without common ancestors (2 ms)
    Discipline Specialization
      ‚àö should assign discipline affinity trait with 3+ ancestors in same discipline (2 ms)
      ‚àö should assign legacy_talent trait with 4+ ancestors in same discipline (1 ms)
      ‚àö should use disciplineScores when discipline field is not available (1 ms)
      ‚àö should not assign discipline traits without sufficient specialization (1 ms)
    Additional Stress and Nutrition Effects
      ‚àö should assign nervous trait with very high mare stress (1 ms)
      ‚àö should assign low_immunity trait with poor nutrition (1 ms)
      ‚àö should not duplicate traits (1 ms)
    Return Value Structure
      ‚àö should return object with positive and negative arrays (1 ms)
      ‚àö should handle empty lineage gracefully (2 ms)
      ‚àö should handle null lineage gracefully (3 ms)

[2026-01-28 14:33:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:00] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully created new result for horse 3 in show 2 with score 65.2
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:33:00] error: [resultModel.saveResult] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:361:61)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully updated placeholder result for horse 1 in show 2 with score 85.5
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:33:00] info: [resultModel.getResultsByHorse] Found 2 results for horse 1
[2026-01-28 14:33:00] info: [resultModel.getResultsByHorse] Found 0 results for horse 999
[2026-01-28 14:33:00] error: [resultModel.getResultsByHorse] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:562:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:33:00] info: [resultModel.getResultsByShow] Found 2 results for show 2
[2026-01-28 14:33:00] info: [resultModel.getResultsByShow] Found 0 results for show 999
[2026-01-28 14:33:00] error: [resultModel.getResultsByShow] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:634:63)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:33:00] info: [resultModel.getResultById] Successfully found result: 1
[2026-01-28 14:33:00] error: [resultModel.getResultById] Database error: Error: Database connection failed
    at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:692:65)
    at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
  [stack]: [Getter/Setter],
  [message]: 'Database connection failed'
}
[2026-01-28 14:33:00] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5
[2026-01-28 14:33:00] info: [resultModel.getResultsByUser] Retrieved 1 results for user user123
[2026-01-28 14:33:00] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 14:33:00] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123
[2026-01-28 14:33:00] error: [resultModel.getResultsByUser] Error getting results for user user123: Database error
[2026-01-28 14:33:00] info: [resultModel.getResultsByHorse] Found 0 results for horse 123
[2026-01-28 14:33:00] info: [resultModel.getResultsByShow] Found 0 results for show 456
PASS tests/resultModel.test.mjs
  üèÜ UNIT: Result Model - Competition Result Management
    saveResult
      ‚àö should save a competition result with all required fields (6 ms)
      ‚àö should save a result without placement (null for non-top-3) (2 ms)
      ‚àö should throw error if horseId is missing (11 ms)
      ‚àö should throw error if showId is missing (2 ms)
      ‚àö should throw error if score is missing (1 ms)
      ‚àö should throw error if discipline is missing (2 ms)
      ‚àö should throw error if runDate is missing (1 ms)
      ‚àö should validate score is a number (2 ms)
      ‚àö should validate horseId is a positive integer (1 ms)
      ‚àö should validate showId is a positive integer (2 ms)
      ‚àö should throw error if showName is missing (1 ms)
      ‚àö should throw error if showName is not a string (2 ms)
      ‚àö should handle prizeWon as string and convert to float (2 ms)
      ‚àö should handle database errors gracefully (10 ms)
      ‚àö should update existing placeholder result instead of creating new one (2 ms)
      ‚àö should create new result when no placeholder exists (2 ms)
    getResultsByHorse
      ‚àö should retrieve all results for a specific horse (2 ms)
      ‚àö should return empty array if no results found for horse (1 ms)
      ‚àö should validate horseId is a positive integer (2 ms)
      ‚àö should handle database errors gracefully (2 ms)
    getResultsByShow
      ‚àö should retrieve all results for a specific show (2 ms)
      ‚àö should return empty array if no results found for show (2 ms)
      ‚àö should validate showId is a positive integer (1 ms)
      ‚àö should handle database errors gracefully (2 ms)
    getResultById
      ‚àö should retrieve a specific result by ID (2 ms)
      ‚àö should return null if result not found (5 ms)
      ‚àö should validate resultId is a positive integer (2 ms)
      ‚àö should handle database errors gracefully (2 ms)
    createResult
      ‚àö should be an alias for saveResult and work identically (1 ms)
      ‚àö should throw same validation errors as saveResult (1 ms)
    getResultsByUser
      ‚àö should retrieve results for all user horses with default options (2 ms)
      ‚àö should handle custom options (limit, offset, discipline) (2 ms)
      ‚àö should cap limit at 100 and ensure non-negative offset (2 ms)
      ‚àö should handle database errors gracefully (2 ms)
    parseInt conversion edge cases
      ‚àö should handle string IDs in getResultsByHorse (1 ms)
      ‚àö should handle string IDs in getResultsByShow (1 ms)
      ‚àö should handle string IDs in getResultById (2 ms)

[2026-01-28 14:33:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomMarketplace.test.mjs
  üè™ Groom Marketplace System
    Random Groom Generation
      ‚àö should generate a valid groom with all required properties (6 ms)
      ‚àö should generate experience within skill level ranges (14 ms)
      ‚àö should calculate session rates based on skill level and experience (2 ms)
      ‚àö should generate unique marketplace IDs (11 ms)
      ‚àö should generate meaningful bios that include name and specialty (1 ms)
    Marketplace Generation
      ‚àö should generate marketplace with default size (2 ms)
      ‚àö should generate marketplace with custom size (1 ms)
      ‚àö should respect quality distribution over large sample (11 ms)
    Refresh Mechanics
      ‚àö should need refresh when no last refresh provided (1 ms)
      ‚àö should need refresh when enough time has passed (1 ms)
      ‚àö should not need refresh when not enough time has passed (1 ms)
      ‚àö should calculate correct refresh cost
    Configuration Validation
      ‚àö should have valid marketplace configuration (2 ms)

[2026-01-28 14:33:00] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:00] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:00] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:00] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomAgeRestrictions.test.mjs
  Groom Age Restrictions & Task Eligibility
    Configuration Values
      ‚àö should allow grooms to work with foals from birth (3 ms)
      ‚àö should define adult horse age threshold at 3 years (1 ms)
      ‚àö should have foal enrichment tasks defined (2 ms)
      ‚àö should have adult grooming tasks defined (1 ms)
    Foal Enrichment Task Eligibility (0-2 years)
      ‚àö should allow newborn foal (0 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 1-week-old foal (7 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 1-year-old horse (365 days) to receive enrichment tasks (1 ms)
      ‚àö should allow 2.9-year-old horse (1059 days) to receive enrichment tasks (1 ms)
    Adult Horse Grooming Task Eligibility (3+ years)
      ‚àö should allow exactly 3-year-old horse (1095 days) to receive adult grooming tasks (1 ms)
      ‚àö should allow 5-year-old horse (1825 days) to receive adult grooming tasks (1 ms)
      ‚àö should allow senior horse (10+ years) to receive adult grooming tasks (6 ms)
    Task Type Validation
      ‚àö should reject invalid task types for any age (1 ms)
      ‚àö should provide list of eligible tasks when task is invalid (1 ms)
    Age Boundary Conditions
      ‚àö should handle exactly 3 years (1095 days) as adult threshold (1 ms)
      ‚àö should handle day before 3rd birthday (20 days) (1 ms)
    Edge Cases
      ‚àö should handle negative age gracefully (1 ms)
      ‚àö should handle very old horses (20+ years) (1 ms)

[2026-01-28 14:33:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:01] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns horse 1
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns groom 5
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns horse 10
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns horse 20
[2026-01-28 14:33:01] warn: [ownership] horse 1 not found or not owned by user user-1
[2026-01-28 14:33:01] warn: [ownership] groom 5 not found or not owned by user user-1
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns training-session 1
[2026-01-28 14:33:01] info: [ownership] Validated ownership: user user-1 owns competition-entry 1
[2026-01-28 14:33:01] info: [ownership] Found owned horse 1 for user user-1
[2026-01-28 14:33:01] info: [ownership] Found owned groom 5 for user user-1
[2026-01-28 14:33:01] info: [ownership] Batch validation: user user-1 owns 2/2 horses
PASS __tests__/unit/security/ownership-checks.test.mjs
  Ownership Validation Unit Tests
    Owned Resource Scenarios
      ‚àö should allow access to owned horse (5 ms)
      ‚àö should allow access to owned groom (2 ms)
      ‚àö should attach resource to request object and validatedResources (2 ms)
      ‚àö should work with custom idParam (2 ms)
    Not Owned Resource Scenarios
      ‚àö should return 404 for horse owned by different user (2 ms)
      ‚àö should return 404 for groom owned by different user (2 ms)
    Resource Type Validation
      ‚àö should handle training-session resource type (maps to trainingLog) (7 ms)
      ‚àö should handle competition-entry resource type (maps to competitionResult) (1 ms)
    findOwnedResource Helper Function
      ‚àö should find owned horse using userId (1 ms)
      ‚àö should find owned groom using userId (1 ms)
    validateBatchOwnership Helper Function
      ‚àö should validate ownership of multiple horses using userId (2 ms)

[2026-01-28 14:33:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskInfluenceConfig.test.mjs
  Task Influence Configuration
    Task Influence Map Structure
      ‚àö should define influence map for all foal tasks (2 ms)
      ‚àö should have entries for all enrichment tasks (3 ms)
      ‚àö should have entries for all grooming tasks (2 ms)
      ‚àö should have correct structure for each task entry (12 ms)
    Task Coverage Validation
      ‚àö should cover all enrichment tasks
      ‚àö should cover all grooming tasks
      ‚àö should not have entries for non-foal tasks (1 ms)
    Trait Influence Validation
      ‚àö should have logical trait mappings for enrichment tasks (1 ms)
      ‚àö should have logical trait mappings for grooming tasks (1 ms)
      ‚àö should have consistent daily values
      ‚àö should have unique trait combinations per task (2 ms)
    Business Rule Validation
      ‚àö should support trait point accumulation system (1 ms)
      ‚àö should have reasonable trait distribution (1 ms)
      ‚àö should support epigenetic development progression (1 ms)
    Integration Validation
      ‚àö should integrate with foal task categories (5 ms)
      ‚àö should provide complete task influence coverage (1 ms)
    Data Quality Validation
      ‚àö should have meaningful trait names (2 ms)
      ‚àö should maintain consistent naming conventions (2 ms)
    Utility Functions
      getTaskInfluence
        ‚àö should return influence object for valid task (1 ms)
        ‚àö should return null for invalid task (1 ms)
      getTraitsInfluencedByTask
        ‚àö should return traits for valid task (1 ms)
        ‚àö should return empty array for invalid task (1 ms)
        ‚àö should return copy of traits array (1 ms)
      getDailyTraitValue
        ‚àö should return daily value for valid task
        ‚àö should return 0 for invalid task (1 ms)
      getTasksInfluencingTrait
        ‚àö should return tasks that influence a specific trait (1 ms)
        ‚àö should return empty array for non-existent trait
        ‚àö should return all tasks for presentationBoosted trait
      getAllInfluencedTraits
        ‚àö should return all unique traits (1 ms)
        ‚àö should return sorted array
        ‚àö should return unique traits only (1 ms)
      calculateTraitPoints
        ‚àö should calculate trait points for single task (1 ms)
        ‚àö should calculate trait points for multiple tasks (1 ms)
        ‚àö should handle overlapping traits correctly (1 ms)
        ‚àö should ignore invalid tasks
        ‚àö should handle zero completions (1 ms)
      validateTaskInfluenceMap
        ‚àö should validate correct structure (1 ms)

[2026-01-28 14:33:01] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:01] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:01] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:01] info: [envValidator] Test environment validation complete. Success: true
PASS tests/burnoutImmunityGracePeriod.test.mjs
  Burnout Immunity Grace Period
    Grace Period Mechanics
      ‚àö should preserve streak within 2-day grace period (3 ms)
      ‚àö should reset streak after grace period expires (2 ms)
      ‚àö should increment streak when groomed today (2 ms)
      ‚àö should handle exactly 2-day grace period boundary (2 ms)
      ‚àö should reset at 3-day lapse (beyond grace period) (1 ms)
    Burnout Immunity Achievement
      ‚àö should grant immunity at 7 consecutive days (1 ms)
      ‚àö should maintain immunity above 7 days (1 ms)
      ‚àö should show days remaining before immunity (1 ms)
      ‚àö should handle edge case at 6 days (one day before immunity) (1 ms)
    Streak Tracking Integration
      ‚àö should handle first-time grooming (1 ms)
      ‚àö should increment streak for consecutive days (6 ms)
      ‚àö should grant bonus eligibility at 7 consecutive days (2 ms)
      ‚àö should preserve streak within grace period (1 ms)
      ‚àö should reset streak beyond grace period (1 ms)
    Per-Horse Tracking
      ‚àö should demonstrate independent streak tracking per horse (2 ms)
    Configuration Validation
      ‚àö should use correct grace period configuration (1 ms)
      ‚àö should have consistent grace periods across systems (1 ms)
    Edge Cases and Error Handling
      ‚àö should handle zero consecutive days (1 ms)
      ‚àö should handle negative consecutive days (1 ms)
      ‚àö should handle very large streak numbers (1 ms)
      ‚àö should handle zero days since last grooming (1 ms)
    Real-World Scenarios
      ‚àö should handle weekend gap scenario (1 ms)
      ‚àö should handle vacation scenario (1 ms)
      ‚àö should handle immunity achievement and maintenance (1 ms)

[2026-01-28 14:33:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:02] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLogManager.test.mjs
  Foal Task Log Manager
    Task Log Initialization and Manipulation
      ‚àö should initialize empty task log (3 ms)
      ‚àö should increment task count for new task (2 ms)
      ‚àö should increment existing task count (1 ms)
      ‚àö should increment by custom amount (1 ms)
      ‚àö should handle null task log (1 ms)
      ‚àö should get task count for existing task (1 ms)
      ‚àö should return 0 for non-existent task (8 ms)
      ‚àö should handle null task log in getTaskCount (1 ms)
    Task Log Statistics
      ‚àö should calculate total task count (2 ms)
      ‚àö should handle empty task log in total count (1 ms)
      ‚àö should ignore non-numeric values in total count (2 ms)
      ‚àö should get completed tasks list (2 ms)
      ‚àö should handle empty task log in completed tasks (1 ms)
    Streak Calculation
      ‚àö should handle null last care date (1 ms)
      ‚àö should calculate same day care (1 ms)
      ‚àö should calculate within grace period (1 ms)
      ‚àö should detect broken streak beyond grace period (1 ms)
      ‚àö should use custom grace period (2 ms)
    Burnout Immunity
      ‚àö should grant immunity after 7 days (1 ms)
      ‚àö should not grant immunity before 7 days (1 ms)
      ‚àö should handle invalid input (1 ms)
      ‚àö should use custom immunity threshold (6 ms)
    Care Data Updates
      ‚àö should update foal care data with new task (1 ms)
      ‚àö should continue streak within grace period (1 ms)
      ‚àö should reset streak when broken (1 ms)
    Task Log Validation
      ‚àö should validate correct task log (1 ms)
      ‚àö should allow null task log (1 ms)
      ‚àö should reject non-object task log (1 ms)
      ‚àö should reject invalid task names (1 ms)
      ‚àö should reject invalid counts (1 ms)
    Care Summary
      ‚àö should generate comprehensive care summary (1 ms)
      ‚àö should handle empty foal data (1 ms)
    Streak Reset
      ‚àö should reset foal care streak (2 ms)
    Error Handling
      ‚àö should handle errors in incrementTaskCount (4 ms)
      ‚àö should handle errors in calculateStreakFromLastCareDate (1 ms)

[2026-01-28 14:33:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:02] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
[2026-01-28 14:33:02] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1
PASS tests/ultraRareTraitsCore.test.mjs
  Ultra-Rare & Exotic Traits Core Functionality
    Trait Definitions System
      ‚àö should retrieve all ultra-rare trait definitions (3 ms)
      ‚àö should retrieve all exotic trait definitions (1 ms)
      ‚àö should get specific trait definition by name (1 ms)
      ‚àö should have correct trait structure for all ultra-rare traits (11 ms)
      ‚àö should have correct trait structure for all exotic traits (2 ms)
    Groom Perk System
      ‚àö should apply rare trait booster effects to probability calculations (2 ms)
      ‚àö should not apply bonuses when no conditions are met (1 ms)
    Mechanical Effects Integration
      ‚àö should apply ultra-rare stress effects correctly
      ‚àö should apply ultra-rare competition effects correctly (1 ms)
      ‚àö should check ultra-rare abilities correctly (1 ms)
      ‚àö should handle multiple ultra-rare traits correctly (1 ms)
      ‚àö should handle stress immunity correctly (1 ms)
    Trait Conflicts and Stacking
      ‚àö should define proper trait conflicts (1 ms)
      ‚àö should define proper trait stacking (6 ms)

[2026-01-28 14:33:02] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:02] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:02] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:02] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 8.5% modifier, 8.5 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -10.4 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 4.5% modifier, 4.5 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 2: 5 traits applied, 16.4% modifier, 16.4 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 10.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 5.0% modifier, 5.0 point adjustment
[2026-01-28 14:33:02] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 7.0% modifier, 7.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -5.0% modifier, -5.0 point adjustment
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -6.0% modifier, -6.0 point adjustment
[2026-01-28 14:33:02] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 14:33:02] info: [traitCompetitionImpact] Horse 1: 6 traits applied, 19.6% modifier, 19.6 point adjustment
PASS tests/traitCompetitionImpact.test.mjs
  üèÜ UNIT: Trait Competition Impact System - Scoring Modifier Calculations
    calculateTraitCompetitionImpact
      ‚àö should handle horse with no traits (2 ms)
      ‚àö should apply positive trait bonuses correctly (3 ms)
      ‚àö should apply negative trait penalties correctly (9 ms)
      ‚àö should apply mixed traits correctly (2 ms)
      ‚àö should apply diminishing returns for multiple traits (3 ms)
      ‚àö should handle legendary traits correctly (2 ms)
      ‚àö should handle rare environmental traits (2 ms)
      ‚àö should handle missing epigenetic_modifiers gracefully (1 ms)
      ‚àö should handle unknown traits gracefully (2 ms)
    getTraitCompetitionEffect
      ‚àö should return correct trait effect (5 ms)
      ‚àö should return null for unknown trait
    hasSpecializedEffect
      ‚àö should return true for specialized combinations (1 ms)
      ‚àö should return false for non-specialized combinations (1 ms)
    getAllTraitCompetitionEffects
      ‚àö should return all trait effects (1 ms)
    Discipline-Specific Effects
      ‚àö Bold should excel at Show Jumping (2 ms)
      ‚àö Intelligent should excel at Dressage (1 ms)
      ‚àö Athletic should excel at Racing (2 ms)
      ‚àö Nervous should struggle with Show Jumping (1 ms)
      ‚àö Stubborn should struggle with Dressage (1 ms)
    Balance and Fairness
      ‚àö should ensure trait effects are balanced (7 ms)
      ‚àö should not allow trait stacking to become overpowered (2 ms)

[2026-01-28 14:33:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelTraitHelpers.test.mjs
  üê¥ UNIT: Horse Model Trait Helpers - Utility Function Validation
    trait addition
      ‚àö should add a trait to the correct category if not present (4 ms)
      ‚àö should not add a duplicate trait (8 ms)
    trait removal
      ‚àö should remove a trait from the correct category (1 ms)
      ‚àö should handle removal of a non-existent trait gracefully (1 ms)
    getAllTraits utility
      ‚àö should return a flattened array of all traits (2 ms)
      ‚àö should handle empty trait categories (1 ms)

[2026-01-28 14:33:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModelAtBirth.test.mjs
  üê¥ UNIT: Horse Model At-Birth Traits - Creation Integration Testing
    createHorse with at-birth traits
      ‚àö should apply at-birth traits for newborn with parents (5 ms)
      ‚àö should pass custom mare stress and feed quality (1 ms)
      ‚àö should merge at-birth traits with existing traits (2 ms)
      ‚àö should not apply at-birth traits for older horses (2 ms)
      ‚àö should not apply at-birth traits for horses without parents (1 ms)
      ‚àö should continue horse creation even if at-birth trait application fails (2 ms)
      ‚àö should handle missing sireId gracefully (1 ms)
      ‚àö should handle missing damId gracefully (1 ms)
      ‚àö should log breeding analysis information (1 ms)

[2026-01-28 14:33:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:03] info: [envValidator] Test environment validation complete. Success: true
PASS tests/atBirthTraits.test.mjs
  üß¨ UNIT: At-Birth Traits System - Comprehensive Breeding Analysis Testing
    AT_BIRTH_TRAITS
      ‚àö should have positive and negative trait categories (4 ms)
      ‚àö should have valid trait definitions (13 ms)
    evaluateTraitConditions
      ‚àö should correctly evaluate mare stress conditions (2 ms)
      ‚àö should correctly evaluate feed quality conditions (1 ms)
      ‚àö should correctly evaluate inbreeding conditions (1 ms)
      ‚àö should correctly evaluate multiple conditions (1 ms)
    assessFeedQuality
      ‚àö should return feed quality based on mare health status (2 ms)
      ‚àö should return default quality for missing mare (1 ms)
      ‚àö should adjust quality based on earnings (6 ms)
    getAncestors
      ‚àö should return empty array for no generations (2 ms)
      ‚àö should return empty array for empty horse IDs (1 ms)
      ‚àö should get immediate parents (1 ms)
    detectInbreeding
      ‚àö should detect no inbreeding when no common ancestors (2 ms)
      ‚àö should detect inbreeding when common ancestors exist (1 ms)
    analyzeLineage
      ‚àö should detect discipline specialization (2 ms)
      ‚àö should handle no competition history (1 ms)
    applyEpigeneticTraitsAtBirth
      ‚àö should apply positive traits for optimal breeding conditions (2 ms)
      ‚àö should apply negative traits for poor breeding conditions (1 ms)
      ‚àö should apply inbred trait when inbreeding detected (1 ms)
      ‚àö should apply inbred trait with direct condition testing (1 ms)
      ‚àö should apply specialized lineage trait when discipline specialization detected (2 ms)
      ‚àö should handle missing mare gracefully (3 ms)
      ‚àö should require both sire and dam IDs (3 ms)
      ‚àö should use mare stress level from database when not provided (1 ms)
      ‚àö should move traits to hidden when many traits are applied (2 ms)
      ‚àö should handle errors in lineage analysis gracefully (5 ms)
    checkLineageForDisciplineAffinity
      ‚àö should return affinity true when 3 or more ancestors share the same discipline (2 ms)
      ‚àö should return affinity false when less than 3 ancestors share the same discipline (1 ms)
      ‚àö should handle ancestors with competition history (1 ms)
      ‚àö should handle ancestors with discipline scores (1 ms)
      ‚àö should handle empty ancestors array (1 ms)
      ‚àö should handle null ancestors (1 ms)
      ‚àö should handle ancestors without discipline information (1 ms)
      ‚àö should prioritize direct discipline field over other methods (1 ms)
      ‚àö should handle mixed data sources correctly (1 ms)
    getMostCommonDisciplineFromHistory
      ‚àö should return the most common discipline from competition history (1 ms)
      ‚àö should return null for empty competition history (1 ms)
      ‚àö should return null for null competition history (1 ms)
      ‚àö should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      ‚àö should return the discipline with the highest score (1 ms)
      ‚àö should return null for empty discipline scores (1 ms)
      ‚àö should return null for null discipline scores (1 ms)
      ‚àö should handle non-numeric scores (1 ms)
      ‚àö should handle all non-numeric scores (5 ms)

[2026-01-28 14:33:03] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:03] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:03] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:03] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:03] warn: [Validation] Input validation failed
PASS __tests__/unit/security/validation-error-handler.test.mjs
  validationErrorHandler
    ‚àö passes through when no errors (3 ms)
    ‚àö returns 400 on validation errors (3 ms)
    ‚àö sanitizes request body by keeping only validated fields (1 ms)

[2026-01-28 14:33:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:04] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] error: [ApiDocService] Failed to load specification: OpenAPI specification file not found
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 0 endpoints
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:33:04] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:33:04] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:33:04] warn: [ApiDocService] OpenAPI specification validation found 1 issues
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 1 endpoints
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification validation passed
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification saved successfully
[2026-01-28 14:33:04] info: [ApiDocService] Documentation generated for 2 endpoints
[2026-01-28 14:33:04] warn: [ApiDocService] OpenAPI specification validation found 2 issues
[2026-01-28 14:33:04] info: [ApiDocService] OpenAPI specification validation passed
PASS __tests__/services/apiDocumentation.test.mjs
  API Documentation Service
    Specification Loading and Saving
      ‚àö loads OpenAPI specification correctly (8 ms)
      ‚àö saves OpenAPI specification correctly (6 ms)
      ‚àö throws error when specification file not found (6 ms)
    Endpoint Registration
      ‚àö registers endpoint correctly (11 ms)
      ‚àö registers multiple endpoints correctly (2 ms)
      ‚àö handles endpoint registration with minimal options (2 ms)
    Schema Registration
      ‚àö registers schema correctly (2 ms)
      ‚àö registers multiple schemas correctly (2 ms)
    Documentation Generation
      ‚àö generates documentation with registered endpoints (6 ms)
      ‚àö generates documentation with registered schemas (5 ms)
      ‚àö adds generation metadata to specification (9 ms)
    Specification Validation
      ‚àö validates correct specification (3 ms)
      ‚àö detects missing responses (2 ms)
      ‚àö detects missing summaries (2 ms)
      ‚àö detects missing tags (3 ms)
    Metrics and Analytics
      ‚àö calculates metrics correctly (7 ms)
      ‚àö generates health report correctly (8 ms)
      ‚àö provides recommendations based on metrics (7 ms)
    Example Generation
      ‚àö generates string examples correctly (5 ms)
      ‚àö generates email format examples (2 ms)
      ‚àö generates UUID format examples (2 ms)
      ‚àö generates object examples correctly (2 ms)
      ‚àö generates array examples correctly (2 ms)
    Helper Functions
      ‚àö registerEndpoint helper function works (2 ms)
      ‚àö registerSchema helper function works (1 ms)
      ‚àö getDocumentationMetrics helper function works (3 ms)
      ‚àö getDocumentationHealth helper function works (3 ms)

[2026-01-28 14:33:04] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:04] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:04] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:04] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseHistory.test.mjs
  üìö UNIT: Horse History Controller - Competition History Retrieval
    getHorseHistory
      ‚àö should return horse competition history successfully (65 ms)
      ‚àö should return empty array when horse has no competition history (63 ms)
      ‚àö should handle invalid horse ID (non-numeric) (58 ms)
      ‚àö should handle invalid horse ID (negative number) (58 ms)
      ‚àö should handle invalid horse ID (zero) (63 ms)
      ‚àö should handle database errors gracefully (186 ms)
      ‚àö should properly parse stat gains JSON (1 ms)
      ‚àö should handle malformed stat gains JSON gracefully (1 ms)
      ‚àö should handle large horse ID numbers (2 ms)
      ‚àö should maintain order from database query (newest first) (1 ms)

[2026-01-28 14:33:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskExclusivity.integration.test.mjs
  Foal Task Exclusivity Integration
    Configuration Integration
      ‚àö should have correct task categories defined (4 ms)
      ‚àö should have no overlap between task categories (1 ms)
    Daily Exclusivity Enforcement
      ‚àö should detect all enrichment tasks correctly (1 ms)
      ‚àö should detect all grooming tasks correctly
      ‚àö should enforce mutual exclusivity between categories
      ‚àö should allow non-foal tasks without blocking (1 ms)
      ‚àö should detect foal tasks mixed with general tasks (1 ms)
    Business Rule Validation
      ‚àö should prevent double-counting with multiple foal tasks
      ‚àö should work correctly across different days
      ‚àö should handle real-world task progression scenario (1 ms)

[2026-01-28 14:33:05] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:05] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:05] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:05] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalTaskLoggingSystem.test.mjs
  Foal Task Logging & Streak Tracking System
    Task Category Configuration
      ‚àö should have foal enrichment tasks defined (2 ms)
      ‚àö should have foal grooming tasks defined (9 ms)
      ‚àö should have general grooming tasks defined (1 ms)
      ‚àö should have proper age thresholds configured (1 ms)
    Age-Based Task Eligibility
      ‚àö should allow only enrichment tasks for 0-2 year olds (1 ms)
      ‚àö should allow both enrichment and grooming tasks for 1-3 year olds (1 ms)
      ‚àö should allow all task types for 3+ year olds (1 ms)
    Task Categorization
      ‚àö should correctly categorize enrichment tasks (1 ms)
      ‚àö should correctly categorize grooming tasks (1 ms)
      ‚àö should return null for unknown tasks (1 ms)
    Task Logging System
      ‚àö should initialize empty task log (1 ms)
      ‚àö should increment existing task count
      ‚àö should add new task to existing log
      ‚àö should handle empty object task log (1 ms)
    Streak Tracking System
      ‚àö should start new streak for first grooming (6 ms)
      ‚àö should increment streak for consecutive days (1 ms)
      ‚àö should maintain streak within grace period
      ‚àö should reset streak after grace period expires
      ‚àö should detect bonus eligibility at 7 consecutive days (1 ms)
    Task Mutual Exclusivity
      ‚àö should allow first task of the day (1 ms)
      ‚àö should prevent mixing enrichment and grooming tasks same day (1 ms)
      ‚àö should allow same category tasks (if other rules permit) (1 ms)

[2026-01-28 14:33:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:06] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/security/session-management.test.mjs
  sessionManagement middleware
    sessionTimeout
      ‚àö allows when no session (2 ms)
      ‚àö blocks expired session (2 ms)
      ‚àö refreshes active session (1 ms)
    sessionConcurrencyLimit
      ‚àö allows when no limit set
      ‚àö blocks when concurrency exceeded (1 ms)
    sessionCleanup
      ‚àö removes expired sessions and continues (1 ms)

[2026-01-28 14:33:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:06] info: [envValidator] Test environment validation complete. Success: true
PASS tests/lineageTraitCheck.test.mjs
  üß¨ UNIT: Lineage Trait Check - Discipline Affinity Analysis
    checkLineageForDisciplineAffinity
      ‚àö should return affinity true when 3 or more ancestors share the same discipline (4 ms)
      ‚àö should return affinity false when less than 3 ancestors share the same discipline (1 ms)
      ‚àö should handle empty ancestors array (1 ms)
      ‚àö should handle null ancestors (1 ms)
      ‚àö should handle ancestors without discipline information (1 ms)
      ‚àö should handle exactly 3 ancestors with same discipline (1 ms)
      ‚àö should handle more than 3 ancestors with same discipline (1 ms)
    getAncestorPreferredDiscipline
      ‚àö should prioritize direct discipline field (8 ms)
      ‚àö should use competition history when no direct discipline (1 ms)
      ‚àö should use discipline scores when no competition history (1 ms)
      ‚àö should use competitions field as alternative to competitionHistory
      ‚àö should use specialty field as fallback
      ‚àö should return null when no discipline information available (1 ms)
    checkLineageForDisciplineAffinityDetailed
      ‚àö should provide detailed analysis with affinity (2 ms)
      ‚àö should provide detailed analysis without affinity (1 ms)
      ‚àö should handle empty ancestors array (1 ms)
    checkSpecificDisciplineAffinity
      ‚àö should check for specific discipline affinity with default minimum (1 ms)
      ‚àö should check for specific discipline affinity with custom minimum (1 ms)
      ‚àö should return false when not enough ancestors match (1 ms)
      ‚àö should handle empty ancestors or missing target discipline (1 ms)
    getMostCommonDisciplineFromHistory
      ‚àö should return the most common discipline (1 ms)
      ‚àö should handle empty or null history (1 ms)
      ‚àö should handle competitions without discipline field (1 ms)
    getHighestScoringDiscipline
      ‚àö should return the highest scoring discipline (1 ms)
      ‚àö should handle empty or null scores (1 ms)
      ‚àö should handle non-numeric scores (5 ms)
      ‚àö should return null when all scores are non-numeric (1 ms)
    error handling
      ‚àö should handle errors gracefully in main function (1 ms)
      ‚àö should handle errors gracefully in detailed function (1 ms)
      ‚àö should handle errors gracefully in specific discipline check (1 ms)
      ‚àö should handle undefined ancestors gracefully (1 ms)
      ‚àö should handle ancestors with circular references gracefully (1 ms)

[2026-01-28 14:33:06] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:06] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:06] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:06] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}
[2026-01-28 14:33:06] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits
PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  üèá COMPREHENSIVE: Milestone Trait Evaluator System
    Milestone Eligibility Validation
      ‚àö should validate 1-year milestone eligibility (3 ms)
      ‚àö should validate 2-year milestone eligibility (1 ms)
      ‚àö should validate 3-year milestone eligibility (1 ms)
      ‚àö should handle horses too young for milestones
      ‚àö should handle horses too old for milestones (1 ms)
    Trait Milestone Evaluation
      ‚àö should evaluate traits for 1-year milestone (4 ms)
      ‚àö should evaluate traits for 2-year milestone (3 ms)
      ‚àö should evaluate traits with moderate care history (8 ms)
    Task Log Processing and Trait Scoring
      ‚àö should process extensive task history for trait evaluation (4 ms)
      ‚àö should handle minimal task history (3 ms)
      ‚àö should handle empty task history (3 ms)
    Milestone Age Validation and Edge Cases
      ‚àö should handle non-milestone ages correctly (3 ms)
      ‚àö should handle already evaluated milestones (2 ms)
      ‚àö should handle horses with existing traits (7 ms)
    Error Handling and Edge Cases
      ‚àö should handle missing task_log property (4 ms)
      ‚àö should handle null task_log (3 ms)
      ‚àö should handle invalid horse data gracefully (3 ms)
      ‚àö should handle horses with malformed epigenetic modifiers (3 ms)
    Trait Application and Epigenetic Logic
      ‚àö should apply traits appropriately for different milestone ages (11 ms)
      ‚àö should maintain consistency in trait evaluation (8 ms)

[2026-01-28 14:33:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/generateMockShows.test.mjs
  üé™ UNIT: Generate Mock Shows - Competition Data Generation Utilities
    generateMockShows
      ‚àö should generate the correct number of shows (2 ms)
      ‚àö should generate default 10 shows when no count provided (2 ms)
      ‚àö should generate 0 shows when count is 0 (1 ms)
      ‚àö should throw error for negative count (5 ms)
      ‚àö should throw error for non-number count (1 ms)
      ‚àö should generate shows with all required properties (3 ms)
      ‚àö should generate unique sequential IDs (1 ms)
      ‚àö should use only valid disciplines (10 ms)
      ‚àö should generate realistic show names (3 ms)
      ‚àö should respect level constraints (5 ms)
      ‚àö should respect entry fee range (100-500) (7 ms)
      ‚àö should respect prize range (500-2000) (3 ms)
      ‚àö should generate run dates within ¬±30 days of today (3 ms)
      ‚àö should generate variety in disciplines across multiple shows (1 ms)
      ‚àö should generate variety in show names (1 ms)
    generateSingleMockShow
      ‚àö should generate a single show with default properties (1 ms)
      ‚àö should allow overriding specific properties (1 ms)
      ‚àö should maintain constraints for non-overridden properties (1 ms)
    Integration with statMap
      ‚àö should only use disciplines that exist in statMap (2 ms)
      ‚àö should eventually use most available disciplines with enough shows (1 ms)

[2026-01-28 14:33:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:07] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitEvaluation.test.mjs
  üî¨ UNIT: Trait Evaluation System - Trait Revelation & Validation
    evaluateTraitRevelation
      ‚àö should evaluate traits for a foal with good bonding and low stress (4 ms)
      ‚àö should not reveal traits that do not meet age requirements (1 ms)
      ‚àö should not reveal traits that do not meet bonding requirements (1 ms)
      ‚àö should not reveal traits that do not meet stress requirements (1 ms)
      ‚àö should not reveal duplicate traits (2 ms)
      ‚àö should respect trait conflicts (2 ms)
      ‚àö should handle foals with null bond_score and stress_level (1 ms)
      ‚àö should use development age for young foals (1 ms)
      ‚àö should not reveal traits when random chance is too high (2 ms)
    getTraitDefinition
      ‚àö should return trait definition for valid trait key (1 ms)
      ‚àö should return null for invalid trait key (1 ms)
      ‚àö should find traits in all categories (6 ms)
    getAllTraitDefinitions
      ‚àö should return all trait definitions (1 ms)
      ‚àö should have consistent structure for all traits (8 ms)
    TRAIT_DEFINITIONS
      ‚àö should have valid reveal conditions for all traits (8 ms)
    TRAIT_CONFLICTS
      ‚àö should have symmetric conflicts (2 ms)
      ‚àö should only reference valid traits (2 ms)
    Error Handling
      ‚àö should handle errors gracefully (5 ms)
      ‚àö should handle missing foal properties (1 ms)

[2026-01-28 14:33:07] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:07] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:07] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:07] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty, age_match
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying firm personality effects for task hand_walking
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied firm effects: task_specialty, trait_match
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying high_energy personality effects for task obstacle_course
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied high_energy effects: task_specialty, extra_trait_points
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying aloof personality effects for task brushing
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied aloof effects: 
[2026-01-28 14:33:07] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: unknown_personality
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing
[2026-01-28 14:33:07] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match
PASS tests/groomPersonalityEffects.test.mjs
  Groom Personality Effects System
    GROOM_PERSONALITY_EFFECTS Configuration
      ‚àö should have all required personality types defined (14 ms)
      ‚àö should have correct gentle personality configuration (2 ms)
      ‚àö should have correct aloof personality penalty configuration (2 ms)
    calculatePersonalityEffects
      ‚àö should apply gentle personality effects for nervous horse with brushing (3 ms)
      ‚àö should apply playful personality effects for young horse (2 ms)
      ‚àö should apply firm personality effects for stubborn horse (2 ms)
      ‚àö should apply patient personality effects for enrichment tasks (8 ms)
      ‚àö should apply high_energy personality effects with extra trait points (3 ms)
      ‚àö should apply aloof personality penalties (2 ms)
      ‚àö should handle unknown personality gracefully (1 ms)
      ‚àö should not exceed maximum success rate of 0.99 (2 ms)
    getPersonalityEffectSummary
      ‚àö should return correct summary for gentle personality with bonus task (1 ms)
      ‚àö should return correct summary for personality without task bonus (1 ms)
      ‚àö should handle unknown personality type
    getAllPersonalityTypes
      ‚àö should return all personality types with correct structure (2 ms)
      ‚àö should correctly identify penalty personalities (2 ms)
    Edge Cases and Error Handling
      ‚àö should handle horse without traits (6 ms)
      ‚àö should handle missing age information (2 ms)
      ‚àö should handle empty base effects object (3 ms)

[2026-01-28 14:33:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomBondingSystem.test.mjs
  Groom Bonding & Burnout Prevention System
    Bond Score Mechanics
      ‚àö should start horses with bond score of 0 (3 ms)
      ‚àö should increase bond score by +2 for eligible grooming tasks (1 ms)
      ‚àö should cap bond score at maximum of 100 (2 ms)
      ‚àö should not increase bond score beyond 100 (1 ms)
    Eligible Grooming Tasks
      ‚àö should recognize brushing as eligible task (1 ms)
      ‚àö should recognize hand-walking as eligible task (1 ms)
      ‚àö should recognize stall_care as eligible task (1 ms)
      ‚àö should reject non-eligible tasks for bonding (1 ms)
    Age Restrictions
      ‚àö should allow grooming for horses 3+ years old (1 ms)
      ‚àö should reject adult grooming tasks for horses under 3 years old (1 ms)
      ‚àö should allow enrichment tasks for horses under 3 years old (6 ms)
    Consecutive Day Tracking
      ‚àö should increment consecutive days for daily grooming (1 ms)
      ‚àö should reset consecutive days to 0 after 2+ day lapse (1 ms)
      ‚àö should maintain consecutive days for 1-day lapse (1 ms)
    Burnout Immunity System
      ‚àö should grant immunity after 7 consecutive days (1 ms)
      ‚àö should maintain none status for less than 7 days (1 ms)
      ‚àö should reset immunity status when consecutive days reset (1 ms)

[2026-01-28 14:33:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/epigeneticTraits.test.mjs
  üß¨ UNIT: Epigenetic Traits System - Breeding & Environmental Trait Calculation
    Input Validation
      ‚àö should throw error for missing required parameters (7 ms)
      ‚àö should throw error for invalid trait arrays (1 ms)
      ‚àö should throw error for invalid bond scores (1 ms)
      ‚àö should throw error for out-of-range values (1 ms)
      ‚àö should accept valid input without throwing (1 ms)
    Basic Trait Inheritance
      ‚àö should inherit positive traits from both parents (1 ms)
      ‚àö should have chance to inherit each parent trait (2 ms)
      ‚àö should not inherit negative traits from positive parent traits (1 ms)
    Bonding Score Effects
      ‚àö should increase positive trait probability with high bonding (2 ms)
      ‚àö should reduce negative trait probability with high bonding (2 ms)
    Stress Level Effects
      ‚àö should increase negative trait probability with high stress (7 ms)
      ‚àö should reduce positive trait expression with high stress (2 ms)
    Hidden Trait Generation
      ‚àö should generate hidden traits based on environmental factors (1 ms)
      ‚àö should include rare traits in hidden category (2 ms)
    Complex Breeding Scenarios
      ‚àö should handle mixed positive and negative parent traits
      ‚àö should handle parents with no traits
      ‚àö should handle optimal breeding conditions (1 ms)
      ‚àö should handle poor breeding conditions (1 ms)
    Trait Consistency
      ‚àö should not generate contradictory traits (6 ms)
      ‚àö should maintain trait type consistency
    Deterministic Behavior
      ‚àö should produce consistent results with same seed (2 ms)
      ‚àö should produce different results without seed (1 ms)

[2026-01-28 14:33:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:08] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:08] warn: CORS blocked request from origin: http://evil.com
[2026-01-28 14:33:08] warn: [CORS] Request with no origin detected - API key validation required
  console.error
    TypeError: Cannot read properties of undefined (reading 'get')
        at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
        at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
        at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
        at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5

[2026-01-28 14:33:08] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)
[2026-01-28 14:33:08] warn: [API Key] Invalid or missing API key
[2026-01-28 14:33:08] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS
PASS __tests__/unit/security/security-middleware.test.mjs
  security middleware
    corsOptions
      ‚àö allows known origins and rejects unknown (4 ms)
      ‚àö allows no-origin requests (legacy) and supports ALLOWED_ORIGINS env (8 ms)
    createRateLimiter
      ‚àö returns an express-rate-limit instance (5 ms)
    validateApiKey
      ‚àö skips when API_KEY not set (2 ms)
      ‚àö rejects missing or invalid key when configured (2 ms)
      ‚àö allows valid key (1 ms)
    enforceHttps
      ‚àö bypasses in non-production
      ‚àö redirects http in production (2 ms)
    addSecurityHeaders
      ‚àö sets baseline headers (2 ms)
    createSecurityMiddleware
      ‚àö returns middleware array including helmet, cors, and rate limiter (2 ms)

[2026-01-28 14:33:08] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:08] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:08] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:08] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomSystem.test.mjs
  üë©‚Äçüîß UNIT: Groom System - Foal Care Assignment & Management
    assignGroomToFoal
      ‚àö should assign groom to foal successfully (4 ms)
      ‚àö should throw error when foal not found (2 ms)
      ‚àö should throw error when groom not found (1 ms)
      ‚àö should throw error when groom is not active (1 ms)
      ‚àö should throw error when groom already assigned (8 ms)
      ‚àö should deactivate existing primary assignments when assigning new primary (1 ms)
    ensureDefaultGroomAssignment
      ‚àö should return existing assignment if one exists (1 ms)
      ‚àö should create default assignment if none exists (1 ms)
    calculateGroomInteractionEffects
      ‚àö should calculate bonding and stress effects correctly (2 ms)
      ‚àö should apply specialty modifiers correctly (1 ms)
      ‚àö should apply skill level modifiers correctly (1 ms)
      ‚àö should apply experience bonus correctly
      ‚àö should scale effects with duration (1 ms)
    System Constants
      ‚àö should have all required groom specialties (2 ms)
      ‚àö should have all required skill levels (7 ms)
      ‚àö should have all required personality traits (1 ms)
    hasAlreadyCompletedFoalTaskToday
      ‚àö should return false when foal has no daily task record (1 ms)
      ‚àö should return false when foal has empty daily task record
      ‚àö should return false when foal has no tasks for today
      ‚àö should return false when foal has empty task array for today (1 ms)
      ‚àö should return true when foal has completed enrichment task today (1 ms)
      ‚àö should return true when foal has completed grooming task today (1 ms)
      ‚àö should return true when foal has completed multiple tasks today (1 ms)
      ‚àö should return false when foal has completed non-foal tasks today (1 ms)
      ‚àö should return true when foal has mixed tasks including foal tasks today (1 ms)
      ‚àö should test all enrichment tasks are detected (1 ms)
      ‚àö should test all grooming tasks are detected (1 ms)
      ‚àö should handle edge cases gracefully (1 ms)
    Error Handling
      ‚àö should handle database errors gracefully (2 ms)
      ‚àö should handle invalid groom data in calculations (1 ms)

[2026-01-28 14:33:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalModel.test.mjs
  üçº UNIT: Foal Model - Foal Development & Activity Management
    getFoalDevelopment
      ‚àö should return foal development data for valid foal (4 ms)
      ‚àö should throw error for horse that is not a foal (2 ms)
      ‚àö should throw error for 2-year-old horse (boundary test) (1 ms)
      ‚àö should accept 1-year-old horse (boundary test) (1 ms)
      ‚àö should validate availableActivities are returned correctly (1 ms)
      ‚àö should filter out completed activities from available activities (1 ms)
      ‚àö should throw error for non-existent horse (8 ms)
      ‚àö should throw error for invalid foal ID (3 ms)
      ‚àö should create default development record for new foal (2 ms)
    completeActivity
      ‚àö should complete an available activity successfully (1 ms)
      ‚àö should update completedActivities correctly when completing activity (2 ms)
      ‚àö should add to existing completed activities for the same day (1 ms)
      ‚àö should enforce bonding level bounds (0-100) (1 ms)
      ‚àö should enforce stress level bounds (0-100) (1 ms)
      ‚àö should throw error for missing development record (1 ms)
      ‚àö should throw error for invalid foal ID (2 ms)
      ‚àö should throw error for missing activity type (1 ms)
      ‚àö should throw error for unavailable activity (1 ms)
    advanceDay
      ‚àö should advance foal to next day successfully (1 ms)
      ‚àö should throw error for foal that has completed development (1 ms)
      ‚àö should throw error for invalid foal ID (1 ms)
    completeEnrichmentActivity
      ‚àö should complete enrichment activity successfully (2 ms)
      ‚àö should validate day parameter (0-6) (1 ms)
      ‚àö should validate activity is appropriate for the day (1 ms)
      ‚àö should enforce bonding and stress bounds (0-100) (7 ms)
      ‚àö should handle null bondScore and stressLevel with defaults (1 ms)
      ‚àö should throw error for horse that is not a foal (1 ms)
    getAvailableActivities
      ‚àö should return activities for day 0 (1 ms)
      ‚àö should return different activities for different days (1 ms)
      ‚àö should filter out completed activities (1 ms)
      ‚àö should return empty array for invalid day (1 ms)
      ‚àö should handle missing completedActivities gracefully

[2026-01-28 14:33:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/constants/schema.test.mjs
  üèá UNIT: Schema Constants Validation
    Horse Sex Constants
      ‚àö should have all required horse sex values (2 ms)
      ‚àö should validate horse sex correctly (1 ms)
      ‚àö should have consistent values array (1 ms)
    Horse Temperament Constants
      ‚àö should have all required temperament values (1 ms)
      ‚àö should validate temperament correctly (1 ms)
    Competition Disciplines
      ‚àö should have all major disciplines (1 ms)
      ‚àö should validate disciplines correctly (1 ms)
      ‚àö should have comprehensive discipline list (1 ms)
    Groom Constants
      ‚àö should have all groom specialties (1 ms)
      ‚àö should validate groom specialties correctly (1 ms)
      ‚àö should have all skill levels (1 ms)
      ‚àö should validate skill levels correctly (1 ms)
    Age Validation
      ‚àö should validate training age correctly (5 ms)
      ‚àö should validate competition age correctly
      ‚àö should validate breeding age correctly (1 ms)
    Score Validation
      ‚àö should validate competition scores correctly (1 ms)
      ‚àö should validate discipline scores correctly
    User Progression Calculations
      ‚àö should calculate XP for levels correctly (1 ms)
      ‚àö should calculate level from XP correctly (1 ms)
      ‚àö should have consistent XP progression (1 ms)
    Horse Stats Validation
      ‚àö should have all required horse stats defined (2 ms)
      ‚àö should validate horse stats correctly (1 ms)
      ‚àö should have consistent stat object and array values (1 ms)
    Constant Integrity
      ‚àö should have no duplicate values in arrays (1 ms)
      ‚àö should have consistent object and array values (1 ms)

[2026-01-28 14:33:09] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:09] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:09] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:09] info: [envValidator] Test environment validation complete. Success: true
PASS tests/taskTraitInfluence.integration.test.mjs
  Task-Trait Influence Integration
    System Integration Validation
      ‚àö should have complete coverage of foal tasks (3 ms)
      ‚àö should provide logical trait development progression (1 ms)
    Trait Point Accumulation Scenarios
      ‚àö should calculate trait points for early foal development (0-1 years) (1 ms)
      ‚àö should calculate trait points for middle development (1-2 years) (1 ms)
      ‚àö should calculate trait points for advanced development (2-3 years) (1 ms)
    Real-World Development Scenarios
      ‚àö should support comprehensive foal development progression (1 ms)
      ‚àö should handle specialized development paths (1 ms)
    Trait Influence Analysis
      ‚àö should identify tasks that develop specific traits (2 ms)
      ‚àö should provide complete trait coverage (9 ms)
    Business Rule Validation
      ‚àö should enforce consistent daily values across all tasks (1 ms)
      ‚àö should support meaningful trait point accumulation (1 ms)
      ‚àö should provide balanced trait development opportunities (1 ms)
    Development Stage Integration
      ‚àö should align with foal development stages
      ‚àö should support age-appropriate task progression (1 ms)

[2026-01-28 14:33:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:10] info: [envValidator] Test environment validation complete. Success: true
PASS tests/isHorseEligible.test.mjs
  üèÜ UNIT: Horse Eligibility - Competition Entry Validation
    Input Validation
      ‚àö should throw error for null horse (6 ms)
      ‚àö should throw error for undefined horse (1 ms)
      ‚àö should throw error for null show (1 ms)
      ‚àö should throw error for undefined show (1 ms)
      ‚àö should throw error for non-array previousEntries (1 ms)
      ‚àö should throw error for null previousEntries (1 ms)
    Age Requirements (3-20 inclusive)
      ‚àö should return false for horse younger than 3 (1 ms)
      ‚àö should return false for horse age 1
      ‚àö should return true for horse exactly age 3
      ‚àö should return true for horse exactly age 20
      ‚àö should return false for horse older than 20 (1 ms)
      ‚àö should return false for horse age 25 (1 ms)
      ‚àö should return false for horse with non-numeric age
      ‚àö should return false for horse with null age (1 ms)
      ‚àö should return false for horse with undefined age
    Level Requirements
      ‚àö should return false for horse level below show minimum
      ‚àö should return true for horse level exactly at show minimum (6 ms)
      ‚àö should return true for horse level exactly at show maximum (1 ms)
      ‚àö should return false for horse level above show maximum
      ‚àö should return true for horse level within show range (1 ms)
      ‚àö should return false for horse with non-numeric level
      ‚àö should return false for horse with null level
      ‚àö should return false for horse with undefined level (1 ms)
      ‚àö should handle show with no levelMin specified
      ‚àö should handle show with no levelMax specified (1 ms)
      ‚àö should handle show with neither levelMin nor levelMax specified
    Previous Entries Check
      ‚àö should return false if horse has already entered this show
      ‚àö should return true if horse has not entered this show (1 ms)
      ‚àö should return true with empty previousEntries array (1 ms)
      ‚àö should return true when previousEntries is not provided (default empty array)
      ‚àö should handle numeric show IDs in previousEntries
      ‚àö should handle mixed type show IDs in previousEntries (1 ms)
    Discipline Independence
      ‚àö should allow horse to enter Dressage regardless of trait (1 ms)
      ‚àö should allow horse to enter Jumping regardless of trait (1 ms)
      ‚àö should allow horse to enter Racing regardless of trait
      ‚àö should allow horse to enter any discipline regardless of health status (1 ms)
    Valid Entry Cases
      ‚àö should return true for completely valid entry (1 ms)
      ‚àö should return true for minimum age and level requirements
      ‚àö should return true for maximum age and level requirements (1 ms)
    Edge Cases
      ‚àö should handle show with zero as levelMin (1 ms)
      ‚àö should handle negative horse level (1 ms)
      ‚àö should handle very large previousEntries array (1 ms)
      ‚àö should handle show ID that is an empty string

[2026-01-28 14:33:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:10] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth Unit - Pure Logic Validation
    Low-stress mare with premium feed ‚Üí positive traits
      ‚àö should assign resilient trait when mare has low stress and premium feed (3 ms)
      ‚àö should assign peopleTrusting trait when mare has low stress and premium feed (1 ms)
      ‚àö should assign both positive traits with optimal conditions (1 ms)
      ‚àö should not assign positive traits when stress is too high (3 ms)
      ‚àö should not assign positive traits when feed quality is too low (10 ms)
    Inbreeding (repeated ancestor IDs) ‚Üí negative traits
      ‚àö should assign fragile trait with high inbreeding (4+ repeated ancestors) (2 ms)
      ‚àö should assign reactive trait with moderate inbreeding (3 repeated ancestors) (1 ms)
      ‚àö should assign low_immunity trait with inbreeding (1 ms)
      ‚àö should assign multiple negative traits with severe inbreeding (2 ms)
      ‚àö should not assign inbreeding traits without repeated ancestor IDs (1 ms)
    3+ ancestors with same mostCompetedDiscipline ‚Üí affinity + legacy_talent
      ‚àö should assign discipline_affinity_racing with 3+ racing ancestors (1 ms)
      ‚àö should assign legacy_talent with 4+ ancestors in same discipline (1 ms)
      ‚àö should assign discipline_affinity_dressage with dressage specialization (1 ms)
      ‚àö should not assign discipline traits without sufficient specialization (1 ms)
      ‚àö should handle ancestors without mostCompetedDiscipline field (1 ms)
    Random behavior consistency
      ‚àö should produce consistent results with mocked randomness (1 ms)
      ‚àö should not assign traits when random values are above thresholds (1 ms)

[2026-01-28 14:33:10] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:10] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:10] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:10] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 3.1% modifier, 2.1 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Bold Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Nervous Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Legendary Horse: 1 traits applied, 10.0% modifier, 6.7 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Regular Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.4% modifier, 12.3 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -15.6 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.5% modifier, 9.9 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -10.4% modifier, -9.9 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 9.5% modifier, 6.4 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -8.9 point adjustment
[2026-01-28 14:33:10] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 13.5% modifier, 9.0 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 5 traits applied, 16.4% modifier, 11.0 point adjustment
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:33:10] warn: [traitCompetitionImpact] Unknown trait: unknown_trait
[2026-01-28 14:33:10] warn: [traitCompetitionImpact] Unknown trait: another_unknown
[2026-01-28 14:33:10] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 4.0 point adjustment
[2026-01-28 14:33:10] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment
PASS tests/integration/competitionWithTraits.test.mjs
  Competition Simulation with Trait Impact
    Single Horse Competition
      ‚àö should simulate competition without traits (5 ms)
      ‚àö should apply positive trait bonuses (5 ms)
      ‚àö should apply negative trait penalties (9 ms)
      ‚àö should handle mixed traits correctly (3 ms)
    Multi-Horse Competition
      ‚àö should rank horses correctly with trait differences (4 ms)
      ‚àö should handle legendary traits appropriately (4 ms)
    Discipline-Specific Effects
      ‚àö should apply correct trait effects for Dressage (9 ms)
      ‚àö should apply correct trait effects for Racing (4 ms)
      ‚àö should apply correct trait effects for Cross Country (4 ms)
    Balance and Fairness
      ‚àö should not allow traits to completely dominate base stats (3 ms)
      ‚àö should apply diminishing returns for trait stacking (4 ms)
    Error Handling
      ‚àö should handle horses with malformed trait data (3 ms)
      ‚àö should handle unknown traits gracefully (3 ms)

[2026-01-28 14:33:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:11] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/flagEvaluationEngine.test.mjs
  Flag Evaluation Engine
    evaluateHorseFlags
      ‚àö should evaluate and assign flags for eligible horse (6 ms)
      ‚àö should reject horse outside age range (2 ms)
      ‚àö should reject horse with maximum flags (1 ms)
      ‚àö should not assign duplicate flags (1 ms)
      ‚àö should respect flag limit during assignment (2 ms)
      ‚àö should handle care analysis ineligibility (1 ms)
      ‚àö should handle non-existent horse (2 ms)
      ‚àö should handle database errors (3 ms)
    Flag Trigger Evaluation
      ‚àö should trigger brave flag with correct conditions (1 ms)
      ‚àö should trigger fearful flag with correct conditions (1 ms)
    batchEvaluateFlags
      ‚àö should evaluate multiple horses (2 ms)
      ‚àö should handle mixed success/failure in batch (1 ms)
    getEligibleHorses
      ‚àö should return eligible horses within age range (1 ms)
      ‚àö should handle database errors in getEligibleHorses (6 ms)

[2026-01-28 14:33:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] Invalid trait name: null
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] Invalid trait name: undefined
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] Invalid trait name: 
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] Invalid trait name: 123
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait
[2026-01-28 14:33:11] warn: [traitEffects.getCombinedTraitEffects] Invalid trait names array
[2026-01-28 14:33:11] warn: [traitEffects.getTraitEffects] No effects defined for trait: invalid_trait
PASS tests/traitEffects.test.mjs
  üé≠ UNIT: Trait Effects System - Trait Impact Calculation & Combination
    getTraitEffects
      ‚àö should return effects for valid trait (3 ms)
      ‚àö should return null for invalid trait (2 ms)
      ‚àö should return null for invalid input (12 ms)
    hasTraitEffect
      ‚àö should return true for existing effect (1 ms)
      ‚àö should return false for non-existing effect (1 ms)
    getCombinedTraitEffects
      ‚àö should combine multiple trait effects correctly (1 ms)
      ‚àö should handle numeric modifiers additively
      ‚àö should handle boolean effects correctly (1 ms)
      ‚àö should merge object effects correctly
      ‚àö should handle empty array (1 ms)
      ‚àö should handle invalid input (1 ms)
      ‚àö should ignore invalid trait names (2 ms)
    Positive Traits
      ‚àö resilient trait should have correct effects (1 ms)
      ‚àö intelligent trait should have correct effects (6 ms)
      ‚àö athletic trait should have correct effects (1 ms)
    Negative Traits
      ‚àö nervous trait should have correct penalties (1 ms)
      ‚àö lazy trait should have correct penalties (1 ms)
      ‚àö burnout trait should have severe penalties (1 ms)
    Rare Traits
      ‚àö legendary_bloodline trait should have powerful effects (1 ms)
    Discipline-Specific Modifiers
      ‚àö should have appropriate discipline bonuses for positive traits (1 ms)
      ‚àö should have appropriate discipline penalties for negative traits (1 ms)
    getAllTraitEffects
      ‚àö should return complete trait effects mapping (1 ms)
      ‚àö should include all expected trait categories (1 ms)

[2026-01-28 14:33:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:11] info: [envValidator] Test environment validation complete. Success: true
PASS tests/foalEnrichment.test.mjs
  üê¥ PURE ALGORITHMIC: Foal Enrichment Helper Functions
    calculateActivityOutcome
      ‚àö should calculate activity outcome within specified ranges (6 ms)
      ‚àö should classify outcome as excellent for high bonding and low stress (1 ms)
      ‚àö should classify outcome as challenging for low bonding or high stress (1 ms)
      ‚àö should classify outcome as success for moderate bonding and stress (8 ms)
    calculateBoundedScore
      ‚àö should enforce minimum bound of 0 (1 ms)
      ‚àö should enforce maximum bound of 100 (1 ms)
      ‚àö should return correct values within bounds (1 ms)
      ‚àö should handle edge cases at boundaries
    applyDefaultScores
      ‚àö should use default values for null inputs
      ‚àö should preserve non-null values
      ‚àö should handle mixed null and non-null values (1 ms)
      ‚àö should handle zero values correctly (not treat as null) (1 ms)

[2026-01-28 14:33:11] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:11] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:11] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:11] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:11] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 14:33:11] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Horse ID is required
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Discipline is required
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:11] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 14:33:11] error: [trainingModel.logTrainingSession] Database error: Database connection failed
[2026-01-28 14:33:11] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Show Jumping
[2026-01-28 14:33:11] info: [trainingModel.getLastTrainingDate] Last training date for horse 5 in Show Jumping: Wed Jan 15 2025 05:00:00 GMT-0500 (Eastern Standard Time)
[2026-01-28 14:33:11] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 14:33:11] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Racing
[2026-01-28 14:33:11] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 14:33:12] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required
[2026-01-28 14:33:12] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing
[2026-01-28 14:33:12] error: [trainingModel.getLastTrainingDate] Database error: Database connection failed
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 10
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 10 is 5 years old
[2026-01-28 14:33:12] info: [trainingModel.getHorseAge] Getting age for horse 999
[2026-01-28 14:33:12] info: [trainingModel.getHorseAge] Horse 999 not found or missing dateOfBirth
[2026-01-28 14:33:12] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer
[2026-01-28 14:33:12] info: [trainingModel.getHorseAge] Getting age for horse 5
[2026-01-28 14:33:12] error: [trainingModel.getHorseAge] Database error: Database connection failed
[2026-01-28 14:33:12] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing
[2026-01-28 14:33:12] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2026-01-28 14:33:12] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping
[2026-01-28 14:33:12] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 1
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Getting age for horse 5
[2025-01-15 05:00:00] info: [trainingModel.getHorseAge] Horse 5 is 2 years old
PASS tests/trainingModel.test.mjs
  üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data
    logTrainingSession
      ‚àö should log a training session with all required fields (5 ms)
      ‚àö should throw error if horseId is missing (4 ms)
      ‚àö should throw error if discipline is missing (2 ms)
      ‚àö should throw error if horseId is not a positive integer (4 ms)
      ‚àö should handle database errors gracefully (7 ms)
    getLastTrainingDate
      ‚àö should return the most recent training date for horse and discipline (3 ms)
      ‚àö should return null if no training records found (2 ms)
      ‚àö should throw error if horseId is not a positive integer (3 ms)
      ‚àö should throw error if discipline is missing (3 ms)
      ‚àö should handle database errors gracefully (2 ms)
    getHorseAge
      ‚àö should return horse age from database (3 ms)
      ‚àö should return null if horse not found (3 ms)
      ‚àö should throw error if horseId is not a positive integer (3 ms)
      ‚àö should handle database errors gracefully (6 ms)
    Integration scenarios
      ‚àö should handle multiple training sessions for same horse different disciplines (4 ms)
      ‚àö should validate horse age before allowing training (2 ms)

[2026-01-28 14:33:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:12] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:12] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:12] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] info: [simulateCompetition] Horse TraitHorse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] info: [simulateCompetition] Horse Cross CountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] info: [simulateCompetition] Horse EnduranceSpecialist: Discipline affinity bonus applied for discipline_affinity_endurance (+5 points)
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_endurance
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
[2026-01-28 14:33:12] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing
[2026-01-28 14:33:12] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment
PASS tests/task9IntegrationExample.test.mjs
  üèÜ INTEGRATION: Task 9 Integration Example - Discipline Affinity Trait Bonus
    ‚àö should apply +5 flat bonus for discipline_affinity_jump trait in Show Jumping (7 ms)
    ‚àö should demonstrate the exact code pattern from TASK 9 specification (3 ms)
    ‚àö should work with different discipline types and their corresponding traits (16 ms)
    ‚àö should not apply bonus when trait does not match discipline (2 ms)

[2026-01-28 14:33:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:12] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:12] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:12] info: [envValidator] Test environment validation complete. Success: true
PASS tests/utils/epigeneticTraits.comprehensive.test.mjs
  üß¨ COMPREHENSIVE: Epigenetic Traits Calculation System
    Basic Trait Inheritance
      ‚àö should calculate traits with optimal breeding conditions (3 ms)
      ‚àö should handle high stress breeding conditions (1 ms)
      ‚àö should produce consistent results with same seed (2 ms)
    Environmental Factor Processing
      ‚àö should handle low bonding score scenarios (1 ms)
      ‚àö should handle high bonding score scenarios (1 ms)
      ‚àö should process moderate environmental conditions (1 ms)
    Trait Conflict Resolution
      ‚àö should handle conflicting parent traits (1 ms)
      ‚àö should handle similar parent traits (1 ms)
    Trait Visibility Determination
      ‚àö should categorize traits by visibility correctly (1 ms)
    Input Validation and Error Handling
      ‚àö should handle empty trait arrays (1 ms)
      ‚àö should handle boundary values for bonding and stress (1 ms)
      ‚àö should handle maximum values for bonding and stress (1 ms)
    Complex Breeding Scenarios
      ‚àö should handle large trait sets from both parents (9 ms)
      ‚àö should produce different results with different seeds (1 ms)
      ‚àö should maintain trait consistency across multiple calculations (1 ms)
    Trait Array Properties
      ‚àö should return sorted trait arrays (1 ms)
      ‚àö should return unique traits in each category

[2026-01-28 14:33:12] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:12] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:12] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:12] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
[2026-01-28 14:33:12] warn: [cacheHelper] Clear all cache skipped (Redis unavailable)
PASS tests/horseXpController.test.mjs
  Horse XP Controller - API Endpoints
    getHorseXpStatus
      ‚àö should return horse XP status for authorized user (6 ms)
      ‚àö should reject unauthorized access to other users horses (2 ms)
      ‚àö should handle horse not found (2 ms)
    allocateStatPoint
      ‚àö should allocate stat point successfully (2 ms)
      ‚àö should validate stat name (3 ms)
      ‚àö should require stat name in request body (2 ms)
    getHorseXpHistory
      ‚àö should return horse XP history with pagination (2 ms)
    awardXpToHorse
      ‚àö should award XP to horse (system/admin use) (7 ms)
      ‚àö should validate XP amount (2 ms)

[2026-01-28 14:33:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:13] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:13] error: ‚ùå Environment validation failed:
[2026-01-28 14:33:13] error:   - Missing required environment variable: DATABASE_URL
[2026-01-28 14:33:13] error:   - Missing required environment variable: JWT_SECRET
[2026-01-28 14:33:13] error:   - NODE_ENV must be one of: development, production, test (current: invalid)
[2026-01-28 14:33:13] error:   - PORT must be a number (current: abc)
[2026-01-28 14:33:13] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 14:33:13] info: ‚úÖ Environment validation passed
[2026-01-28 14:33:13] warn: [validateEnvironment] SECURITY WARNING: ALLOWED_ORIGINS contains HTTP URLs in production
[2026-01-28 14:33:13] warn:   HTTP origins detected: http://example.com
[2026-01-28 14:33:13] warn:   These should be HTTPS in production to prevent man-in-the-middle attacks
[2026-01-28 14:33:13] warn: [validateEnvironment] SECURITY WARNING: PORT is set to 80 (HTTP) in production
[2026-01-28 14:33:13] warn:   Consider using HTTPS (443) or a reverse proxy with HTTPS termination
[2026-01-28 14:33:13] error: ‚ùå Environment validation failed:
[2026-01-28 14:33:13] error:   - JWT_SECRET must be at least 32 characters (current: 17)
[2026-01-28 14:33:13] error:   - JWT_SECRET appears to be a placeholder value. Please generate a real secret.
[2026-01-28 14:33:13] error:   - DATABASE_URL contains a weak password. Please use a strong password.
[2026-01-28 14:33:13] error: 
Please fix the above errors in your .env file and restart.
[2026-01-28 14:33:13] info: ‚úÖ Environment validation passed
[2026-01-28 14:33:13] info: ‚úÖ Environment validation passed
PASS __tests__/unit/security/validate-environment.test.mjs
  validateEnvironment
    ‚àö throws when required envs are missing or invalid (16 ms)
    ‚àö warns about weak JWT secrets and HTTP origins in production (14 ms)
    ‚àö passes for valid configuration (2 ms)

[2026-01-28 14:33:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:13] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/utils/validateEnvironment.test.mjs
  validateEnvironment()
    Required variables validation
      ‚àö should pass with all required variables present (3 ms)
      ‚àö should fail when DATABASE_URL is missing (2 ms)
      ‚àö should fail when JWT_SECRET is missing (8 ms)
      ‚àö should fail when NODE_ENV is missing (1 ms)
      ‚àö should fail when PORT is missing (1 ms)
    Minimum length validation
      ‚àö should fail when DATABASE_URL is too short (<20 chars) (1 ms)
      ‚àö should fail when JWT_SECRET is too short (<32 chars) (2 ms)
      ‚àö should pass when JWT_SECRET is exactly 32 characters (1 ms)
    Allowed values validation
      ‚àö should pass when NODE_ENV is "development" (1 ms)
      ‚àö should pass when NODE_ENV is "production" (1 ms)
      ‚àö should pass when NODE_ENV is "test" (1 ms)
      ‚àö should fail when NODE_ENV is invalid (1 ms)
    Type validation
      ‚àö should pass when PORT is a valid number (1 ms)
      ‚àö should fail when PORT is not a number (1 ms)
    JWT_SECRET strength validation
      ‚àö should reject placeholder "your-super-secret" (1 ms)
      ‚àö should reject placeholder "change-this" (7 ms)
      ‚àö should reject placeholder "REPLACE_WITH" (1 ms)
      ‚àö should reject placeholder "example" (1 ms)
      ‚àö should warn when JWT_SECRET lacks character variety (line 72) (1 ms)
    DATABASE_URL format validation
      ‚àö should pass with postgresql:// prefix (1 ms)
      ‚àö should pass with postgres:// prefix (1 ms)
      ‚àö should fail without postgresql prefix (1 ms)
      ‚àö should reject weak password "password" (1 ms)
      ‚àö should reject weak password "admin" (1 ms)
      ‚àö should reject weak password "123456" (1 ms)
      ‚àö should reject weak password "postgres" (1 ms)
    Production HTTPS warnings
      ‚àö should warn about HTTP origins in production (2 ms)
      ‚àö should NOT warn about HTTPS origins in production (1 ms)
      ‚àö should warn about PORT 80 in production (1 ms)
      ‚àö should NOT warn about PORT 443 in production (2 ms)
    Multiple errors
      ‚àö should report all validation errors at once (1 ms)

[2026-01-28 14:33:13] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:13] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:13] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:13] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomConfig.test.mjs
  Groom Configuration
    Foal Task Categories
      Enrichment Tasks (0-2 years)
        ‚àö should define correct enrichment tasks for early development (3 ms)
        ‚àö should have exactly 7 enrichment tasks (1 ms)
        ‚àö should contain only string values (2 ms)
        ‚àö should not contain any grooming tasks (2 ms)
      Foal Grooming Tasks (1-3 years)
        ‚àö should define correct grooming tasks for handling preparation (7 ms)
        ‚àö should have exactly 5 grooming tasks (1 ms)
        ‚àö should contain only string values (1 ms)
        ‚àö should not contain any enrichment tasks (1 ms)
      Task Category Separation
        ‚àö should have no overlap between enrichment and grooming tasks
        ‚àö should have all tasks be unique within each category (1 ms)
    Configuration Constants
      ‚àö should have correct age thresholds for task eligibility (1 ms)
      ‚àö should have task category definitions (1 ms)
      ‚àö should have bonding and streak configuration (1 ms)
    Age-Based Task Eligibility Logic
      ‚àö should allow enrichment tasks for ages 0-2 (1 ms)
      ‚àö should allow grooming tasks for ages 1-3 (1 ms)
      ‚àö should allow general grooming tasks for ages 3+ (1 ms)
      ‚àö should have overlap period for ages 1-3 (both enrichment and grooming)

[2026-01-28 14:33:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/disciplineAffinityBonusTask9.test.mjs
  üèÜ UNIT: Discipline Affinity Trait Bonus - Competition Score Enhancement
    Discipline Affinity Trait Matching
      ‚àö should apply +5 bonus for discipline_affinity_racing trait in Racing competition (4 ms)
      ‚àö should apply +5 bonus for discipline_affinity_show_jumping trait in Show Jumping competition (2 ms)
      ‚àö should apply +5 bonus for discipline_affinity_dressage trait in Dressage competition (1 ms)
      ‚àö should apply +5 bonus for discipline_affinity_cross_country trait in Cross Country competition (1 ms)
    Discipline Affinity Trait Non-Matching
      ‚àö should NOT apply bonus for discipline_affinity_racing trait in Dressage competition (1 ms)
      ‚àö should NOT apply bonus for discipline_affinity_show_jumping trait in Racing competition (1 ms)
    Multiple Discipline Affinity Traits
      ‚àö should only apply one +5 bonus even with multiple discipline affinity traits (1 ms)
    Discipline Name Conversion
      ‚àö should correctly convert "Show Jumping" to "discipline_affinity_show_jumping" (8 ms)
      ‚àö should correctly convert "Cross Country" to "discipline_affinity_cross_country" (1 ms)
    Integration with Existing Trait System
      ‚àö should apply discipline affinity bonus in addition to existing trait effects (1 ms)
    Edge Cases and Error Handling
      ‚àö should handle horses without epigeneticModifiers gracefully (1 ms)
      ‚àö should handle horses with null epigeneticModifiers gracefully
      ‚àö should handle horses with undefined positive traits gracefully (1 ms)

[2026-01-28 14:33:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:14] info: [envValidator] Test environment validation complete. Success: true
PASS models/userModel.test.mjs
  üë§ UNIT: User Model - Database Operations & Business Logic
    createUser
      ‚àö should create a user successfully (4 ms)
      ‚àö should throw error if username is missing (4 ms)
      ‚àö should throw error if email is missing (1 ms)
      ‚àö should throw error if password is missing (1 ms)
      ‚àö should throw error on unique constraint violation for username (1 ms)
      ‚àö should throw error on unique constraint violation for email (1 ms)
      ‚àö should throw DatabaseError for other Prisma errors (1 ms)
    getUserById
      ‚àö should return user if found (1 ms)
      ‚àö should return null if user not found (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
    getUserByEmail
      ‚àö should return user by email (case insensitive) (9 ms)
      ‚àö should throw DatabaseError if email is not provided (1 ms)
    getUserWithHorses
      ‚àö should return user with horses if found (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
    updateUser
      ‚àö should update user successfully (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
      ‚àö should handle Prisma update errors (user not found) (1 ms)
      ‚àö should handle general update errors (1 ms)
    deleteUser
      ‚àö should delete user successfully (1 ms)
      ‚àö should throw DatabaseError if ID is not provided
      ‚àö should handle Prisma delete errors (user not found)
    addXpToUser
      ‚àö should add XP without leveling up (1 ms)
      ‚àö should add XP and level up (1 ms)
      ‚àö should return error for invalid XP amount (2 ms)
      ‚àö should return error for invalid user ID (1 ms)
      ‚àö should return error if user not found (1 ms)
    getUserProgress
      ‚àö should return user progress (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (1 ms)
      ‚àö should throw DatabaseError if user not found
    getUserStats
      ‚àö should return user stats with horses
      ‚àö should handle user with no horses
      ‚àö should handle user with null horses array (1 ms)
      ‚àö should return null for non-existent user (1 ms)
      ‚àö should throw DatabaseError if ID is not provided (8 ms)

[2026-01-28 14:33:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseXpSystem.test.mjs
  Horse XP System - Core Business Logic
    addXpToHorse
      ‚àö should add XP to horse and calculate available stat points correctly (6 ms)
      ‚àö should handle multiple stat points correctly (200+ XP) (9 ms)
      ‚àö should preserve existing stat points when adding XP (1 ms)
      ‚àö should handle validation errors properly (2 ms)
      ‚àö should handle horse not found error (1 ms)
    allocateStatPoint
      ‚àö should allocate stat point and decrease available points (1 ms)
      ‚àö should reject allocation when no stat points available (1 ms)
      ‚àö should validate stat names properly (1 ms)
      ‚àö should handle all valid stat names (2 ms)
    getHorseXpHistory
      ‚àö should retrieve horse XP events with proper filtering (2 ms)
  Horse XP System - Integration with Competition System
    Competition XP Awards
      ‚àö should award horse XP based on competition performance (1 ms)

[2026-01-28 14:33:14] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:14] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:14] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:14] info: [envValidator] Test environment validation complete. Success: true
PASS tests/enhancedCompetitionLogic.test.mjs
  üèÜ UNIT: Enhanced Competition Logic - Complete Competition System Validation
    üìä Horse Level Calculation
      ‚àö should calculate horse level correctly for Racing discipline (2 ms)
      ‚àö should handle high-level horses correctly (1 ms)
    üéÇ Age Requirements
      ‚àö should accept horses aged 3-21 (in days) (1 ms)
      ‚àö should reject horses under 3 or over 21 (in days)
    üß¨ Trait Requirements
      ‚àö should require Gaited trait for Gaited competitions (1 ms)
      ‚àö should not require special traits for most disciplines
    üìà Stat Gain System
      ‚àö should award stat gains for 1st place (10% chance) (8 ms)
      ‚àö should not award stat gains when random chance fails (1 ms)
      ‚àö should not award stat gains for 4th place or lower (1 ms)
    üèÜ Prize Distribution
      ‚àö should not award prizes to 4th place
    üéØ Discipline Configuration
      ‚àö should have all 24 disciplines (1 ms)
      ‚àö should have correct stats for each discipline (2 ms)
      ‚àö should have Gaited trait requirement for Gaited discipline
    üîß Error Handling
      ‚àö should handle missing horse data gracefully (1 ms)
      ‚àö should handle invalid discipline gracefully

[2026-01-28 14:33:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:15] info: [envValidator] Test environment validation complete. Success: true
PASS tests/competitionController.test.mjs
  üèÜ PURE ALGORITHMIC: Competition Controller Helper Functions
    detectTraitBonuses
      ‚àö should detect discipline affinity trait bonuses correctly (3 ms)
      ‚àö should return no bonus for horses without matching traits (1 ms)
      ‚àö should handle horses with no epigenetic modifiers (1 ms)
      ‚àö should handle discipline names with spaces correctly (1 ms)
      ‚àö should be case insensitive for discipline matching (1 ms)

[2026-01-28 14:33:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:15] info: [envValidator] Test environment validation complete. Success: true
PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  üß¨ UNIT: Apply Epigenetic Traits At Birth Task 8 - Deterministic Breeding Analysis
    Low-stress, premium-fed mare produces positive traits
      ‚àö should produce hardy trait with low stress and premium feed (5 ms)
      ‚àö should produce well_bred trait with optimal conditions and no inbreeding (2 ms)
      ‚àö should produce premium_care trait with exceptional conditions (9 ms)
      ‚àö should NOT produce positive traits with high stress (2 ms)
      ‚àö should NOT produce positive traits with poor feed quality (2 ms)
    Inbreeding detection triggers negative traits
      ‚àö should produce inbred trait when duplicate ancestors detected (2 ms)
      ‚àö should NOT produce inbred trait without common ancestors (2 ms)
    Poor breeding conditions trigger negative traits
      ‚àö should produce weak_constitution trait with high stress and poor feed (1 ms)
      ‚àö should produce stressed_lineage trait with high mare stress (2 ms)
      ‚àö should produce poor_nutrition trait with very poor feed quality (1 ms)
    Discipline specialization produces legacy traits
      ‚àö should produce specialized_lineage trait with 3+ ancestors in same discipline (2 ms)
      ‚àö should NOT produce specialized_lineage trait without sufficient specialization (1 ms)
      ‚àö should handle no competition history gracefully (7 ms)
    Deterministic testing with Math.random mocking
      ‚àö should consistently apply traits when random value is below threshold (2 ms)
      ‚àö should consistently NOT apply traits when random value is above threshold (1 ms)
      ‚àö should handle edge case random values at exact thresholds (1 ms)
    Error handling and edge cases
      ‚àö should throw error when sireId is missing (4 ms)
      ‚àö should throw error when damId is missing (1 ms)
      ‚àö should throw error when mare is not found (1 ms)
      ‚àö should handle database errors gracefully in lineage analysis (1 ms)

[2026-01-28 14:33:15] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:15] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:15] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:15] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:15] info: [bondingModifiers] Bonding change for horse 1: 32 -> 50 (56.3% trait modifier)
[2026-01-28 14:33:15] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 0.8 (-46.7% trait modifier)
[2026-01-28 14:33:15] info: [bondingModifiers] Bonding change for horse 1: 6 -> 7.5 (25.0% trait modifier)
[2026-01-28 14:33:15] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 14:33:15] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1
[2026-01-28 14:33:15] warn: [traitEffects.getTraitEffects] No effects defined for trait: unknown_trait
[2026-01-28 14:33:15] warn: [traitEffects.getTraitEffects] No effects defined for trait: another_unknown
[2026-01-28 14:33:15] info: [bondingModifiers] Bonding change for horse 1: 17 -> 17 (0.0% trait modifier)
[2026-01-28 14:33:15] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 1.5 (0.0% trait modifier)
[2026-01-28 14:33:15] error: [bondingModifiers] Error calculating bonding change: Unknown activity type: invalid_activity
PASS tests/traitIntegration.test.mjs
  üéÆ UNIT: Trait Integration System - Gameplay Effect Application
    Bonding Modifiers
      ‚àö should apply trait bonuses to grooming bonding (5 ms)
      ‚àö should apply trait penalties to bonding for antisocial horses (2 ms)
      ‚àö should calculate competition bonding with placement modifiers (2 ms)
    Temperament Drift Suppression
      ‚àö should suppress temperament drift for resilient horses (2 ms)
      ‚àö should allow temperament drift for horses without suppressing traits (1 ms)
      ‚àö should suppress drift completely for calm horses (10 ms)
    Trait Effects Combination
      ‚àö should combine multiple positive trait effects correctly (1 ms)
      ‚àö should combine positive and negative trait effects (1 ms)
      ‚àö should handle empty trait arrays (1 ms)
      ‚àö should handle unknown traits gracefully (2 ms)
    Competition Stress Response
      ‚àö should calculate stress impact during competition (1 ms)
      ‚àö should apply stress resistance from traits (1 ms)
    Integration Error Handling
      ‚àö should handle missing trait data gracefully (2 ms)
      ‚àö should handle malformed trait data (1 ms)
      ‚àö should handle invalid activity types gracefully (2 ms)

[2026-01-28 14:33:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:16] info: [envValidator] Test environment validation complete. Success: true
PASS models/horseModel.test.mjs
  Horse Model At-Birth Traits Integration
    createHorse with at-birth traits
      ‚àö should apply at-birth traits for newborn with parents (5 ms)
      ‚àö should pass custom mare stress and feed quality (1 ms)
      ‚àö should merge at-birth traits with existing traits (2 ms)
      ‚àö should not apply at-birth traits for older horses (1 ms)
      ‚àö should not apply at-birth traits for horses without parents (1 ms)
      ‚àö should continue horse creation even if at-birth trait application fails (2 ms)
      ‚àö should handle missing sire_id gracefully
      ‚àö should handle missing dam_id gracefully
      ‚àö should log breeding analysis information (8 ms)

[2026-01-28 14:33:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:16] error: Error Test error
[2026-01-28 14:33:16] error: Error Generic error
[2026-01-28 14:33:16] error: Error Unique constraint failed
[2026-01-28 14:33:16] error: Error Record not found
[2026-01-28 14:33:16] error: Error Test error
[2026-01-28 14:33:16] error: Error Test error
[2026-01-28 14:33:16] error: Error Test error
PASS tests/middleware/errorHandler.test.mjs
  Error Handler Middleware
    ‚àö should handle AppError correctly (15 ms)
    ‚àö should handle generic errors with 500 status (2 ms)
    ‚àö should handle Prisma P2002 error (duplicate) (2 ms)
    ‚àö should handle Prisma P2025 error (not found) (2 ms)
    ‚àö should include stack trace in development mode (2 ms)
    ‚àö should not include stack trace in production mode (2 ms)
    ‚àö should handle errors without throwing (2 ms)

[2026-01-28 14:33:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:16] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseModel.test.mjs
  üêé UNIT: Horse Model - Discipline Score Management
    updateDisciplineScore
      ‚àö should update discipline score for existing horse (4 ms)
      ‚àö should add to existing discipline score (2 ms)
      ‚àö should handle multiple disciplines independently (2 ms)
      ‚àö should throw error for invalid horse ID (11 ms)
      ‚àö should throw error for non-existent horse (2 ms)
      ‚àö should throw error for invalid discipline (1 ms)
      ‚àö should throw error for invalid points (2 ms)
    getDisciplineScores
      ‚àö should return empty object for horse with no scores (1 ms)
      ‚àö should return discipline scores for horse with scores (1 ms)
      ‚àö should throw error for invalid horse ID (2 ms)
      ‚àö should throw error for non-existent horse (1 ms)

[2026-01-28 14:33:16] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:16] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:16] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:16] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 2nd place winner gained +1 balance (5% chance)
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 3rd place winner gained +1 precision (3% chance)
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 stamina (10% chance)
[2026-01-28 14:33:17] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 focus (10% chance)
PASS tests/competitionRewards.test.mjs
  üèÜ UNIT: Competition Rewards System - Prize & Stat Gain Calculations
    calculatePrizeDistribution
      ‚àö should calculate correct prize distribution for 1000 prize pool (3 ms)
      ‚àö should handle odd prize amounts with rounding (1 ms)
      ‚àö should handle small prize amounts (1 ms)
      ‚àö should handle zero prize pool (1 ms)
    getRelevantStats
      ‚àö should return correct stats for Racing discipline (1 ms)
      ‚àö should return correct stats for Show Jumping discipline
      ‚àö should return correct stats for Dressage discipline (1 ms)
      ‚àö should return default stats for unknown discipline (1 ms)
      ‚àö should handle all supported disciplines (10 ms)
    calculateStatGains
      ‚àö should grant stat gain for 1st place with 10% chance (lucky roll) (2 ms)
      ‚àö should not grant stat gain for 1st place with unlucky roll (1 ms)
      ‚àö should grant stat gain for 2nd place with 5% chance (lucky roll) (2 ms)
      ‚àö should grant stat gain for 3rd place with 3% chance (lucky roll) (1 ms)
      ‚àö should not grant stat gain for non-podium placement
      ‚àö should not grant stat gain for invalid placement (1 ms)
      ‚àö should select random stat from relevant discipline stats (4 ms)
    calculateEntryFees
      ‚àö should calculate total entry fees correctly (1 ms)
      ‚àö should handle zero entry fee (1 ms)
      ‚àö should handle zero entries (1 ms)
      ‚àö should handle large numbers (1 ms)
    hasValidRider
      ‚àö should return true for horse with valid rider object (1 ms)
      ‚àö should return false for horse with null rider (1 ms)
      ‚àö should return false for horse with undefined rider
      ‚àö should return false for horse with non-object rider (5 ms)
      ‚àö should return true for horse with empty object rider

[2026-01-28 14:33:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/groomInteractionLimits.test.mjs
  üê¥ TDD: Groom Interaction Daily Limits - ALL Horses
    Adult Horse Daily Limits (FAILING TESTS - Current Implementation Bug)
      ‚àö should FAIL: 1-year-old horse should be limited to once per day (3 ms)
      ‚àö should FAIL: 2-year-old horse should be limited to once per day (1 ms)
    Foal Daily Limits (Should PASS with current implementation)
      ‚àö should correctly limit 3-day-old foal to once per day (1 ms)
    Edge Cases
      ‚àö should handle missing horse (10 ms)
      ‚àö should allow interaction when no previous interactions today (2 ms)

[2026-01-28 14:33:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/xpLogModel.test.mjs
  üìä UNIT: XP Log Model - Experience Point Event Tracking
    logXpEvent
      ‚àö should log XP event successfully (4 ms)
      ‚àö should validate required parameters (4 ms)
      ‚àö should handle database errors (1 ms)
      ‚àö should handle negative XP amounts (1 ms)
    getUserXpEvents
      ‚àö should retrieve XP events for a user (1 ms)
      ‚àö should handle date filters (1 ms)
    getUserXpSummary
      ‚àö should calculate XP summary correctly (1 ms)
      ‚àö should handle empty results (1 ms)
      ‚àö should handle date filters in summary (1 ms)
    getRecentXpEvents
      ‚àö should retrieve recent XP events across all users (1 ms)
      ‚àö should use default options (1 ms)

[2026-01-28 14:33:17] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:17] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:17] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:17] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/user.test.mjs
  User Integration Tests - Mocked Database
    User Retrieval from Seeded Data
      ‚àö should retrieve the seeded user by ID (3 ms)
      ‚àö should retrieve the seeded user by email (1 ms)
      ‚àö should return null for non-existent user (1 ms)
    User with Horses Relationship
      ‚àö should retrieve user with their 2 horses (9 ms)
      ‚àö should include breed information for horses (2 ms)
    JSON Settings Field
      ‚àö should confirm JSON settings field exists and includes darkMode = true (1 ms)
    Database Constraints
      ‚àö should confirm unique email constraint (1 ms)

[2026-01-28 14:33:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:18] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
[2026-01-28 14:33:18] info: [cacheHelper] Cache statistics reset
PASS __tests__/unit/cacheHelper.test.mjs
  Cache Helper
    generateCacheKey()
      ‚àö should generate standardized keys (3 ms)
      ‚àö should handle spaces and colons in components (2 ms)
    getCachedQuery() - In-Memory Fallback
      ‚àö should execute and cache the query result (3 ms)
      ‚àö should respect TTL (2 ms)
      ‚àö should handle undefined/null results (3 ms)
    invalidateCache()
      ‚àö should remove items from cache (9 ms)

[2026-01-28 14:33:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:18] info: [envValidator] Test environment validation complete. Success: true
PASS tests/horseConformation.test.mjs
  üêé UNIT: Horse Conformation Scoring System
    Default Conformation Scores
      ‚àö should create horse with default conformation scores of 20 (4 ms)
      ‚àö should have all required conformation regions (10 ms)
    Conformation Score Validation
      ‚àö should validate conformation scores are within 1-100 range (2 ms)
      ‚àö should validate all conformation regions are present (1 ms)
    Conformation Score Updates
      ‚àö should update individual conformation scores (1 ms)
      ‚àö should handle bulk conformation updates (1 ms)
    Error Handling
      ‚àö should reject invalid conformation scores (1 ms)
      ‚àö should reject invalid conformation regions (1 ms)

[2026-01-28 14:33:18] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:18] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:18] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:18] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/dbPoolConfig.test.mjs
  dbPoolConfig
    ‚àö applies explicit pool settings in production (3 ms)
    ‚àö preserves existing query params (1 ms)
    ‚àö applies defaults in production when pool settings are missing (1 ms)

[2026-01-28 14:33:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/traitDiscovery.test.mjs
  üîç UNIT: Trait Discovery System - Environmental Trait Detection
    ‚àö should pass basic test (2 ms)
    ‚àö should handle trait discovery logic (1 ms)
    ‚àö should handle enrichment activity counting (1 ms)
    ‚àö should validate trait rarity levels (1 ms)
    ‚àö should validate trait types

[2026-01-28 14:33:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/trainingCooldown.test.mjs
  ‚è∞ UNIT: Training Cooldown System - Horse Training Restrictions
    canTrain
      ‚àö should return true for horse with no cooldown (2 ms)
      ‚àö should return true for horse with cooldown in the past (1 ms)
      ‚àö should return false for horse with cooldown in the future (9 ms)
      ‚àö should throw error for null horse (4 ms)
      ‚àö should throw error for undefined horse (1 ms)
    getCooldownTimeRemaining
      ‚àö should return null for horse with no cooldown (1 ms)
      ‚àö should return null for horse with cooldown in the past (1 ms)
      ‚àö should return positive milliseconds for horse with cooldown in the future (2 ms)
      ‚àö should return approximately correct time remaining (1 ms)
      ‚àö should throw error for null horse (1 ms)
      ‚àö should throw error for undefined horse (1 ms)
    setCooldown
      ‚àö should set cooldown 7 days in the future (1 ms)
      ‚àö should return updated horse with relations (1 ms)
      ‚àö should throw error for non-existent horse ID (1 ms)
      ‚àö should throw error for null horse ID (1 ms)
      ‚àö should throw error for undefined horse ID (1 ms)
      ‚àö should throw error for invalid horse ID (string) (1 ms)
      ‚àö should throw error for invalid horse ID (negative) (1 ms)
      ‚àö should throw error for invalid horse ID (zero) (9 ms)
      ‚àö should handle string horse ID that can be parsed to integer (1 ms)
    formatCooldown
      ‚àö should return "Ready to train" for null input (1 ms)
      ‚àö should return "Ready to train" for zero milliseconds (1 ms)
      ‚àö should return "Ready to train" for negative milliseconds (1 ms)
      ‚àö should format minutes correctly (1 ms)
      ‚àö should format hours and minutes correctly (1 ms)
      ‚àö should format days and hours correctly (1 ms)
      ‚àö should format exactly 7 days correctly
    Integration Tests
      ‚àö should complete full training cooldown workflow (1 ms)
      ‚àö should work with horse retrieved from database (1 ms)

[2026-01-28 14:33:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/xpLogging.test.mjs
  üìä INTEGRATION: XP Logging Integration - Experience Point Workflow
    Training XP Logging
      ‚àö should log XP event when training is successful (4 ms)
      ‚àö should log XP event with trait-modified amount (1 ms)
      ‚àö should continue training even if XP logging fails (2 ms)
      ‚àö should not log XP event if training fails (1 ms)
    Competition XP Logging
      ‚àö should log XP events for competition placements (1 ms)
      ‚àö should log different XP amounts for different placements (1 ms)

[2026-01-28 14:33:19] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:19] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:19] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:19] info: [envValidator] Test environment validation complete. Success: true
PASS tests/unit/carePatternAnalysis.test.mjs
  Care Pattern Analysis
    analyzeCarePatterns
      ‚àö should analyze patterns for eligible horse (4 ms)
      ‚àö should reject horse too old for evaluation (2 ms)
      ‚àö should throw error for non-existent horse (2 ms)
      ‚àö should analyze consistent care patterns (9 ms)
      ‚àö should analyze novelty exposure patterns (2 ms)
      ‚àö should analyze stress management patterns (1 ms)
      ‚àö should analyze bonding patterns (1 ms)
      ‚àö should analyze neglect patterns (2 ms)
      ‚àö should analyze environmental factors (1 ms)
    Edge Cases
      ‚àö should handle horse with no interactions (1 ms)
      ‚àö should handle database errors gracefully (3 ms)
      ‚àö should handle invalid evaluation date (1 ms)

[2026-01-28 14:33:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:20] info: [envValidator] Test environment validation complete. Success: true
PASS tests/integration/groomRoutes.test.mjs
  Groom Routes Integration Tests
    ‚àö should pass basic test (2 ms)
    ‚àö should test groom system constants (1 ms)
    ‚àö should validate interaction types
    ‚àö should validate duration ranges (2 ms)
    ‚àö should validate session rate ranges

[2026-01-28 14:33:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:20] info: [envValidator] Test environment validation complete. Success: true
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Applied influences from 2 flags to trait weights
[2026-01-28 14:33:20] warn: [epigeneticFlagInfluence] Unknown flag: unknown_flag
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags
[2026-01-28 14:33:20] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 4 flags
PASS tests/unit/epigeneticFlagInfluence.test.mjs
  Epigenetic Flag Influence System
    applyFlagInfluencesToTraitWeights
      ‚àö should return unchanged weights for no flags (3 ms)
      ‚àö should apply brave flag influences correctly (11 ms)
      ‚àö should apply fearful flag influences correctly (2 ms)
      ‚àö should stack multiple flag influences (2 ms)
      ‚àö should handle unknown flags gracefully (2 ms)
      ‚àö should clamp values to 0-1 range (2 ms)
    calculateBehaviorModifiers
      ‚àö should return empty object for no flags (1 ms)
      ‚àö should calculate modifiers for single flag (1 ms)
      ‚àö should aggregate modifiers from multiple flags (2 ms)
      ‚àö should stack same modifier types (7 ms)
    applyFlagInfluencesToCompetition
      ‚àö should return unchanged score for no flags (1 ms)
      ‚àö should apply competition bonus correctly (2 ms)
      ‚àö should apply competition penalty correctly (1 ms)
      ‚àö should apply stress modifiers correctly (2 ms)
      ‚àö should not allow negative scores (2 ms)
    applyFlagInfluencesToTraining
      ‚àö should return unchanged efficiency for no flags (1 ms)
      ‚àö should apply training efficiency modifier (2 ms)
      ‚àö should apply bonding modifiers to training (1 ms)
      ‚àö should clamp efficiency to 0-1 range (1 ms)
    applyFlagInfluencesToBonding
      ‚àö should return unchanged bonding for no flags (1 ms)
      ‚àö should apply bonding rate modifier (2 ms)
      ‚àö should apply bonding resistance penalty (2 ms)
    getFlagInfluenceSummary
      ‚àö should return empty summary for no flags (1 ms)
      ‚àö should generate complete summary for multiple flags (6 ms)
      ‚àö should aggregate trait influences correctly (2 ms)
      ‚àö should count flag types correctly (1 ms)

[2026-01-28 14:33:20] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:20] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:20] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:20] info: [envValidator] Test environment validation complete. Success: true
PASS __tests__/unit/clusterManager.test.mjs
  clusterManager
    ‚àö disables clustering by default in test env (3 ms)
    ‚àö enables clustering when explicitly enabled (2 ms)
    ‚àö uses WEB_CONCURRENCY when set (1 ms)
    ‚àö defaults to CPU count when WEB_CONCURRENCY is not set (1 ms)
    ‚àö clamps invalid worker counts to 1 (1 ms)

[2026-01-28 14:33:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:21] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:21] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/training-fixed.test.mjs
  Training Fixed Tests
    ‚àö should be a placeholder test (2 ms)

[2026-01-28 14:33:21] info: [envValidator] Validating test environment configuration...
[2026-01-28 14:33:21] info: [envValidator] ‚úÖ All 5 required environment variables are present
[2026-01-28 14:33:21] info: [envValidator] ‚ÑπÔ∏è  Optional variables not set: AUTH_RATE_LIMIT_MAX, ENABLE_DEBUG_ROUTES
[2026-01-28 14:33:21] info: [envValidator] Test environment validation complete. Success: true
PASS tests/errors/AppError.test.mjs
  Error Classes
    AppError
      ‚àö should create an AppError with default values (2 ms)
      ‚àö should create an AppError with custom values (1 ms)
      ‚àö should set status to "fail" for 4xx status codes (1 ms)
      ‚àö should set status to "error" for 5xx status codes
      ‚àö should capture stack trace (4 ms)
    ValidationError
      ‚àö should create a ValidationError with default values (1 ms)
      ‚àö should create a ValidationError with field and value (1 ms)
      ‚àö should inherit from AppError
    DatabaseError
      ‚àö should create a DatabaseError with default values
      ‚àö should create a DatabaseError with original error
      ‚àö should inherit from AppError (10 ms)
    NotFoundError
      ‚àö should create a NotFoundError with default message (1 ms)
      ‚àö should create a NotFoundError with custom resource (1 ms)
      ‚àö should create a NotFoundError with resource and ID
      ‚àö should inherit from AppError (1 ms)

Summary of all failing tests
FAIL __tests__/integration/security/owasp-comprehensive.test.mjs
  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should reject common default passwords

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Default Credentials Prevention ‚Ä∫ should enforce minimum password complexity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should include security headers in responses

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ HTTP Security Headers ‚Ä∫ should not expose server version information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not leak sensitive information in error messages

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Error Message Handling ‚Ä∫ should not expose stack traces in production-like errors

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ CORS Configuration ‚Ä∫ should enforce CORS policies

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩÔ∏è A06:2021 - Security Misconfiguration ‚Ä∫ Rate Limiting Configuration ‚Ä∫ should have rate limiting enabled

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should have package-lock.json for dependency pinning

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Dependency Integrity ‚Ä∫ should validate critical dependencies are up-to-date

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should validate data integrity for critical operations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Data Integrity Checks ‚Ä∫ should prevent stat manipulation through tampering

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject unsigned JWT tokens

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Unsigned or Tampered JWT Prevention ‚Ä∫ should reject JWT tokens with tampered payload

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A08:2021 - Software and Data Integrity Failures ‚Ä∫ Insecure Deserialization Prevention ‚Ä∫ should reject malformed JSON payloads

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log successful authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Authentication Event Logging ‚Ä∫ should log failed authentication attempts

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log ownership violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sensitive Operation Logging ‚Ä∫ should log rate limit violations

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Audit Log Completeness ‚Ä∫ should include required audit fields

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A09:2021 - Security Logging and Monitoring Failures ‚Ä∫ Sentry Integration ‚Ä∫ should have Sentry configured for error tracking

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject internal IP addresses in URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ URL Validation ‚Ä∫ should reject file:// protocol URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should sanitize redirect URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ External Request Validation ‚Ä∫ should validate webhook URLs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ A10:2021 - Server-Side Request Forgery (SSRF) ‚Ä∫ DNS Rebinding Prevention ‚Ä∫ should prevent DNS rebinding attacks

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ Cross-Category Security Validation ‚Ä∫ Defense in Depth ‚Ä∫ should enforce multiple security layers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

  ‚óè ÔøΩÔøΩ OWASP Top 10 - Comprehensive Security Tests ‚Ä∫ ÔøΩÔøΩ Cross-Category Security Validation ‚Ä∫ Security Configuration Consistency ‚Ä∫ should have consistent security settings across all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "OWASP Test Horse",
        breed: {
          connect: {
            id: 1
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-29T19:28:45.349Z"),
        userId: "6e31fc6e-9474-45d1-a210-e7a498dfbb21",
        ~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   user?: UserCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `userId`. Did you mean `user`? Available options are marked with ?.

    [0m [90m 60 |[39m
     [90m 61 |[39m     [90m// Create test horse[39m
    [31m[1m>[22m[39m[90m 62 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 63 |[39m       data[33m:[39m {
     [90m 64 |[39m         name[33m:[39m [32m'OWASP Test Horse'[39m[33m,[39m
     [90m 65 |[39m         breed[33m:[39m { connect[33m:[39m { id[33m:[39m [35m1[39m } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (__tests__/integration/security/owasp-comprehensive.test.mjs:62:17)

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 0,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 200,

    [0m [90m 156 |[39m
     [90m 157 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 158 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 159 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 160 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 161 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:158:34)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 1,
        "progressPercentage": 3,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 5,
        "xpForCurrentLevel": 0,
        "xpForNextLevel": 200,
        "xpToNextLevel": 195,

    [0m [90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 232 |[39m
    [31m[1m>[22m[39m[90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 234 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 235 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 236 |[39m         level[33m:[39m [35m1[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:233:42)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 2,
        "progressPercentage": 0,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 200,
        "xpForCurrentLevel": 200,
        "xpForNextLevel": 300,
        "xpToNextLevel": 100,

    [0m [90m 326 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 327 |[39m
    [31m[1m>[22m[39m[90m 328 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 329 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 330 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 331 |[39m         level[33m:[39m [35m2[39m[33m,[39m [90m// Leveled up![39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:328:42)

  ‚óè ÔøΩÔøΩ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ ÔøΩÔøΩ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expect(received).toEqual(expected) // deep equality

    - Expected  - 5
    + Received  + 1

    @@ -1,14 +1,10 @@
      Object {
        "level": 3,
        "progressPercentage": 50,
        "totalEarnings": 1000,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "c00699ae-16ce-4700-a19a-fed6299b04ab",
    -     },
    -   },
    +   "userId": "c00699ae-16ce-4700-a19a-fed6299b04ab",
        "username": "progresstest",
        "xp": 350,
        "xpForCurrentLevel": 300,
        "xpForNextLevel": 400,
        "xpToNextLevel": 50,

    [0m [90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m 361 |[39m
    [31m[1m>[22m[39m[90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 363 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 364 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 365 |[39m         level[33m:[39m [35m3[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:362:42)

FAIL tests/integration/userRoutes.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: User Routes - HTTP API Endpoints ‚Ä∫ GET /api/users/:id/progress ‚Ä∫ should return user progress successfully

    expect(received).toMatchObject(expected)

    - Expected  - 5
    + Received  + 0

    @@ -1,14 +1,9 @@
      Object {
        "level": Any<Number>,
        "progressPercentage": Any<Number>,
        "totalEarnings": Any<Number>,
    -   "user": Object {
    -     "connect": Object {
    -       "id": "2769cc25-fc0b-41c5-a7f1-a7fbe71dd36f",
    -     },
    -   },
        "username": "userroutes_1769628529654",
        "xp": Any<Number>,
        "xpForCurrentLevel": Any<Number>,
        "xpForNextLevel": Any<Number>,
        "xpToNextLevel": Any<Number>,

    [0m [90m 91 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 92 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'User progress retrieved successfully'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 93 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoMatchObject({
     [90m    |[39m                                  [31m[1m^[22m[39m
     [90m 94 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 95 |[39m         username[33m:[39m testUser[33m.[39musername[33m,[39m
     [90m 96 |[39m         level[33m:[39m expect[33m.[39many([33mNumber[39m)[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userRoutes.test.mjs:93:34)

FAIL tests/integration/groomAssignmentSystem.test.mjs
  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create a new groom assignment

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 116 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 117 |[39m
    [31m[1m>[22m[39m[90m 118 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 119 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 120 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'assignment'[39m)[33m;[39m
     [90m 121 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:118:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should create multiple assignments for different horses

    expect(received).toBe(expected) // Object.is equality

    Expected: 201
    Received: 400

    [0m [90m 142 |[39m         [33m.[39msend(assignmentData)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m201[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 145 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 146 |[39m     })[33m;[39m
     [90m 147 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:144:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 1. Assignment Creation ‚Ä∫ should prevent duplicate assignments

    expect(received).toContain(expected) // indexOf

    Expected substring: "already assigned"
    Received string:    "You do not own this horse"

    [0m [90m 161 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 162 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 163 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'already assigned'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m
     [90m 166 |[39m     it([32m'should validate required fields'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:163:37)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get all assignments for user

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 240 |[39m       [36mconst[39m { assignments[33m,[39m statistics } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 241 |[39m       expect([33mArray[39m[33m.[39misArray(assignments))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 242 |[39m       expect(assignments[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 243 |[39m       expect(statistics[33m.[39mactiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 244 |[39m     })[33m;[39m
     [90m 245 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:242:34)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 2. Assignment Retrieval ‚Ä∫ should get assignment dashboard

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 273 |[39m
     [90m 274 |[39m       [36mconst[39m { summary[33m,[39m salaryCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 275 |[39m       expect(summary[33m.[39mtotalActiveAssignments)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                              [31m[1m^[22m[39m
     [90m 276 |[39m       expect(salaryCosts[33m.[39mtotalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 277 |[39m     })[33m;[39m
     [90m 278 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:275:46)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 3. Assignment Limits ‚Ä∫ should enforce assignment limits

    expect(received).toContain(expected) // indexOf

    Expected substring: "maximum assignments"
    Received string:    "You do not own this horse"

    [0m [90m 332 |[39m           } [36melse[39m {
     [90m 333 |[39m             failedAssignments[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 334 |[39m             expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'maximum assignments'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 335 |[39m           }
     [90m 336 |[39m         }
     [90m 337 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:334:43)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 4. Salary Calculations ‚Ä∫ should calculate weekly salary costs

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 362 |[39m
     [90m 363 |[39m       [36mconst[39m { totalWeeklyCost[33m,[39m groomCosts } [33m=[39m response[33m.[39mbody[33m.[39mdata[33m;[39m
    [31m[1m>[22m[39m[90m 364 |[39m       expect(totalWeeklyCost)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 365 |[39m       expect([33mArray[39m[33m.[39misArray(groomCosts))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 366 |[39m       expect(groomCosts[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 367 |[39m[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:364:31)

  ‚óè Enhanced Groom Assignment System Integration Tests ‚Ä∫ 6. Assignment Removal ‚Ä∫ should remove an assignment

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 411 |[39m
     [90m 412 |[39m       [36mconst[39m assignment [33m=[39m assignmentsResponse[33m.[39mbody[33m.[39mdata[33m.[39massignments[33m.[39mfind(a [33m=>[39m a[33m.[39misActive)[33m;[39m
    [31m[1m>[22m[39m[90m 413 |[39m       expect(assignment)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       [90m// Remove the assignment[39m
     [90m 416 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/groomAssignmentSystem.test.mjs:413:26)

FAIL tests/routes/enhancedReportingRoutes.test.mjs
  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ POST /api/horses/compare-epigenetics should compare multiple horses

    expected 200 "OK", got 403 "Forbidden"

    [0m [90m 257 |[39m           horseIds[33m:[39m [testHorses[[35m0[39m][33m.[39mid[33m,[39m testHorses[[35m1[39m][33m.[39mid[33m,[39m testHorses[[35m2[39m][33m.[39mid][33m,[39m
     [90m 258 |[39m         })
    [31m[1m>[22m[39m[90m 259 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 260 |[39m
     [90m 261 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 262 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:259:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè Enhanced Reporting API Routes ‚Ä∫ Multi-Horse Analysis Endpoints ‚Ä∫ GET /api/horses/trait-trends should return trait development trends

    expected 200 "OK", got 400 "Bad Request"

    [0m [90m 274 |[39m         [33m.[39mquery({ user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m timeframe[33m:[39m [35m30[39m })
     [90m 275 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 276 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 277 |[39m
     [90m 278 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/routes/enhancedReportingRoutes.test.mjs:276:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Competition Workflow ‚Ä∫ ÔøΩÔøΩ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    PrismaClientValidationError: 
    Invalid `prisma.xpEvent.findFirst()` invocation:

    {
      where: {
        user: {
          connect: {
          ~~~~~~~
            id: "c6176406-a9f7-4be8-b6cf-ca2a45d080c4"
          },
    ?     is?: UserWhereInput,
    ?     isNot?: UserWhereInput
        },
        reason: {
          contains: "Competition"
        }
      }
    }

    Unknown argument `connect`. Available options are marked with ?.

    [0m [90m 332 |[39m
     [90m 333 |[39m       [90m// VERIFY: XP event logged[39m
    [31m[1m>[22m[39m[90m 334 |[39m       [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mfindFirst({
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 335 |[39m         where[33m:[39m {
     [90m 336 |[39m           user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m
     [90m 337 |[39m           reason[33m:[39m { contains[33m:[39m [32m'Competition'[39m }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:334:23)

FAIL tests/controllers/dynamicCompatibilityController.test.mjs
  ‚óè Dynamic Compatibility Controller API ‚Ä∫ POST /api/compatibility/recommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 331 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 332 |[39m       expect([33mArray[39m[33m.[39misArray(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 333 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                      [31m[1m^[22m[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 336 |[39m[0m

      at Object.<anonymous> (tests/controllers/dynamicCompatibilityController.test.mjs:333:54)

FAIL tests/groomPersonalityTraitBonus.test.mjs
  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify compatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539705",
        user: {
          connect: {
            id: "74aef6ed-9595-4bd6-881d-a7171457d4e8"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.705Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31684,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should correctly identify incompatible personality-temperament pairs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539727",
        user: {
          connect: {
            id: "bce4fa2e-d217-42a3-802c-f44911e254bd"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.727Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31685,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Compatibility Matrix ‚Ä∫ should handle regular matches without high bond

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539737",
        user: {
          connect: {
            id: "0a3294f7-af50-4bc1-8059-d4a2873394cb"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.737Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31686,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should apply personality effects to milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539745",
        user: {
          connect: {
            id: "024c3dad-24bf-4362-9001-8ceb9c46e7b1"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.745Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31687,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Personality Modifier Engine ‚Ä∫ should handle missing personality or temperament gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539754",
        user: {
          connect: {
            id: "055e450c-07ff-4439-be86-18b652f9e23b"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.754Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31688,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should integrate personality effects into milestone evaluation

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539764",
        user: {
          connect: {
            id: "f5fe23fc-8d28-4166-a368-15bd29cbd936"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.764Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31689,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Enhanced Milestone Evaluation Integration ‚Ä∫ should handle milestone evaluation without groom assignment

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539773",
        user: {
          connect: {
            id: "dadcd2b7-0682-4325-a253-6834a05991e9"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.773Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31690,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return all compatible grooms for a temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539781",
        user: {
          connect: {
            id: "98293cf2-4eb0-4bf5-84cd-55a7ec280374"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.781Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31691,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ Compatible Grooms Utility ‚Ä∫ should return empty array for unknown temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539788",
        user: {
          connect: {
            id: "237da04c-e481-448c-bde5-0070b7114131"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.788Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31692,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return groom profile with personality information

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539796",
        user: {
          connect: {
            id: "34ed5f8c-d6b2-461e-b3d6-c5bd3bbbdade"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.796Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31693,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 404 for non-existent groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539804",
        user: {
          connect: {
            id: "9f390dd5-11ab-4b2f-a01d-02f83aacb817"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.804Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31694,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/grooms/:id/profile ‚Ä∫ should return 400 for invalid groom ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539811",
        user: {
          connect: {
            id: "fccc4cb9-ed1d-4e9b-86be-330cc1dd8335"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.811Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31695,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return personality compatibility for horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539820",
        user: {
          connect: {
            id: "995852d1-be3e-4d28-922a-64915b805aaa"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.820Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31696,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539827",
        user: {
          connect: {
            id: "e045b15b-78de-4f59-9d2d-ceb3938bc5b0"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.827Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31697,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ GET /api/horses/:id/personality-impact ‚Ä∫ should return 400 for horse without temperament

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539835",
        user: {
          connect: {
            id: "bcbfa518-5435-430d-a3af-66fa184f10f7"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.835Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31698,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

  ‚óè Groom Personality Trait Bonus System - REAL SYSTEM TESTS ‚Ä∫ API Endpoints - REAL HTTP TESTS ‚Ä∫ POST /api/milestones/evaluate-milestone (with personality impact) ‚Ä∫ should evaluate milestone with personality effects

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628539843",
        user: {
          connect: {
            id: "6f0c2a32-80f3-47ba-96d1-2cd5d368dcca"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:28:59.843Z"),
        temperament: "Spirited",
        bondScore: 65,
        stressLevel: 20,
        healthStatus: "Good",
        sex: "filly",
        breedId: 31699,
        ~~~~~~~
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 59 |[39m
     [90m 60 |[39m     [90m// Create test horse with temperament[39m
    [31m[1m>[22m[39m[90m 61 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 62 |[39m       data[33m:[39m {
     [90m 63 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 64 |[39m         user[33m:[39m { connect[33m:[39m { id[33m:[39m testUser[33m.[39mid } }[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomPersonalityTraitBonus.test.mjs:61:17)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 3: Breeding Process & Foal Birth ‚Ä∫ should create foal with inherited and epigenetic traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Integration Test Foal",
        age: 0,
        breed: {
          connect: {
            id: 26468
          }
        },
        sex: "Colt",
        sireId: 147677,
        ~~~~~~
        damId: 147676,
        healthStatus: "Excellent",
        user: {
          connect: {
            id: "ed98b537-079d-41a6-8144-fc621f036b24"
          }
        },
        dateOfBirth: new Date("2026-01-28T19:29:01.406Z"),
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `sireId`. Did you mean `sire`? Available options are marked with ?.

    [0m [90m 225 |[39m
     [90m 226 |[39m       [90m// Create foal (simulating breeding result) with proper schema fields[39m
    [31m[1m>[22m[39m[90m 227 |[39m       foal [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m              [31m[1m^[22m[39m
     [90m 228 |[39m         data[33m:[39m {
     [90m 229 |[39m           name[33m:[39m [32m'Integration Test Foal'[39m[33m,[39m
     [90m 230 |[39m           age[33m:[39m [35m0[39m[33m,[39m [90m// Newborn[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:227:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 282 |[39m
     [90m 283 |[39m       [90m// Ensure foal has a groom assignment[39m
    [31m[1m>[22m[39m[90m 284 |[39m       [36mconst[39m assignmentResult [33m=[39m [36mawait[39m ensureDefaultGroomAssignment(foal[33m.[39mid[33m,[39m testUser[33m.[39mid)[33m;[39m
     [90m     |[39m                                                                        [31m[1m^[22m[39m
     [90m 285 |[39m
     [90m 286 |[39m       expect(assignmentResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 287 |[39m       expect(assignmentResult[33m.[39massignment [33m||[39m assignmentResult[33m.[39mnewAssignment)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:284:72)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 304 |[39m
     [90m 305 |[39m       [36mconst[39m interactionData [33m=[39m {
    [31m[1m>[22m[39m[90m 306 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 307 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m 308 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 309 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:306:22)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 5: Foal Development Tracking ‚Ä∫ should track foal development progress

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 341 |[39m       [36mconst[39m { getFoalDevelopment } [33m=[39m [36mawait[39m [36mimport[39m([32m'../../models/foalModel.js'[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       [36mconst[39m developmentData [33m=[39m [36mawait[39m getFoalDevelopment(foal[33m.[39mid)[33m;[39m
     [90m     |[39m                                                             [31m[1m^[22m[39m
     [90m 344 |[39m
     [90m 345 |[39m       expect(developmentData)[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(developmentData[33m.[39mfoal[33m.[39mid)[33m.[39mtoBe(foal[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:343:61)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 361 |[39m       [90m// VERIFY: Complete family tree exists[39m
     [90m 362 |[39m       [36mconst[39m foalWithFamily [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mfindUnique({
    [31m[1m>[22m[39m[90m 363 |[39m         where[33m:[39m { id[33m:[39m foal[33m.[39mid }[33m,[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 364 |[39m         include[33m:[39m {
     [90m 365 |[39m           sire[33m:[39m [36mtrue[39m[33m,[39m
     [90m 366 |[39m           dam[33m:[39m [36mtrue[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:363:27)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'age')

    [0m [90m 395 |[39m     it([32m'should validate business rules are enforced throughout workflow'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 396 |[39m       [90m// Age validation[39m
    [31m[1m>[22m[39m[90m 397 |[39m       expect(foal[33m.[39mage)[33m.[39mtoBe([35m0[39m)[33m;[39m [90m// Newborn[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 398 |[39m       expect(mare[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 399 |[39m       expect(stallion[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Breeding age[39m
     [90m 400 |[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:397:19)

FAIL tests/integration/traitRoutes.test.mjs
  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should trigger trait discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/discover/:horseId ‚Ä∫ should handle optional parameters correctly

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should get horse traits successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/horse/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should get all trait definitions

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should filter traits by type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/definitions ‚Ä∫ should return validation error for invalid type

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should get discovery status successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ GET /api/traits/discovery-status/:horseId ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should process batch discovery successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for empty horse IDs array

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for too many horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should return validation error for invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

  ‚óè Trait Routes Integration Tests ‚Ä∫ POST /api/traits/batch-discover ‚Ä∫ should handle mix of valid and invalid horse IDs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Test Discovery Horse 1769628542956",
        sex: "mare",
        dateOfBirth: new Date("2024-01-29T19:29:02.955Z"),
        breedId: 31700,
        ~~~~~~~
        user: {
          connect: {
            id: "ced99981-5d0a-4d67-a41a-8b66e49349e0"
          }
        },
        bondScore: 85,
        stressLevel: 15,
        healthStatus: "excellent",
        epigeneticModifiers: {
          positive: [
            "resilient"
          ],
          negative: [],
          hidden: [
            "bold",
            "trainabilityBoost"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 50 |[39m       [90m// Create real test horse in database owned by test user[39m
     [90m 51 |[39m       [36mconst[39m twoYearsAgo [33m=[39m [36mnew[39m [33mDate[39m([33mDate[39m[33m.[39mnow() [33m-[39m ([35m2[39m [33m*[39m [35m365[39m [33m*[39m [35m24[39m [33m*[39m [35m60[39m [33m*[39m [35m60[39m [33m*[39m [35m1000[39m))[33m;[39m
    [31m[1m>[22m[39m[90m 52 |[39m       testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 53 |[39m         data[33m:[39m {
     [90m 54 |[39m           name[33m:[39m [32m`Test Discovery Horse ${Date.now()}`[39m[33m,[39m
     [90m 55 |[39m           sex[33m:[39m [32m'mare'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/traitRoutes.test.mjs:52:19)

FAIL tests/integration/dashboardRoutes.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return complete dashboard data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31701,
        ~~~~~~~
        user: {
          connect: {
            id: "92bddc8d-dfc9-4cbb-a483-67bb5860f44d"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 400 for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31702,
        ~~~~~~~
        user: {
          connect: {
            id: "ae759d03-194f-4cf3-9795-5e06da1b167c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return 401 for missing authentication

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31703,
        ~~~~~~~
        user: {
          connect: {
            id: "e939172a-4664-4587-960c-212350c6c206"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should return validation error for invalid user ID format

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31704,
        ~~~~~~~
        user: {
          connect: {
            id: "f4006ee6-bd63-4ebc-960c-660c725947e8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with no horses gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31705,
        ~~~~~~~
        user: {
          connect: {
            id: "7af4c293-1163-4367-85c4-aa6dc179c978"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

  ‚óè ÔøΩÔøΩ INTEGRATION: Dashboard API - Real Database Integration ‚Ä∫ GET /api/user/dashboard/:userId ‚Ä∫ should handle user with horses but no activity gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestDashboard Horse 1",
        age: 5,
        sex: "Mare",
        breedId: 31706,
        ~~~~~~~
        user: {
          connect: {
            id: "97b3711c-e02a-43ff-a3ce-f1feb22470d6"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Good",
        totalEarnings: 1500,
        disciplineScores: {
          Dressage: 15
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m  98 |[39m
     [90m  99 |[39m     [90m// Create test horses with real data[39m
    [31m[1m>[22m[39m[90m 100 |[39m     testHorses [33m=[39m [36mawait[39m [33mPromise[39m[33m.[39mall([
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 101 |[39m       prisma[33m.[39mhorse[33m.[39mcreate({
     [90m 102 |[39m         data[33m:[39m {
     [90m 103 |[39m           name[33m:[39m [32m'TestDashboard Horse 1'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
          at async Promise.all (index 0)
      at Object.<anonymous> (tests/integration/dashboardRoutes.test.mjs:100:18)

FAIL tests/integration/groomSalarySystem.test.mjs
  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct weekly salary for expert groom with specialty

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73902,
        foalId: 147678,
        user: {
        ~~~~
          connect: {
            id: "014b0349-e1cc-4b9e-bf39-27e65d4905df"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate correct salary for novice groom

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73903,
        foalId: 147679,
        user: {
        ~~~~
          connect: {
            id: "58830335-d1b7-452c-887a-d53686255a5d"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Calculation ‚Ä∫ should calculate user total salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73904,
        foalId: 147680,
        user: {
        ~~~~
          connect: {
            id: "212dbf13-768f-4912-aa90-b4a6d8eac96e"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get user salary cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73905,
        foalId: 147681,
        user: {
        ~~~~
          connect: {
            id: "e2a52909-c175-48ef-9170-34e6f8de20a5"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73906,
        foalId: 147682,
        user: {
        ~~~~
          connect: {
            id: "f72d9f21-d226-4ab6-b17c-1fb26966f62a"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get groom salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73907,
        foalId: 147683,
        user: {
        ~~~~
          connect: {
            id: "ef6d3008-f123-4df2-8ed5-dc85499cb90a"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get salary payment history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73908,
        foalId: 147684,
        user: {
        ~~~~
          connect: {
            id: "a7ead3e6-5f5f-4419-aa19-2cbbfb8fcaf1"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should get cron job status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73909,
        foalId: 147685,
        user: {
        ~~~~
          connect: {
            id: "acd01a3f-4bed-48d7-a1aa-33caeb669631"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ API Endpoints ‚Ä∫ should validate groom ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73910,
        foalId: 147686,
        user: {
        ~~~~
          connect: {
            id: "2b3868ae-cca3-4813-a6d9-267ad18b5319"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should process weekly salaries successfully

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73911,
        foalId: 147687,
        user: {
        ~~~~
          connect: {
            id: "30f8b2be-9a5b-4c54-9758-c68345871fac"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should handle insufficient funds

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73912,
        foalId: 147688,
        user: {
        ~~~~
          connect: {
            id: "195a127d-d496-4241-b1d5-6029193eec7c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Salary Processing ‚Ä∫ should trigger salary processing via API

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73913,
        foalId: 147689,
        user: {
        ~~~~
          connect: {
            id: "89295dd9-525c-4d05-9b98-3fe30f8fcbfe"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/cost

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73914,
        foalId: 147690,
        user: {
        ~~~~
          connect: {
            id: "5bd5f09a-3246-4275-97f2-b18a63343f73"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73915,
        foalId: 147691,
        user: {
        ~~~~
          connect: {
            id: "9d0c4b9e-b77e-41a6-8469-9df5093f06dd"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73916,
        foalId: 147692,
        user: {
        ~~~~
          connect: {
            id: "26065a16-9822-4de8-b648-24482edae8b2"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/groom/:groomId/salary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73917,
        foalId: 147693,
        user: {
        ~~~~
          connect: {
            id: "5e4b2945-c714-4f8b-8d02-a26774f3ff2c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for GET /api/groom-salaries/status

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73918,
        foalId: 147694,
        user: {
        ~~~~
          connect: {
            id: "7458aa93-a61d-49c3-8d9f-7770448dba5c"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

  ‚óè Groom Salary System ‚Ä∫ Authentication ‚Ä∫ should require authentication for POST /api/groom-salaries/process

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73919,
        foalId: 147695,
        user: {
        ~~~~
          connect: {
            id: "409200d0-67b2-450c-b500-b8d894998906"
          }
        },
        isActive: true,
        bondScore: 75,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 65 |[39m     })[33m;[39m
     [90m 66 |[39m
    [31m[1m>[22m[39m[90m 67 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 68 |[39m       data[33m:[39m {
     [90m 69 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 70 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomSalarySystem.test.mjs:67:5)

FAIL tests/training.test.mjs
  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ BLOCKS training for horses under 3 years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 253 |[39m       })[33m;[39m
     [90m 254 |[39m
    [31m[1m>[22m[39m[90m 255 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 256 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 257 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'age'[39m)[33m;[39m
     [90m 258 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:255:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Age Requirements (3+ years old) ‚Ä∫ ALLOWS training for horses 3+ years old

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 276 |[39m       })[33m;[39m
     [90m 277 |[39m
    [31m[1m>[22m[39m[90m 278 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 279 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 280 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'trained in Dressage'[39m)[33m;[39m
     [90m 281 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:278:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ INCREASES discipline scores by +5 for first-time training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Score Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.255Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 303 |[39m       fourYearsAgoForScore[33m.[39msetFullYear(fourYearsAgoForScore[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 304 |[39m
    [31m[1m>[22m[39m[90m 305 |[39m       [36mconst[39m scoreTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 306 |[39m         data[33m:[39m {
     [90m 307 |[39m           name[33m:[39m [32m'Score Test Horse'[39m[33m,[39m
     [90m 308 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:305:30)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Discipline Score Progression (+5 base) ‚Ä∫ ACCUMULATES discipline scores across multiple training sessions (different horses)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Accumulation Test Horse 1",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:29:07.264Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 364 |[39m       fiveYearsAgoForAccumulation[33m.[39msetFullYear(fiveYearsAgoForAccumulation[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 365 |[39m
    [31m[1m>[22m[39m[90m 366 |[39m       [36mconst[39m horse1 [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 367 |[39m         data[33m:[39m {
     [90m 368 |[39m           name[33m:[39m [32m'Accumulation Test Horse 1'[39m[33m,[39m
     [90m 369 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:366:22)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ BLOCKS training when horse has trained ANY discipline within 7 days

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 404

    [0m [90m 442 |[39m       })[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 445 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 446 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Training cooldown active'[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (tests/training.test.mjs:444:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Global Cooldown (One Discipline Per Week) ‚Ä∫ ALLOWS training after 7-day cooldown expires

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Old Trained Horse",
        age: 6,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2020-01-28T19:29:07.295Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Racing: 15
        },
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 467 |[39m       sixYearsAgoForOldTrained[33m.[39msetFullYear(sixYearsAgoForOldTrained[33m.[39mgetFullYear() [33m-[39m [35m6[39m)[33m;[39m
     [90m 468 |[39m
    [31m[1m>[22m[39m[90m 469 |[39m       [36mconst[39m oldTrainedHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 470 |[39m         data[33m:[39m {
     [90m 471 |[39m           name[33m:[39m [32m'Old Trained Horse'[39m[33m,[39m
     [90m 472 |[39m           age[33m:[39m [35m6[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:469:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: XP Award for Training ‚Ä∫ AWARDS XP to horse owner (Player) when training succeeds

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "XP Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.302Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 535 |[39m       fourYearsAgoForXp[33m.[39msetFullYear(fourYearsAgoForXp[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 536 |[39m
    [31m[1m>[22m[39m[90m 537 |[39m       [36mconst[39m xpTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 538 |[39m         data[33m:[39m {
     [90m 539 |[39m           name[33m:[39m [32m'XP Test Horse'[39m[33m,[39m
     [90m 540 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:537:27)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Training Log Creation ‚Ä∫ CREATES training log entry for successful training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Log Test Horse",
        age: 5,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Stallion",
        dateOfBirth: new Date("2021-01-28T19:29:07.307Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 597 |[39m       fiveYearsAgoForLog[33m.[39msetFullYear(fiveYearsAgoForLog[33m.[39mgetFullYear() [33m-[39m [35m5[39m)[33m;[39m
     [90m 598 |[39m
    [31m[1m>[22m[39m[90m 599 |[39m       [36mconst[39m logTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 600 |[39m         data[33m:[39m {
     [90m 601 |[39m           name[33m:[39m [32m'Log Test Horse'[39m[33m,[39m
     [90m 602 |[39m           age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:599:28)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System - Complete Business Logic Validation ‚Ä∫ BUSINESS RULE: Next Training Date Calculation ‚Ä∫ PROVIDES accurate next training date (7 days from training)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "Date Test Horse",
        age: 4,
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "6d9ac854-fff7-4e13-8925-35bcea4ed2e6"
          }
        },
        sex: "Mare",
        dateOfBirth: new Date("2022-01-28T19:29:07.364Z"),
        healthStatus: "Excellent",
        disciplineScores: {},
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 689 |[39m       fourYearsAgoForDate[33m.[39msetFullYear(fourYearsAgoForDate[33m.[39mgetFullYear() [33m-[39m [35m4[39m)[33m;[39m
     [90m 690 |[39m
    [31m[1m>[22m[39m[90m 691 |[39m       [36mconst[39m dateTestHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 692 |[39m         data[33m:[39m {
     [90m 693 |[39m           name[33m:[39m [32m'Date Test Horse'[39m[33m,[39m
     [90m 694 |[39m           age[33m:[39m [35m4[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/training.test.mjs:691:29)

FAIL tests/groomBonusTraits.test.mjs
  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should assign bonus traits to a groom

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548582",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.582Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "85f425f1-875f-49a1-a2d6-d5c9fbbdc51a"
          }
        },
        breedId: 31707,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should validate bonus trait constraints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548614",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.614Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "9f0c9c24-2e11-4531-8009-a7b1dd62e00f"
          }
        },
        breedId: 31708,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Groom Bonus Trait Management ‚Ä∫ should get groom bonus traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548627",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.627Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "708eccd5-175e-4fa7-a8af-2620514c03e3"
          }
        },
        breedId: 31709,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should apply bonus probability when conditions are met

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548641",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.641Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "551a7a43-9b1a-4612-8d18-b333ee2f30c1"
          }
        },
        breedId: 31710,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when bond is too low

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548656",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.657Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "cf04a13b-861d-47bb-8ffa-2fed39628c8f"
          }
        },
        breedId: 31711,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548671",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.671Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "bf390843-62ba-458b-94f1-c89dc9af2bc4"
          }
        },
        breedId: 31712,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should get groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548685",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.685Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "373e4ad7-d730-4ef8-aa1a-4b8a8ed2b81f"
          }
        },
        breedId: 31713,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should update groom bonus traits via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548696",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.696Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0a8f2593-e076-4520-b272-7f3011780507"
          }
        },
        breedId: 31714,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should reject invalid bonus trait updates

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548707",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.707Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4bc0decf-abbf-43e7-9bdc-33779cf6f9fc"
          }
        },
        breedId: 31715,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

  ‚óè Groom Bonus Traits System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for bonus trait endpoints

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628548720",
        sex: "colt",
        dateOfBirth: new Date("2025-12-29T19:29:08.720Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "1c1f8e3f-6d2f-43e0-ae18-e1c89d428e33"
          }
        },
        breedId: 31716,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 72 |[39m
     [90m 73 |[39m     [90m// Create test horse (foal)[39m
    [31m[1m>[22m[39m[90m 74 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 75 |[39m       data[33m:[39m {
     [90m 76 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 77 |[39m         sex[33m:[39m [32m'colt'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:74:17)

FAIL tests/integration/epigeneticTraitSystem.test.mjs
  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/definitions should return flag and personality definitions

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/evaluate-milestone/:horseId should evaluate enhanced milestone

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ POST /api/epigenetic-traits/log-trait should log trait assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/history/:horseId should return trait history

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/summary/:horseId should return development summary

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ GET /api/epigenetic-traits/breeding-insights/:horseId should return breeding insights

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle authentication errors properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should handle horse ownership validation

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ API Endpoints ‚Ä∫ Should validate input parameters properly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Epigenetic Flag System ‚Ä∫ Should apply epigenetic flags based on care patterns

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

  ‚óè Epigenetic Trait System Integration Tests ‚Ä∫ Enhanced Milestone Evaluation ‚Ä∫ Should factor in groom personality bonuses

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\integration\epigeneticTraitSystem.test.mjs:110:34

      107 });
      108 
      109 // Assign groom to horse
    ‚Üí 110 await prisma.groomAssignment.create({
            data: {
              foalId: 147699,
              groomId: 73930,
              user: {
              ~~~~
                connect: {
                  id: "0b144d27-0622-4e77-9f8c-83046785db2a"
                }
              },
              isActive: true,
              priority: 1,
          ?   id?: Int,
          ?   startDate?: DateTime,
          ?   endDate?: DateTime | Null,
          ?   isDefault?: Boolean,
          ?   bondScore?: Int,
          ?   notes?: String | Null,
          ?   userId?: String | Null,
          ?   createdAt?: DateTime,
          ?   updatedAt?: DateTime,
          ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
            }
          })

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 108 |[39m
     [90m 109 |[39m     [90m// Assign groom to horse[39m
    [31m[1m>[22m[39m[90m 110 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m     [31m[1m^[22m[39m
     [90m 111 |[39m       data[33m:[39m {
     [90m 112 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 113 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/epigeneticTraitSystem.test.mjs:110:5)

FAIL tests/foalEnrichmentIntegration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should complete enrichment activity successfully

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 172 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 173 |[39m         })
    [31m[1m>[22m[39m[90m 174 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 175 |[39m
     [90m 176 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 177 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Trailer Exposure'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:174:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should update horse bond_score and stress_level in database

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 234 |[39m           activity[33m:[39m [32m'Halter Introduction'[39m[33m,[39m
     [90m 235 |[39m         })
    [31m[1m>[22m[39m[90m 236 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 237 |[39m
     [90m 238 |[39m       [90m// Verify horse was updated in database[39m
     [90m 239 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:236:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should validate request parameters

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 259 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 260 |[39m         })
    [31m[1m>[22m[39m[90m 261 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 262 |[39m
     [90m 263 |[39m       [90m// Missing activity[39m
     [90m 264 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:261:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 404 for non-existent foal

    expected 404 "Not Found", got 401 "Unauthorized"

    [0m [90m 314 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 315 |[39m         })
    [31m[1m>[22m[39m[90m 316 |[39m         [33m.[39mexpect([35m404[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 317 |[39m
     [90m 318 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 319 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:316:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should return 400 for inappropriate activity for day

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 329 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m [90m// This is a day 3 activity[39m
     [90m 330 |[39m         })
    [31m[1m>[22m[39m[90m 331 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 332 |[39m
     [90m 333 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not appropriate for day 0'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:331:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should accept different activity name formats

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 345 |[39m           activity[33m:[39m [32m'leading_practice'[39m[33m,[39m
     [90m 346 |[39m         })
    [31m[1m>[22m[39m[90m 347 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Test exact name[39m
     [90m 350 |[39m       [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:347:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle all day 3 activities

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 382 |[39m             activity[33m,[39m
     [90m 383 |[39m           })
    [31m[1m>[22m[39m[90m 384 |[39m           [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m            [31m[1m^[22m[39m
     [90m 385 |[39m
     [90m 386 |[39m         expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m         expect(response[33m.[39mbody[33m.[39mdata[33m.[39mactivity[33m.[39mname)[33m.[39mtoBe(activity)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:384:12)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should create training history records for each activity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 414 |[39m           activity[33m:[39m [32m'Feeding Assistance'[39m[33m,[39m
     [90m 415 |[39m         })
    [31m[1m>[22m[39m[90m 416 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 417 |[39m
     [90m 418 |[39m       [90m// Verify training record was created[39m
     [90m 419 |[39m       expect(mockPrisma[33m.[39mfoalTrainingHistory[33m.[39mcreate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:416:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè ÔøΩÔøΩ INTEGRATION: Foal Enrichment API Integration - Complete API Workflow Validation ‚Ä∫ POST /api/foals/:foalId/enrichment ‚Ä∫ should handle edge cases with bond and stress levels

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 461 |[39m           activity[33m:[39m [32m'Trailer Exposure'[39m[33m,[39m
     [90m 462 |[39m         })
    [31m[1m>[22m[39m[90m 463 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 464 |[39m
     [90m 465 |[39m       [90m// Values should be capped at bounds[39m
     [90m 466 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mupdatedLevels[33m.[39mbondScore)[33m.[39mtoBeLessThanOrEqual([35m100[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/foalEnrichmentIntegration.test.mjs:463:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

FAIL tests/foalTaskLoggingIntegration.test.mjs
  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should initialize task log with first enrichment task

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147701,
        groomId: 73932,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-1"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should increment existing task count in task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147702,
        groomId: 73933,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-2"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should add new task to existing task log

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147703,
        groomId: 73934,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-3"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Task Log JSON Updates ‚Ä∫ should handle multiple task types across different foals

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147704,
        groomId: 73935,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-4"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should update lastGroomed timestamp on each interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147705,
        groomId: 73936,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-5"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Streak Tracking Integration ‚Ä∫ should enforce daily interaction limits correctly

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147706,
        groomId: 73937,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-6"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject enrichment tasks for horses too old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147707,
        groomId: 73938,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-7"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

  ‚óè Foal Task Logging Integration ‚Ä∫ Age-Based Task Eligibility Enforcement ‚Ä∫ should reject grooming tasks for horses too young

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147708,
        groomId: 73939,
        user: {
        ~~~~
          connect: {
            id: "test-user-task-logging-8"
          }
        },
        isActive: true,
        priority: 1,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 150 |[39m
     [90m 151 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 152 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 153 |[39m       data[33m:[39m {
     [90m 154 |[39m         foalId[33m:[39m testFoal[33m.[39mid[33m,[39m
     [90m 155 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/foalTaskLoggingIntegration.test.mjs:152:22)

FAIL tests/legacyScoreTraitIntegration.test.mjs
  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate trait score based on count, diversity, and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554174",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.174Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "5f95701f-e459-470e-a164-676212aa2115"
          }
        },
        breedId: 31717,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should apply negative trait penalties

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554207",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.207Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b07ccaf6-555f-4efa-af40-74f36efd5466"
          }
        },
        breedId: 31718,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should only count traits gained before age 4

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554223",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.223Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "18a6b211-3946-488a-8406-eb3c0aab939c"
          }
        },
        breedId: 31719,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Trait Score Calculation ‚Ä∫ should calculate groom care consistency from milestone logs

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554236",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.236Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "c8f79311-4d16-43cd-9076-16bc2969887f"
          }
        },
        breedId: 31720,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should integrate trait score into overall legacy score

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554250",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.250Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "966e9588-bfd8-4083-b882-ebe7044b7a6b"
          }
        },
        breedId: 31721,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ Legacy Score Integration ‚Ä∫ should calculate legacy score without traits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554263",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.263Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d65ff986-a667-4eaa-9cfc-82154248113f"
          }
        },
        breedId: 31722,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should get horse legacy score via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554277",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.277Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d33bc46d-14b4-4035-8cf9-1bb8affc2a35"
          }
        },
        breedId: 31723,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for legacy score endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554290",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.290Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "e80c63bd-1186-429a-adab-4fb4c66797ba"
          }
        },
        breedId: 31724,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

  ‚óè Legacy Score Trait Integration System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628554301",
        sex: "stallion",
        dateOfBirth: new Date("2022-01-29T19:29:14.301Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "90e50df6-100c-4645-921f-f8fe77615b3b"
          }
        },
        breedId: 31725,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
        speed: 75,
        stamina: 80,
        agility: 70,
        balance: 85,
        precision: 90,
        intelligence: 88,
        boldness: 65,
        flexibility: 72,
        obedience: 95,
        focus: 82,
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   strength?: Int | Null,
    ?   endurance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 67 |[39m
     [90m 68 |[39m     [90m// Create test horse (4 years old to test legacy score calculation)[39m
    [31m[1m>[22m[39m[90m 69 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 70 |[39m       data[33m:[39m {
     [90m 71 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 72 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/legacyScoreTraitIntegration.test.mjs:69:17)

FAIL tests/breedingPrediction.test.mjs
  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate trait inheritance probabilities from parent history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555494",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.494Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4b11d3ee-e55e-4098-a945-9ed2e22478de"
          }
        },
        breedId: 31726,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate flag inheritance scores

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555525",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.525Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ca4c241c-bc6c-4037-8b43-145cb49949a0"
          }
        },
        breedId: 31727,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555539",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.539Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "438d02bb-bb36-421f-b50c-64d8442bad11"
          }
        },
        breedId: 31728,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Inheritance Probability Logic ‚Ä∫ should calculate temperament influence modifiers

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555553",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.553Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "42734f00-0229-4e42-8798-5b5073405119"
          }
        },
        breedId: 31729,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should predict trait categories with probability ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555568",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.568Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "2a782b6d-5bd2-475a-b088-564fb8b46dce"
          }
        },
        breedId: 31730,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ Child Prediction Algorithms ‚Ä∫ should handle epigenetic flag inheritance with stacking limits

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555581",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.581Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "6b50db4a-bb88-4c64-b3e3-89762d4e51f9"
          }
        },
        breedId: 31731,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should extend breeding-data endpoint with prediction data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555595",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.595Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ea48aaea-6b55-4531-87e2-01bd42a4200c"
          }
        },
        breedId: 31732,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should require authentication for breeding-data endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555607",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.607Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "71292a04-4c09-438e-bd04-2270279b8733"
          }
        },
        breedId: 31733,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

  ‚óè Breeding Prediction System ‚Ä∫ API Extension ‚Ä∫ should handle horses with minimal breeding data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestStallion_1769628555618",
        sex: "stallion",
        dateOfBirth: new Date("2021-01-29T19:29:15.618Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "25c8b31f-7171-4a7a-b3b1-1aca569042a8"
          }
        },
        breedId: 31734,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [
            "sensitive",
            "noble"
          ],
          negative: [],
          hidden: [
            "quick_learner"
          ]
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 70 |[39m
     [90m 71 |[39m     [90m// Create test stallion (5 years old)[39m
    [31m[1m>[22m[39m[90m 72 |[39m     testStallion [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                    [31m[1m^[22m[39m
     [90m 73 |[39m       data[33m:[39m {
     [90m 74 |[39m         name[33m:[39m [32m`TestStallion_${Date.now()}`[39m[33m,[39m
     [90m 75 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/breedingPrediction.test.mjs:72:20)

FAIL tests/traitTimeline.test.mjs
  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should aggregate trait timeline with milestone and groom data

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556877",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.877Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "f0b06114-3fc2-42d7-ad29-f7c987e1b578"
          }
        },
        breedId: 31735,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should include detailed trait context and groom involvement

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556909",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.909Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "bed3b187-4956-404f-80b3-bdd7241a2580"
          }
        },
        breedId: 31736,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should filter traits by age cutoff (before age 4)

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556922",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.922Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "ba23ae43-afc8-4215-b1dd-c9593ad50858"
          }
        },
        breedId: 31737,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should categorize traits by type and rarity

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556935",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.935Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "b8a90d94-d7c0-4c87-a0f8-fe0934c6c934"
          }
        },
        breedId: 31738,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Trait Timeline Data Aggregation ‚Ä∫ should handle horses with no trait history

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556949",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.949Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "4ce17756-338c-4925-b3ee-0af42f902fc4"
          }
        },
        breedId: 31739,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should organize events by age ranges

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556965",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.965Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "0d7cb8c7-c8bf-4f53-ad5a-a0542c36fbf6"
          }
        },
        breedId: 31740,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ Timeline Formatting and Organization ‚Ä∫ should include bond and stress trend analysis

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556979",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.979Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "d340abc7-4eb8-4a7e-99aa-d39cb1047a8b"
          }
        },
        breedId: 31741,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should get trait timeline card via API

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628556989",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:16.989Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "46689760-d169-4d77-962f-8434974844ba"
          }
        },
        breedId: 31742,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should require authentication for trait card endpoint

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557001",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.001Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "46a22be2-394e-404f-b634-555e1382c8ad"
          }
        },
        breedId: 31743,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557014",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.014Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "94205eee-75dc-4d47-ae2c-920acb202b94"
          }
        },
        breedId: 31744,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

  ‚óè Trait Timeline System ‚Ä∫ API Endpoints ‚Ä∫ should handle horses with empty trait timeline

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse_1769628557024",
        sex: "stallion",
        dateOfBirth: new Date("2023-01-29T19:29:17.024Z"),
        temperament: "spirited",
        user: {
          connect: {
            id: "22864105-b9bb-4806-9c72-dbb14d486433"
          }
        },
        breedId: 31745,
        ~~~~~~~
        sireId: null,
        damId: null,
        epigeneticModifiers: {
          positive: [],
          negative: [],
          hidden: []
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   totalEarnings?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   healthStatus?: String | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   tack?: NullableJsonNullValueInput | Json,
    ?   age?: Int | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   rider?: NullableJsonNullValueInput | Json,
    ?   disciplineScores?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 69 |[39m
     [90m 70 |[39m     [90m// Create test horse (3 years old)[39m
    [31m[1m>[22m[39m[90m 71 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 72 |[39m       data[33m:[39m {
     [90m 73 |[39m         name[33m:[39m [32m`TestHorse_${Date.now()}`[39m[33m,[39m
     [90m 74 |[39m         sex[33m:[39m [32m'stallion'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/traitTimeline.test.mjs:71:17)

FAIL tests/groomBondingIntegration.test.mjs
  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process brushing interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147709,
        groomId: 73969,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558193_biwt1"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process hand-walking interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147710,
        groomId: 73970,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558286_qm649"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ New Grooming Tasks for Horses 3+ Years Old ‚Ä∫ should successfully process stall_care interaction

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147711,
        groomId: 73971,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558309_luyae"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Age Restrictions ‚Ä∫ should reject new grooming tasks for horses under 3 years old

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147712,
        groomId: 73972,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558329_4ut9j"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should update horse bond score after grooming

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147713,
        groomId: 73973,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558348_ivjay"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Bond Score Updates ‚Ä∫ should grant burnout immunity after 7 consecutive days

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147714,
        groomId: 73974,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558365_mqzdx"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

  ‚óè Groom Bonding System Integration ‚Ä∫ Daily Interaction Limits ‚Ä∫ should enforce one grooming session per horse per day

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        foalId: 147715,
        groomId: 73975,
        isActive: true,
        user: {
        ~~~~
          connect: {
            id: "user-bonding-1769628558381_ooeli"
          }
        },
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   priority?: Int,
    ?   bondScore?: Int,
    ?   notes?: String | Null,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 132 |[39m
     [90m 133 |[39m     [90m// Create groom assignment[39m
    [31m[1m>[22m[39m[90m 134 |[39m     testAssignment [33m=[39m [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 135 |[39m       data[33m:[39m {
     [90m 136 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m
     [90m 137 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/groomBondingIntegration.test.mjs:134:22)

FAIL tests/integration/horseOverview.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return complete horse overview data successfully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "9f71a8fa-4b72-489c-be89-13d733d9ef46"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return 404 for non-existent horse

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "21922ce8-eb29-4a7c-ad00-bc80151b046c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should return validation error for invalid horse ID

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "ba85b029-e330-4422-9c0e-69f82eda1f7c"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle horse with no training history gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "ccd5ce9c-3c49-4bb8-b9a1-6fffd5fb8e0e"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should calculate next training date correctly when horse has recent training

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "632a4f6b-f881-464d-8a6d-ee51a97bb1fb"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

  ‚óè ÔøΩÔøΩ INTEGRATION: Horse Overview API - Real Database Integration ‚Ä∫ GET /api/horses/:id/overview ‚Ä∫ should handle missing optional fields gracefully

    PrismaClientValidationError: 
    Invalid `prisma.horse.create()` invocation:

    {
      data: {
        name: "TestHorse Nova",
        age: 5,
        sex: "Mare",
        breedId: 26468,
        ~~~~~~~
        user: {
          connect: {
            id: "9660d9d7-be55-4d08-9951-011797ca95a8"
          }
        },
        dateOfBirth: new Date("2020-01-01T00:00:00.000Z"),
        healthStatus: "Excellent",
        disciplineScores: {
          Dressage: 25,
          Show Jumping: 10
        },
        totalEarnings: 2200,
        tack: {
          saddleBonus: 5,
          bridleBonus: 3
        },
        rider: {
          name: "Jenna Black",
          bonusPercent: 0.08,
          penaltyPercent: 0
        },
    ?   ownerId?: String | Null,
    ?   genotype?: NullableJsonNullValueInput | Json,
    ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
    ?   finalDisplayColor?: String | Null,
    ?   shade?: String | Null,
    ?   imageUrl?: String | Null,
    ?   trait?: String | Null,
    ?   temperament?: String | Null,
    ?   personality?: String | Null,
    ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
    ?   precision?: Int | Null,
    ?   strength?: Int | Null,
    ?   speed?: Int | Null,
    ?   agility?: Int | Null,
    ?   endurance?: Int | Null,
    ?   intelligence?: Int | Null,
    ?   stamina?: Int | Null,
    ?   balance?: Int | Null,
    ?   coordination?: Int | Null,
    ?   boldness?: Int | Null,
    ?   flexibility?: Int | Null,
    ?   obedience?: Int | Null,
    ?   focus?: Int | Null,
    ?   studStatus?: String | Null,
    ?   studFee?: Int | Null,
    ?   lastBredDate?: DateTime | Null,
    ?   forSale?: Boolean | Null,
    ?   salePrice?: Int | Null,
    ?   lastVettedDate?: DateTime | Null,
    ?   bondScore?: Int | Null,
    ?   stressLevel?: Int | Null,
    ?   daysGroomedInARow?: Int | Null,
    ?   burnoutStatus?: String | Null,
    ?   taskLog?: NullableJsonNullValueInput | Json,
    ?   consecutiveDaysFoalCare?: Int | Null,
    ?   lastGroomed?: DateTime | Null,
    ?   trainingCooldown?: DateTime | Null,
    ?   earnings?: Decimal | Null,
    ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
    ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
    ?   conformationScores?: NullableJsonNullValueInput | Json,
    ?   horseXp?: Int | Null,
    ?   availableStatPoints?: Int | Null,
    ?   createdAt?: DateTime | Null,
    ?   updatedAt?: DateTime | Null,
    ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
    ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
    ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
    ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
    ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
    ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
    ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
    ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
    ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
    ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
    ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
    ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
    ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
    ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
    ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
    ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
    ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
    ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
    ?   stable?: StableCreateNestedOneWithoutHorsesInput,
    ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
      }
    }

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 90 |[39m
     [90m 91 |[39m     [90m// Create test horse with real data[39m
    [31m[1m>[22m[39m[90m 92 |[39m     testHorse [33m=[39m [36mawait[39m prisma[33m.[39mhorse[33m.[39mcreate({
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 93 |[39m       data[33m:[39m {
     [90m 94 |[39m         name[33m:[39m [32m'TestHorse Nova'[39m[33m,[39m
     [90m 95 |[39m         age[33m:[39m [35m5[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/horseOverview.test.mjs:92:17)

FAIL tests/integration/horseRoutes.test.mjs
  ‚óè Horse Routes Integration Tests ‚Ä∫ GET /api/horses/trainable/:userId ‚Ä∫ should return trainable horses for valid user ID

    expect(received).toBeGreaterThanOrEqual(expected)

    Matcher error: received value must be a number or bigint

    Received has value: null

    [0m [90m 122 |[39m         expect(horse)[33m.[39mtoHaveProperty([32m'trainableDisciplines'[39m)[33m;[39m
     [90m 123 |[39m         expect([33mArray[39m[33m.[39misArray(horse[33m.[39mtrainableDisciplines))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 124 |[39m         expect(horse[33m.[39mage)[33m.[39mtoBeGreaterThanOrEqual([35m3[39m)[33m;[39m [90m// Only horses 3+ should be returned[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 125 |[39m       })[33m;[39m
     [90m 126 |[39m     })[33m;[39m
     [90m 127 |[39m[0m

      at tests/integration/horseRoutes.test.mjs:124:27
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (tests/integration/horseRoutes.test.mjs:118:26)

FAIL tests/integration/groomHandlerSystem.test.mjs
  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should get the assigned handler for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should return no handler for a horse without assignment

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 1. Handler Assignment ‚Ä∫ should validate horse ownership

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should check handler eligibility for a conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 2. Handler Eligibility ‚Ä∫ should validate conformation class

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 3. Handler Configuration ‚Ä∫ should get handler configuration

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 4. Handler Recommendations ‚Ä∫ should get handler recommendations for a horse

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

  ‚óè Groom Handler System Integration Tests ‚Ä∫ 5. Authentication and Authorization ‚Ä∫ should require authentication for all endpoints

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73976,
        foalId: 147716,
        user: {
        ~~~~
          connect: {
            id: "33ed178b-81eb-439d-89fb-208175fe5556"
          }
        },
        priority: 1,
        isActive: true,
        notes: "Test assignment for handler system",
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 58 |[39m
     [90m 59 |[39m     [90m// Create test assignment[39m
    [31m[1m>[22m[39m[90m 60 |[39m     [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m    |[39m     [31m[1m^[22m[39m
     [90m 61 |[39m       data[33m:[39m {
     [90m 62 |[39m         groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 63 |[39m         foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/integration/groomHandlerSystem.test.mjs:60:5)

FAIL tests/services/groomRetirementService.test.mjs
  ‚óè Groom Retirement Service ‚Ä∫ Retirement Processing ‚Ä∫ should remove active assignments on retirement

    PrismaClientValidationError: 
    Invalid `prisma.groomAssignment.create()` invocation:

    {
      data: {
        groomId: 73988,
        foalId: 147717,
        user: {
        ~~~~
          connect: {
            id: "1406a4ad-4e8e-451f-a029-7f1f3d6a24e5"
          }
        },
        priority: 1,
        notes: "Test assignment",
        isActive: true,
    ?   id?: Int,
    ?   startDate?: DateTime,
    ?   endDate?: DateTime | Null,
    ?   isDefault?: Boolean,
    ?   bondScore?: Int,
    ?   userId?: String | Null,
    ?   createdAt?: DateTime,
    ?   updatedAt?: DateTime,
    ?   groomInteractions?: GroomInteractionUncheckedCreateNestedManyWithoutAssignmentInput
      }
    }

    Unknown argument `user`. Did you mean `userId`? Available options are marked with ?.

    [0m [90m 257 |[39m     test([32m'should remove active assignments on retirement'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 258 |[39m       [90m// Create an active assignment[39m
    [31m[1m>[22m[39m[90m 259 |[39m       [36mawait[39m prisma[33m.[39mgroomAssignment[33m.[39mcreate({
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 260 |[39m         data[33m:[39m {
     [90m 261 |[39m           groomId[33m:[39m testGroom[33m.[39mid[33m,[39m
     [90m 262 |[39m           foalId[33m:[39m testHorse[33m.[39mid[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at Object.<anonymous> (tests/services/groomRetirementService.test.mjs:259:7)

FAIL tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Groom Workflow Integration Tests ‚Ä∫ 1. Complete Groom Hiring Workflow ‚Ä∫ should hire groom with proper skill calculations and validation

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"data": ObjectContaining {"experience": 8, "name": "Sarah Johnson", "personality": "gentle", "sessionRate": Any<Object>, "skillLevel": "expert", "speciality": "foal_care", "user": {"connect": {"id": "user-groom-int-1769628563580_lneal"}}}, "message": "Successfully hired Sarah Johnson", "success": true}
    Received: {"data": {"availability": {}, "bio": "Experienced foal care specialist", "bonusTraitMap": {}, "careerWeeks": 0, "createdAt": 2026-01-28T19:29:23.657Z, "experience": 8, "groomPersonality": "balanced", "hiredDate": 2026-01-28T19:29:23.657Z, "hiringCost": 750, "id": 74011, "imageUrl": null, "isActive": true, "level": 1, "name": "Sarah Johnson", "personality": "gentle", "rareTraitPerks": {}, "remainingFunds": 4250, "retired": false, "retirementReason": null, "retirementTimestamp": null, "sessionRate": "25", "skillLevel": "expert", "speciality": "foal_care", "updatedAt": 2026-01-28T19:29:23.657Z, "userId": "user-groom-int-1769628563580_lneal"}, "message": "Successfully hired Sarah Johnson", "success": true}

    Number of calls: 1

    [0m [90m 242 |[39m
     [90m 243 |[39m       expect(res[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(res[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 245 |[39m         expect[33m.[39mobjectContaining({
     [90m 246 |[39m           success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 247 |[39m           message[33m:[39m [32m'Successfully hired Sarah Johnson'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/groomWorkflowIntegration.test.mjs:244:24)

FAIL tests/groomProgression.test.mjs
  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for milestone completion

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.607Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31755,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for trait shaping

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.641Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31756,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should award XP for show wins

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.661Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31757,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should level up when reaching XP threshold

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.683Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31758,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should calculate correct level from experience

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.701Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31759,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ XP and Leveling System ‚Ä∫ Should cap level at 10

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.720Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31760,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should create synergy record for new groom-horse pair

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.742Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31761,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should award correct synergy for different actions

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.759Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31762,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should penalize synergy for reassignment

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.776Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31763,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Groom-Horse Synergy System ‚Ä∫ Should track sessions together

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.798Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31764,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment start

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.817Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31765,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Assignment History Logging ‚Ä∫ Should log assignment completion with performance data

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.834Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31766,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should return comprehensive groom profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.854Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31767,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

  ‚óè Groom Progression System ‚Ä∫ Enhanced Groom Profile API ‚Ä∫ Should include synergy effects in profile

    PrismaClientValidationError: 
    Invalid `tx.horse.create()` invocation in
    C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomProgression.test.mjs:115:34

      112   },
      113 });
      114 
    ‚Üí 115 testHorse = await tx.horse.create({
            data: {
              name: "Test Foal",
              sex: "Filly",
              dateOfBirth: new Date("2025-01-28T19:29:24.871Z"),
              user: {
                connect: {
                  id: "test-user-progression"
                }
              },
              breedId: 31768,
              ~~~~~~~
          ?   ownerId?: String | Null,
          ?   genotype?: NullableJsonNullValueInput | Json,
          ?   phenotypicMarkings?: NullableJsonNullValueInput | Json,
          ?   finalDisplayColor?: String | Null,
          ?   shade?: String | Null,
          ?   imageUrl?: String | Null,
          ?   trait?: String | Null,
          ?   temperament?: String | Null,
          ?   personality?: String | Null,
          ?   epigeneticFlags?: HorseCreateepigeneticFlagsInput | String[],
          ?   precision?: Int | Null,
          ?   strength?: Int | Null,
          ?   speed?: Int | Null,
          ?   agility?: Int | Null,
          ?   endurance?: Int | Null,
          ?   intelligence?: Int | Null,
          ?   stamina?: Int | Null,
          ?   balance?: Int | Null,
          ?   coordination?: Int | Null,
          ?   boldness?: Int | Null,
          ?   flexibility?: Int | Null,
          ?   obedience?: Int | Null,
          ?   focus?: Int | Null,
          ?   totalEarnings?: Int | Null,
          ?   studStatus?: String | Null,
          ?   studFee?: Int | Null,
          ?   lastBredDate?: DateTime | Null,
          ?   forSale?: Boolean | Null,
          ?   salePrice?: Int | Null,
          ?   healthStatus?: String | Null,
          ?   lastVettedDate?: DateTime | Null,
          ?   bondScore?: Int | Null,
          ?   stressLevel?: Int | Null,
          ?   daysGroomedInARow?: Int | Null,
          ?   burnoutStatus?: String | Null,
          ?   taskLog?: NullableJsonNullValueInput | Json,
          ?   consecutiveDaysFoalCare?: Int | Null,
          ?   lastGroomed?: DateTime | Null,
          ?   tack?: NullableJsonNullValueInput | Json,
          ?   age?: Int | Null,
          ?   trainingCooldown?: DateTime | Null,
          ?   earnings?: Decimal | Null,
          ?   rider?: NullableJsonNullValueInput | Json,
          ?   disciplineScores?: NullableJsonNullValueInput | Json,
          ?   epigeneticModifiers?: NullableJsonNullValueInput | Json,
          ?   ultraRareTraits?: NullableJsonNullValueInput | Json,
          ?   conformationScores?: NullableJsonNullValueInput | Json,
          ?   horseXp?: Int | Null,
          ?   availableStatPoints?: Int | Null,
          ?   createdAt?: DateTime | Null,
          ?   updatedAt?: DateTime | Null,
          ?   competitionResults?: CompetitionResultCreateNestedManyWithoutHorseInput,
          ?   foalActivities?: FoalActivityCreateNestedManyWithoutFoalInput,
          ?   foalDevelopment?: FoalDevelopmentCreateNestedOneWithoutFoalInput,
          ?   foalTrainingHistory?: FoalTrainingHistoryCreateNestedManyWithoutHorseInput,
          ?   groomAssignments?: GroomAssignmentCreateNestedManyWithoutFoalInput,
          ?   groomInteractions?: GroomInteractionCreateNestedManyWithoutFoalInput,
          ?   groomPerformanceRecords?: GroomPerformanceRecordCreateNestedManyWithoutHorseInput,
          ?   horseXpEvents?: HorseXpEventCreateNestedManyWithoutHorseInput,
          ?   traitHistoryLogs?: TraitHistoryLogCreateNestedManyWithoutHorseInput,
          ?   milestoneTraitLogs?: MilestoneTraitLogCreateNestedManyWithoutHorseInput,
          ?   ultraRareTraitEvents?: UltraRareTraitEventCreateNestedManyWithoutHorseInput,
          ?   groomHorseSynergies?: GroomHorseSynergyCreateNestedManyWithoutHorseInput,
          ?   groomAssignmentLogs?: GroomAssignmentLogCreateNestedManyWithoutHorseInput,
          ?   breed?: BreedCreateNestedOneWithoutHorsesInput,
          ?   dam?: HorseCreateNestedOneWithoutDamOffspringInput,
          ?   damOffspring?: HorseCreateNestedManyWithoutDamInput,
          ?   sire?: HorseCreateNestedOneWithoutSireOffspringInput,
          ?   sireOffspring?: HorseCreateNestedManyWithoutSireInput,
          ?   stable?: StableCreateNestedOneWithoutHorsesInput,
          ?   trainingLogs?: TrainingLogCreateNestedManyWithoutHorseInput
            }
          })

    Unknown argument `breedId`. Did you mean `breed`? Available options are marked with ?.

    [0m [90m 113 |[39m       })[33m;[39m
     [90m 114 |[39m
    [31m[1m>[22m[39m[90m 115 |[39m       testHorse [33m=[39m [36mawait[39m tx[33m.[39mhorse[33m.[39mcreate({
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 116 |[39m         data[33m:[39m {
     [90m 117 |[39m           name[33m:[39m [32m'Test Foal'[39m[33m,[39m
     [90m 118 |[39m           sex[33m:[39m [32m'Filly'[39m[33m,[39m[0m

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7102)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at tests/groomProgression.test.mjs:115:19
      at Proxy._transactionWithCallback (../packages/database/node_modules/@prisma/client/runtime/library.js:130:8139)
      at Object.<anonymous> (tests/groomProgression.test.mjs:81:5)

FAIL tests/services/dynamicCompatibilityScoring.test.mjs
  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should recommend optimal grooms for specific horse and context

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 380 |[39m       expect(recommendations)[33m.[39mtoBeDefined()[33m;[39m
     [90m 381 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mrankedGrooms))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 382 |[39m       expect(recommendations[33m.[39mrankedGrooms[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 383 |[39m       expect(recommendations[33m.[39mtopRecommendation)[33m.[39mtoBeDefined()[33m;[39m
     [90m 384 |[39m       expect(recommendations[33m.[39malternativeOptions)[33m.[39mtoBeDefined()[33m;[39m
     [90m 385 |[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:382:51)

  ‚óè Dynamic Compatibility Scoring ‚Ä∫ getOptimalGroomRecommendations ‚Ä∫ should provide alternative recommendations

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 405 |[39m       [36mconst[39m recommendations [33m=[39m [36mawait[39m getOptimalGroomRecommendations(horse[33m.[39mid[33m,[39m context)[33m;[39m
     [90m 406 |[39m
    [31m[1m>[22m[39m[90m 407 |[39m       expect(recommendations[33m.[39malternativeOptions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                                         [31m[1m^[22m[39m
     [90m 408 |[39m       expect(recommendations[33m.[39mcontextualNotes)[33m.[39mtoBeDefined()[33m;[39m
     [90m 409 |[39m       expect([33mArray[39m[33m.[39misArray(recommendations[33m.[39mcontextualNotes))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 410 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/services/dynamicCompatibilityScoring.test.mjs:407:57)


Test Suites: 28 failed, 1 skipped, 192 passed, 220 of 221 total
Tests:       225 failed, 30 skipped, 3285 passed, 3540 total
Snapshots:   0 total
Time:        281.6 s
Ran all test suites.
üßπ Running global teardown...
[Teardown] Disconnecting Prisma instances...
[Teardown] ‚úÖ Prisma instances disconnected
‚úÖ Global teardown completed successfully
