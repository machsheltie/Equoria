
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js

(node:27928) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/integration/advancedBreedingGeneticsAPI.test.mjs (5.793 s)
  ‚óè Console

    console.log
      [2025-12-29 06:02:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:02:50] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:02:50] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:50] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:50] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:50] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:50] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: genetics@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8f6a148da289f1d686f54c5120edb269e535133e9a359809af35ffbdc27c457b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:02:51] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 95339)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 95339)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 95340)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 95340)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 95341)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 95341)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 95342)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 95342)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [advancedBreedingGeneticsRoutes.genetic-probability] User f3d4eed6-f033-48d0-8133-a459caf510bb calculating for stallion 95339 and mare 95340

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:51] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95339 and mare 95340, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/breeding/genetic-probability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95339

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95339

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95339

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95339

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95339 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95340

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95340

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95340

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95340

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95340 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95341

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95341

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95341

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95341

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95341 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95342

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95342

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95342

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95342

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95342 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 95343)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 95343)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 95344)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 95344)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 95345)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 95345)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 95346)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 95346)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedBreedingGeneticsRoutes.genetic-probability] User f3d4eed6-f033-48d0-8133-a459caf510bb calculating for stallion 99999 and mare 95344

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/breeding/genetic-probability - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95343

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95343

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95343

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95343

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95343 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95344

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95344

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95344

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95344

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95344 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95345

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95345

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95345

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95345

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95345 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95346

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95346

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95346

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95346

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95346 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 95347)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 95347)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 95348)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 95348)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 95349)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 95349)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 95350)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 95350)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [auth] Access token is required for POST /breeding/genetic-probability from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/breeding/genetic-probability - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95347

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95347

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95347

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95347

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95347 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95348

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95348

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95348

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95348

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95348 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95349

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95349

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95349

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95349

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95349 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95350

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95350

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95350

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95350

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95350 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Stallion (ID: 95351)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Stallion (ID: 95351)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Genetic Test Mare (ID: 95352)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Genetic Test Mare (ID: 95352)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 1 (ID: 95353)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 1 (ID: 95353)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseModel.createHorse] Successfully created horse: Population Horse 2 (ID: 95354)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] Created new horse: Population Horse 2 (ID: 95354)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [GET] /api/breeding/lineage-analysis/95351/95352?generations=3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /breeding/lineage-analysis/95351/95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /breeding/lineage-analysis/95351/95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User f3d4eed6-f033-48d0-8133-a459caf510bb analyzing lineage for stallion 95351 and mare 95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95351 and mare 95352, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 95351 and mare 95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95351 and mare 95352, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:02:52] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:02:52] info: [GET] /api/breeding/lineage-analysis/95351/95352?generations=3 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95351

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95351

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95351

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95351

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95351 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [ownership] Validated ownership: user f3d4eed6-f033-48d0-8133-a459caf510bb owns horse 95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [horseRoutes] User f3d4eed6-f033-48d0-8133-a459caf510bb deleted horse ID: 95352

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95352 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95353

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95353 - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95354

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for DELETE /horses/95354

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [DELETE] /api/horses/95354 - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:52] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [GET] /api/breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [advancedBreedingGeneticsRoutes.lineage-analysis] User f3d4eed6-f033-48d0-8133-a459caf510bb analyzing lineage for stallion 99999 and mare 99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [GET] /api/genetics/diversity-report/f3d4eed6-f033-48d0-8133-a459caf510bb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /genetics/diversity-report/f3d4eed6-f033-48d0-8133-a459caf510bb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for GET /genetics/diversity-report/f3d4eed6-f033-48d0-8133-a459caf510bb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [advancedBreedingGeneticsRoutes.diversity-report] Generating report for user f3d4eed6-f033-48d0-8133-a459caf510bb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:02:53] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:02:53] info: [GET] /api/genetics/diversity-report/f3d4eed6-f033-48d0-8133-a459caf510bb - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/breeding/genetic-probability - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /genetics/inbreeding-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/genetics/inbreeding-analysis - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /genetics/population-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/genetics/population-analysis - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [auth] Authenticated user f3d4eed6-f033-48d0-8133-a459caf510bb for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/horses - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:53] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: other@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=778b22e47c46ce47669a531ed364312c46ef13ecc382fef68435b44da8ccfc96

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:02:54] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:54] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 241 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 242 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 243 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 244 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 245 |[39m         })[33m;[39m
     [90m 246 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:243:36)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 265 |[39m   describe([32m'üìä Genetic Diversity Tracking API'[39m[33m,[39m () [33m=>[39m {
     [90m 266 |[39m     test([32m'POST /api/genetics/population-analysis should analyze population genetics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 267 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 268 |[39m
     [90m 269 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 270 |[39m         [33m.[39mpost([32m'/api/genetics/population-analysis'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:267:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:267:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 298 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 299 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 300 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 301 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 302 |[39m         })[33m;[39m
     [90m 303 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:300:36)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 345 |[39m
     [90m 346 |[39m     test([32m'POST /api/genetics/optimal-breeding should recommend optimal breeding pairs'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 347 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 350 |[39m         [33m.[39mpost([32m'/api/genetics/optimal-breeding'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:347:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:347:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 378 |[39m       [36mconst[39m endpoints [33m=[39m [
     [90m 379 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/genetic-probability'[39m }[33m,[39m
    [31m[1m>[22m[39m[90m 380 |[39m         { method[33m:[39m [32m'get'[39m[33m,[39m path[33m:[39m [32m`/api/breeding/lineage-analysis/${testStallion.id}/${testMare.id}`[39m }[33m,[39m
     [90m     |[39m                                                                               [31m[1m^[22m[39m
     [90m 381 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/breeding-recommendations'[39m }[33m,[39m
     [90m 382 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/population-analysis'[39m }[33m,[39m
     [90m 383 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/inbreeding-analysis'[39m }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:380:79)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 451 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${otherToken}`[39m)
     [90m 452 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 453 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 454 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 455 |[39m         })[33m;[39m
     [90m 456 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:453:36)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:02:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:02:56] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:02:56] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:56] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:56] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:56] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:56] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:56] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: integration-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=99357984681d0588c8ebea7bddfaef80683eef38fbb5cc289fcd38e873dd8dd4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:02:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [applyEpigeneticTraitsAtBirth] Mare stress: 20, Feed quality: 85

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [applyEpigeneticTraitsAtBirth] Applied resilient trait (low stress + premium feed)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [applyEpigeneticTraitsAtBirth] Applied peopleTrusting trait (low stress + premium feed)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":["resilient","peopleTrusting"],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] warn: [groomSystem.ensureDefaultGroomAssignment] DEPRECATED: Auto-assignment disabled for foal 95357. Players must manually assign grooms.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [foalModel.getFoalDevelopment] Getting development data for foal 95357

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:57] info: [foalModel.getFoalDevelopment] Retrieved development data for foal 95357

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    expect(received).toBe(expected) // Object.is equality

    Expected: "foal_care"
    Received: "foalCare"

    [0m [90m 286 |[39m
     [90m 287 |[39m       expect(dbAssignment)[33m.[39mtoBeTruthy()[33m;[39m
    [31m[1m>[22m[39m[90m 288 |[39m       expect(dbAssignment[33m.[39mgroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 289 |[39m
     [90m 290 |[39m       assignedGroom [33m=[39m dbAssignment[33m.[39mgroom[33m;[39m
     [90m 291 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:288:45)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üë• STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 297 |[39m       [36mconst[39m interactionData [33m=[39m {
     [90m 298 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
    [31m[1m>[22m[39m[90m 299 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 300 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 301 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m
     [90m 302 |[39m         notes[33m:[39m [32m'Initial care for newborn foal'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:299:32)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    expect(received).toBe(expected) // Object.is equality

    Expected: "foal_care"
    Received: "foalCare"

    [0m [90m 371 |[39m       [90m// Groom care system[39m
     [90m 372 |[39m       expect(foalWithFamily[33m.[39mgroomAssignments)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 373 |[39m       expect(foalWithFamily[33m.[39mgroomAssignments[[35m0[39m][33m.[39mgroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m
     [90m     |[39m                                                                   [31m[1m^[22m[39m
     [90m 374 |[39m       expect(foalWithFamily[33m.[39mgroomInteractions)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m 375 |[39m
     [90m 376 |[39m       [90m// Development tracking[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:373:67)

  ‚óè üêé INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ üéØ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'speciality')

    [0m [90m 397 |[39m
     [90m 398 |[39m       [90m// Groom specialization rules[39m
    [31m[1m>[22m[39m[90m 399 |[39m       expect(assignedGroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m [90m// Correct specialty for foal[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 400 |[39m
     [90m 401 |[39m       [90m// Data integrity[39m
     [90m 402 |[39m       expect(foal[33m.[39msireId)[33m.[39mtoBe(stallion[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:399:28)

FAIL tests/trainingController.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:02:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:02:58] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:02:58] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getLastTrainingDate] No training records found for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getAnyRecentTraining] No training records found for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:58] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user non-existent-player

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User non-existent-player not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:02:59] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.getTrainableHorses] User test-player-123 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Getting age for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] info: [trainingModel.getHorseAge] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.canTrain] Horse 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:02:59] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible true for horse that meets all requirements

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m  97 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m  98 |[39m
    [31m[1m>[22m[39m[90m  99 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 100 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 101 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 102 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:99:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for horse under 3 years old

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
        "eligible": false,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
      }

    [0m [90m 110 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 111 |[39m
    [31m[1m>[22m[39m[90m 112 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 113 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 114 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 115 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:112:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for horse with recent training in any discipline

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
        "eligible": false,
    -   "reason": "Training cooldown active for this horse",
    +   "reason": "Horse not found",
      }

    [0m [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 129 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 130 |[39m         reason[33m:[39m [32m'Training cooldown active for this horse'[39m[33m,[39m
     [90m 131 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:128:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible true for horse with old training (8+ days ago)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m 142 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 145 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 146 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 147 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:144:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for non-existent horse

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 999

    Number of calls: 0

    [0m [90m 159 |[39m         reason[33m:[39m [32m'Horse not found'[39m[33m,[39m
     [90m 160 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 161 |[39m       expect(mockGetHorseAge)[33m.[39mtoHaveBeenCalledWith([35m999[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 162 |[39m       expect(mockGetAnyRecentTraining)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 163 |[39m     })[33m;[39m
     [90m 164 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:161:31)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"eligible": false, "reason": "Horse not found"}

    [0m [90m 178 |[39m       mockGetHorseAge[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 179 |[39m
    [31m[1m>[22m[39m[90m 180 |[39m       [36mawait[39m expect(canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training eligibility check failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 181 |[39m     })[33m;[39m
     [90m 182 |[39m
     [90m 183 |[39m     it([32m'should calculate cooldown correctly for edge case (exactly 7 days)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:180:13)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should calculate cooldown correctly for edge case (exactly 7 days)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m 190 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 191 |[39m
    [31m[1m>[22m[39m[90m 192 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 193 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 194 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 195 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:192:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should successfully train eligible horse

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 246 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 249 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Racing. +5 added.'[39m)[33m;[39m
     [90m 250 |[39m       expect(result[33m.[39mupdatedHorse[33m.[39mname)[33m.[39mtoBe([32m'Test Horse'[39m)[33m;[39m
     [90m 251 |[39m       expect(result[33m.[39mnextEligible)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:248:30)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should reject training for ineligible horse (under age)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "message": "Training not allowed: Horse is under age",
    +   "message": "Training not allowed: Horse not found",
        "nextEligible": null,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
        "success": false,
        "updatedHorse": null,
      }

    [0m [90m 262 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 263 |[39m
    [31m[1m>[22m[39m[90m 264 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 265 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 266 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 267 |[39m         updatedHorse[33m:[39m [36mnull[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:264:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should reject training for horse in cooldown

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "message": "Training not allowed: Training cooldown active for this horse",
    +   "message": "Training not allowed: Horse not found",
        "nextEligible": null,
    -   "reason": "Training cooldown active for this horse",
    +   "reason": "Horse not found",
        "success": false,
        "updatedHorse": null,
      }

    [0m [90m 279 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 280 |[39m
    [31m[1m>[22m[39m[90m 281 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 282 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 283 |[39m         reason[33m:[39m [32m'Training cooldown active for this horse'[39m[33m,[39m
     [90m 284 |[39m         updatedHorse[33m:[39m [36mnull[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:281:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should handle training log errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"message": "Training not allowed: Horse not found", "nextEligible": null, "reason": "Horse not found", "success": false, "updatedHorse": null}

    [0m [90m 299 |[39m       mockLogTrainingSession[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Failed to log training'[39m))[33m;[39m
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m       [36mawait[39m expect(trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training failed: Failed to log training'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 302 |[39m     })[33m;[39m
     [90m 303 |[39m
     [90m 304 |[39m     it([32m'should award +5 XP after successful training'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:301:13)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should award +5 XP after successful training

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 344 |[39m
     [90m 345 |[39m       [90m// Verify training success[39m
    [31m[1m>[22m[39m[90m 346 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 347 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Dressage. +5 added.'[39m)[33m;[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Verify XP award system[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:346:30)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should handle XP system errors gracefully without breaking training

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 386 |[39m
     [90m 387 |[39m       [90m// Training should still succeed despite XP error[39m
    [31m[1m>[22m[39m[90m 388 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 389 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Racing. +5 added.'[39m)[33m;[39m
     [90m 390 |[39m       expect(result[33m.[39mupdatedHorse[33m.[39mname)[33m.[39mtoBe([32m'Error Test Horse'[39m)[33m;[39m
     [90m 391 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:388:30)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for eligible horse with no training history

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

      Object {
        "cooldown": null,
    -   "eligible": true,
    -   "horseAge": 5,
    +   "eligible": false,
    +   "horseAge": null,
        "lastTrainingDate": null,
    -   "reason": null,
    +   "reason": "Horse not found",
      }

    [0m [90m 409 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 410 |[39m
    [31m[1m>[22m[39m[90m 411 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 412 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 413 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 414 |[39m         horseAge[33m:[39m [35m5[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:411:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for horse in active cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: "Training cooldown active for this horse"
    Received: "Horse not found"

    [0m [90m 427 |[39m
     [90m 428 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 429 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 430 |[39m       expect(result[33m.[39mhorseAge)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 431 |[39m       expect(result[33m.[39mlastTrainingDate)[33m.[39mtoBe([36mnull[39m)[33m;[39m [90m// Still null for this specific discipline[39m
     [90m 432 |[39m       expect(result[33m.[39mcooldown[33m.[39mactive)[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:429:29)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for horse with expired cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 443 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 444 |[39m
    [31m[1m>[22m[39m[90m 445 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 446 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([36mnull[39m)[33m;[39m
     [90m 447 |[39m       expect(result[33m.[39mhorseAge)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 448 |[39m       expect(result[33m.[39mlastTrainingDate)[33m.[39mtoEqual(eightDaysAgo)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:445:31)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return status for ineligible horse (under age)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
        "cooldown": null,
        "eligible": false,
    -   "horseAge": 2,
    +   "horseAge": null,
        "lastTrainingDate": null,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
      }

    [0m [90m 458 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 459 |[39m
    [31m[1m>[22m[39m[90m 460 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 461 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 462 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 463 |[39m         horseAge[33m:[39m [35m2[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:460:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"cooldown": null, "eligible": false, "horseAge": null, "lastTrainingDate": null, "reason": "Horse not found"}

    [0m [90m 470 |[39m       mockGetHorseAge[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 471 |[39m
    [31m[1m>[22m[39m[90m 472 |[39m       [36mawait[39m expect(getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training status check failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 473 |[39m     })[33m;[39m
     [90m 474 |[39m   })[33m;[39m
     [90m 475 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:472:13)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle different disciplines with global cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: "Training cooldown active for this horse"
    Received: "Horse not found"

    [0m [90m 491 |[39m       [90m// Both should be blocked due to global cooldown[39m
     [90m 492 |[39m       expect(racingResult[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 493 |[39m       expect(racingResult[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 494 |[39m
     [90m 495 |[39m       expect(jumpingResult[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 496 |[39m       expect(jumpingResult[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:493:35)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle edge case of exactly 7 days cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 504 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 505 |[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 507 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([36mnull[39m)[33m;[39m
     [90m 508 |[39m     })[33m;[39m
     [90m 509 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:506:31)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle complete training workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 542 |[39m
     [90m 543 |[39m       [36mconst[39m trainResult [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 544 |[39m       expect(trainResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 545 |[39m
     [90m 546 |[39m       [90m// Now mock that the horse has recently trained[39m
     [90m 547 |[39m       [36mconst[39m justNow [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:544:35)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should return trainable horses for user with eligible horses

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 577 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 578 |[39m
    [31m[1m>[22m[39m[90m 579 |[39m       expect(result)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 580 |[39m       expect(result[[35m0[39m])[33m.[39mtoEqual({
     [90m 581 |[39m         horseId[33m:[39m [35m1[39m[33m,[39m
     [90m 582 |[39m         name[33m:[39m [32m'Thunder'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:579:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should filter out horses under 3 years old

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 630 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 631 |[39m
    [31m[1m>[22m[39m[90m 632 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 633 |[39m       expect(result[[35m0[39m][33m.[39mname)[33m.[39mtoBe([32m'Adult Horse'[39m)[33m;[39m
     [90m 634 |[39m       expect(result[[35m0[39m][33m.[39mage)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 635 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:632:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should handle database errors gracefully for individual horses

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 668 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 669 |[39m
    [31m[1m>[22m[39m[90m 670 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 671 |[39m       expect(result[[35m0[39m][33m.[39mname)[33m.[39mtoBe([32m'Good Horse'[39m)[33m;[39m
     [90m 672 |[39m       expect(result[[35m0[39m][33m.[39mtrainableDisciplines)[33m.[39mtoEqual([
     [90m 673 |[39m         [32m'Racing'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:670:22)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should handle player model errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 688 |[39m       mockGetUserWithHorses[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Player database error'[39m))[33m;[39m
     [90m 689 |[39m
    [31m[1m>[22m[39m[90m 690 |[39m       [36mawait[39m expect(getTrainableHorses(playerId))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 691 |[39m         [32m'Failed to get trainable horses: Player database error'[39m[33m,[39m
     [90m 692 |[39m       )[33m;[39m
     [90m 693 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:690:13)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return success response with correct format for successful training

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Nova trained in Dressage. +5 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [],
    -     "scoreModifier": 0,
    -     "xpModifier": 0,
    -   },
    -   "updatedScore": 25,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 747 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 748 |[39m
    [31m[1m>[22m[39m[90m 749 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 750 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 751 |[39m         message[33m:[39m [32m'Nova trained in Dressage. +5 added.'[39m[33m,[39m
     [90m 752 |[39m         updatedScore[33m:[39m [35m25[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:749:28)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return failure response for ineligible horse (under age)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Training not allowed: Horse is under age",
    +   "message": "Training not allowed: Horse not found",
        "success": false,
      },

    Number of calls: 1

    [0m [90m 768 |[39m
     [90m 769 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 770 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 771 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 772 |[39m         message[33m:[39m [32m'Training not allowed: Horse is under age'[39m[33m,[39m
     [90m 773 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:770:28)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return failure response for horse in cooldown

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Training not allowed: Training cooldown active for this horse",
    +   "message": "Training not allowed: Horse not found",
        "success": false,
      },

    Number of calls: 1

    [0m [90m 783 |[39m
     [90m 784 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 785 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 786 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 787 |[39m         message[33m:[39m [32m'Training not allowed: Training cooldown active for this horse'[39m[33m,[39m
     [90m 788 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:785:28)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle missing discipline score gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Nova trained in Dressage. +5 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [],
    -     "scoreModifier": 0,
    -     "xpModifier": 0,
    -   },
    -   "updatedScore": 0,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 825 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 826 |[39m
    [31m[1m>[22m[39m[90m 827 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 828 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 829 |[39m         message[33m:[39m [32m'Nova trained in Dressage. +5 added.'[39m[33m,[39m
     [90m 830 |[39m         updatedScore[33m:[39m [35m0[39m[33m,[39m [90m// Should default to 0 when no scores exist[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:827:28)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle server errors gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 500
    Received: 400

    Number of calls: 1

    [0m [90m 844 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 845 |[39m
    [31m[1m>[22m[39m[90m 846 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m500[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 847 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m 848 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 849 |[39m         message[33m:[39m [32m'Failed to train horse'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:846:30)

  ‚óè üèãÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle trait effects in training

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Intelligent Horse trained in Dressage. +6 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [
    -       "intelligent",
    -     ],
    -     "scoreModifier": 1,
    -     "xpModifier": 1,
    -   },
    -   "updatedScore": 6,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 889 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 890 |[39m
    [31m[1m>[22m[39m[90m 891 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 892 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 893 |[39m         message[33m:[39m [32m'Intelligent Horse trained in Dressage. +6 added.'[39m[33m,[39m
     [90m 894 |[39m         updatedScore[33m:[39m [35m6[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:891:28)

FAIL tests/groomBonusTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:01] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 47266

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.assignBonusTraits] Successfully assigned bonus traits to groom 47266

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 47267

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] error: [groomBonusTraitService.assignBonusTraits] Error assigning bonus traits to groom 47267: Bonus trait constraints violated: Maximum 3 bonus traits allowed, got 4, Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 47268

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 47268

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 95361

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:01] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 47269

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 47269

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 95361 and groom 47269

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 95361 and groom 47269: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Applied 20% bonus to trait 'sensitive' for horse 95361

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 95362

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 47270

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 47270

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 95362 and groom 47270

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 95362 and groom 47270: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Groom 47270 not eligible for bonus: Bond score too low

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Calculating probability for trait 'sensitive' on horse 95363

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 47271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 47271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Checking bonus eligibility for horse 95363 and groom 47271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.checkBonusEligibility] Eligibility check complete for horse 95363 and groom 47271: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [traitAssignmentLogic.calculateTraitProbabilityWithBonus] Groom 47271 not eligible for bonus: Insufficient assignment coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [GET] /api/grooms/47272/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [auth] Authenticated user 2a2415e0-6301-498a-bdd4-549e6e022842 for GET /grooms/47272/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [ownership] Validated ownership: user 2a2415e0-6301-498a-bdd4-549e6e022842 owns groom 47272

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomController.getGroomBonusTraits] Getting bonus traits for groom 47272

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Getting bonus traits for groom 47272

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.getBonusTraits] Retrieved bonus traits for groom 47272

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [GET] /api/grooms/47272/bonus-traits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [PUT] /api/grooms/47273/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [auth] Authenticated user 5dac1b6c-354a-45a7-93f5-2dc2920784e2 for PUT /grooms/47273/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [ownership] Validated ownership: user 5dac1b6c-354a-45a7-93f5-2dc2920784e2 owns groom 47273

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomController.updateGroomBonusTraits] Updating bonus traits for groom 47273

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 47273

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.assignBonusTraits] Successfully assigned bonus traits to groom 47273

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [PUT] /api/grooms/47273/bonus-traits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [PUT] /api/grooms/47274/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [auth] Authenticated user a642c2ab-e2ec-4440-9aa5-ba5f05eabdd8 for PUT /grooms/47274/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [ownership] Validated ownership: user a642c2ab-e2ec-4440-9aa5-ba5f05eabdd8 owns groom 47274

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomController.updateGroomBonusTraits] Updating bonus traits for groom 47274

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [groomBonusTraitService.assignBonusTraits] Assigning bonus traits to groom 47274

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] error: [groomBonusTraitService.assignBonusTraits] Error assigning bonus traits to groom 47274: Bonus trait constraints violated: Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:02] error: [groomController.updateGroomBonusTraits] Error: Bonus trait constraints violated: Bonus for trait 'trait1' must be between 0 and 0.3 (30%)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:02] info: [PUT] /api/grooms/47274/bonus-traits - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [GET] /api/grooms/47275/bonus-traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] warn: [auth] Access token is required for GET /grooms/47275/bonus-traits from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [GET] /api/grooms/47275/bonus-traits - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bond score too low"
    Received: "Insufficient assignment coverage"

    [0m [90m 302 |[39m       expect(result[33m.[39mfinalProbability)[33m.[39mtoBe([35m0.1[39m)[33m;[39m [90m// No bonus applied[39m
     [90m 303 |[39m       expect(result[33m.[39mbonusApplied)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([32m'Bond score too low'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 305 |[39m     })[33m;[39m
     [90m 306 |[39m   })[33m;[39m
     [90m 307 |[39m[0m

      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:304:29)

FAIL seed/horseSeed.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:02] info: [seed] Environment loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Found existing breed: TestSeed_Thoroughbred (ID: 21162)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Breed "TestSeed_NewArabian" not found, creating new one.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Created breed: TestSeed_NewArabian (ID: 21163)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] warn: [seed] Breed name is undefined or null. Skipping breed creation/connection.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Breed "TestSeed_InvalidBreed" not found, creating new one.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Created breed: TestSeed_InvalidBreed (ID: 21164)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:02] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] warn: No users provided for horse seeding. Skipping horse creation.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created breed: Thoroughbred

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created breed: Arabian

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created breed: Quarter Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created breed: Akhal-Teke

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Lightning Bolt for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Desert Rose for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Thoroughbred

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Arabian

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Quarter Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Akhal-Teke

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Lightning Bolt for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Desert Rose for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Thoroughbred

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Arabian

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Quarter Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Akhal-Teke

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Lightning Bolt for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Desert Rose for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Thoroughbred

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Arabian

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Quarter Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Akhal-Teke

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Lightning Bolt for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Desert Rose for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner1@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured User owner2@example.com exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 1 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [seed] Ensured Stable ID 2 exists.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Thoroughbred

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Arabian

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Quarter Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Found existing breed: Akhal-Teke

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Lightning Bolt for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: Created horse: Desert Rose for user ID: 9b304cbd-b55f-4cfe-a306-ea9f89bdac55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should return existing breed if found in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Found existing breed: TestSeed_Thoroughbred (ID: 21162)"

    Number of calls: 0

    [0m [90m 152 |[39m       expect(result[33m.[39mname)[33m.[39mtoBe([32m'TestSeed_Thoroughbred'[39m)[33m;[39m
     [90m 153 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe(testBreed[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 154 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 155 |[39m         [32m`[seed] Found existing breed: TestSeed_Thoroughbred (ID: ${testBreed.id})`[39m[33m,[39m
     [90m 156 |[39m       )[33m;[39m
     [90m 157 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:154:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should create new breed if not found in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Breed \"TestSeed_NewArabian\" not found, creating new one."

    Number of calls: 0

    [0m [90m 166 |[39m       expect(result[33m.[39mname)[33m.[39mtoBe([32m'TestSeed_NewArabian'[39m)[33m;[39m
     [90m 167 |[39m       expect(result[33m.[39mdescription)[33m.[39mtoBe([32m'Seed-created TestSeed_NewArabian'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 168 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Breed "TestSeed_NewArabian" not found, creating new one.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 169 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m`[seed] Created breed: TestSeed_NewArabian (ID: ${result.id})`[39m)[33m;[39m
     [90m 170 |[39m
     [90m 171 |[39m       [90m// Verify it was actually created in database[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:168:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should return null for undefined breed name

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Breed name is undefined or null. Skipping breed creation/connection."

    Number of calls: 0

    [0m [90m 182 |[39m
     [90m 183 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m
    [31m[1m>[22m[39m[90m 184 |[39m       expect(mockLogger[33m.[39mwarn)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 185 |[39m         [32m'[seed] Breed name is undefined or null. Skipping breed creation/connection.'[39m[33m,[39m
     [90m 186 |[39m       )[33m;[39m
     [90m 187 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:184:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ ensureReferencedRecordsExist - Real Database Operations ‚Ä∫ should create users and stables if they do not exist in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 220 |[39m       expect(stable2[33m.[39mname)[33m.[39mtoBe([32m'Second Stable'[39m)[33m;[39m
     [90m 221 |[39m
    [31m[1m>[22m[39m[90m 222 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 223 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner2@example.com exists.'[39m)[33m;[39m
     [90m 224 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured Stable ID 1 exists.'[39m)[33m;[39m
     [90m 225 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured Stable ID 2 exists.'[39m)[33m;[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:222:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ ensureReferencedRecordsExist - Real Database Operations ‚Ä∫ should update existing users and stables if they already exist

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 242 |[39m       expect(user2)[33m.[39mtoBeTruthy()[33m;[39m
     [90m 243 |[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 245 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner2@example.com exists.'[39m)[33m;[39m
     [90m 246 |[39m     })[33m;[39m
     [90m 247 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:244:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ seedHorses - Real Database Operations ‚Ä∫ should log a warning and return an empty array if no users are provided

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "No users provided for horse seeding. Skipping horse creation."

    Number of calls: 0

    [0m [90m 265 |[39m     it([32m'should log a warning and return an empty array if no users are provided'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 266 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m seedHorses(prisma[33m,[39m [])[33m;[39m
    [31m[1m>[22m[39m[90m 267 |[39m       expect(mockLogger[33m.[39mwarn)[33m.[39mtoHaveBeenCalledWith([32m'No users provided for horse seeding. Skipping horse creation.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 268 |[39m       expect(result)[33m.[39mtoEqual([])[33m;[39m
     [90m 269 |[39m     })[33m;[39m
     [90m 270 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:267:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ seedHorses - Real Database Operations ‚Ä∫ should create breeds and horses for the provided user in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Created horse:"

    Number of calls: 0

    [0m [90m 302 |[39m
     [90m 303 |[39m       [90m// Verify logging occurred[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 305 |[39m         expect[33m.[39mstringContaining([32m'Created horse:'[39m)[33m,[39m
     [90m 306 |[39m       )[33m;[39m
     [90m 307 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:304:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ Complete Horse Seeding Integration Test ‚Ä∫ should execute complete seeding workflow with real database operations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 386 |[39m
     [90m 387 |[39m       [90m// Verify logging occurred[39m
    [31m[1m>[22m[39m[90m 388 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 389 |[39m
     [90m 390 |[39m       [36mif[39m (result[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 391 |[39m         expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:388:31)

FAIL tests/training-updated.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:03] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:03] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:04] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:04] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for GET /horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:04] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for GET /horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for GET /horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/training/status/1/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for GET /training/status/1/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [ownership] horse 1 not found or not owned by user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/training/status/1/Racing - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/training/status/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for GET /training/status/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [ownership] horse 1 not found or not owned by user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/training/status/1 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [trainingController.getTrainableHorses] Getting trainable horses for user 00000000-0000-0000-0000-000000000001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [trainingController.getTrainableHorses] User 00000000-0000-0000-0000-000000000001 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [GET] /api/horses/trainable/00000000-0000-0000-0000-000000000001 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] warn: [ownership] horse 1 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [auth] Authenticated user 00000000-0000-0000-0000-000000000001 for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:05] info: [POST] /api/training/train - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Training Status Tests ‚Ä∫ should get training status for a specific horse and discipline

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 163 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m [90m// Ensure auth token is sent[39m
     [90m 164 |[39m
    [31m[1m>[22m[39m[90m 165 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 166 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 167 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'eligible'[39m)[33m;[39m
     [90m 168 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'reason'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:165:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Training Status Tests ‚Ä∫ should get all training status for a horse

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 180 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m [90m// Ensure auth token is sent[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 183 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 184 |[39m       expect([36mtypeof[39m response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBe([32m'object'[39m)[33m;[39m [90m// Fixed: API returns object with discipline keys, not array[39m
     [90m 185 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'Racing'[39m)[33m;[39m [90m// Fixed: Check for discipline properties[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:182:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Error Handling Tests ‚Ä∫ should handle invalid horse ID gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 403

    [0m [90m 217 |[39m       })[33m;[39m
     [90m 218 |[39m
    [31m[1m>[22m[39m[90m 219 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 220 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 221 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m
     [90m 222 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:219:31)

  ‚óè üèãÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Error Handling Tests ‚Ä∫ should handle invalid discipline gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 403

    [0m [90m 228 |[39m       })[33m;[39m
     [90m 229 |[39m
    [31m[1m>[22m[39m[90m 230 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m [90m// Ownership fails before discipline validation in test mode[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 231 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 232 |[39m     })[33m;[39m
     [90m 233 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:230:31)

FAIL tests/resultModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:105:22) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:146:22) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:329:7) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:352:7) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:390:22) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:447:22) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByHorse] Found 0 results for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByHorse] Found 0 results for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByHorse] Found 0 results for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByShow] Found 0 results for show 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByShow] Found 0 results for show 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByShow] Found 0 results for show 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] error: [resultModel.saveResult] Database error: PrismaClientKnownRequestError: 
      Invalid `prisma.competitionResult.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`
          at Zn.handleRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:7459)
          at Zn.handleAndLogRequestError (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6784)
          at Zn.request (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:121:6491)
          at l (C:\Users\heirr\OneDrive\Desktop\Equoria\packages\database\node_modules\@prisma\client\runtime\library.js:130:9778)
          at saveResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:101:16)
          at createResult (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\models\resultModel.mjs:248:10)
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:702:22) {
        [stack]: [Getter/Setter],
        [message]: '\n' +
          'Invalid `prisma.competitionResult.create()` invocation:\n' +
          '\n' +
          '\n' +
          'Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`',
        code: 'P2003',
        meta: {
          modelName: 'CompetitionResult',
          constraint: 'competition_results_horseId_fkey'
        },
        clientVersion: '6.8.2',
        [batchRequestIdx]: undefined,
        name: 'PrismaClientKnownRequestError',
        [Symbol(Symbol.toStringTag)]: [Getter]
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByHorse] Found 0 results for horse 123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [resultModel.getResultsByShow] Found 0 results for show 456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should save a competition result with all required fields

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:105:22)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should save a result without placement (null for non-top-3)

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:146:22)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should handle prizeWon as string and convert to float

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:329:7)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error in saveResult: Database connection failed"
    Received message:   "Database error in saveResult:¬∑
    Invalid `prisma.competitionResult.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`"

        [0m [90m 128 |[39m   } [36mcatch[39m (error) {
         [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
        [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
         [90m     |[39m           [31m[1m^[22m[39m
         [90m 131 |[39m   }
         [90m 132 |[39m }
         [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:352:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/resultModel.test.mjs:352:52)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should update existing placeholder result instead of creating new one

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:390:22)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should create new result when no placeholder exists

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:447:22)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByHorse ‚Ä∫ should retrieve all results for a specific horse

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 517 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByHorse(horseId)[33m;[39m
     [90m 518 |[39m
    [31m[1m>[22m[39m[90m 519 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 520 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 521 |[39m         where[33m:[39m { horseId[33m:[39m [35m1[39m }[33m,[39m
     [90m 522 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:519:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByHorse ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 551 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 552 |[39m
    [31m[1m>[22m[39m[90m 553 |[39m       [36mawait[39m expect(getResultsByHorse([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 554 |[39m         [32m'Database error in getResultsByHorse: Database connection failed'[39m[33m,[39m
     [90m 555 |[39m       )[33m;[39m
     [90m 556 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:553:13)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByShow ‚Ä∫ should retrieve all results for a specific show

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 589 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByShow(showId)[33m;[39m
     [90m 590 |[39m
    [31m[1m>[22m[39m[90m 591 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 592 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 593 |[39m         where[33m:[39m { showId[33m:[39m [35m2[39m }[33m,[39m
     [90m 594 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:591:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByShow ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 623 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 624 |[39m
    [31m[1m>[22m[39m[90m 625 |[39m       [36mawait[39m expect(getResultsByShow([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 626 |[39m         [32m'Database error in getResultsByShow: Database connection failed'[39m[33m,[39m
     [90m 627 |[39m       )[33m;[39m
     [90m 628 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:625:13)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultById ‚Ä∫ should retrieve a specific result by ID

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 648 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getResultById(resultId)[33m;[39m
     [90m 649 |[39m
    [31m[1m>[22m[39m[90m 650 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 651 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({
     [90m 652 |[39m         where[33m:[39m { id[33m:[39m [35m1[39m }[33m,[39m
     [90m 653 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:650:55)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultById ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 681 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 682 |[39m
    [31m[1m>[22m[39m[90m 683 |[39m       [36mawait[39m expect(getResultById([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error in getResultById: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 684 |[39m     })[33m;[39m
     [90m 685 |[39m   })[33m;[39m
     [90m 686 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:683:13)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ createResult ‚Ä∫ should be an alias for saveResult and work identically

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at createResult (models/resultModel.mjs:248:10)
      at Object.<anonymous> (tests/resultModel.test.mjs:702:22)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should retrieve results for all user horses with default options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"horse": {"include": {"breed": true}}, "show": true}, "orderBy": {"runDate": "desc"}, "skip": 0, "take": 50, "where": {"horse": {"userId": "user123"}}}

    Number of calls: 0

    [0m [90m 736 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByUser(userId)[33m;[39m
     [90m 737 |[39m
    [31m[1m>[22m[39m[90m 738 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 739 |[39m         where[33m:[39m {
     [90m 740 |[39m           horse[33m:[39m {
     [90m 741 |[39m             userId[33m:[39m [32m'user123'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:738:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should handle custom options (limit, offset, discipline)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": Any<Object>, "orderBy": {"runDate": "desc"}, "skip": 5, "take": 10, "where": {"discipline": "Racing", "horse": {"userId": "user123"}}}

    Number of calls: 0

    [0m [90m 767 |[39m       [36mawait[39m getResultsByUser(userId[33m,[39m options)[33m;[39m
     [90m 768 |[39m
    [31m[1m>[22m[39m[90m 769 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 770 |[39m         where[33m:[39m {
     [90m 771 |[39m           horse[33m:[39m {
     [90m 772 |[39m             userId[33m:[39m [32m'user123'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:769:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should cap limit at 100 and ensure non-negative offset

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"skip": 0, "take": 100}

    Number of calls: 0

    [0m [90m 789 |[39m       [36mawait[39m getResultsByUser(userId[33m,[39m options)[33m;[39m
     [90m 790 |[39m
    [31m[1m>[22m[39m[90m 791 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 792 |[39m         expect[33m.[39mobjectContaining({
     [90m 793 |[39m           take[33m:[39m [35m100[39m[33m,[39m [90m// Capped at 100[39m
     [90m 794 |[39m           skip[33m:[39m [35m0[39m[33m,[39m [90m// Non-negative[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:791:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 800 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 801 |[39m
    [31m[1m>[22m[39m[90m 802 |[39m       [36mawait[39m expect(getResultsByUser([32m'user123'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 803 |[39m     })[33m;[39m
     [90m 804 |[39m   })[33m;[39m
     [90m 805 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:802:13)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultsByHorse

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"horseId": 123}}

    Number of calls: 0

    [0m [90m 810 |[39m       [36mawait[39m getResultsByHorse([32m'123'[39m)[33m;[39m [90m// String ID[39m
     [90m 811 |[39m
    [31m[1m>[22m[39m[90m 812 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 813 |[39m         expect[33m.[39mobjectContaining({
     [90m 814 |[39m           where[33m:[39m { horseId[33m:[39m [35m123[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 815 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:812:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultsByShow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"showId": 456}}

    Number of calls: 0

    [0m [90m 822 |[39m       [36mawait[39m getResultsByShow([32m'456'[39m)[33m;[39m [90m// String ID[39m
     [90m 823 |[39m
    [31m[1m>[22m[39m[90m 824 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 825 |[39m         expect[33m.[39mobjectContaining({
     [90m 826 |[39m           where[33m:[39m { showId[33m:[39m [35m456[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 827 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:824:53)

  ‚óè üèÜ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultById

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"id": 789}}

    Number of calls: 0

    [0m [90m 834 |[39m       [36mawait[39m getResultById([32m'789'[39m)[33m;[39m [90m// String ID[39m
     [90m 835 |[39m
    [31m[1m>[22m[39m[90m 836 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 837 |[39m         expect[33m.[39mobjectContaining({
     [90m 838 |[39m           where[33m:[39m { id[33m:[39m [35m789[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 839 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:836:55)

FAIL tests/unit/carePatternAnalysis.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:06] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 999: Horse with ID 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [carePatternAnalysis] Starting analysis for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [carePatternAnalysis] Error analyzing patterns for horse 1: 
      Invalid `prisma.horse.findUnique()` invocation:
      
      {
        where: {
          id: 1
        },
        include: {
          groomInteractions: {
            where: {
              createdAt: {
                gte: new Date("Invalid Date")
                     ~~~~~~~~~~~~~~~~~~~~~~~~
              }
            },
            orderBy: {
              createdAt: "asc"
            }
          }
        }
      }
      
      Invalid value for argument `gte`: Provided Date object is invalid. Expected Date.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze patterns for eligible horse

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:58:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should reject horse too old for evaluation

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:78:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze consistent care patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:123:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze novelty exposure patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:172:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze stress management patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:222:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze bonding patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:263:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze neglect patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:296:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze environmental factors

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:338:22)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle horse with no interactions

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:355:22)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database connection failed"
    Received message:   "Horse with ID 1 not found"

        [0m [90m 46 |[39m
         [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
        [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
         [90m    |[39m             [31m[1m^[22m[39m
         [90m 49 |[39m     }
         [90m 50 |[39m
         [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:367:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:367:52)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle invalid evaluation date

    PrismaClientValidationError: 
    Invalid `prisma.horse.findUnique()` invocation:

    {
      where: {
        id: 1
      },
      include: {
        groomInteractions: {
          where: {
            createdAt: {
              gte: new Date("Invalid Date")
                   ~~~~~~~~~~~~~~~~~~~~~~~~
            }
          },
          orderBy: {
            createdAt: "asc"
          }
        }
      }
    }

    Invalid value for argument `gte`: Provided Date object is invalid. Expected Date.

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../packages/database/node_modules/@prisma/client/runtime/library.js:29:10051)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:7488)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8272)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8272)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Et (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5845)
      at rm (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6654)
      at em (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6300)
      at Xd (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6186)
      at Et (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5863)
      at Nn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5747)
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10331
      at Object.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1549)
      at Io.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1913)
      at r._executeRequest (../packages/database/node_modules/@prisma/client/runtime/library.js:130:10310)
      at il (../packages/database/node_modules/@prisma/client/runtime/library.js:31:9835)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9784)
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10078
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10058
      at Object.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1549)
      at Io.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1913)
      at r._request (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9981)
      at e._createPrismaPromise.action (../packages/database/node_modules/@prisma/client/runtime/library.js:31:5390)
      at o (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1018)
      at Proxy.then (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1114)

FAIL tests/xpLogModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User user-123, Amount: 5, Reason: Trained horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User undefined, Amount: 5, Reason: Test reason

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User user-123, Amount: invalid, Reason: Test reason

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: Amount must be a number

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User user-123, Amount: 5, Reason: undefined

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: Reason is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User user-123, Amount: 5, Reason: Test reason

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.logXpEvent] Logging XP event: User user-123, Amount: -10, Reason: XP penalty for rule violation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpEvents] Getting XP events for user user-123, limit: 50, offset: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpEvents] Retrieved 0 XP events for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpEvents] Getting XP events for user user-123, limit: 10, offset: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpEvents] Retrieved 0 XP events for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] Getting XP summary for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] XP summary for user user-123: Gained 0, Lost 0, Net 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] Getting XP summary for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] XP summary for user user-123: Gained 0, Lost 0, Net 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] Getting XP summary for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getUserXpSummary] XP summary for user user-123: Gained 0, Lost 0, Net 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getRecentXpEvents] Getting recent XP events, limit: 10, offset: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getRecentXpEvents] Retrieved 0 recent XP events

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getRecentXpEvents] Getting recent XP events, limit: 100, offset: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [xpLogModel.getRecentXpEvents] Retrieved 0 recent XP events

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should log XP event successfully

    PrismaClientKnownRequestError: 
    Invalid `prisma.xpEvent.create()` invocation:


    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

    [0m [90m 38 |[39m
     [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
    [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 41 |[39m       data[33m:[39m {
     [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
     [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:98:22)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should handle database errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database connection failed"
    Received message:   "
    Invalid `prisma.xpEvent.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`"

        [0m [90m 38 |[39m
         [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
        [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
         [90m    |[39m                     [31m[1m^[22m[39m
         [90m 41 |[39m       data[33m:[39m {
         [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
         [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:157:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:163:17)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should handle negative XP amounts

    PrismaClientKnownRequestError: 
    Invalid `prisma.xpEvent.create()` invocation:


    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

    [0m [90m 38 |[39m
     [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
    [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 41 |[39m       data[33m:[39m {
     [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
     [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:181:22)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpEvents ‚Ä∫ should retrieve XP events for a user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"timestamp": "desc"}, "skip": 0, "take": 50, "where": {"userId": "user-123"}}

    Number of calls: 0

    [0m [90m 219 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserXpEvents([32m'user-123'[39m)[33m;[39m
     [90m 220 |[39m
    [31m[1m>[22m[39m[90m 221 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 222 |[39m         where[33m:[39m { userId[33m:[39m [32m'user-123'[39m }[33m,[39m
     [90m 223 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 224 |[39m         take[33m:[39m [35m50[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:221:42)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpEvents ‚Ä∫ should handle date filters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"timestamp": "desc"}, "skip": 5, "take": 10, "where": {"timestamp": {"gte": 2024-01-01T00:00:00.000Z, "lte": 2024-01-02T00:00:00.000Z}, "userId": "user-123"}}

    Number of calls: 0

    [0m [90m 245 |[39m       })[33m;[39m
     [90m 246 |[39m
    [31m[1m>[22m[39m[90m 247 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 248 |[39m         where[33m:[39m {
     [90m 249 |[39m           userId[33m:[39m [32m'user-123'[39m[33m,[39m
     [90m 250 |[39m           timestamp[33m:[39m {[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:247:42)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpSummary ‚Ä∫ should calculate XP summary correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "netTotal": 45,
    -   "totalEvents": 5,
    -   "totalGained": 50,
    -   "totalLost": 5,
    +   "netTotal": 0,
    +   "totalEvents": 0,
    +   "totalGained": 0,
    +   "totalLost": 0,
      }

    [0m [90m 268 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserXpSummary([32m'user-123'[39m)[33m;[39m
     [90m 269 |[39m
    [31m[1m>[22m[39m[90m 270 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 271 |[39m         totalGained[33m:[39m [35m50[39m[33m,[39m [90m// 20 + 15 + 5 + 10[39m
     [90m 272 |[39m         totalLost[33m:[39m [35m5[39m[33m,[39m [90m// abs(-5)[39m
     [90m 273 |[39m         netTotal[33m:[39m [35m45[39m[33m,[39m [90m// 20 + 15 + 5 - 5 + 10[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:270:22)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpSummary ‚Ä∫ should handle date filters in summary

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"select": {"amount": true}, "where": {"timestamp": {"gte": 2024-01-01T00:00:00.000Z, "lte": 2024-01-02T00:00:00.000Z}, "userId": "user-123"}}

    Number of calls: 0

    [0m [90m 302 |[39m       [36mawait[39m getUserXpSummary([32m'user-123'[39m[33m,[39m startDate[33m,[39m endDate)[33m;[39m
     [90m 303 |[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 305 |[39m         where[33m:[39m {
     [90m 306 |[39m           userId[33m:[39m [32m'user-123'[39m[33m,[39m
     [90m 307 |[39m           timestamp[33m:[39m {[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:304:42)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getRecentXpEvents ‚Ä∫ should retrieve recent XP events across all users

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"user": {"select": {"id": true, "username": true}}}, "orderBy": {"timestamp": "desc"}, "skip": 0, "take": 10}

    Number of calls: 0

    [0m [90m 338 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getRecentXpEvents({ limit[33m:[39m [35m10[39m[33m,[39m offset[33m:[39m [35m0[39m })[33m;[39m
     [90m 339 |[39m
    [31m[1m>[22m[39m[90m 340 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 341 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 342 |[39m         take[33m:[39m [35m10[39m[33m,[39m
     [90m 343 |[39m         skip[33m:[39m [35m0[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:340:42)

  ‚óè üìä UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getRecentXpEvents ‚Ä∫ should use default options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"user": {"select": {"id": true, "username": true}}}, "orderBy": {"timestamp": "desc"}, "skip": 0, "take": 100}

    Number of calls: 0

    [0m [90m 363 |[39m       [36mawait[39m getRecentXpEvents()[33m;[39m
     [90m 364 |[39m
    [31m[1m>[22m[39m[90m 365 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 366 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 367 |[39m         take[33m:[39m [35m100[39m[33m,[39m
     [90m 368 |[39m         skip[33m:[39m [35m0[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:365:42)

FAIL tests/unit/flagEvaluationEngine.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 999: Horse with ID 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error in batch evaluation for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 2: Horse with ID 2 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error in batch evaluation for horse 2: Horse with ID 2 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 3: Horse with ID 3 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error in batch evaluation for horse 3: Horse with ID 3 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error in batch evaluation for horse 1: Horse with ID 1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [flagEvaluationEngine] Starting flag evaluation for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error evaluating flags for horse 2: Horse with ID 2 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [flagEvaluationEngine] Error in batch evaluation for horse 2: Horse with ID 2 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should evaluate and assign flags for eligible horse

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:124:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should reject horse outside age range

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:147:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should reject horse with maximum flags

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:162:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should not assign duplicate flags

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:180:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should respect flag limit during assignment

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:210:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should handle care analysis ineligibility

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:224:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should handle database errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error"
    Received message:   "Horse with ID 1 not found"

        [0m [90m 49 |[39m
         [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
        [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
         [90m    |[39m             [31m[1m^[22m[39m
         [90m 52 |[39m     }
         [90m 53 |[39m
         [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:241:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:241:51)

  ‚óè Flag Evaluation Engine ‚Ä∫ Flag Trigger Evaluation ‚Ä∫ should trigger brave flag with correct conditions

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:278:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ Flag Trigger Evaluation ‚Ä∫ should trigger fearful flag with correct conditions

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:318:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ batchEvaluateFlags ‚Ä∫ should evaluate multiple horses

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 348 |[39m
     [90m 349 |[39m       expect(results)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 350 |[39m       expect(results[33m.[39mevery(r [33m=>[39m r[33m.[39msuccess))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 351 |[39m     })[33m;[39m
     [90m 352 |[39m
     [90m 353 |[39m     test([32m'should handle mixed success/failure in batch'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:350:45)

  ‚óè Flag Evaluation Engine ‚Ä∫ batchEvaluateFlags ‚Ä∫ should handle mixed success/failure in batch

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 373 |[39m
     [90m 374 |[39m       expect(results)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 375 |[39m       expect(results[[35m0[39m][33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 376 |[39m       expect(results[[35m1[39m][33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 377 |[39m       expect(results[[35m1[39m][33m.[39merror)[33m.[39mtoContain([32m'Horse with ID 2 not found'[39m)[33m;[39m
     [90m 378 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:375:34)

  ‚óè Flag Evaluation Engine ‚Ä∫ getEligibleHorses ‚Ä∫ should return eligible horses within age range

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   1,
    -   2,
    +   95353,
    +   95354,
      ]

    [0m [90m 390 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getEligibleHorses()[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(result)[33m.[39mtoEqual([[35m1[39m[33m,[39m [35m2[39m])[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 393 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 394 |[39m         where[33m:[39m {
     [90m 395 |[39m           dateOfBirth[33m:[39m {[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:392:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ getEligibleHorses ‚Ä∫ should handle database errors in getEligibleHorses

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: [95353, 95354]

    [0m [90m 410 |[39m       mockPrisma[33m.[39mhorse[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 411 |[39m
    [31m[1m>[22m[39m[90m 412 |[39m       [36mawait[39m expect(getEligibleHorses())[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 413 |[39m     })[33m;[39m
     [90m 414 |[39m   })[33m;[39m
     [90m 415 |[39m })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:412:13)

FAIL tests/trainingModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:08] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: 
      Invalid `prisma.trainingLog.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: 
      Invalid `prisma.trainingLog.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getLastTrainingDate] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getLastTrainingDate] Database error: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getLastTrainingDate] No training records found for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Getting age for horse 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Horse 10 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Getting age for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.getHorseAge] Database error: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Getting age for horse 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Horse 5 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.logTrainingSession] Logging training session for horse 5 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] error: [trainingModel.logTrainingSession] Database error: 
      Invalid `prisma.trainingLog.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Getting age for horse 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:08] info: [trainingModel.getHorseAge] Horse 5 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ logTrainingSession ‚Ä∫ should log a training session with all required fields

    Database error: 
    Invalid `prisma.trainingLog.create()` invocation:


    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

    [0m [90m 47 |[39m   } [36mcatch[39m (error) {
     [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 50 |[39m   }
     [90m 51 |[39m }
     [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:86:22)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ logTrainingSession ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error: Database connection failed"
    Received message:   "Database error:¬∑
    Invalid `prisma.trainingLog.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`"

        [0m [90m 47 |[39m   } [36mcatch[39m (error) {
         [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
        [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
         [90m    |[39m           [31m[1m^[22m[39m
         [90m 50 |[39m   }
         [90m 51 |[39m }
         [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:123:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/trainingModel.test.mjs:123:86)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getLastTrainingDate ‚Ä∫ should return the most recent training date for horse and discipline

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"trainedAt": "desc"}, "where": {"discipline": "Show Jumping", "horseId": 5}}

    Number of calls: 0

    [0m [90m 136 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getLastTrainingDate([35m5[39m[33m,[39m [32m'Show Jumping'[39m)[33m;[39m
     [90m 137 |[39m
    [31m[1m>[22m[39m[90m 138 |[39m       expect(mockTrainingLogFindFirst)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 139 |[39m         where[33m:[39m {
     [90m 140 |[39m           horseId[33m:[39m [35m5[39m[33m,[39m
     [90m 141 |[39m           discipline[33m:[39m [32m'Show Jumping'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:138:40)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getLastTrainingDate ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 173 |[39m       mockTrainingLogFindFirst[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 174 |[39m
    [31m[1m>[22m[39m[90m 175 |[39m       [36mawait[39m expect(getLastTrainingDate([35m5[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 176 |[39m     })[33m;[39m
     [90m 177 |[39m   })[33m;[39m
     [90m 178 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingModel.test.mjs:175:13)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getHorseAge ‚Ä∫ should return horse age from database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"select": {"age": true}, "where": {"id": 10}}

    Number of calls: 0

    [0m [90m 186 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getHorseAge([35m10[39m)[33m;[39m
     [90m 187 |[39m
    [31m[1m>[22m[39m[90m 188 |[39m       expect(mockHorseFindUnique)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 189 |[39m         where[33m:[39m { id[33m:[39m [35m10[39m }[33m,[39m
     [90m 190 |[39m         select[33m:[39m { age[33m:[39m [36mtrue[39m }[33m,[39m
     [90m 191 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:188:35)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getHorseAge ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 212 |[39m       mockHorseFindUnique[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 213 |[39m
    [31m[1m>[22m[39m[90m 214 |[39m       [36mawait[39m expect(getHorseAge([35m5[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 215 |[39m     })[33m;[39m
     [90m 216 |[39m   })[33m;[39m
     [90m 217 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingModel.test.mjs:214:13)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ Integration scenarios ‚Ä∫ should handle multiple training sessions for same horse different disciplines

    Database error: 
    Invalid `prisma.trainingLog.create()` invocation:


    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

    [0m [90m 47 |[39m   } [36mcatch[39m (error) {
     [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 50 |[39m   }
     [90m 51 |[39m }
     [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:228:7)

  ‚óè üèãÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ Integration scenarios ‚Ä∫ should validate horse age before allowing training

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: null

    [0m [90m 237 |[39m
     [90m 238 |[39m       [36mconst[39m age [33m=[39m [36mawait[39m getHorseAge([35m5[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 239 |[39m       expect(age)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 240 |[39m
     [90m 241 |[39m       [90m// In the actual training logic, this would prevent training[39m
     [90m 242 |[39m       [90m// since horse is under 3 years old[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:239:19)

FAIL models/userModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:09] error: [createUser] Error: Username, email, and password are required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [createUser] Error: Username, email, and password are required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [createUser] Error: Username, email, and password are required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserById] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserById] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserByEmail] Error: Email required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserByEmail] Error: Email required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserWithHorses] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [updateUser] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [deleteUser] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [addXpToUser] Error: XP amount must be a positive number.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [addXpToUser] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:09] error: [getUserById] Error: User ID is required.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should create a user successfully

    TypeError: mockPrisma.user.create.mockResolvedValue is not a function

    [0m [90m 122 |[39m       }[33m;[39m
     [90m 123 |[39m
    [31m[1m>[22m[39m[90m 124 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockResolvedValue(mockCreatedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 125 |[39m
     [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m createUser(baseUserData)[33m;[39m
     [90m 127 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:124:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw error on unique constraint violation for username

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 154 |[39m     it([32m'should throw error on unique constraint violation for username'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 155 |[39m       [36mconst[39m dbError [33m=[39m { code[33m:[39m [32m'P2002'[39m[33m,[39m meta[33m:[39m { target[33m:[39m [[32m'username'[39m] } }[33m;[39m
    [31m[1m>[22m[39m[90m 156 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 157 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow([32m'Duplicate value for username.'[39m)[33m;[39m
     [90m 158 |[39m     })[33m;[39m
     [90m 159 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:156:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw error on unique constraint violation for email

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 160 |[39m     it([32m'should throw error on unique constraint violation for email'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 161 |[39m       [36mconst[39m dbError [33m=[39m { code[33m:[39m [32m'P2002'[39m[33m,[39m meta[33m:[39m { target[33m:[39m [[32m'email'[39m] } }[33m;[39m
    [31m[1m>[22m[39m[90m 162 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 163 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow([32m'Duplicate value for email.'[39m)[33m;[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:162:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw DatabaseError for other Prisma errors

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 166 |[39m     it([32m'should throw DatabaseError for other Prisma errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 167 |[39m       [36mconst[39m dbError [33m=[39m [36mnew[39m [33mError[39m([32m'Some other DB error'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 168 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 169 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow(
     [90m 170 |[39m         [36mnew[39m [33mDatabaseError[39m([32m'Create user failed: Some other DB error'[39m)[33m,[39m
     [90m 171 |[39m       )[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:168:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserById ‚Ä∫ should return user if found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 175 |[39m     it([32m'should return user if found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 176 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m[33m,[39m email[33m:[39m [32m'test@example.com'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 177 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 178 |[39m
     [90m 179 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserById([35m1[39m)[33m;[39m
     [90m 180 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({ where[33m:[39m { id[33m:[39m [35m1[39m } })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:177:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserById ‚Ä∫ should return null if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 183 |[39m
     [90m 184 |[39m     it([32m'should return null if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 185 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 186 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m getUserById([35m99[39m)[33m;[39m
     [90m 187 |[39m       expect(user)[33m.[39mtoBeNull()[33m;[39m
     [90m 188 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:185:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserByEmail ‚Ä∫ should return user by email (case insensitive)

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 197 |[39m     it([32m'should return user by email (case insensitive)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 198 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m email[33m:[39m [32m'test@example.com'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 199 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 200 |[39m
     [90m 201 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m getUserByEmail([32m'TEST@EXAMPLE.COM'[39m)[33m;[39m
     [90m 202 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:199:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserWithHorses ‚Ä∫ should return user with horses if found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 215 |[39m     it([32m'should return user with horses if found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 216 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m horses[33m:[39m [{ id[33m:[39m [35m101[39m[33m,[39m name[33m:[39m [32m'Spirit'[39m }] }[33m;[39m
    [31m[1m>[22m[39m[90m 217 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 218 |[39m
     [90m 219 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserWithHorses([35m1[39m)[33m;[39m
     [90m 220 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:217:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should update user successfully

    TypeError: mockPrisma.user.update.mockResolvedValue is not a function

    [0m [90m 235 |[39m     it([32m'should update user successfully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 236 |[39m       [36mconst[39m mockUpdatedUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m[33m,[39m [33m...[39mupdateData }[33m;[39m
    [31m[1m>[22m[39m[90m 237 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(mockUpdatedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 238 |[39m
     [90m 239 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m updateUser([35m1[39m[33m,[39m updateData)[33m;[39m
     [90m 240 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:237:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should handle Prisma update errors (user not found)

    TypeError: mockPrisma.user.update.mockRejectedValue is not a function

    [0m [90m 253 |[39m     it([32m'should handle Prisma update errors (user not found)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 254 |[39m       [36mconst[39m prismaError [33m=[39m { code[33m:[39m [32m'P2025'[39m[33m,[39m message[33m:[39m [32m'Record to update not found.'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 255 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 256 |[39m
     [90m 257 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m updateUser([35m1[39m[33m,[39m updateData)[33m;[39m
     [90m 258 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m [90m// Returns null when user not found[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:255:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should handle general update errors

    TypeError: mockPrisma.user.update.mockRejectedValue is not a function

    [0m [90m 261 |[39m     it([32m'should handle general update errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 262 |[39m       [36mconst[39m prismaError [33m=[39m { message[33m:[39m [32m'Some other update error'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 263 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 264 |[39m
     [90m 265 |[39m       [36mawait[39m expect(updateUser([35m1[39m[33m,[39m updateData))[33m.[39mrejects[33m.[39mtoThrow(
     [90m 266 |[39m         [36mnew[39m [33mDatabaseError[39m([32m'Update failed: Some other update error'[39m)[33m,[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:263:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ deleteUser ‚Ä∫ should delete user successfully

    TypeError: mockPrisma.user.delete.mockResolvedValue is not a function

    [0m [90m 272 |[39m     it([32m'should delete user successfully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 273 |[39m       [36mconst[39m deletedUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 274 |[39m       mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m[33m.[39mmockResolvedValue(deletedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 275 |[39m
     [90m 276 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m deleteUser([35m1[39m)[33m;[39m
     [90m 277 |[39m       expect(mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m)[33m.[39mtoHaveBeenCalledWith({ where[33m:[39m { id[33m:[39m [35m1[39m } })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:274:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ deleteUser ‚Ä∫ should handle Prisma delete errors (user not found)

    TypeError: mockPrisma.user.delete.mockRejectedValue is not a function

    [0m [90m 285 |[39m     it([32m'should handle Prisma delete errors (user not found)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 286 |[39m       [36mconst[39m prismaError [33m=[39m { code[33m:[39m [32m'P2025'[39m[33m,[39m message[33m:[39m [32m'Record to delete not found.'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 287 |[39m       mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 288 |[39m
     [90m 289 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m deleteUser([35m99[39m)[33m;[39m
     [90m 290 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m [90m// Returns null when user not found[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:287:30)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should add XP without leveling up

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     it([32m'should add XP without leveling up'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 298 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(baseUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 299 |[39m       [36mconst[39m updatedUser [33m=[39m { [33m...[39mbaseUser[33m,[39m xp[33m:[39m [35m70[39m[33m,[39m level[33m:[39m [35m1[39m }[33m;[39m
     [90m 300 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(updatedUser)[33m;[39m
     [90m 301 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:298:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should add XP and level up

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 313 |[39m
     [90m 314 |[39m     it([32m'should add XP and level up'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 315 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(baseUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 316 |[39m       [36mconst[39m updatedUser [33m=[39m { [33m...[39mbaseUser[33m,[39m xp[33m:[39m [35m200[39m[33m,[39m level[33m:[39m [35m2[39m }[33m;[39m
     [90m 317 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(updatedUser)[33m;[39m
     [90m 318 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:315:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error for invalid XP amount

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 337 |[39m         })[33m,[39m
     [90m 338 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 339 |[39m       expect(mockLogger[33m.[39merror)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 340 |[39m         expect[33m.[39mstringContaining([32m'Error: XP amount must be a positive number.'[39m)[33m,[39m
     [90m 341 |[39m       )[33m;[39m
     [90m 342 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:339:32)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error for invalid user ID

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 350 |[39m         })[33m,[39m
     [90m 351 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 352 |[39m       expect(mockLogger[33m.[39merror)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mstringContaining([32m'Error: User ID is required.'[39m))[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 353 |[39m     })[33m;[39m
     [90m 354 |[39m
     [90m 355 |[39m     it([32m'should return error if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (models/userModel.test.mjs:352:32)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 354 |[39m
     [90m 355 |[39m     it([32m'should return error if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 356 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 357 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m addXpToUser([35m99[39m[33m,[39m [35m20[39m)[33m;[39m
     [90m 358 |[39m       expect(result)[33m.[39mtoEqual(
     [90m 359 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (models/userModel.test.mjs:356:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserProgress ‚Ä∫ should return user progress

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 369 |[39m     it([32m'should return user progress'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 370 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m level[33m:[39m [35m1[39m[33m,[39m xp[33m:[39m [35m50[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 371 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 372 |[39m
     [90m 373 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserProgress([35m1[39m)[33m;[39m
     [90m 374 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:371:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserProgress ‚Ä∫ should throw DatabaseError if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 389 |[39m
     [90m 390 |[39m     it([32m'should throw DatabaseError if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 391 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 392 |[39m       [36mawait[39m expect(getUserProgress([35m99[39m))[33m.[39mrejects[33m.[39mtoThrow([36mnew[39m [33mDatabaseError[39m([32m'Progress fetch failed: User not found.'[39m))[33m;[39m
     [90m 393 |[39m     })[33m;[39m
     [90m 394 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:391:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should return user stats with horses

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 409 |[39m       }[33m;[39m
     [90m 410 |[39m
    [31m[1m>[22m[39m[90m 411 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 412 |[39m
     [90m 413 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m1[39m)[33m;[39m
     [90m 414 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:411:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should handle user with no horses

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 442 |[39m       }[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 445 |[39m
     [90m 446 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m2[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:444:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should handle user with null horses array

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 468 |[39m       }[33m;[39m
     [90m 469 |[39m
    [31m[1m>[22m[39m[90m 470 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 471 |[39m
     [90m 472 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m3[39m)[33m;[39m
     [90m 473 |[39m       expect(result)[33m.[39mtoEqual([0m

      at Object.<anonymous> (models/userModel.test.mjs:470:34)

  ‚óè üë§ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should return null for non-existent user

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 480 |[39m
     [90m 481 |[39m     it([32m'should return null for non-existent user'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 482 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 483 |[39m
     [90m 484 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m999[39m)[33m;[39m
     [90m 485 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:482:34)

PASS __tests__/integration/csrf-integration.test.mjs (11.701 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:11] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:11] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:11] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:11] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:11] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006191953@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=18c4601462ab8d2166503280ec025441d7d475e7cc1ed0f02c2a38609b84d236

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:12] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006192658@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=78cf9966d7e8044c67a3415a4cd5c1f30b5d546f7434d5054e40bc40fe9c5cb2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006193199@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b252fab9e355b2bdb36253b8e340dc5d6fd3b56d7300179b1b58c7f813ad708f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:13] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006193772@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0dbe58037b4f77674e1316c44212debb7a4ed60490b3ea1cb747c1afa1801e21

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [PUT] /api/users/f5cc0956-860e-4ddd-b201-64467167be6b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [auth] Authenticated user f5cc0956-860e-4ddd-b201-64467167be6b for PUT /users/f5cc0956-860e-4ddd-b201-64467167be6b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [PUT] /api/users/f5cc0956-860e-4ddd-b201-64467167be6b - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006194320@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9fb277ff559c0d88c6b57e57ea6501d3cc70296d899967c62ca949abc6dccbe9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:14] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [PUT] /api/users/1c18567b-aa8e-428b-9e52-1d586a5ab1cf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [auth] Authenticated user 1c18567b-aa8e-428b-9e52-1d586a5ab1cf for PUT /users/1c18567b-aa8e-428b-9e52-1d586a5ab1cf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [PUT] /api/users/1c18567b-aa8e-428b-9e52-1d586a5ab1cf - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:14] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006194915@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7e561f1d20831d4df39e42ae32ed3d4fe3633f06dbba9d17a4f2b8e1d8c28137

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [DELETE] /api/users/519187f7-761b-4f5d-bd22-c2611fbc09cb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [auth] Authenticated user 519187f7-761b-4f5d-bd22-c2611fbc09cb for DELETE /users/519187f7-761b-4f5d-bd22-c2611fbc09cb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [DELETE] /api/users/519187f7-761b-4f5d-bd22-c2611fbc09cb - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006195528@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=72daeec7b790f181b5483737b2030dd763e71b3983174b8575700613f839ed3f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:15] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [PATCH] /api/users/34fca934-d857-4482-9caa-e8409bbbeed1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [auth] Authenticated user 34fca934-d857-4482-9caa-e8409bbbeed1 for PATCH /users/34fca934-d857-4482-9caa-e8409bbbeed1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [PATCH] /api/users/34fca934-d857-4482-9caa-e8409bbbeed1 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006196105@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c01f51065a9d1166a232be9a4bd37d0732d4471954b40d470dfa0c35534d9001

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [GET] /api/users/66441c4f-757e-4a3e-898a-d6763072110b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [auth] Authenticated user 66441c4f-757e-4a3e-898a-d6763072110b for GET /users/66441c4f-757e-4a3e-898a-d6763072110b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [auth] Authenticated user 66441c4f-757e-4a3e-898a-d6763072110b for GET /66441c4f-757e-4a3e-898a-d6763072110b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [userRoutes] Self-access validated: user 66441c4f-757e-4a3e-898a-d6763072110b accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [userController.getUser] Getting user 66441c4f-757e-4a3e-898a-d6763072110b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [GET] /api/users/66441c4f-757e-4a3e-898a-d6763072110b - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006196524@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2b56fa9edb1c2a03e18b783605de992b21ce2344dabab0c20a41fdcb674df052

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [HEAD] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [HEAD] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:16] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006196896@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a85550783b354cbde06cb6f3720b9bfc6ff6310c3c07637ab2a05ff05b67b591

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006197243@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ce18d2046371848019c7bba9d310d31309c6fb7e82b4d4828b08f19712e672aa

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /api/users/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [auth] Authenticated user 5cc1c1b0-a5fb-41bb-8ece-d5c2486f145e for POST /users/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /api/users/me - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006197597@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8151d91f3c8eb9eb17838601d337c5bbbdc32d191776901656f53d7a87cae08c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [PUT] /api/users/85afd11a-896e-45f7-83f4-5e55b139acf0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [auth] Authenticated user 85afd11a-896e-45f7-83f4-5e55b139acf0 for PUT /users/85afd11a-896e-45f7-83f4-5e55b139acf0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [PUT] /api/users/85afd11a-896e-45f7-83f4-5e55b139acf0 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:17] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006197976@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6dba05622f48e10f1bf93674858711e14ca57de46ff98fed73f87289954ce741

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [DELETE] /api/users/d97c1198-2139-436a-97fa-f0a70d20f109

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [auth] Authenticated user d97c1198-2139-436a-97fa-f0a70d20f109 for DELETE /users/d97c1198-2139-436a-97fa-f0a70d20f109

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [DELETE] /api/users/d97c1198-2139-436a-97fa-f0a70d20f109 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006198363@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=cad8fa0f1d569722fafb9c1b9ce79d9b208ea34bb8a4a49a56a54677e8f1da70

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [PUT] /api/users/5dfe4bb9-b9cc-462b-a3d5-8a96472ac763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [auth] Authenticated user 5dfe4bb9-b9cc-462b-a3d5-8a96472ac763 for PUT /users/5dfe4bb9-b9cc-462b-a3d5-8a96472ac763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [auth] Authenticated user 5dfe4bb9-b9cc-462b-a3d5-8a96472ac763 for PUT /5dfe4bb9-b9cc-462b-a3d5-8a96472ac763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [userRoutes] Self-access validated: user 5dfe4bb9-b9cc-462b-a3d5-8a96472ac763 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [userController.updateUser] Updating user 5dfe4bb9-b9cc-462b-a3d5-8a96472ac763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [PUT] /api/users/5dfe4bb9-b9cc-462b-a3d5-8a96472ac763 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:18] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006198804@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f5d04e7e156c573f8f62691ba28f014aac4114b05e0c3681f958e4011dcaa27e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006199215@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=322a99fa820f079732fccfdfd0311dbb620aa98a669f7407475c907241f570f2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /api/users/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [auth] Authenticated user f807c709-e891-41eb-9979-7c3e54c4cae3 for POST /users/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /api/users/me - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006199604@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b08881e7241c48a1e1b6c39dfbd9b41e21bc0916daa589d3b0edbbc9474db1ef

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:19] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:19] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006199999@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6c882d536c5059ae41457a60024b9c8b85c57eb33f5735440ddec5e949db2fb3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:20] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:20] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006200688@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f7f9244a8b48cf18d6c3e576a6fd741476e4cb8841e89fc46e28e96d113624ab

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser1767006201058@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7d515b671ffee8e441d1840afb26d6bba734d3889950afeac120caa20ad912e2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: csrftest1767006201402@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7d74f1393deb093c3aaf845091022e600fc27cef6614a6f3f13951b150ead1b2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:21] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/forgot-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] warn: 404 - Route not found: POST /auth/forgot-password from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:21] info: [POST] /auth/forgot-password - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomPersonalityTraitBonus.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:03:22] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:22] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:22] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Reserved + Playful = MISMATCH (bond: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Energetic + Lazy = MATCH (bond: 45)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 70)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 4.5 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 95384, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 3.0 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem] Applied personality effects: Calm + Spirited = 2 modifier

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 95384: reactive (score: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 95385, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 95385: withdrawn (score: -2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/47285/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user 85172fd9-dcac-4bb5-9d18-aa16efe51760 for GET /grooms/47285/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [ownership] Validated ownership: user 85172fd9-dcac-4bb5-9d18-aa16efe51760 owns groom 47285

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomController.getGroomProfile] Retrieved profile for groom 47285

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/47285/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/99999/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user f26e730e-e6e4-4a9f-9f7c-cd41ec115e3d for GET /grooms/99999/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] warn: [ownership] groom 99999 not found or not owned by user f26e730e-e6e4-4a9f-9f7c-cd41ec115e3d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/99999/profile - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/invalid/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user 78b7430b-0bd8-44eb-b360-8918a3bd355e for GET /grooms/invalid/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] warn: [ownership] Invalid groom ID: invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/grooms/invalid/profile - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/95391/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user c247e271-6aa6-4293-9f4c-fb823d1e9ccc for GET /horses/95391/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [ownership] Validated ownership: user c247e271-6aa6-4293-9f4c-fb823d1e9ccc owns horse 95391

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:03:23] info: [horseController.getHorsePersonalityImpact] Retrieved personality compatibility for horse 95391 (Spirited)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/95391/personality-impact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/99999/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user 9c8d3c77-86db-4e76-abb4-cc8ef37161a7 for GET /horses/99999/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] warn: [ownership] horse 99999 not found or not owned by user 9c8d3c77-86db-4e76-abb4-cc8ef37161a7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/99999/personality-impact - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/95394/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user 2e000279-3230-4fcd-8085-e4fed7c2d0be for GET /horses/95394/personality-impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [ownership] Validated ownership: user 2e000279-3230-4fcd-8085-e4fed7c2d0be owns horse 95394

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /api/horses/95394/personality-impact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /auth/csrf-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [GET] /auth/csrf-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user f6cd6766-3773-48c1-b830-544e1b955e12 for POST /milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [auth] Authenticated user f6cd6766-3773-48c1-b830-544e1b955e12 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 95395

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [ownership] Found owned horse 95395 for user f6cd6766-3773-48c1-b830-544e1b955e12

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 95395, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:23] info: [groomPersonalityTraitBonus] Compatibility: Calm + Spirited = MATCH (bond: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [personalityModifierEngine] Applied personality effects: Calm + Spirited = 2 trait modifier, 3.0 stress reduction, 10 bonding bonus

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [enhancedMilestoneEvaluationSystem] Applied personality effects: Calm + Spirited = 2 modifier

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 95395: reactive (score: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/cookieIntegration.test.mjs (6.698 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:25] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:25] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest1@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1e40623c01d36b203bcaf61e44024fb217aec83a7f3bdbdab61f3ec1702729b8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:25] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:25] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest2@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7c0b93a859da48a723c06253339b847a6d0e86949a0da394d0d1ff3ccee4f57b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest3@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c81d6c03994364cce72655eb0671d430156fc587a6a033dc383e7eebbe1faa52

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logincookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=967592b31a491941288bf3cde4e7741d28d4bcc36021b84aec0aa3a858cd73c1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:26] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:26] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logincookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=abee6de8dea2456010ee6b65f2d96956a3447e5f93b51670574dde1abb60b78f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logincookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1042504109430d93e9cc4f87defb9d07937d6660172c9e2f8334b0448f11079c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:27] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:27] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fca430c8051cdc81995bfec7360bd4c68a382bf06f67ff820677a14a652a257c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:28] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ca665c2b7d1f4ab3c408af2356767e958280dad77b1c08db74c1719558d0c00d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:28] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b155ad39f88dda0cd7f144d8c2ed6f5570bab7005384d09e61994f1cd8b87b75

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:28] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:28] info: [POST] /auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logoutcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0b938a7a4e19fbfc2ad049eab2493110da8cfcc53b52a7c323b56e90798c0f07

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logoutcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d7ba5e99f6e8ebd8d2d7f2d1d840e20a86987a150f5c0edbc996d13a6baf96d9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:29] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logoutcookietest@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ad2fcc34600da687f9e787b20e84821adb83b8e99dc3c29050edec76c9e5566e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: securitytest1@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5d0ba9c425bf2a7a29bff40a9f4d44bc78c731c55889b31916280c8aa491056f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:30] info: [POST] /auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/api-response-integration.test.mjs (8.246 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:31] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=836889e81edbae8767d4a9ab32ae22381a761690061f925da289d33aee118f22

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [auth] Authenticated user 0ee55488-d74a-4003-b40c-826847e7a38f for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a0b6a06187efcf1cb0f763d90c641337e15f13b3c1226106b426cb7c209e5ca9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:32] info: [auth] Authenticated user fbbb3b79-67a1-4155-a00b-16dce3dc1e4f for GET /api/test/error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3d65bcb979c5a3a2ba081b4d8c0409d03ef23e1f6c258b7cba6c4be3ebbdcbcf

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [auth] Authenticated user e6cdca3b-45f9-434f-bfe5-2e6bac07f68b for GET /api/test/not-found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9cbd39e8c77553d36bba17d4e21692e523c597114c6cdda001a63fee9551903e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [auth] Authenticated user 674124bc-723b-41cc-a97a-6a5b0ece5160 for GET /api/test/validation-error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=aaeb5fc26e6dccc955791bb0162d80b3bf198e0e2cc62d1f3bb7f68e2fcea452

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:33] info: [auth] Authenticated user a998c07b-6444-43d3-9950-543a6ff7b913 for GET /api/test/paginated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f29570659870b068e61ab781937b5b3e3f45c71604a27476ad6c2d070ad8b971

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:34] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [auth] Authenticated user 9ca010f7-95a2-4aea-b4fe-18aca687b8b3 for GET /api/test/paginated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=cc6d2296f4a8e102ee254aba8edbe7a8dd3096c41f7fc70a2f7d479322bb79c6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:34] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [auth] Authenticated user faf9f4b8-63eb-4184-afd9-57ca45deaf1c for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9fa9341e06865c8fcb085abb3756310052a3b9f7841fd39263213d437a0df03d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:34] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:34] info: [auth] Authenticated user 2304bfaa-d2ea-41bf-902a-3731e6027c32 for GET /api/test/large-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a14137f2b99c4693e687d9b92b527b731d11fec237e59378807e0221cb1a49a4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:35] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [auth] Authenticated user 4b209b0f-7fed-4901-925f-827393e09c14 for GET /api/test/field-selection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e83a7190f3d626a1d51acdb163ccc09d90dc0a5c3cfb309425cad28c9920021d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:35] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:35] info: [auth] Authenticated user 571e0c49-b50d-4223-a5fe-7e042a48545b for GET /api/test/field-selection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8f5c9ec27e14a7035fb413250b51f5d1be96bb38fb17fa94d6a003c0c900fa9f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:36] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [auth] Authenticated user eceddd85-4bb5-4b5b-a25f-997a30782130 for GET /api/test/etag

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [auth] Authenticated user eceddd85-4bb5-4b5b-a25f-997a30782130 for GET /api/test/etag

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7b4cb4746d248047e2e1e06bc310cd8ebd8453fb3bc63d52b201306bd88b93e5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:36] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:36] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7f5317697130bf3e348cbe62b573e8d4686c8627f68a5346f33d9ddaa7b68a5a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:37] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bd9923deac1001c4f3798ac5d1616e39f7eb9cc88820340241aad5628492910c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:37] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] warn: [auth] Access token is required for GET /api/test/success from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] warn: [auth] Access token is required for GET /api/test/error from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] warn: [auth] Access token is required for GET /api/test/large-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:37] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=50854bf301c949ba1451e51ae2e12b2284b9db77d8e9054f02e131e03e33eaa2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:37] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d48bdab0e10f813fff82792d36e13757f74bb4946abf95b7c3cce3dbbb9b6eb6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:38] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=73f3409a4185214602343298aa0b610190ca6f38fe2a3f73c1a01a0a9a344b8e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:38] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:38] info: [auth] Authenticated user b981167c-ac3a-40bd-be05-eb835b130bb3 for GET /api/test/success

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4b077c606b4968b6184319299764f222dc43953905e8c43648470a47b359206a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:39] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [auth] Authenticated user 7b3e5111-9ce8-4783-9378-20873cbe1989 for GET /api/test/large-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/auth.test.mjs (7.809 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:39] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:40] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:40] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=650d9c44e24122130bcf6ef7472f4138e0a56901e24d2e037c31f5ca0bf12d77

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [MemoryMonitoring] Memory threshold exceeded: 501MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [MemoryMonitoring] Memory threshold exceeded: 501MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: duplicate@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b9bf512029ed3c0f175e9e4420ee971fd52575a621d5b71323ab0920ad53df1f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:41] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] error: [authController.register] Error registering user: User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:41] error: [POST] /api/auth/register - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:41] error: Error User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] warn: [MemoryMonitoring] Memory threshold exceeded: 500MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3e61477e2e136c18a1f925f00c5cef6b65340ace1fd679ed5946e5848e21a7c8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:41] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:41] warn: [MemoryMonitoring] Memory threshold exceeded: 503MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=95ca2c81565ecda3248bda6813a82cf85ba82a78054925b9d267d8962bc2df13

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:42] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:42] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:42] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] warn: [MemoryMonitoring] Memory threshold exceeded: 511MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8cb5c48a137e14807239d9ba5dc8d25c0bc0524d66db797a2222adbe782bd8e5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:42] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:43] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:43] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [MemoryMonitoring] Memory threshold exceeded: 502MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logintest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bd688ed27e1bd03c0d9843c50485eb2d08ebbd7e021e138b051a44e673457503

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:43] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [MemoryMonitoring] Memory threshold exceeded: 505MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/login - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:43] warn: [MemoryMonitoring] Memory threshold exceeded: 503MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=30368c6eb450e59b0f7acb5d0c7881407967a0e5d9f691decdcb544d929af033

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:44] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/refresh - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6e2439c6506ac516b805634988629e368845af82898dcb683f6372f1696bd0ba

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:44] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:44] error: [POST] /api/auth/refresh - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:44] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/refresh - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [MemoryMonitoring] Memory threshold exceeded: 513MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: refreshtest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1e96a3a644da740a09223be60d4edb16033d6f7676a0ca576ef8d395f7c13af6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:44] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] info: [POST] /api/auth/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:44] warn: [MemoryMonitoring] Memory threshold exceeded: 502MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=eb74f51cd2323875634fc0c942141d6d38b13f834589d0740ec5a160476ff774

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:45] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [MemoryMonitoring] Memory threshold exceeded: 502MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [auth] Authenticated user ff55913f-ef09-49de-9f38-20c07e736ac5 for GET /me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [GET] /api/auth/me - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [MemoryMonitoring] Memory threshold exceeded: 505MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=476af6a95d938797e5f0ff89d03d9bb7c593444e48e3353cf51365ff91b9728f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:45] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [MemoryMonitoring] Memory threshold exceeded: 508MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [auth] Access token is required for GET /me from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [GET] /api/auth/me - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:45] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: profiletest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3fff444106fd14d0cec055c8e0a2d3b4bd4e11a592d55770459abc80262c4011

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [GET] /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [MemoryMonitoring] Memory threshold exceeded: 513MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [auth] Invalid or expired token for GET /me from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [GET] /api/auth/me - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logouttest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7eb2f0989b96738329fec211923e2b9875e42ddf40119c8adc41686e16e1cb7c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [MemoryMonitoring] Memory threshold exceeded: 516MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [auth] Authenticated user 8d3f3a2f-8858-4e8c-931a-59dbbf88768f for POST /logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] warn: [MemoryMonitoring] Memory threshold exceeded: 515MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: logouttest@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9ac11e634510476437d869dd99f639faaff81647f35f37eacfd27f4a009fe03b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:46] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] warn: [MemoryMonitoring] Memory threshold exceeded: 516MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] warn: [auth] Access token is required for POST /logout from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/email-verification.test.mjs (7.098 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:48] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:48] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser_1767006228558@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c1f45483a839649a620989e6e9ce99aa6b52e5e343e14d8122f9b7363d37b3d8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:48] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:48] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser2_1767006229083@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9c8e10a9576b39475be0e3e9a81a31f7be9d496f8abaa75f796e13954a8cebfc

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:49] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: devuser_1767006229542@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=db192267c05df385d48f920ef2e16c2a9a610317e416fc675262bb697343d299

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:49] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [GET] /auth/verify-email?token=26b65e8f1889e6067cab18adf5920d4bc4e4943e890d871a6c7be114231f8cca

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:49] info: [GET] /auth/verify-email?token=26b65e8f1889e6067cab18adf5920d4bc4e4943e890d871a6c7be114231f8cca - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=8b3955d864d09711b5ca374d0c9db5956ade6b0a02c2a39af41bb44574aa8f03

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=8b3955d864d09711b5ca374d0c9db5956ade6b0a02c2a39af41bb44574aa8f03 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=04b2caa9bdf1455d9cce430ed5efe7f0ad7078e7dfb8873e607e542921c3de92

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=04b2caa9bdf1455d9cce430ed5efe7f0ad7078e7dfb8873e607e542921c3de92 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: [GET] /auth/verify-email - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=invalid_token_here

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: [GET] /auth/verify-email?token=invalid_token_here - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=invalid_token_here - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=0bf7c32dea338a97049e4afab3b054fcedd54f1b0ff7d0bcb3134819a7219ab4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] error: [authController.verifyEmail] Error verifying email: Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: [GET] /auth/verify-email?token=0bf7c32dea338a97049e4afab3b054fcedd54f1b0ff7d0bcb3134819a7219ab4 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: Error Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=0bf7c32dea338a97049e4afab3b054fcedd54f1b0ff7d0bcb3134819a7219ab4 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=e8ec2c5ec3a992be581f5b027d472deb5972d1504a817adc6d405bc1067a47b0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=e8ec2c5ec3a992be581f5b027d472deb5972d1504a817adc6d405bc1067a47b0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=e8ec2c5ec3a992be581f5b027d472deb5972d1504a817adc6d405bc1067a47b0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: [GET] /auth/verify-email?token=e8ec2c5ec3a992be581f5b027d472deb5972d1504a817adc6d405bc1067a47b0 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=e8ec2c5ec3a992be581f5b027d472deb5972d1504a817adc6d405bc1067a47b0 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:50] info: [GET] /auth/verify-email?token=d8f6451db6130c8c0206e330c0e62a910c52b41b9dc75e07d5a5b0ea66e07ea5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [GET] /auth/verify-email?token=d8f6451db6130c8c0206e330c0e62a910c52b41b9dc75e07d5a5b0ea66e07ea5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user 4596270e-52b7-4e24-ab15-e9bf583107fc for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1767006231031@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f843b7c917e8d43a91e41751e54f93d31196d66edcb961c1e26900188a618261

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] warn: [auth] Access token is required for POST /resend-verification from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user 2e970ef9-25e2-45f3-bed8-d42904dd7959 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: [authController.resendVerification] Error resending verification: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: [POST] /auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: Error Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user 575c3492-00e7-4ff9-9e58-9f669e8de555 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1767006231415@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9082284131cb6dd11cb9c6a59abf1d93c47bded24a09f72bb30b30a2bf656357

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user 575c3492-00e7-4ff9-9e58-9f669e8de555 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: [POST] /auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] error: Error Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user c6a302cd-c2a4-4cb2-95ab-2319624b06bb for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1767006231586@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=465fc78911f533503ee5e529c5654521d798d4add44fc73d64a22d76ba46453d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:51] info: [POST] /auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user a31a8455-22a0-4c22-b7fa-d84947724c95 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [GET] /auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [auth] Authenticated user a72e539e-d3d0-4e06-803f-11d28f777f03 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:51] info: [GET] /auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] warn: [auth] Access token is required for GET /verification-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [auth] Authenticated user 2da02685-0bde-4b66-be89-f12e6b58f870 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [POST] /auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: workflow_1767006232300@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6f238f010bb212e7d9ca0a7260c014e5a22eee973a6aaf5ce1c330ca9326267e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:52] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [POST] /auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verify-email?token=6f238f010bb212e7d9ca0a7260c014e5a22eee973a6aaf5ce1c330ca9326267e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verify-email?token=6f238f010bb212e7d9ca0a7260c014e5a22eee973a6aaf5ce1c330ca9326267e - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [auth] Authenticated user 4860c051-f7d9-4180-825f-7e96c18f1542 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [POST] /auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [auth] Authenticated user 4860c051-f7d9-4180-825f-7e96c18f1542 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1767006232709@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a86cb51e800c8197c4e0b82e29eacef99ad768801fb0d0ad745c96d442dba998

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:52] info: [POST] /auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verify-email?token=a86cb51e800c8197c4e0b82e29eacef99ad768801fb0d0ad745c96d442dba998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verify-email?token=a86cb51e800c8197c4e0b82e29eacef99ad768801fb0d0ad745c96d442dba998 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [auth] Authenticated user 4860c051-f7d9-4180-825f-7e96c18f1542 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:52] info: [GET] /auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=ebb250ec393ad03730c76895b2d44f2390f44c27c77a5ae841ac982823582c69 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=4c5fdec23f850332a98dbdffc6bf718244c243e2e6601c3ed71eb80ad3cba569

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=4c5fdec23f850332a98dbdffc6bf718244c243e2e6601c3ed71eb80ad3cba569

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=4c5fdec23f850332a98dbdffc6bf718244c243e2e6601c3ed71eb80ad3cba569 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token=4c5fdec23f850332a98dbdffc6bf718244c243e2e6601c3ed71eb80ad3cba569 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=4c5fdec23f850332a98dbdffc6bf718244c243e2e6601c3ed71eb80ad3cba569 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=definitely_invalid_token_123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token=definitely_invalid_token_123 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=definitely_invalid_token_123 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:53] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: [GET] /auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: [GET] /auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:03:54] info: [GET] /auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/health-monitoring-integration.test.mjs (7.223 s)
  ‚óè Console

    console.log
      [2025-12-29 06:03:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:03:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:03:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:55] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:55] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=be522c9a253cf3ba4f57bd13de47c9784bc5464730adeb62fcaea1249df2d686

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:55] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=711832398607991b52c8eddae53760d1f5386c7bb6967ee010bea6709f4df86f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:56] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=13fb4e964e02c3f69f4e92d98b50c7e2fd092547d1695e5e1c446acf4c243620

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:56] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:56] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=909f292601881e6d0334484ad1a36fa6f06c24f5ab1654a61735dc2807e2aeaf

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=acb77e21f8ef86a7e66e451d9fd352b5a2f6a029946d2b45acc47ffcc7d4ece3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [auth] Authenticated user 9e1e75e9-3c29-43a7-a209-fbf56d91f32d for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5281f5be10ee713817cdfbb7c0fd56f52c5ce6368da1210b181fbea47017bbf8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:57] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [auth] Authenticated user 18da32f0-64dd-41d7-a571-1232f47bce76 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:57] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=044c6572b1476a9b9cf622345c46e08657e1783294066048584674e2ee13954a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [auth] Authenticated user 3351481b-76ee-4a38-b376-fda841420397 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=38b0b623ad53907b0c5ebc5bd715f02ac97ef8346f07e21f3827ede8676670b7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [UserDocService] Loaded 1 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [UserDocService] Built search index with 34 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e2a7e0c8912d25e074c4558212d3b2a3f8ec31e870dc9ea8ca7a642848b87ce5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=fa0016848252e84b1bab23203ac886cfd6bbe875269b73dfac182f08d222328c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:59] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [auth] Authenticated user 4a256e20-fddd-4729-9b63-9150b895cb34 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [auth] Authenticated user 4a256e20-fddd-4729-9b63-9150b895cb34 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7053b7d6511f8a455fbd92dbcfd130d79ed79540c15b4159ddd8f0c772698d56

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:03:59] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [auth] Authenticated user e6bdc2b1-daec-431c-ae3e-3f6157405a77 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:03:59] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=96dad90b01d58081307299e5ebf3bbbdc5c51e8fb046d3cb20442a38308a0383

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1758a0d100cf21b8487eb09c13eb831303698c32c579ae381134f55a910f67e8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=039d0a6df948da122b5bf6f791813e37abadd8f4b3d0e5d872c8f73bc551013e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:00] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] warn: [auth] Access token is required for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] warn: [auth] Access token is required for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:00] warn: [auth] Access token is required for GET /api/test/health-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ccef83a0c1e363fec0cfe52c0bd448c6f3a3e16bd4516367005dbc7c93431e99

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7bb22e40b3dab61a6e87be3d7b87a90ce21d07aa72842205d9213d4a960ca7ae

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [auth] Authenticated user e45d6e7d-1895-435a-ad34-a9d2ae70f809 for GET /api/test/health-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: healthintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6bfea472f1a2dc737ba87da338f652e90fed0dc9794cfbbd8399aff60356b25b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:01] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] warn: [auth] Invalid or expired token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:01] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/rate-limiting.test.mjs (5.185 s)
  ‚óè Console

    console.log
      [2025-12-29 06:04:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:02] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:02] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:03] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: [POST] /api/auth/login - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] error: Error Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/register - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/register - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:04] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:06] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] warn: [RateLimit] Limit exceeded

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [POST] /api/auth/login - 429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/auth-working.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:07] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:08] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-register@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=06049e189681ddc91de94622344c3e15bb213b4be196d58fc2dfc47cea392aa8

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:08] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-duplicate@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5a9f4455aec14d1fcc517943240bceb809bb45faa4c3fecb24fc640c71f6c607

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:08] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:08] error: [authController.register] Error registering user: User with this email or username already exists

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:09] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-login@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e2352b421524bb2ff094ae90de28798b0e954aab61c470e9f2de780096cf7864

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:09] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-login@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4c2b7bf7f8d1025278ef6f5e8408a5e8dda91bdf3134debe80fc3f5fd250cf78

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:09] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:09] error: [authController.login] Error logging in user: Invalid credentials

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-token@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9e1163fc9b567ac6345c79f233311ddae1839ebcdeb45144557d7b42f421f467

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-token@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3336a56b21eed19baeb1da1acbe50f15099b6984b56ba664993592f8a0dde4a3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0e74295abef164f38afd4fc79ff4d91aa49201d172b40195ec66fb5c9dbd78ea

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:10] info: [auth] Authenticated user 48ba7c3d-317b-4961-b19e-f8667352a261 for GET /api/auth/me

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bef7368ae87172a91107de7fdf38fa3d79c874c718c12c351e85170db5640603

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] warn: [auth] Access token is required for GET /api/auth/me from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authtest-protected@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b75795604dd6fbe6fc1d8aa0e83998ece0f9f390f59ec23b542c716580fbcf4a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:11] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [auth] Authenticated user b11646f0-98e2-4d58-b03c-177de6302a55 for POST /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/memory-management-integration.test.mjs (6.731 s)
  ‚óè Console

    console.log
      [2025-12-29 06:04:11] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:11] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=dacac7de0eb3159c205c3a7c787428936f72a19227058aeca65677a0d078d71d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [auth] Authenticated user 5737e574-9566-4739-951d-f2be7124c2ce for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:12] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8b999bad25c58facb9cdb2b162bf979c2fc287219942309af3f229259907811b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [auth] Authenticated user f5f0e53d-4908-4ac9-87c1-604e916f5d1f for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6151339e0418f59612fa255f0a957f7a96fdb4d02a220432a835d9823dd0c4d6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:13] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [auth] Authenticated user 7d6b63e2-599b-442d-ad38-408a2d80d682 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:13] info: [auth] Authenticated user 7d6b63e2-599b-442d-ad38-408a2d80d682 for POST /api/test/memory-load

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:14] info: [auth] Authenticated user 7d6b63e2-599b-442d-ad38-408a2d80d682 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:14] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:14] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:14] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3bc04bfbc5fcb4d0ba36924ff34335c731c1053596551a3a2e00bcb8701734da

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [auth] Authenticated user c2e99c00-b5c2-4e17-960d-0952cf8998f9 for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [auth] Authenticated user c2e99c00-b5c2-4e17-960d-0952cf8998f9 for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManagement] Resource cleanup requested for: all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [auth] Authenticated user c2e99c00-b5c2-4e17-960d-0952cf8998f9 for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=862ec9238a0c2f896709e0e6e18369281da43aa2a1ec06abfaf1b523610ea263

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [auth] Authenticated user 81586a3f-098b-4f6f-8346-c7c5e12f7f31 for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=97c7e69b35e1cc4bbb79f3e61aea0ddc4e5ebe68df4ce057470ee613eeed6036

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [auth] Authenticated user c79fab37-fd9d-4acb-8bbc-2eb112110d0f for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:15] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=30d4d1265060a60744b71bdd4523d57afe5e813c56f844e95ebc5880f359a446

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [auth] Authenticated user 8463a68a-8df1-4dba-9d76-fa6097354a4b for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManagement] Manual GC trigger requested (force: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=7ced1887326f6b2afd85814d1c47dafab575b8c34018c5ec8415558b3ee5c5b5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [auth] Authenticated user a4dfda13-d357-4c8f-8c9b-9221d7ce9660 for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b70b43a72bd62486f50e15fbccfe08c71dc6ae776f1f2d90594aaa07d416ee1e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:16] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [auth] Authenticated user 9e859225-4fd3-466a-87bb-584a9cba24d5 for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:16] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d1481fdf114f77c6bf3a6c5b77e15d6feb435bff645d64877e67ecbfd6da8da9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] warn: [auth] Access token is required for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] warn: [auth] Access token is required for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] warn: [auth] Access token is required for GET /resources from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] warn: [auth] Access token is required for GET /alerts from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b68f34d2eeef6fdcc7b84957e1a13bc711f97d51045d575f4a61e7cb0c1c0f28

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:17] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [auth] Authenticated user fc6f6b76-6a57-46a2-87d2-d2aea0cafc1c for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:17] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=2abba603f99ce0163387134b09bec91a10dad872107ffbf9708d3bf8cd71228c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: memoryintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5731187f505dea731c5bc8c9efcdfefef44f327c9937e9d97f4df50380fa8a42

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:18] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/token-rotation.test.mjs (5.198 s)
  ‚óè Console

    console.log
      [2025-12-29 06:04:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:19] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:19] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] warn: [MemoryMonitoring] Memory threshold exceeded: 573MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] warn: [MemoryMonitoring] Memory threshold exceeded: 573MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] warn: [MemoryMonitoring] Memory threshold exceeded: 574MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] warn: [MemoryMonitoring] Memory threshold exceeded: 572MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] warn: [MemoryMonitoring] Memory threshold exceeded: 568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:19] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 568MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 580MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 575MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 569MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 581MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 577MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 570MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:20] warn: [MemoryMonitoring] Memory threshold exceeded: 573MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 570MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:21] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:21] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 583MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 581MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 577MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 571MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 580MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 581MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] warn: [MemoryMonitoring] Memory threshold exceeded: 576MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:21] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 574MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 585MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 581MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 575MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 576MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 578MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:22] warn: [MemoryMonitoring] Memory threshold exceeded: 576MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 578MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:23] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:23] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/cleanup-tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 580MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: 404 - Route not found: POST /api/auth/cleanup-tokens from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/cleanup-tokens - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 583MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 579MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 577MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 587MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] warn: [MemoryMonitoring] Memory threshold exceeded: 582MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:23] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/systemWideIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:24] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:24] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:24] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: integration1767006265016@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e12c31c838b7f207fe2893d836cd9d3dc0e262eccbf0dfb2f6eda250ae856cb6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:25] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 628MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocService] Loaded 1 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocService] Built search index with 34 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 622MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 620MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 061e9b92-724d-42fb-aea8-c9f009095e1f for GET /memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 061e9b92-724d-42fb-aea8-c9f009095e1f for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/users/061e9b92-724d-42fb-aea8-c9f009095e1f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 061e9b92-724d-42fb-aea8-c9f009095e1f for GET /users/061e9b92-724d-42fb-aea8-c9f009095e1f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 061e9b92-724d-42fb-aea8-c9f009095e1f for GET /061e9b92-724d-42fb-aea8-c9f009095e1f/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [userRoutes] Self-access validated: user 061e9b92-724d-42fb-aea8-c9f009095e1f accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 061e9b92-724d-42fb-aea8-c9f009095e1f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [userController.getUserProgressAPI] Successfully retrieved progress for user inttest265016 (Level 1, XP: 0/200, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/users/061e9b92-724d-42fb-aea8-c9f009095e1f/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/search?q=horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/search?q=horse - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for POST /grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomController.recordInteraction] Recording early_touch interaction for foal 95396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: calm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for calm: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomController.recordInteraction] Interaction recorded: 3 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47293 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomProgressionService.awardGroomXP] Groom 47293 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomController.recordInteraction] Awarded 2 XP to groom 47293 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/grooms/user/3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /grooms/user/3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [groomController.getUserGrooms] Getting grooms for user 3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/grooms/user/3e2550b8-73cc-4272-a9ec-f592f85e6680 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 625MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/search?q=horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/search?q=horse - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:25] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 636MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 626MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 626MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 634MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 641MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 632MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/user-docs/search?q=horse&includeContent=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 637MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [horseModel.createHorse] Successfully created horse: Consistency Test Horse (ID: 95397)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [horseRoutes] Created new horse: Consistency Test Horse (ID: 95397)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [POST] /api/horses - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] warn: [MemoryMonitoring] Memory threshold exceeded: 640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [userRoutes] Self-access validated: user 3e2550b8-73cc-4272-a9ec-f592f85e6680 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [userController.getUserProgressAPI] Successfully retrieved progress for user globaltest264996 (Level 1, XP: 0/200, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:26] info: [GET] /api/users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] warn: [MemoryMonitoring] Memory threshold exceeded: 642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [ownership] Found owned horse 95398 for user 3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.trainRouteHandler] Training request for horse 95398 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.trainHorse] Attempting to train horse 95398 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.canTrain] Checking training eligibility for horse 95398 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.getHorseAge] Getting age for horse 95398

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.getHorseAge] Horse 95398 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95398 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95398

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.canTrain] Horse 95398 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95398)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.trainHorse] Horse 95398 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.logTrainingSession] Logging training session for horse 95398 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4903

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95398 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95398 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95398: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95398

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [xpLogModel.logXpEvent] Logging XP event: User 3e2550b8-73cc-4272-a9ec-f592f85e6680, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2389, User 3e2550b8-73cc-4272-a9ec-f592f85e6680, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.trainHorse] Awarded 5 XP to user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [trainingController.trainHorse] Successfully trained horse 95398 in Dressage (Log ID: 4903, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [GET] /api/users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] warn: [MemoryMonitoring] Memory threshold exceeded: 643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [auth] Authenticated user 3e2550b8-73cc-4272-a9ec-f592f85e6680 for GET /3e2550b8-73cc-4272-a9ec-f592f85e6680/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [userRoutes] Self-access validated: user 3e2550b8-73cc-4272-a9ec-f592f85e6680 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 3e2550b8-73cc-4272-a9ec-f592f85e6680

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [userController.getUserProgressAPI] Successfully retrieved progress for user globaltest264996 (Level 1, XP: 5/200, 3% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:27] info: [GET] /api/users/3e2550b8-73cc-4272-a9ec-f592f85e6680/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/documentation-system-integration.test.mjs (5.342 s)
  ‚óè Console

    console.log
      [2025-12-29 06:04:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:28] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0f6f89a3f8e0b90d480113ca24bfc9bc6ea0765b8677a50f73e707a568ff90b4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4837f2c5b445fdf941b671545f9ade18e57e8ef840dec8a71ece0ec898cbc178

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:29] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a1d4c339ce3da7da127ce1167887e522ed9518d3638212273f4be536a8f95574

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:29] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=32b2a8bfb772e7f2e46ce9974b3165be63dcbdf895ed9dd396f56e5d4aa36546

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [auth] Authenticated user 63ccfc07-c217-4b40-bec7-7299ad8d2263 for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [DocumentationRoutes] Registering endpoint: GET /api/test/integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=12f97e35421159167d038a5be495627ba0bcb256757925228cce26f4bc1f5743

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:30] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [auth] Authenticated user 61f763ff-3f5d-46aa-a8d4-242bbdd300a2 for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:30] info: [DocumentationRoutes] Registering schema: TestSchema

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=04b7582aa2db7c79a8a34a140dd9cb2cba82c528537b03a12e86408b20f7d805

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [auth] Authenticated user 6bc6abee-651d-497d-8892-68c525183ed9 for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [DocumentationRoutes] Registering endpoint: POST /api/test/create

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [auth] Authenticated user 6bc6abee-651d-497d-8892-68c525183ed9 for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [DocumentationRoutes] Registering schema: CreateTestSchema

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [auth] Authenticated user 6bc6abee-651d-497d-8892-68c525183ed9 for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9488fb7622e6e268ec9ee67dad06b5d472915cd58cc4f879deae6dfbe0ec04e5

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [auth] Authenticated user e9c029a1-d9ec-4292-a183-c93db39a2b2b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=742dee2022ae11556727aa0245d5a9031abeb6c5bfed9615c4edcbf508db129b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:31] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [auth] Authenticated user 321cbf10-a1ae-4e0a-8dc4-c44113bb5ea7 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:31] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e9f92c573af0b31cab5801854a910dca1a33f8776f75eede5ec8b5cc8a637028

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [auth] Authenticated user 68e0028b-b322-4c24-87af-82147c001924 for GET /coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [DocumentationRoutes] Getting documentation coverage analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=065d9ee39684d535691079a9d99b7db9246e9bbb21fc7f90eafcf82dce36f566

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=6a66038378f5a53ca3173323be8b05047028fd2f62c8d2c69e5906ba391a4011

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:32] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:32] info: [auth] Authenticated user 78ee564f-ac2a-4111-a0f8-978f6637da05 for GET /api/test/documented

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=306025630b5fde6a9551c952aa6ada649c1a7aaa3e878a793f2a24b5a89f6669

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] warn: [auth] Access token is required for POST /endpoints from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: docintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8ea39396e307f36697cd8f1bc956074519599f845ecc98c96fe0bcf23d64eb9a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:33] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [auth] Authenticated user b53d3a87-8c3b-4355-8505-f428afa84a6b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/userProgressAPI.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:34] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:34] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] warn: [MemoryMonitoring] Memory threshold exceeded: 709MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: progress-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=613c5caec5fda8dca5a06b30aee5a52c7532020b8cc78fea57bda2692f3a47b4

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:34] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:34] warn: [MemoryMonitoring] Memory threshold exceeded: 717MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 715MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 0/200, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 720MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4904

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 95399: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2390, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Racing (Log ID: 4904, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 721MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 5/200, 3% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 711MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4905

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95399: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2391, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Dressage (Log ID: 4905, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 712MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4906

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95399: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2392, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Show Jumping (Log ID: 4906, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 713MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4907

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95399: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2393, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Dressage (Log ID: 4907, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 713MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4908

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95399: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2394, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Show Jumping (Log ID: 4908, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 714MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4909

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95399: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2395, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Dressage (Log ID: 4909, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 714MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4910

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateHorseStat] Updating agility by 2 for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateHorseStat] Updated agility for horse 95399: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Stat gain: agility +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95399: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2396, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Successfully trained horse 95399 in Show Jumping (Log ID: 4910, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] warn: [MemoryMonitoring] Memory threshold exceeded: 719MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Attempting to train horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:35 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.canTrain] Horse 95399 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4911

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:35] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95399: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2397, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Successfully trained horse 95399 in Dressage (Log ID: 4911, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 722MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Attempting to train horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:36 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Horse 95399 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4912

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95399: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2398, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Successfully trained horse 95399 in Show Jumping (Log ID: 4912, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 722MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Attempting to train horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:36 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Horse 95399 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4913

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95399: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2399, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Successfully trained horse 95399 in Dressage (Log ID: 4913, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 723MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Attempting to train horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:36 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Horse 95399 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4914

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95399: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2400, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Successfully trained horse 95399 in Show Jumping (Log ID: 4914, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 723MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 1, XP: 55/200, 28% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 726MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [ownership] Found owned horse 95399 for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainRouteHandler] Training request for horse 95399 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Attempting to train horse 95399 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Checking training eligibility for horse 95399 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Getting age for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getHorseAge] Horse 95399 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Sun Dec 21 2025 06:04:36 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.canTrain] Horse 95399 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 95399)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Horse 95399 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Logging training session for horse 95399 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4915

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 95399 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 95399: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 95399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Logging XP event: User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2401, User 93a73f1a-4a7d-46b7-919b-ac491d0320ea, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Awarded 5 XP to user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for training - LEVEL UP to undefined!

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.trainHorse] Successfully trained horse 95399 in Cross Country (Log ID: 4915, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 726MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 2, XP: 200/300, 0% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 716MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 3, XP: 350/400, 50% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/dashboard/93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 721MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/dashboard/93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /dashboard/93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.getTrainableHorses] Getting trainable horses for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95399 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95399: Mon Dec 29 2025 06:04:36 GMT-0500 (Eastern Standard Time) (discipline: Cross Country)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getDashboardData] Successfully retrieved dashboard data for user progresstest (1 horses, 0 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/dashboard/93a73f1a-4a7d-46b7-919b-ac491d0320ea - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 726MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"999999","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/999999/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 727MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"invalid","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/invalid/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 728MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [auth] Access token is required for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] warn: [MemoryMonitoring] Memory threshold exceeded: 727MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [auth] Authenticated user 93a73f1a-4a7d-46b7-919b-ac491d0320ea for GET /93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userRoutes] Self-access validated: user 93a73f1a-4a7d-46b7-919b-ac491d0320ea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 93a73f1a-4a7d-46b7-919b-ac491d0320ea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [userController.getUserProgressAPI] Successfully retrieved progress for user progresstest (Level 3, XP: 350/400, 50% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:36] info: [GET] /api/users/93a73f1a-4a7d-46b7-919b-ac491d0320ea/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/auth-system-integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:37] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:37] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:37] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:37] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f0e68dbe414cb033be30049fc3e33b725f97125f7d40919ed011614523aabb8c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:37] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/competition/my-entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/training/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/grooms/my-grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/traits/my-discoveries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/dashboard/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [auth] Authenticated user 72dafe31-06b4-4536-9a2d-e32ac788ba28 for GET /api/health/protected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e8624ed94a328fe6d74ddeeb345f62c551e4af85289cc0ac12f74b7f3c008f00

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:38] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/training/status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/grooms/my-grooms from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/traits/my-discoveries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/dashboard/overview from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Access token is required for GET /api/health/protected from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=9fb21cce0318a3e0bab68bf2873c3ea2963994fd1fd1cb58f4dbcadd81154a3f

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:38] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Invalid or expired token for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Invalid or expired token for GET /api/horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Invalid or expired token for GET /api/competition/my-entries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:38] warn: [auth] Invalid or expired token for GET /api/training/status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:39] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:39] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a46a5cb5798119fbfd22a86a5434a3a3c05e592c22f507e3e56d3da71e9b1864

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:39] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [auth] Authenticated user 0b02f2df-784e-4270-939f-30e6957dd5f0 for GET /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [auth] Authenticated user 0b02f2df-784e-4270-939f-30e6957dd5f0 for GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [auth] Authenticated user 0b02f2df-784e-4270-939f-30e6957dd5f0 for GET /api/dashboard/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=212d7b595377274c246c98e12e9b7b47d818cdb7380573ed3706c5820fef8dcd

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] warn: [auth] Access token is required for GET /api/horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] warn: [auth] Access token is required for GET /api/competition/my-entries from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: authintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=46ce2748d5b94b8c47f0ef197a3c9e3b40d63b087985eb56d8fbf66d82210db6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] warn: [auth] Access token is required for GET /api/auth/profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskLoggingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:41] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:41] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:41] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:41] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] warn: [MemoryMonitoring] Memory threshold exceeded: 793MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47294 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Groom 47294 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Awarded 2 XP to groom 47294 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] warn: [MemoryMonitoring] Memory threshold exceeded: 795MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Interaction recorded: 5 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47295 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Groom 47295 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Awarded 2 XP to groom 47295 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] warn: [MemoryMonitoring] Memory threshold exceeded: 795MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 95402

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, 0 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Personality effects applied (patient): task_specialty - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47296 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Groom 47296 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Awarded 2 XP to groom 47296 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] warn: [MemoryMonitoring] Memory threshold exceeded: 793MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47297 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomProgressionService.awardGroomXP] Groom 47297 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [groomController.recordInteraction] Awarded 2 XP to groom 47297 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:42] warn: [MemoryMonitoring] Memory threshold exceeded: 801MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording desensitization interaction for foal 95405

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task desensitization

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 9 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47297 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47297 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47297 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 796MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 95406

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Personality effects applied (patient): task_specialty - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47297 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47297 gained 2 XP: 7 ‚Üí 9 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47297 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 804MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording early_touch interaction for foal 95407

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task early_touch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47297 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47297 gained 2 XP: 9 ‚Üí 11 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47297 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 800MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95408

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 5 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47298 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47298 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47298 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 798MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95409

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -2 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Personality effects applied (patient): category_match - Reduces burnout risk and failure chance on enrichment tasks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47299 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47299 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47299 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 807MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording desensitization interaction for foal 95409

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] warn: [MemoryMonitoring] Memory threshold exceeded: 795MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Recording early_touch interaction for foal 95410

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task early_touch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for patient: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Interaction recorded: 5 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47300 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomProgressionService.awardGroomXP] Groom 47300 gained 2 XP: 3 ‚Üí 5 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [groomController.recordInteraction] Awarded 2 XP to groom 47300 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:43] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] warn: [MemoryMonitoring] Memory threshold exceeded: 806MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 95411

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/crossSystemValidation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:45] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:45] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 601MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 95412 and dam 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 95412)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 95412)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:04:45] info: [horseController.gatherLineage] Gathering lineage for sire 95412 and dam 95412, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.gatherLineage] Gathered 1 ancestors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 95412 and dam 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 95412 and dam 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.assessFeedQuality] Mare 95412 feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 95412 and dam 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 95412 and dam 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.detectInbreeding] Inbreeding not detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 95413)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 95413)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/horses/foals - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/foals/95413/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 599MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /foals/95413/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns foal 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [foalRoutes] POST /api/foals/95413/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 95413 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 5, Stress: 0 -> 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/foals/95413/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/traits/discover/95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 603MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /traits/discover/95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitController.discoverTraits] Triggering trait discovery for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/traits/discover/95413 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/traits/discovery-status/95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 605MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /traits/discovery-status/95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/traits/discovery-status/95413 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 606MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 95413

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Found owned horse 95413 for user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 95413, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 95413: withdrawn (score: -5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: Environmental analysis generated for horse 95412 by user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: Trait interaction matrix generated for horse 95412 by user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 603MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [GET] /api/horses/95412 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] warn: [MemoryMonitoring] Memory threshold exceeded: 603MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [ownership] Found owned horse 95412 for user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.trainRouteHandler] Training request for horse 95412 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.trainHorse] Attempting to train horse 95412 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.canTrain] Checking training eligibility for horse 95412 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.getHorseAge] Getting age for horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.getHorseAge] Horse 95412 is 28 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95412 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.canTrain] Horse 95412 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 95412)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.trainHorse] Horse 95412 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.logTrainingSession] Logging training session for horse 95412 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4916

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 95412 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 95412 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 95412: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [xpLogModel.logXpEvent] Logging XP event: User 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2402, User 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.trainHorse] Awarded 5 XP to user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [trainingController.trainHorse] Successfully trained horse 95412 in Racing (Log ID: 4916, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:45] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 604MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses/95412 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/competition/eligibility/95412/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 604MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /competition/eligibility/95412/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /eligibility/95412/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 95412 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.GET /eligibility] Horse 95412 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/competition/eligibility/95412/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 606MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.POST /enter] User 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 entering horse 95412 in show 5537

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [ownership] Found owned horse 95412 for user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.POST /enter] Successfully entered horse 95412 in show 5537

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 609MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.POST /execute] User 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 executing competition for show 5537

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1767006286071 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:04:46] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: -8.4%, adjustment: -20.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:04:46] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 220 (base: 240, trait: +0, luck: -20.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:04:46] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 95412) scored 220 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:04:46] info: [resultModel.saveResult] Successfully updated placeholder result for horse 95412 in show 5537 with score 220

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 95412). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [competitionRoutes.POST /execute] Competition executed successfully for show 5537

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses/95412/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 606MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses/95412/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns horse 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 95412)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses/95412/xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 607MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.getUserGrooms] Getting grooms for user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.recordInteraction] Recording brushing interaction for foal 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -3 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47302 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomProgressionService.awardGroomXP] Groom 47302 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.recordInteraction] Awarded 2 XP to groom 47302 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 616MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.getUserGrooms] Getting grooms for user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/user/1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/47302/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /grooms/47302/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [ownership] Validated ownership: user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 owns groom 47302

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/47302/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/grooms/assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 614MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /grooms/assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.assignGroom] Assigning groom 47302 to foal 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomSystem.assignGroomToFoal] Assigning groom 47302 to foal 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/grooms/assign - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/assignments/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /grooms/assignments/95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [groomController.getFoalAssignments] Getting assignments for foal 95412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/grooms/assignments/95412 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 616MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/memory/gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /memory/gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [POST] /api/memory/gc - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses?page=1&limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/horses?page=1&limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 613MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] info: [GET] /api/docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:46] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/search?q=competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocService] Loaded 1 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocService] Built search index with 34 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/search?q=competition - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 614MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/feature-guide - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 613MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /ping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 614MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /ping - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/memory/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /memory/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [auth] Authenticated user 1ff2fc6b-7a3a-44cf-ac65-c0235e3c3b29 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/memory/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/unit/email-verification.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] error: [EmailVerification] Error creating verification token: Maximum pending verification tokens (5) reached

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:48] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:49] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:50] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/auth-cookies.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:51] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 667MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest+1767006292136@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=4677e48faeac8f35f7ffa9f7e8844328f1cee414ad5990761ddc51fa48d36b3c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:52] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 670MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: cookietest2@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=07094e57c505c10e444d737d61db8ef6a8b0bf3104ebfb9fad12bf0f49e4cf28

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:52] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 673MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 671MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 668MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 680MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 675MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [MemoryMonitoring] Memory threshold exceeded: 672MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:52] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 670MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 681MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 677MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:53] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:53] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/refresh-token - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 671MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 682MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 677MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 674MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 672MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: xss-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=520dc6558df493244a07ef87777165c69127246348c713ef16006ddac8b24f6d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:53] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 674MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 674MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 673MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] warn: [MemoryMonitoring] Memory threshold exceeded: 685MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:53] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:04:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:54] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:54] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] warn: [MemoryMonitoring] Memory threshold exceeded: 718MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: competition-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ef2209814a08f0a2ef9713c4bbaf0f31dc48de055d0f7dd1930636e20321fe75

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:04:55] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [GET] /api/competition/eligibility/95414/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] warn: [MemoryMonitoring] Memory threshold exceeded: 727MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for GET /competition/eligibility/95414/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for GET /eligibility/95414/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [ownership] Validated ownership: user 0719e533-1fe3-4df1-b64c-836a95fa1e86 owns horse 95414

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 95414 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [competitionRoutes.GET /eligibility] Horse 95414 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [GET] /api/competition/eligibility/95414/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] warn: [MemoryMonitoring] Memory threshold exceeded: 718MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for POST /competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [competitionRoutes.POST /enter] User 0719e533-1fe3-4df1-b64c-836a95fa1e86 entering horse 95414 in show 5538

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [ownership] Found owned horse 95414 for user 0719e533-1fe3-4df1-b64c-836a95fa1e86

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [competitionRoutes.POST /enter] Successfully entered horse 95414 in show 5538

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] warn: [MemoryMonitoring] Memory threshold exceeded: 727MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for GET /leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [auth] Authenticated user 0719e533-1fe3-4df1-b64c-836a95fa1e86 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:55] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitDiscoveryIntegration.test.mjs (5.01 s)
  ‚óè Console

    console.log
      [2025-12-29 06:04:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:04:56] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:04:56] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:56] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] warn: [MemoryMonitoring] Memory threshold exceeded: 761MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitController.discoverTraits] Triggering trait discovery for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 95415: athletic, resilient, calm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitController.discoverTraits] Discovered 3 traits for horse 95415 (High Bond Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95415 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] warn: [MemoryMonitoring] Memory threshold exceeded: 769MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitController.discoverTraits] Triggering trait discovery for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95416 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] warn: [MemoryMonitoring] Memory threshold exceeded: 770MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitController.discoverTraits] Triggering trait discovery for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/95417 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:57] warn: [MemoryMonitoring] Memory threshold exceeded: 771MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [MemoryMonitoring] Memory threshold exceeded: 769MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [GET] /api/trait-discovery/progress/95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [MemoryMonitoring] Memory threshold exceeded: 768MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscoveryRoutes] GET /progress/95415 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [GET] /api/trait-discovery/progress/95415 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [GET] /api/trait-discovery/progress/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [MemoryMonitoring] Memory threshold exceeded: 772MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [GET] /api/trait-discovery/progress/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Batch test foal IDs: [ 95415, 95416 ]

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:284:15)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [MemoryMonitoring] Memory threshold exceeded: 771MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 2 horses for user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 95415: intelligent, bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 95416

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:58] warn: [MemoryMonitoring] Memory threshold exceeded: 765MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 3 horses for user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] error: [traitDiscovery.revealTraits] Error revealing traits for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:59] error: [traitDiscovery.batchRevealTraits] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 95417

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [MemoryMonitoring] Memory threshold exceeded: 771MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/discover/batch - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [GET] /api/trait-discovery/conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [MemoryMonitoring] Memory threshold exceeded: 769MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscoveryRoutes] GET /conditions - Getting discovery conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [GET] /api/trait-discovery/conditions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/check-conditions/95415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [MemoryMonitoring] Memory threshold exceeded: 774MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [traitDiscoveryRoutes] POST /check-conditions/95415 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/check-conditions/95415 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/check-conditions/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [MemoryMonitoring] Memory threshold exceeded: 763MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [POST] /api/trait-discovery/check-conditions/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] info: [GET] /api/trait-discovery/progress/95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:04:59] warn: [MemoryMonitoring] Memory threshold exceeded: 765MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscoveryRoutes] GET /progress/95418 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [GET] /api/trait-discovery/progress/95418 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Initial hidden count: 5

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:473:15)

    console.log
      Progress response: {
        "horseId": 95418,
        "horseName": "Fresh Workflow Foal",
        "discoveredTraits": 5,
        "totalPossibleTraits": 7,
        "progressPercentage": 71,
        "traits": [
          "intelligent",
          "calm",
          "athletic",
          "resilient",
          "bold"
        ],
        "hiddenTraitsCount": 5,
        "visibleTraitsCount": 0,
        "currentStats": {
          "bondScore": 85,
          "stressLevel": 15,
          "developmentDay": 3
        },
        "conditions": {
          "high_bond": {
            "name": "High Bond",
            "description": "Strong bond formed",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "loyal",
              "trusting",
              "calm"
            ]
          },
          "excellent_bond": {
            "name": "Excellent Bond",
            "description": "Exceptional bond achieved",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "devoted",
              "empathetic",
              "intuitive"
            ]
          },
          "low_stress": {
            "name": "Low Stress",
            "description": "Stress levels minimized",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "calm",
              "relaxed",
              "confident"
            ]
          },
          "minimal_stress": {
            "name": "Minimal Stress",
            "description": "Perfect stress management",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "zen",
              "unflappable",
              "serene"
            ]
          },
          "perfect_care": {
            "name": "Perfect Care",
            "description": "Perfect care conditions achieved",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "exceptional",
              "thriving",
              "balanced"
            ]
          },
          "mature_bond": {
            "name": "Mature Bond",
            "description": "Mature relationship developed with adult horse",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "resilient",
              "calm",
              "confident",
              "bonded"
            ]
          },
          "consistent_training": {
            "name": "Consistent Training",
            "description": "Consistent training regimen maintained",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "disciplined",
              "focused",
              "trainable"
            ]
          }
        }
      }

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:474:15)

    console.log
      [2025-12-29 06:05:00] info: [POST] /api/trait-discovery/check-conditions/95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] warn: [MemoryMonitoring] Memory threshold exceeded: 765MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscoveryRoutes] POST /check-conditions/95418 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [POST] /api/trait-discovery/check-conditions/95418 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [POST] /api/trait-discovery/discover/95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] warn: [MemoryMonitoring] Memory threshold exceeded: 766MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitController.discoverTraits] Triggering trait discovery for horse 95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 95418: intelligent, calm, athletic

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitController.discoverTraits] Discovered 3 traits for horse 95418 (Fresh Workflow Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [POST] /api/trait-discovery/discover/95418 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [GET] /api/trait-discovery/progress/95418

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] warn: [MemoryMonitoring] Memory threshold exceeded: 770MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [traitDiscoveryRoutes] GET /progress/95418 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:00] info: [GET] /api/trait-discovery/progress/95418 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/competitionAPIEndpoints.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:01] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:01] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:01] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:02] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:02] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 808MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/disciplines - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 813MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition/eligibility/95419/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /eligibility/95419/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [ownership] Validated ownership: user a598120d-bf5e-4fb7-9d1d-f06959f04470 owns horse 95419

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 95419 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.GET /eligibility] Horse 95419 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition/eligibility/95419/Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /eligibility/95419/Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [ownership] Validated ownership: user a598120d-bf5e-4fb7-9d1d-f06959f04470 owns horse 95419

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 95419 in Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.GET /eligibility] Horse 95419 eligibility checked for Gaited

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Gaited - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition/eligibility/95419/InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /eligibility/95419/InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [ownership] Validated ownership: user a598120d-bf5e-4fb7-9d1d-f06959f04470 owns horse 95419

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 95419 in InvalidDiscipline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/InvalidDiscipline - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 807MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [auth] Access token is required for GET /competition/eligibility/95419/Racing from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95419/Racing - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95420/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 809MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition/eligibility/95420/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /eligibility/95420/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [ownership] horse 95420 not found or not owned by user a598120d-bf5e-4fb7-9d1d-f06959f04470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [GET] /api/competition/eligibility/95420/Racing - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 812MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /enter] User a598120d-bf5e-4fb7-9d1d-f06959f04470 entering horse 95419 in show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [ownership] Found owned horse 95419 for user a598120d-bf5e-4fb7-9d1d-f06959f04470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /enter] Successfully entered horse 95419 in show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /enter] User a598120d-bf5e-4fb7-9d1d-f06959f04470 entering horse 95419 in show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [ownership] Found owned horse 95419 for user a598120d-bf5e-4fb7-9d1d-f06959f04470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [competitionRoutes.POST /enter] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 821MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [auth] Access token is required for POST /competition/enter from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/enter - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /execute] User a598120d-bf5e-4fb7-9d1d-f06959f04470 executing competition for show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [enhancedCompetitionSimulation] Executing competition: API Test Racing Show_1767006302322_65269_27928 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [calculateCompetitionScore] Horse API Test Horse: Base score for Racing: 205

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:05:02] info: [calculateCompetitionScore] Horse API Test Horse: Luck modifier: -0.7%, adjustment: -1.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:05:02] info: [calculateCompetitionScore] Horse API Test Horse: Final score: 204 (base: 205, trait: +0, luck: -1.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:05:02] info: [enhancedCompetitionSimulation] Horse API Test Horse (ID: 95419) scored 204 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:05:02] info: [resultModel.saveResult] Successfully updated placeholder result for horse 95419 in show 5539 with score 204

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [horseXpModel.addXpToHorse] Added 30 XP to horse API Test Horse (ID: 95419). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to API Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /execute] Competition executed successfully for show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] warn: [MemoryMonitoring] Memory threshold exceeded: 819MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user e4c99a3b-52ed-457f-a513-ab0ebf33d567 for POST /competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [auth] Authenticated user e4c99a3b-52ed-457f-a513-ab0ebf33d567 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:02] info: [competitionRoutes.POST /execute] User e4c99a3b-52ed-457f-a513-ab0ebf33d567 executing competition for show 5539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [POST] /api/competition/execute - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [competitionRoutes.POST /execute] User a598120d-bf5e-4fb7-9d1d-f06959f04470 executing competition for show 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [POST] /api/competition/execute - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=undefined, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [MemoryMonitoring] Memory threshold exceeded: 822MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [leaderboardRoutes.GET /competition] Retrieved 1 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=earnings&discipline=Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [MemoryMonitoring] Memory threshold exceeded: 824MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [auth] Authenticated user a598120d-bf5e-4fb7-9d1d-f06959f04470 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [leaderboardRoutes.GET /competition] Validation errors: [{"type":"field","value":"invalid","msg":"Metric must be one of: wins, earnings, placements, average_placement","path":"metric","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition?metric=invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [MemoryMonitoring] Memory threshold exceeded: 812MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] warn: [auth] Access token is required for GET /leaderboards/competition from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [GET] /api/leaderboards/competition - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/unit/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:03] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:03] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 0)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:05] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:06] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:06] warn: [TokenRotation] Skipping refresh token persistence in test env

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:06] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/security/sql-injection-attempts.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:07] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:07] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1'%20OR%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 9323e3cd-e56f-4a3a-9bbe-eae52b3f0926 for GET /horses/1'%20OR%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 877MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 2cb108fe-4a9f-4180-ba7d-114d8d0ece58 for GET /horses/1;%20DROP%20TABLE%20horses;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 876MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user e93e4ea2-2ea3-4b92-85e1-94e18b3a41db for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 874MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 6174c009-62f7-4a38-b997-0c2612ef44d7 for GET /horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20AND%20(SELECT%20COUNT(*)%20FROM%20users)%20%3E%200 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/0x31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user ea882dcb-50b3-4dd3-b432-7ba181b8c18c for GET /horses/0x31

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/0x31 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/95426'%20AND%201=1%20AND%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 3e06e30d-6862-4318-9297-ba335567b8a8 for GET /horses/95426'%20AND%201=1%20AND%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/95426'%20AND%201=1%20AND%20'1'='1 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 870MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 1aef46bb-e328-4274-a2b9-3e37b8d7e329 for GET /horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20WAITFOR%20DELAY%20'00:00:05';%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 871MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 34befd52-a717-495c-bcce-c75086b80b8f for GET /horses/1;%20SELECT%20pg_sleep(5);%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20SELECT%20pg_sleep(5);%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 871MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 5ac1906b-532e-4d01-9d8a-9be2ba9ce83d for GET /horses/1'%20AND%20(SELECT%201/0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: 404 - Route not found: GET /api/horses/1'%20AND%20(SELECT%201/0) from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1'%20AND%20(SELECT%201/0) - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 7a5e46c7-3581-444c-8ee5-76d0db7f79c9 for GET /horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20id,email,password,NULL,NULL,NULL%20FROM%20users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 4300d348-c2b3-48fb-a601-04ab2de71e0a for GET /horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20ALL%20SELECT%20*%20FROM%20users%20WHERE%201=1 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20ORDER%20BY%20100

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 1be56706-0237-424b-9b48-302cd3046b4e for GET /horses/1%20ORDER%20BY%20100

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20ORDER%20BY%20100 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 7c7e4d30-0b78-4fa7-b1b7-45481289e823 for GET /horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1%20UNION%20SELECT%20NULL,NULL,NULL,NULL,NULL - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 17aff902-81ab-4c58-8ead-7a391661e793 for GET /horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20DELETE%20FROM%20horses%20WHERE%20id%20%3E%200 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=728139a7-637b-4c0c-83f6-4de1e3396482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 728139a7-637b-4c0c-83f6-4de1e3396482 for GET /horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=728139a7-637b-4c0c-83f6-4de1e3396482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20UPDATE%20users%20SET%20role='ADMIN'%20WHERE%20id=728139a7-637b-4c0c-83f6-4de1e3396482 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 874MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 3864e306-b487-491d-962f-3bd0aeba9be9 for GET /horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses/1;%20INSERT%20INTO%20horses%20(name,%20userId)%20VALUES%20('Hacked',%201) - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user e1edd6c8-9dce-4300-91c0-80e93410a723 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:07] info: [auth] Authenticated user 7a6b85da-9380-477e-bab7-c7d7b35c2fa4 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?name=Test%27;%20DROP%20TABLE%20horses;%20-- - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 875MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 859aa77b-0e03-4361-bdf5-0dd937ab6d06 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?sort=name;%20UPDATE%20horses%20SET%20name=%27Hacked%27 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 879MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 523eed82-2ea6-4581-8c1d-d71f69f8aae5 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?name=%%27%20OR%20%271%27=%271 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 881MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 2eba7f0d-7bf0-43b6-a03c-66d91bb7746b for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?ids=1,2,3)%20OR%201=1%20-- - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 882MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 2563e2f8-e3aa-496b-bae5-a3f4461bdaba for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?traits.strength=50%27;%20DROP%20TABLE%20horses;%20-- - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 2dff51bf-8371-4305-9c90-3d9998975ad2 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?traits-%3E%3E%27color%27=%27Bay%27%20OR%20%271%27=%271 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 882MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 43a1064a-ddbe-43c4-95e0-09e3b2bd6b4e for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?achievements[0]=Win%27;%20DELETE%20FROM%20horses;%20-- - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user a085f2de-b17f-498d-a680-36ff6b9f6967 for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [PUT] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 89b7aaa0-4089-4c64-aee7-c0250390ce95 for PUT /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [PUT] /api/auth/profile - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/query

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user af904697-8dd3-4c70-b679-63b9a7e41f75 for POST /horses/query

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/query - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 57f3153e-579c-4e64-aa05-2a0622bd3792 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses?raw={%22sql%22:%22SELECT%20*%20FROM%20users%22} - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/search

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 885MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 47b2e985-9ed8-456f-a35b-befde74bd2f0 for POST /horses/search

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/search - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20version()

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 885MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 0a8d0731-607e-4d10-9513-6d018109a9d2 for GET /horses/1;%20SELECT%20version()

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20version() - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user d6115026-0282-4d2c-950a-451098bdfddc for GET /horses/1;%20COPY%20users%20TO%20'/tmp/users.csv'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: 404 - Route not found: GET /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20COPY%20users%20TO%20'/tmp/users.csv' - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 52c0abb5-231f-476c-9581-bffcbcee4828 for GET /horses/1;%20SELECT%20pg_read_file('/etc/passwd')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: 404 - Route not found: GET /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20pg_read_file('/etc/passwd') - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 884MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 52b70b9c-f91e-4018-b647-4d942c3eeec5 for GET /horses/1;%20SELECT%20lo_create(1234)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20SELECT%20lo_create(1234) - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20CALL%20malicious_procedure()

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 882MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 016d177e-a946-4380-9ce0-4deee4cdc6bc for GET /horses/1;%20CALL%20malicious_procedure()

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20CALL%20malicious_procedure() - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 881MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 68127094-a3b4-48d1-8518-c7f2da4d1db1 for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses/batch-update - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/grooms/batch-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 882MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 38bc2763-b6e3-4257-bde1-d56503dabc4d for POST /grooms/batch-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/grooms/batch-delete - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/invalid-sql-injection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 882MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 36d8d4d0-0195-4a99-ae39-345609f55363 for GET /horses/invalid-sql-injection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/invalid-sql-injection - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1'%20OR%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 886MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 56350072-b8fe-4d1a-a5c2-afface7a71cb for GET /horses/1'%20OR%20'1'='1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1'%20OR%20'1'='1 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 880MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 56350072-b8fe-4d1a-a5c2-afface7a71cb for GET /horses/1;%20DROP%20TABLE%20horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1;%20DROP%20TABLE%20horses - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 889MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 56350072-b8fe-4d1a-a5c2-afface7a71cb for GET /horses/1%20UNION%20SELECT%20*%20FROM%20users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1%20UNION%20SELECT%20*%20FROM%20users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 883MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 56350072-b8fe-4d1a-a5c2-afface7a71cb for GET /horses/1%20AND%20(SELECT%201%20FROM%20users)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/1%20AND%20(SELECT%201%20FROM%20users) - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/95459

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 887MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 03d4216a-4d58-41a6-bfb9-fcb14db04bbb for GET /horses/95459

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [ownership] Validated ownership: user 03d4216a-4d58-41a6-bfb9-fcb14db04bbb owns horse 95459

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [GET] /api/horses/95459 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] warn: [MemoryMonitoring] Memory threshold exceeded: 888MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [auth] Authenticated user 807d87d9-b474-4ad6-90cc-bca015cc7e20 for POST /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:08] info: [POST] /api/horses - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/memoryManagementRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:09] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] warn: [auth] Access token is required for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 6h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Resource cleanup requested for: all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [MemoryManagement] Resource cleanup requested for: timers, intervals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] warn: [MemoryManagement] Selective cleanup not yet implemented

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:09] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for POST /cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /alerts

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] warn: [auth] Invalid or expired token for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] warn: [auth] Access token is required for GET /status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /resources

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting resource analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:10] warn: [MemoryManager] Memory threshold alert: 909MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] warn: [MemoryManager] Memory threshold alert: 910MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] info: [auth] Authenticated user 89f2247c-1e82-43e7-a98c-c26ac260ea9b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] info: [MemoryManagement] Getting memory metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:11] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/unit/security/rate-limit-keys.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:12] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/groomRetirementRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:13] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:13] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [GET] /api/grooms/47343/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] warn: [MemoryMonitoring] Memory threshold exceeded: 976MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/47343/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [ownership] Validated ownership: user b8ca3a68-8360-4bef-827f-e959f3005cd1 owns groom 47343

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [GET] /api/grooms/47343/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [GET] /api/grooms/retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] warn: [MemoryMonitoring] Memory threshold exceeded: 981MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:13] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/retirement/statistics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/retirement/approaching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 971MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/retirement/approaching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /retirement/approaching

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/retirement/approaching - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47350/legacy/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 974MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/47350/legacy/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [ownership] Validated ownership: user b8ca3a68-8360-4bef-827f-e959f3005cd1 owns groom 47350

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47350/legacy/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/legacy/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 976MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/legacy/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /legacy/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/legacy/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/talents/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 979MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/talents/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47355/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 981MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/47355/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [ownership] Validated ownership: user b8ca3a68-8360-4bef-827f-e959f3005cd1 owns groom 47355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47355/talents - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47357/talents/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 982MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for POST /grooms/47357/talents/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [ownership] Validated ownership: user b8ca3a68-8360-4bef-827f-e959f3005cd1 owns groom 47357

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47357/talents/validate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47359/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 983MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for POST /grooms/47359/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [ownership] Validated ownership: user b8ca3a68-8360-4bef-827f-e959f3005cd1 owns groom 47359

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: Groom 47359 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47359/talents/select - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47361/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 984MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [auth] Access token is required for GET /grooms/47361/retirement/eligibility from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47361/retirement/eligibility - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/retirement/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 982MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [auth] Access token is required for GET /grooms/retirement/statistics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/retirement/statistics - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47361/talents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 981MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [auth] Access token is required for GET /grooms/47361/talents from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/47361/talents - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/talents/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 982MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/talents/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/invalid/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 983MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for GET /grooms/invalid/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be an integer","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [GET] /api/grooms/invalid/retirement/eligibility - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47367/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [MemoryMonitoring] Memory threshold exceeded: 982MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [auth] Authenticated user b8ca3a68-8360-4bef-827f-e959f3005cd1 for POST /grooms/47367/talents/select

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] warn: [groomRoutes] Validation errors: [{"type":"field","value":"invalid_tier","msg":"Invalid tier","path":"tier","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:14] info: [POST] /api/grooms/47367/talents/select - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/security/parameter-pollution.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:15] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:16] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses/95461?id=95461&id=999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 815MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 5b4cc3f2-e79e-4adb-93ca-568fd8b169f6 for GET /horses/95461

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses/95461?id=95461&id=999 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?id=1&id=2&id=3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 707f5bb3-41b5-4d8a-a85b-770cd5ac1812 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?id=1&id=2&id=3 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses/95463?sort=name&sort=age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user f5f24b0d-e8be-4419-9a65-93af44dcadf4 for GET /horses/95463

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user f5f24b0d-e8be-4419-9a65-93af44dcadf4 owns horse 95463

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses/95463?sort=name&sort=age - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95464

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 31e0b165-ef2a-4a0b-9da7-0e9c9a97fb1e for PUT /horses/95464

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user 31e0b165-ef2a-4a0b-9da7-0e9c9a97fb1e owns horse 95464

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95464 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95465

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user f43a1cb4-10e3-4d5a-bd8e-425465ddc82d for PUT /horses/95465

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user f43a1cb4-10e3-4d5a-bd8e-425465ddc82d owns horse 95465

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95465 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95466

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 3eecd5b4-54d9-4886-816f-a42e65c3cd04 for PUT /horses/95466

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user 3eecd5b4-54d9-4886-816f-a42e65c3cd04 owns horse 95466

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95466 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 15ee98b2-1b11-442a-8fbf-aedf0658c373 for PUT /horses/95467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user 15ee98b2-1b11-442a-8fbf-aedf0658c373 owns horse 95467

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95467 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user b74a290e-4994-4ba8-a69c-a13a92f17c3e for PUT /horses/95468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user b74a290e-4994-4ba8-a69c-a13a92f17c3e owns horse 95468

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95468 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 713189f7-941e-4710-b338-b3855c7d4f80 for PUT /horses/95469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user 713189f7-941e-4710-b338-b3855c7d4f80 owns horse 95469

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95469 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user efdd3a82-bb6d-423a-853c-6619c5871921 for PUT /horses/95470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user efdd3a82-bb6d-423a-853c-6619c5871921 owns horse 95470

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95470 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 1895642f-eb1e-40f8-9323-c0cd5978cb08 for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 1895642f-eb1e-40f8-9323-c0cd5978cb08 for POST /batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 1f042968-a8c5-46b9-a3c6-df91fc68ac4c for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 1f042968-a8c5-46b9-a3c6-df91fc68ac4c for POST /batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 929fbe88-896f-4950-a834-d6ea6cb065b2 for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 929fbe88-896f-4950-a834-d6ea6cb065b2 for POST /batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 8b8b0664-340b-4427-9a19-ae82af317b78 for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 8b8b0664-340b-4427-9a19-ae82af317b78 for POST /batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 5a32d0e3-a9e6-4cc7-b9ac-0e05b165093d for POST /horses/batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 5a32d0e3-a9e6-4cc7-b9ac-0e05b165093d for POST /batch-update

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [POST] /api/horses/batch-update - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 8d7a7faa-dda8-4ea3-88bb-aba652f938d9 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?breed=Thoroughbred%27%20OR%20%271%27=%271 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name[$ne]=null

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 815MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user d592dd2c-3e76-4a04-bae2-659672e8b63d for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name[$ne]=null - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 815MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 7c0e2a8a-e9cb-4a36-8df1-28004dd0f62f for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=%3Cscript%3Ealert(1)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=Horse%00Admin

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 570e78fa-6ea9-4b0e-97f4-bb7a3ab16bff for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=Horse%00Admin - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user 072d22d6-26e7-48d6-809e-d0a60ae221fa for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [GET] /api/horses?name=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 414

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] error: [PUT] /api/horses/95481 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:16] error: Error Unexpected token 'n', "name=HackedName" is not valid JSON

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 815MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user d00b071a-c6d3-4918-8ed2-2bcae574d8e0 for PUT /horses/95482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user d00b071a-c6d3-4918-8ed2-2bcae574d8e0 owns horse 95482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95482 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95483

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 816MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user e784b6a3-1c77-4a8a-b7a3-3de136824742 for PUT /horses/95483

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user e784b6a3-1c77-4a8a-b7a3-3de136824742 owns horse 95483

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95483 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 817MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user c165606e-026c-45a9-8b94-f5de4729d615 for PUT /horses/95484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [ownership] Validated ownership: user c165606e-026c-45a9-8b94-f5de4729d615 owns horse 95484

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95484 - 415

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [PUT] /api/horses/95485

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:16] info: [auth] Authenticated user cd13069b-3509-4852-ba99-22de31d3e6ae for PUT /horses/95485

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user cd13069b-3509-4852-ba99-22de31d3e6ae owns horse 95485

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95485 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user b72bbc87-e042-44ec-a81c-97dc85d52033 for PUT /horses/95486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user b72bbc87-e042-44ec-a81c-97dc85d52033 owns horse 95486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95486 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95487

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 818MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 089a7e15-398e-4efb-9385-538e5430ee05 for PUT /horses/95487

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 089a7e15-398e-4efb-9385-538e5430ee05 owns horse 95487

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95487 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95488

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 819MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user c46c0f5c-d2ba-45ff-a9b5-7b5bb70b93eb for PUT /horses/95488

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user c46c0f5c-d2ba-45ff-a9b5-7b5bb70b93eb owns horse 95488

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95488 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 819MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user b5201b32-b60e-4401-babf-c2bb40ce3df1 for PUT /horses/95489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user b5201b32-b60e-4401-babf-c2bb40ce3df1 owns horse 95489

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95489 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 819MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 8bad54f2-0a57-496d-a1e0-aa658aa44d64 for PUT /horses/95490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 8bad54f2-0a57-496d-a1e0-aa658aa44d64 owns horse 95490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95490 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95491

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 38e0efda-0f96-44f5-96c1-7ca33b15deb8 for PUT /horses/95491

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 38e0efda-0f96-44f5-96c1-7ca33b15deb8 owns horse 95491

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95491 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 0ceb252c-321c-4dd8-b91b-47297e91b8b2 for PUT /horses/95492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 0ceb252c-321c-4dd8-b91b-47297e91b8b2 owns horse 95492

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95492 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user a00c2e08-83f6-46d2-b2bb-97afccc5bc61 for PUT /horses/95493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user a00c2e08-83f6-46d2-b2bb-97afccc5bc61 owns horse 95493

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95493 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 820MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user ffe3406b-1602-45ac-909e-b711e59ebdba for PUT /horses/95494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user ffe3406b-1602-45ac-909e-b711e59ebdba owns horse 95494

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95494 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95495

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 821MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 1539808b-67ac-423a-a66d-0032e9051afb for PUT /horses/95495

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 1539808b-67ac-423a-a66d-0032e9051afb owns horse 95495

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95495 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95496

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 822MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user c8a7e1a7-5ac8-4a10-bd73-8035af118d0f for PUT /horses/95496

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user c8a7e1a7-5ac8-4a10-bd73-8035af118d0f owns horse 95496

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95496 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95497

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 821MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user cb157e58-734b-42a0-9b9c-d0b7b587d9a0 for PUT /horses/95497

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user cb157e58-734b-42a0-9b9c-d0b7b587d9a0 owns horse 95497

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95497 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95498

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 822MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 3cc75d58-06fa-4638-a85c-1e707fd561e8 for PUT /horses/95498

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 3cc75d58-06fa-4638-a85c-1e707fd561e8 owns horse 95498

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95498 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses/95499

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 822MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user b246b17b-b435-4d28-bfbd-d96982394dc0 for GET /horses/95499

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user b246b17b-b435-4d28-bfbd-d96982394dc0 owns horse 95499

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses/95499 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 823MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 18d2bdda-515a-4442-99e3-73f0838b59e5 for GET /horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses/95501

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 822MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user e5045ea7-2493-4544-b218-688bf1bdadbe for GET /horses/95501

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [GET] /api/horses/95501 - 406

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 824MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 59d5911f-3bbc-4d8f-bbb6-d2c5842f40d0 for PUT /horses/95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] warn: [MemoryMonitoring] Memory threshold exceeded: 832MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [auth] Authenticated user 59d5911f-3bbc-4d8f-bbb6-d2c5842f40d0 for PUT /horses/95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 59d5911f-3bbc-4d8f-bbb6-d2c5842f40d0 owns horse 95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95502 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [ownership] Validated ownership: user 59d5911f-3bbc-4d8f-bbb6-d2c5842f40d0 owns horse 95502

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:17] info: [PUT] /api/horses/95502 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomMarketplaceAPI.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:18] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:18] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:18] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 868MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [auth] Access token is required for GET /groom-marketplace from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 872MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [auth] Access token is required for POST /groom-marketplace/refresh from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [POST] /api/groom-marketplace/refresh - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 870MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [auth] Access token is required for POST /groom-marketplace/hire from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [POST] /api/groom-marketplace/hire - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 869MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [auth] Access token is required for GET /groom-marketplace/stats from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace/stats - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 868MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [groomMarketplace] Generated new marketplace for user c444a262-13d2-4124-abbd-ac56b6413120 with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 864MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 869MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 874MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] warn: [MemoryMonitoring] Memory threshold exceeded: 865MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:19] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshing marketplace for user c444a262-13d2-4124-abbd-ac56b6413120, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshed marketplace for user c444a262-13d2-4124-abbd-ac56b6413120 with 12 new grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshing marketplace for user c444a262-13d2-4124-abbd-ac56b6413120, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 877MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshing marketplace for user c444a262-13d2-4124-abbd-ac56b6413120, force: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 866MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshing marketplace for user c444a262-13d2-4124-abbd-ac56b6413120, force: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Charged user c444a262-13d2-4124-abbd-ac56b6413120 $100 for premium refresh

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Refreshed marketplace for user c444a262-13d2-4124-abbd-ac56b6413120 with 12 new grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/refresh - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 874MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 878MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User c444a262-13d2-4124-abbd-ac56b6413120 attempting to hire groom mkt_94fdea64-7f6e-462d-8c4a-ab24e1d15750

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User c444a262-13d2-4124-abbd-ac56b6413120 hired groom 47369 for $105

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 867MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 877MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User c444a262-13d2-4124-abbd-ac56b6413120 attempting to hire groom mkt_3d0a403e-2569-4caf-8ee8-1bd5e10e3355

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User c444a262-13d2-4124-abbd-ac56b6413120 hired groom 47370 for $119

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 879MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 870MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 874MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 892959ae-f322-4433-a71b-27bbcf0d76c2 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 892959ae-f322-4433-a71b-27bbcf0d76c2 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user 892959ae-f322-4433-a71b-27bbcf0d76c2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Generated new marketplace for user 892959ae-f322-4433-a71b-27bbcf0d76c2 with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 881MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 892959ae-f322-4433-a71b-27bbcf0d76c2 for POST /groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 892959ae-f322-4433-a71b-27bbcf0d76c2 for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User 892959ae-f322-4433-a71b-27bbcf0d76c2 attempting to hire groom mkt_aa53193c-1a51-4d7d-ae3a-d788d3d097de

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 869MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Generated new marketplace for user c444a262-13d2-4124-abbd-ac56b6413120 with 12 grooms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 876MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] User c444a262-13d2-4124-abbd-ac56b6413120 attempting to hire groom non-existent-id

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 880MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 870MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /groom-marketplace/hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for POST /hire

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [POST] /api/groom-marketplace/hire - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 873MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace] Getting marketplace for user c444a262-13d2-4124-abbd-ac56b6413120

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 876MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user c444a262-13d2-4124-abbd-ac56b6413120 for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] warn: [MemoryMonitoring] Memory threshold exceeded: 879MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 1bbd0e24-fcf9-44fd-a5a6-7e01b20ba7fd for GET /groom-marketplace/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [auth] Authenticated user 1bbd0e24-fcf9-44fd-a5a6-7e01b20ba7fd for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [groomMarketplace.getStats] Returning empty stats: {"totalGrooms":0,"lastRefresh":"never","refreshCount":0,"qualityDistribution":{},"specialtyDistribution":{}}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:20] info: [GET] /api/groom-marketplace/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/epigeneticFlagRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:21] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:22] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 916MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 921MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [auth] Access token is required for POST /flags/evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 920MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [auth] Access token is required for GET /flags/horses/123/flags from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/flags - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 919MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [auth] Access token is required for GET /flags/definitions from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/definitions - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/batch-evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 919MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [auth] Access token is required for POST /flags/batch-evaluate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/batch-evaluate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/care-patterns

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 917MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [auth] Access token is required for GET /flags/horses/123/care-patterns from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/care-patterns - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 916MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [POST] /api/flags/evaluate - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 914MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [ownership] horse 123 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/horses/123/flags - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] info: [GET] /api/flags/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:22] warn: [MemoryMonitoring] Memory threshold exceeded: 914MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [POST] /api/flags/batch-evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [MemoryMonitoring] Memory threshold exceeded: 914MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [POST] /api/flags/batch-evaluate - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/horses/123/care-patterns

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [MemoryMonitoring] Memory threshold exceeded: 926MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [ownership] horse 123 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/horses/123/care-patterns - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [MemoryMonitoring] Memory threshold exceeded: 923MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [MemoryMonitoring] Memory threshold exceeded: 922MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] warn: [MemoryMonitoring] Memory threshold exceeded: 918MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:23] info: [GET] /api/flags/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/session-lifecycle.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:24] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:24] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:24] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 961MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 960MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 962MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 958MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for POST /logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 959MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 969MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for POST /logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/logout - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 970MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] warn: [MemoryMonitoring] Memory threshold exceeded: 965MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for POST /change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [authController.changePassword] Password changed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:25] info: [POST] /api/auth/change-password - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 969MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 965MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for POST /change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] error: [authController.changePassword] Error changing password: Current password is incorrect

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:26] error: [POST] /api/auth/change-password - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:26] error: Error Current password is incorrect

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/change-password - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 970MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 966MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for POST /change-password

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/change-password - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 964MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 961MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [auth] Session expired due to age for GET /profile from ::ffff:127.0.0.1 (8 days old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [auth] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 965MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 961MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 962MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 972MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [auth] Authenticated user 353c64d2-04f5-401d-be93-321b045b9392 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2025-12-29T11:05:26.750Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2025-12-29T11:05:26.771Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:05:26.804Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [MemoryMonitoring] Memory threshold exceeded: 965MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:26] info: [POST] /api/auth/register - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/advancedEpigeneticRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:28] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1008MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: Environmental analysis generated for horse 95503 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-forecast?days=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1012MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/environmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/environmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: Environmental forecast generated for horse 95503 (30 days) by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-forecast?days=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [POST] /api/horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1018MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: Trait opportunity evaluated for horse 95503 (confident in early_socialization) by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [POST] /api/horses/95503/evaluate-trait-opportunity - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1006MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [auth] Access token is required for GET /horses/95503/environmental-analysis from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95503/environmental-analysis - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95505/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1007MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95505/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95505/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [ownership] horse 95505 not found or not owned by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95505/environmental-analysis - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95504/trait-interactions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1009MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-interactions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-interactions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95504

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: Trait interactions analyzed for horse 95504 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95504/trait-interactions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95504/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1017MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95504

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: Trait interaction matrix generated for horse 95504 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95504/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] info: [GET] /api/horses/95504/trait-stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1010MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95504/trait-stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95504

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: Trait stability analyzed for horse 95504 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95504/trait-stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-windows

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1015MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-windows

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-windows

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: Developmental windows identified for horse 95503 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-windows - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-forecast?days=60

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1019MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: Developmental forecast generated for horse 95503 (60 days) by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-forecast?days=60 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/critical-period-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1008MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/critical-period-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/critical-period-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: Critical period analysis generated for horse 95503 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/critical-period-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [POST] /api/horses/95503/coordinate-development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1018MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/coordinate-development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/coordinate-development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [ownership] Validated ownership: user 09f7ff19-3557-4298-ba72-900dd7ca35e8 owns horse 95503

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: Development coordination generated for horse 95503 by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [POST] /api/horses/95503/coordinate-development - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [POST] /api/horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1009MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for POST /horses/95503/evaluate-trait-opportunity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [POST] /api/horses/95503/evaluate-trait-opportunity - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-forecast?days=-5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1009MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/95503/developmental-forecast

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/95503/developmental-forecast?days=-5 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/99999/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1010MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/99999/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [auth] Authenticated user 09f7ff19-3557-4298-ba72-900dd7ca35e8 for GET /horses/99999/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] warn: [ownership] horse 99999 not found or not owned by user 09f7ff19-3557-4298-ba72-900dd7ca35e8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [GET] /api/horses/99999/environmental-analysis - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/epigeneticTraitSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:30] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:30] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [GET] /api/epigenetic-traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1051MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [GET] /api/epigenetic-traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1053MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:30] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [POST] /api/epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] warn: [MemoryMonitoring] Memory threshold exceeded: 1062MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:30] info: [ownership] Found owned horse 95506 for user 9542471f-e832-411e-8e88-8894d1ed6d26

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/log-trait - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506?limit=10&isEpigenetic=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1064MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /epigenetic-traits/history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506?limit=10&isEpigenetic=true - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/summary/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1053MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /epigenetic-traits/summary/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /summary/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/summary/95506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/breeding-insights/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1055MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /epigenetic-traits/breeding-insights/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /breeding-insights/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/breeding-insights/95506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1060MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [auth] Access token is required for GET /epigenetic-traits/history/95506 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1059MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [auth] Access token is required for POST /epigenetic-traits/evaluate-milestone/95506 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1058MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user dcdfe6ca-876e-4ba9-b9ee-f5c4d4acb755 for GET /epigenetic-traits/history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user dcdfe6ca-876e-4ba9-b9ee-f5c4d4acb755 for GET /history/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [ownership] horse 95506 not found or not owned by user dcdfe6ca-876e-4ba9-b9ee-f5c4d4acb755

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/95506 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1060MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /epigenetic-traits/history/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for GET /history/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [ownership] Invalid horse ID: invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [GET] /api/epigenetic-traits/history/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1060MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /epigenetic-traits/log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /log-trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/log-trait - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1061MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] warn: [MemoryMonitoring] Memory threshold exceeded: 1067MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /epigenetic-traits/evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [auth] Authenticated user 9542471f-e832-411e-8e88-8894d1ed6d26 for POST /evaluate-milestone/95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ownership] Validated ownership: user 9542471f-e832-411e-8e88-8894d1ed6d26 owns horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 95506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:31] info: [POST] /api/epigenetic-traits/evaluate-milestone/95506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/controllers/personalityEvolutionController.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:32] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:32] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:32] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:32] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/47374/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1103MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/groom/47374/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /groom/47374/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Validated ownership: user 405b8adf-19f6-4c0f-8c32-6d244c0d782f owns groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.evolveGroomPersonalityController] Processing groom evolution for ID: 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/47374/evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/groom/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /groom/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Groom ID must be a positive integer","path":"groomId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/invalid/evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/47374/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [auth] Access token is required for POST /personality-evolution/groom/47374/evolve from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/groom/47374/evolve - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/horse/95508/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/horse/95508/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /horse/95508/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Validated ownership: user 405b8adf-19f6-4c0f-8c32-6d244c0d782f owns horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.evolveHorseTemperamentController] Processing horse evolution for ID: 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/horse/95508/evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/horse/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1111MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/horse/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /horse/invalid/evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/horse/invalid/evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1111MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/groom/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /groom/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for groom ID: 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned groom 47374 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/triggers - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1100MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/horse/95508/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /horse/95508/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.getEvolutionTriggersController] Analyzing triggers for horse ID: 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned horse 95508 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/triggers - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/invalid/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1105MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/invalid/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /invalid/47374/triggers

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/invalid/47374/triggers - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1106MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/groom/47374/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /groom/47374/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for groom ID: 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned groom 47374 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1108MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/horse/95508/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /horse/95508/stability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.getPersonalityStabilityController] Analyzing stability for horse ID: 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned horse 95508 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/stability - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1111MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/groom/47374/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /groom/47374/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for groom ID: 47374 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned groom 47374 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 47374 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/predict?timeframeDays=60

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1112MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/horse/95508/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /horse/95508/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.predictPersonalityEvolutionController] Predicting evolution for horse ID: 95508 over 60 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned horse 95508 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for horse 95508 over 60 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/horse/95508/predict?timeframeDays=60 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/predict?timeframeDays=500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1115MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/groom/47374/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /groom/47374/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":"500","msg":"Timeframe must be between 1 and 365 days","path":"timeframeDays","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/predict?timeframeDays=500 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1115MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/groom/47374/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /groom/47374/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.getPersonalityEvolutionHistoryController] Getting evolution history for groom ID: 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [ownership] Found owned groom 47374 for user 405b8adf-19f6-4c0f-8c32-6d244c0d782f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/groom/47374/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1104MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.applyPersonalityEvolutionEffectsController] Applying evolution effects for groom ID: 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/apply-effects - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /apply-effects

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","msg":"Entity type must be either \"groom\" or \"horse\"","path":"entityType","location":"body"},{"type":"field","msg":"Invalid evolution type","path":"evolutionType","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/apply-effects - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1107MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionController.batchEvolvePersonalitiesController] Processing batch evolution for 2 entities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 47374

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 95508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/batch-evolve - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1114MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /personality-evolution/batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for POST /batch-evolve

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [personalityEvolutionRoutes] Validation errors: [{"type":"field","value":[],"msg":"Entities must be an array with 1-50 items","path":"entities","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [POST] /api/personality-evolution/batch-evolve - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] warn: [MemoryMonitoring] Memory threshold exceeded: 1114MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /personality-evolution/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [auth] Authenticated user 405b8adf-19f6-4c0f-8c32-6d244c0d782f for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:33] info: [GET] /api/personality-evolution/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomBondingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:34] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:34] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:34] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1150MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording brushing interaction for foal 95509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47375 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47375 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47375 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1151MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording hand-walking interaction for foal 95510

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hand-walking

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -8 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47376 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47376 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47376 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1160MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording stall_care interaction for foal 95511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task stall_care

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47377 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47377 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47377 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1154MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording brushing interaction for foal 95513

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1157MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording brushing interaction for foal 95514

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 4 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47379 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47379 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47379 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1155MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording brushing interaction for foal 95515

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47380 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47380 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47380 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1153MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording brushing interaction for foal 95516

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Interaction recorded: 6 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47381 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomProgressionService.awardGroomXP] Groom 47381 gained 2 XP: 5 ‚Üí 7 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Awarded 2 XP to groom 47381 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] warn: [MemoryMonitoring] Memory threshold exceeded: 1159MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [groomController.recordInteraction] Recording hand-walking interaction for foal 95516

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:35] info: [POST] /api/grooms/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/training.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:36] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:37] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1195MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95518 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95518 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95518 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95518 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95518

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95518 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95518 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1203MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95517 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95517 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95517 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95517 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95517 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95517 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95517 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: Test Adult Horse (ID: 95517)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95517 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95517 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4918

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateHorseStat] Updating obedience by 2 for horse 95517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateHorseStat] Updated obedience for horse 95517: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Stat gain: obedience +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95517 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95517 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95517: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95517

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Test Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2406, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95517 in Dressage (Log ID: 4918, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1195MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95520 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95520 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95520 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95520 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95520 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95520 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95520 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: Score Test Horse (ID: 95520)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95520 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95520 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4919

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95520: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Score Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2407, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95520 in Show Jumping (Log ID: 4919, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1198MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95521 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95521 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95521 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95521 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95521

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95521 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95521 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95521

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95521 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: Accumulation Test Horse 1 (ID: 95521)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95521 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95521 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4920

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 95521 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 95521 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 95521: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 95521

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Accumulation Test Horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2408, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95521 in Cross Country (Log ID: 4920, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1204MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95519 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95519 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95519 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95519 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95519

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95519 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95519 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95519: Mon Dec 29 2025 06:05:37 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95519 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1196MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95523 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95523 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95523 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95523 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95523

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95523 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95523 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95523: Sun Dec 21 2025 06:05:37 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95523 is eligible to train in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: Old Trained Horse (ID: 95523)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95523 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95523 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4922

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Endurance score for horse 95523 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Endurance score for horse 95523 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Endurance score for horse 95523: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Endurance score for horse 95523

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Old Trained Horse in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2409, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95523 in Endurance (Log ID: 4922, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1199MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95524 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95524 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95524 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95524 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95524

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95524 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95524 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95524

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95524 is eligible to train in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: XP Test Horse (ID: 95524)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95524 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95524 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4923

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Trail score for horse 95524 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Trail score for horse 95524 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Trail score for horse 95524: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Trail score for horse 95524

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse XP Test Horse in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2410, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95524 in Trail (Log ID: 4923, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1205MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95525 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95525 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95525 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95525 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95525 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95525 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Horse 95525 is eligible to train in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.getHorseById] Successfully found horse: Log Test Horse (ID: 95525)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Horse 95525 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Logging training session for horse 95525 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4924

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Incrementing Reining score for horse 95525 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Updating Reining score for horse 95525 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.updateDisciplineScore] Successfully updated Reining score for horse 95525: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Reining score for horse 95525

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Log Test Horse in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2411, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Successfully trained horse 95525 in Reining (Log ID: 4924, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1195MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [ownership] horse 99999 not found or not owned by user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1195MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] warn: [MemoryMonitoring] Memory threshold exceeded: 1197MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [auth] Authenticated user 7d7178d9-cf99-43f7-a736-4be35f0ae74f for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [ownership] Found owned horse 95526 for user 7d7178d9-cf99-43f7-a736-4be35f0ae74f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainRouteHandler] Training request for horse 95526 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.trainHorse] Attempting to train horse 95526 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingController.canTrain] Checking training eligibility for horse 95526 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Getting age for horse 95526

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:37] info: [trainingModel.getHorseAge] Horse 95526 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95526 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95526

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingController.canTrain] Horse 95526 is eligible to train in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [horseModel.getHorseById] Successfully found horse: Date Test Horse (ID: 95526)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingController.trainHorse] Horse 95526 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingModel.logTrainingSession] Logging training session for horse 95526 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4925

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [horseModel.incrementDisciplineScore] Incrementing Driving score for horse 95526 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [horseModel.updateDisciplineScore] Updating Driving score for horse 95526 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [horseModel.updateDisciplineScore] Successfully updated Driving score for horse 95526: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [horseModel.incrementDisciplineScore] Successfully incremented Driving score for horse 95526

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [xpLogModel.logXpEvent] Logging XP event: User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5, Reason: Trained horse Date Test Horse in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2412, User 44e57fb4-f4ac-42fa-893e-d4d0c3705a91, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingController.trainHorse] Awarded 5 XP to user 44e57fb4-f4ac-42fa-893e-d4d0c3705a91 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [trainingController.trainHorse] Successfully trained horse 95526 in Driving (Log ID: 4925, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/security/auth-bypass-attempts.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:39] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:39] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [PUT] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Access token is required for PUT /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [PUT] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [DELETE] /api/users/account

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1035MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Access token is required for DELETE /users/account from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [DELETE] /api/users/account - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Access token is required for GET /horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Access token is required for POST /horses from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1037MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid token for GET /profile from ::ffff:127.0.0.1: invalid signature

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1036MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid token for GET /profile from ::ffff:127.0.0.1: invalid algorithm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1048MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Token expired (precheck) for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Token expired for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1050MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Session expired due to age for GET /profile from ::ffff:127.0.0.1 (8 days old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [auth] Session expired. Please login again. for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [auth] Authenticated user 0aa58831-e3e2-4895-852d-778f4e149df3 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [auth] Authenticated user edeaa703-bdd4-4316-9ddd-675dab40b6ee for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1038MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:39] info: [auth] Authenticated user edeaa703-bdd4-4316-9ddd-675dab40b6ee for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1050MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user b34dfe03-8265-4d12-b2da-2a0d42839fb5 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1042MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1039MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1050MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Access token is required for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 46e97fd8-3421-4271-99ba-0c2c14cf1d12 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1043MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 44b86d67-e5e2-43e7-807f-d7a1f5f0ffba for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1040MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 44b86d67-e5e2-43e7-807f-d7a1f5f0ffba for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1051MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 06d66366-0379-491f-90af-278cda874f31 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/users/b0fce51f-e0c0-4ed8-9d9c-496566fbccfe

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 524fc1e9-25d6-4a42-8a67-9e683fcf8ec7 for GET /users/b0fce51f-e0c0-4ed8-9d9c-496566fbccfe

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 524fc1e9-25d6-4a42-8a67-9e683fcf8ec7 for GET /b0fce51f-e0c0-4ed8-9d9c-496566fbccfe

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [userRoutes] Self-access violation: user 524fc1e9-25d6-4a42-8a67-9e683fcf8ec7 attempted to access user b0fce51f-e0c0-4ed8-9d9c-496566fbccfe

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/users/b0fce51f-e0c0-4ed8-9d9c-496566fbccfe - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1048MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 4e24266b-5f24-45e5-b1ea-c43de8e3fdd4 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 65e86bf1-f92d-49d5-8d2c-64862bf7ad23 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1041MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 65e86bf1-f92d-49d5-8d2c-64862bf7ad23 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1052MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Invalid token for GET /profile from ::ffff:127.0.0.1: invalid signature

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1049MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [auth] Invalid or expired token for GET /profile from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1045MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user 1' OR '1'='1 for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] error: [authController.getProfile] Error retrieving profile: User not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] error: [GET] /api/auth/profile - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] error: Error User not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1046MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user undefined for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] error: [authController.getProfile] Error retrieving profile: Authentication error, user not found in request

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] error: [GET] /api/auth/profile - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] error: Error Authentication error, user not found in request

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/auth/profile - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/users/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [MemoryMonitoring] Memory threshold exceeded: 1047MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user not-a-number for GET /users/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [auth] Authenticated user not-a-number for GET /profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"profile","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [GET] /api/users/profile - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/auth-simple.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:40] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:40] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:41] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:41] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=13684f97034e9d109186d7800d6d30a9e459c8e7bf7cf70e02e226528e1c2d86

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:05:41] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: login-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5ca0eb7a5e82498c7447aa29878d9bea18c55670fc42022ddd4125c8f99c940c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:05:42] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] warn: [AuthRateLimiter] resetAuthRateLimit() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomAssignmentSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:43] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:43] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1114MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Assignment Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1121MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95528

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Assignment Test Horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1124MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] error: [groomAssignmentService] Error creating assignment: Groom is already assigned to this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:43] error: [groomAssignmentController] Error creating assignment: Groom is already assigned to this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1127MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [groomAssignmentRoutes] Validation errors: [{"type":"field","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1128MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95529

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] error: [groomAssignmentService] Error creating assignment: You do not own this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:43] error: [groomAssignmentController] Error creating assignment: You do not own this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:43] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1117MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Getting assignments for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [GET] /api/groom-assignments - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [GET] /api/groom-assignments?groomId=47382

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1123MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [groomAssignmentController] Getting assignments for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [GET] /api/groom-assignments?groomId=47382 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] info: [GET] /api/groom-assignments/dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:43] warn: [MemoryMonitoring] Memory threshold exceeded: 1125MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments/dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Getting assignment dashboard for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/dashboard - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/groom/47382/limits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1117MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments/groom/47382/limits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom/47382/limits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [ownership] Validated ownership: user c70a4fec-faa2-449a-b8de-30be10d78fdf owns groom 47382

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Getting limits for groom 47382

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/groom/47382/limits - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1123MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95530

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentService] Created assignment: Assignment Test Groom 1 -> Limit Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1124MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95531

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1126MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95532

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1128MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95533

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1130MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Creating assignment: groom 47382 -> horse 95534

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentService] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] error: [groomAssignmentController] Error creating assignment: Groom Assignment Test Groom 1 has reached maximum assignments (3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1122MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments/salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Calculating salary costs for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/salary-costs - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1125MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /groom-assignments/validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for POST /validate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Validating assignment: groom 47383 -> horse 95527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments/validate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1127MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Getting assignments for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [DELETE] /api/groom-assignments/6527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1129MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for DELETE /groom-assignments/6527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for DELETE /6527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [ownership] Validated ownership: user c70a4fec-faa2-449a-b8de-30be10d78fdf owns groom-assignment 6527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentController] Removing assignment 6527

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentService] Removed assignment: Assignment Test Groom 1 -> Assignment Test Horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [DELETE] /api/groom-assignments/6527 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [DELETE] /api/groom-assignments/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1131MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for DELETE /groom-assignments/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for DELETE /99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [ownership] groom-assignment 99999 not found or not owned by user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [DELETE] /api/groom-assignments/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1131MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1131MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /groom-assignments/statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [auth] Authenticated user c70a4fec-faa2-449a-b8de-30be10d78fdf for GET /statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [groomAssignmentRoutes] Getting assignment statistics for user c70a4fec-faa2-449a-b8de-30be10d78fdf

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/statistics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1120MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [auth] Access token is required for GET /groom-assignments from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1121MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [auth] Access token is required for POST /groom-assignments from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [POST] /api/groom-assignments - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/dashboard

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1121MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [auth] Access token is required for GET /groom-assignments/dashboard from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/dashboard - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/salary-costs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [MemoryMonitoring] Memory threshold exceeded: 1121MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] warn: [auth] Access token is required for GET /groom-assignments/salary-costs from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:44] info: [GET] /api/groom-assignments/salary-costs - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/training-complete.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:45] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f8e7398f9f29b670998e681fce1c53049bc14e8fe14bb1a2dda3505a89cb9431

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:05:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Created test user e4bc89d2-9675-499e-ac30-8daad1447332 with 3 horses

      at Object.<anonymous> (tests/training-complete.test.mjs:220:13)

    console.log
      [2025-12-29 06:05:46] info: [auth] Authenticated user e4bc89d2-9675-499e-ac30-8daad1447332 for GET /api/horses/trainable/e4bc89d2-9675-499e-ac30-8daad1447332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Trainable horses: [
        {
          "horseId": 95535,
          "name": "Training Horse 1",
          "age": 4,
          "breed": "Competition Thoroughbred",
          "trainableDisciplines": [
            "Racing",
            "Dressage",
            "Show Jumping",
            "Cross Country",
            "Western"
          ]
        },
        {
          "horseId": 95537,
          "name": "Training Horse 2",
          "age": 5,
          "breed": "Competition Thoroughbred",
          "trainableDisciplines": [
            "Racing",
            "Dressage",
            "Show Jumping",
            "Cross Country",
            "Western"
          ]
        }
      ]

      at Object.<anonymous> (tests/training-complete.test.mjs:272:15)

    console.log
      [2025-12-29 06:05:46] info: [auth] Authenticated user e4bc89d2-9675-499e-ac30-8daad1447332 for GET /api/horses/trainable/e4bc89d2-9675-499e-ac30-8daad1447332

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] info: [auth] Authenticated user e4bc89d2-9675-499e-ac30-8daad1447332 for POST /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Training response: {
        "success": true,
        "message": "Training Horse 1 trained in Racing. +5 added.",
        "updatedScore": 5,
        "nextEligibleDate": "2026-01-05T11:05:46.246Z"
      }

      at Object.<anonymous> (tests/training-complete.test.mjs:300:15)

    console.log
      [2025-12-29 06:05:46] info: [auth] Authenticated user e4bc89d2-9675-499e-ac30-8daad1447332 for POST /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] warn: [auth] Access token is required for GET /api/horses/trainable/e4bc89d2-9675-499e-ac30-8daad1447332 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/trainingProgression.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:47] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:47] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1198MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d0ab28e994b4c98f918bce8a3dcca86d716ce7e6e88f3df84850e55cb6a761b3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-12-29 06:05:47] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1195MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [auth] Authenticated user f5bade59-0499-4c12-ae27-895e1ab22acb for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [ownership] Found owned horse 95538 for user f5bade59-0499-4c12-ae27-895e1ab22acb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.trainRouteHandler] Training request for horse 95538 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.trainHorse] Attempting to train horse 95538 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.canTrain] Checking training eligibility for horse 95538 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getHorseAge] Getting age for horse 95538

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getHorseAge] Horse 95538 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.canTrain] Horse 95538 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1201MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [auth] Authenticated user f5bade59-0499-4c12-ae27-895e1ab22acb for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [ownership] Found owned horse 95539 for user f5bade59-0499-4c12-ae27-895e1ab22acb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.trainRouteHandler] Training request for horse 95539 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.trainHorse] Attempting to train horse 95539 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.canTrain] Checking training eligibility for horse 95539 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getHorseAge] Getting age for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getHorseAge] Horse 95539 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95539 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:47] info: [trainingController.canTrain] Horse 95539 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 95539)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Horse 95539 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.logTrainingSession] Logging training session for horse 95539 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4926

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 95539 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 95539 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 95539: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [xpLogModel.logXpEvent] Logging XP event: User f5bade59-0499-4c12-ae27-895e1ab22acb, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2413, User f5bade59-0499-4c12-ae27-895e1ab22acb, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Awarded 5 XP to user f5bade59-0499-4c12-ae27-895e1ab22acb for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Successfully trained horse 95539 in Racing (Log ID: 4926, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1205MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [auth] Authenticated user f5bade59-0499-4c12-ae27-895e1ab22acb for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [ownership] Found owned horse 95539 for user f5bade59-0499-4c12-ae27-895e1ab22acb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainRouteHandler] Training request for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Attempting to train horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Checking training eligibility for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Getting age for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Horse 95539 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95539 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95539: Mon Dec 29 2025 06:05:48 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Horse 95539 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1197MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [auth] Authenticated user f5bade59-0499-4c12-ae27-895e1ab22acb for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [ownership] Found owned horse 95539 for user f5bade59-0499-4c12-ae27-895e1ab22acb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainRouteHandler] Training request for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Attempting to train horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Checking training eligibility for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Getting age for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Horse 95539 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95539 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95539: Mon Dec 29 2025 06:05:48 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Horse 95539 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] warn: [MemoryMonitoring] Memory threshold exceeded: 1202MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [auth] Authenticated user f5bade59-0499-4c12-ae27-895e1ab22acb for POST /training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [ownership] Found owned horse 95539 for user f5bade59-0499-4c12-ae27-895e1ab22acb

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainRouteHandler] Training request for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Attempting to train horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Checking training eligibility for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Getting age for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getHorseAge] Horse 95539 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95539 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95539: Sun Dec 21 2025 06:05:48 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.canTrain] Horse 95539 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 95539)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Horse 95539 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.logTrainingSession] Logging training session for horse 95539 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4927

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95539 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95539 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95539: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95539

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [xpLogModel.logXpEvent] Logging XP event: User f5bade59-0499-4c12-ae27-895e1ab22acb, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2414, User f5bade59-0499-4c12-ae27-895e1ab22acb, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Awarded 5 XP to user f5bade59-0499-4c12-ae27-895e1ab22acb for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [trainingController.trainHorse] Successfully trained horse 95539 in Dressage (Log ID: 4927, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomPerformanceSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:49] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:49] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Updated metrics for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Recorded performance for groom 47384: grooming

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Updated metrics for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Recorded performance for groom 47384: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Updated metrics for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Recorded performance for groom 47384: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Updated metrics for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Recorded performance for groom 47384: training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceController] Recording performance for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [ownership] Found owned groom 47384 for user fab8341b-a3bd-47a3-873a-19d5012fcf9a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [ownership] Found owned horse 95540 for user fab8341b-a3bd-47a3-873a-19d5012fcf9a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Updated metrics for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceService] Recorded performance for groom 47384: enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [POST] /api/groom-performance/record - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/groom/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1241MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom-performance/groom/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [ownership] Validated ownership: user fab8341b-a3bd-47a3-873a-19d5012fcf9a owns groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceController] Getting performance for groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/groom/47384 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/top?limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1248MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom-performance/top

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /top

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceController] Getting top performers for user fab8341b-a3bd-47a3-873a-19d5012fcf9a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/top?limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom-performance/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [groomPerformanceController] Getting performance config for user fab8341b-a3bd-47a3-873a-19d5012fcf9a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:49] info: [GET] /api/groom-performance/analytics/47384?days=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1239MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom-performance/analytics/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /analytics/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [ownership] Validated ownership: user fab8341b-a3bd-47a3-873a-19d5012fcf9a owns groom 47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [groomPerformanceController] Getting analytics for groom 47384, last 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/analytics/47384?days=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/groom/47385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom-performance/groom/47385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for GET /groom/47385

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [ownership] groom 47385 not found or not owned by user fab8341b-a3bd-47a3-873a-19d5012fcf9a

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/groom/47385 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [auth] Authenticated user fab8341b-a3bd-47a3-873a-19d5012fcf9a for POST /record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1250MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [auth] Access token is required for POST /groom-performance/record from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [POST] /api/groom-performance/record - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/groom/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1249MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [auth] Access token is required for GET /groom-performance/groom/47384 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/groom/47384 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/top

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1248MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [auth] Access token is required for GET /groom-performance/top from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/top - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1247MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [auth] Access token is required for GET /groom-performance/config from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/config - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/analytics/47384

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [MemoryMonitoring] Memory threshold exceeded: 1246MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] warn: [auth] Access token is required for GET /groom-performance/analytics/47384 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [GET] /api/groom-performance/analytics/47384 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/routes/enhancedReportingRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:51] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:51] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:51] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:51] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:51] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:51] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1287MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [ownership] Validated ownership: user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 owns horse 95542

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Enhanced trait history generated for horse 95542 by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/enhanced-trait-history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95543/epigenetic-insights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95543/epigenetic-insights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95543/epigenetic-insights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [ownership] Validated ownership: user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 owns horse 95543

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Epigenetic insights generated for horse 95543 by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95543/epigenetic-insights - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/trait-timeline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1284MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/trait-timeline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/trait-timeline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [ownership] Validated ownership: user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 owns horse 95542

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Trait timeline generated for horse 95542 by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/trait-timeline - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/users/8d2fd5f8-283d-4e70-bb1c-ffd21cb43072/stable-epigenetic-report

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1291MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /users/8d2fd5f8-283d-4e70-bb1c-ffd21cb43072/stable-epigenetic-report

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /users/8d2fd5f8-283d-4e70-bb1c-ffd21cb43072/stable-epigenetic-report

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Stable epigenetic report generated for user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/users/8d2fd5f8-283d-4e70-bb1c-ffd21cb43072/stable-epigenetic-report - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [POST] /api/horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1294MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Horse comparison generated for 3 horses by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [POST] /api/horses/compare-epigenetics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/trait-trends?userId=8d2fd5f8-283d-4e70-bb1c-ffd21cb43072&timeframe=30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/trait-trends

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /trait-trends

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Trait trends analyzed for user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 (30 days)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/trait-trends?userId=8d2fd5f8-283d-4e70-bb1c-ffd21cb43072&timeframe=30 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2025-12-19T11%3A05%3A52.579Z&dateTo=2025-12-29T11%3A05%3A52.579Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1296MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95542/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [ownership] Validated ownership: user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 owns horse 95542

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Enhanced trait history generated for horse 95542 by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95542/enhanced-trait-history?traitType=positive&discoveryMethod=milestone_evaluation&dateFrom=2025-12-19T11%3A05%3A52.579Z&dateTo=2025-12-29T11%3A05%3A52.579Z - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95543/epigenetic-report-export?format=detailed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1298MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95543/epigenetic-report-export

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95543/epigenetic-report-export

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [ownership] Validated ownership: user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 owns horse 95543

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: Epigenetic report export generated for horse 95543 (detailed) by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95543/epigenetic-report-export?format=detailed - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95541/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1288MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [auth] Access token is required for GET /horses/95541/enhanced-trait-history from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95541/enhanced-trait-history - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95544/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1289MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95544/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/95544/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [ownership] horse 95544 not found or not owned by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/95544/enhanced-trait-history - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [POST] /api/horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1292MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for POST /horses/compare-epigenetics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [POST] /api/horses/compare-epigenetics - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/99999/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [MemoryMonitoring] Memory threshold exceeded: 1291MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/99999/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [auth] Authenticated user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072 for GET /horses/99999/enhanced-trait-history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] warn: [ownership] horse 99999 not found or not owned by user 8d2fd5f8-283d-4e70-bb1c-ffd21cb43072

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:52] info: [GET] /api/horses/99999/enhanced-trait-history - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/breedingPrediction.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:53] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:54] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95545 and mare 95546

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 6 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculating flag inheritance for stallion 95547 and mare 95548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95547 and mare 95548

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 2 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculated flag inheritance score: 13.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95549 and mare 95550

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 0 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateTemperamentInfluence] Calculating temperament influence for stallion 95551 and mare 95552

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateTemperamentInfluence] Calculated temperament compatibility: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.predictOffspringTraits] Predicting offspring traits for stallion 95553 and mare 95554

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95553 and mare 95554

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 4 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculating flag inheritance for stallion 95553 and mare 95554

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95553 and mare 95554

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 4 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateFlagInheritanceScore] Calculated flag inheritance score: 26.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.predictOffspringTraits] Predicted 2 traits with medium confidence

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculating inheritance for stallion 95555 and mare 95556

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.calculateInheritanceProbabilities] Calculated 2 trait probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95557/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1340MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [auth] Authenticated user e8a45d80-7b2c-431d-86a6-e34205e1fcba for GET /horses/95557/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [ownership] Validated ownership: user e8a45d80-7b2c-431d-86a6-e34205e1fcba owns horse 95557

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.generateBreedingData] Generating breeding data for horse 95557

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.generateBreedingData] Generated breeding data for horse 95557 with 1 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95557/breeding-data - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95559/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1333MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] warn: [auth] Access token is required for GET /horses/95559/breeding-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95559/breeding-data - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95561/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] warn: [MemoryMonitoring] Memory threshold exceeded: 1335MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [auth] Authenticated user c8345c0a-808e-49c7-918f-668855bed5db for GET /horses/95561/breeding-data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [ownership] Validated ownership: user c8345c0a-808e-49c7-918f-668855bed5db owns horse 95561

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.generateBreedingData] Generating breeding data for horse 95561

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [breedingPredictionService.generateBreedingData] Generated breeding data for horse 95561 with 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [GET] /api/horses/95561/breeding-data - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/controllers/dynamicCompatibilityController.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:55] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:55] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1377MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 47396 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned groom 47396 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned horse 95563 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 1.381 (highly_recommended)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1384MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.calculateCompatibility] Calculating compatibility for groom 47397 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned groom 47397 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned horse 95563 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.calculateCompatibility] Compatibility calculated: 0.340 (not_recommended)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1374MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1375MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [auth] Access token is required for POST /compatibility/calculate from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/calculate - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [GET] /api/compatibility/factors/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1374MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /compatibility/factors/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /factors/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Validated ownership: user 005d4e60-c51e-4cdc-9994-c9388a2a5450 owns groom 47396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Validated ownership: user 005d4e60-c51e-4cdc-9994-c9388a2a5450 owns horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.getCompatibilityFactors] Analyzing factors for groom 47396 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.getCompatibilityFactors] Factors analyzed: excellent compatibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [GET] /api/compatibility/factors/47396/95563 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [GET] /api/compatibility/factors/invalid/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1382MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /compatibility/factors/invalid/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /factors/invalid/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [GET] /api/compatibility/factors/invalid/95563 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1382MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 47396 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned groom 47396 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned horse 95563 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: excellent quality, 0.95 success probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1375MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /predict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.predictOutcome] Predicting outcome for groom 47397 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned groom 47397 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned horse 95563 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.predictOutcome] Outcome predicted: fair quality, 0.52 success probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/predict - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [POST] /api/compatibility/recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /compatibility/recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for POST /recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [dynamicCompatibilityController.getRecommendations] Getting recommendations for horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:55] info: [ownership] Found owned horse 95563 for user 005d4e60-c51e-4cdc-9994-c9388a2a5450

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [dynamicCompatibilityController.getRecommendations] Found 3 groom recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [POST] /api/compatibility/recommendations - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [GET] /api/compatibility/trends/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /compatibility/trends/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /trends/47396/95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [ownership] Validated ownership: user 005d4e60-c51e-4cdc-9994-c9388a2a5450 owns groom 47396

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [ownership] Validated ownership: user 005d4e60-c51e-4cdc-9994-c9388a2a5450 owns horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [dynamicCompatibilityController.getCompatibilityTrends] Analyzing trends for groom 47396 and horse 95563

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [dynamicCompatibilityController.getCompatibilityTrends] Trends analyzed: insufficient_data trend with 0 data points

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [GET] /api/compatibility/trends/47396/95563 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [GET] /api/compatibility/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] warn: [MemoryMonitoring] Memory threshold exceeded: 1383MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /compatibility/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [auth] Authenticated user 005d4e60-c51e-4cdc-9994-c9388a2a5450 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [dynamicCompatibilityController.getCompatibilityConfig] Getting compatibility system configuration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [GET] /api/compatibility/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/dashboardRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:57] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:05:57] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/c1425192-6a15-4d47-ae28-7e55875b5e45

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1422MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user c1425192-6a15-4d47-ae28-7e55875b5e45 for GET /users/dashboard/c1425192-6a15-4d47-ae28-7e55875b5e45

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user c1425192-6a15-4d47-ae28-7e55875b5e45 for GET /dashboard/c1425192-6a15-4d47-ae28-7e55875b5e45

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userRoutes] Self-access validated: user c1425192-6a15-4d47-ae28-7e55875b5e45 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user c1425192-6a15-4d47-ae28-7e55875b5e45

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95566 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95566: Mon Dec 29 2025 04:05:57 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95567 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95567

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95568 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95568

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user c1425192-6a15-4d47-ae28-7e55875b5e45

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userController.getDashboardData] Successfully retrieved dashboard data for user testdashboarduser (3 horses, 2 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/c1425192-6a15-4d47-ae28-7e55875b5e45 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/nonexistent-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 82f20dde-08b9-4cac-835f-a7473efc197a for GET /users/dashboard/nonexistent-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 82f20dde-08b9-4cac-835f-a7473efc197a for GET /dashboard/nonexistent-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [userRoutes] Validation errors for /dashboard/:userId: [{"type":"field","value":"nonexistent-user","msg":"User ID must be a valid UUID","path":"userId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/nonexistent-user - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/458b3256-bcfe-41cc-9cb0-54be25e6ac65

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1429MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [auth] Access token is required for GET /users/dashboard/458b3256-bcfe-41cc-9cb0-54be25e6ac65 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/458b3256-bcfe-41cc-9cb0-54be25e6ac65 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1421MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 3330813c-3979-453e-bcba-7dd906f729b3 for GET /users/dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 3330813c-3979-453e-bcba-7dd906f729b3 for GET /dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [userRoutes] Validation errors for /dashboard/:userId: [{"type":"field","value":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","msg":"User ID must be a valid UUID","path":"userId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/134a90c3-503b-4b5c-a39f-92e855eb0246

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1427MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 134a90c3-503b-4b5c-a39f-92e855eb0246 for GET /users/dashboard/134a90c3-503b-4b5c-a39f-92e855eb0246

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 134a90c3-503b-4b5c-a39f-92e855eb0246 for GET /dashboard/134a90c3-503b-4b5c-a39f-92e855eb0246

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userRoutes] Self-access validated: user 134a90c3-503b-4b5c-a39f-92e855eb0246 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user 134a90c3-503b-4b5c-a39f-92e855eb0246

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] User 134a90c3-503b-4b5c-a39f-92e855eb0246 has no horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userController.getDashboardData] Successfully retrieved dashboard data for user emptydashboarduser (0 horses, 0 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/134a90c3-503b-4b5c-a39f-92e855eb0246 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/2378bdcd-725d-4ef6-ae76-3009c3188eea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] warn: [MemoryMonitoring] Memory threshold exceeded: 1424MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 2378bdcd-725d-4ef6-ae76-3009c3188eea for GET /users/dashboard/2378bdcd-725d-4ef6-ae76-3009c3188eea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [auth] Authenticated user 2378bdcd-725d-4ef6-ae76-3009c3188eea for GET /dashboard/2378bdcd-725d-4ef6-ae76-3009c3188eea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userRoutes] Self-access validated: user 2378bdcd-725d-4ef6-ae76-3009c3188eea accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user 2378bdcd-725d-4ef6-ae76-3009c3188eea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95584 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95584

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user 2378bdcd-725d-4ef6-ae76-3009c3188eea

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [userController.getDashboardData] Successfully retrieved dashboard data for user inactivedashboarduser (1 horses, 1 trainable)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:57] info: [GET] /api/users/dashboard/2378bdcd-725d-4ef6-ae76-3009c3188eea - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/competitionScore.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:05:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 16.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 226 (base: 210, trait: +0, luck: 16.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.7%, adjustment: -18.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 210, trait: +0, luck: -18.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.3%, adjustment: 6.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 217 (base: 210, trait: +0, luck: 6.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.6%, adjustment: 18.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 228 (base: 210, trait: +0, luck: 18.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 15.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 15.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.0%, adjustment: 9.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.2%, adjustment: 0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.2%, adjustment: -18.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 281 (base: 300, trait: +0, luck: -18.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.3%, adjustment: 16.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 16.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 5.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -20.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -20.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.6%, adjustment: -4.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.6%, adjustment: -1.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 298 (base: 300, trait: +0, luck: -1.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.1%, adjustment: 15.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 15.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.1%, adjustment: -6.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -6.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -3.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 297 (base: 300, trait: +0, luck: -3.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 10.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 10.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 2.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 302 (base: 300, trait: +0, luck: 2.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.1%, adjustment: 0.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 300 (base: 300, trait: +0, luck: 0.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.5%, adjustment: 16.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 16.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 3.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 3.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.1%, adjustment: -21.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -21.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 7.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 307 (base: 300, trait: +0, luck: 7.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 18.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 18.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.6%, adjustment: 1.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 302 (base: 300, trait: +0, luck: 1.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 5.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.4%, adjustment: -19.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 281 (base: 300, trait: +0, luck: -19.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.4%, adjustment: 16.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 16.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.9%, adjustment: 2.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 303 (base: 300, trait: +0, luck: 2.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.4%, adjustment: -1.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 299 (base: 300, trait: +0, luck: -1.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.8%, adjustment: 14.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -14.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.3%, adjustment: -21.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -21.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -17.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -17.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.8%, adjustment: -17.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -17.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 5.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.9%, adjustment: -17.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -17.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 17.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 17.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.6%, adjustment: 13.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 314 (base: 300, trait: +0, luck: 13.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.2%, adjustment: -3.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 296 (base: 300, trait: +0, luck: -3.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.3%, adjustment: -16.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 284 (base: 300, trait: +0, luck: -16.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -24.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 276 (base: 300, trait: +0, luck: -24.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.8%, adjustment: -17.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 283 (base: 300, trait: +0, luck: -17.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.0%, adjustment: 21.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 321 (base: 300, trait: +0, luck: 21.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.6%, adjustment: 4.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 4.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.3%, adjustment: -12.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 287 (base: 300, trait: +0, luck: -12.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 11.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 311 (base: 300, trait: +0, luck: 11.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.2%, adjustment: -9.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 290 (base: 300, trait: +0, luck: -9.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -5.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -5.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.6%, adjustment: -4.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.7%, adjustment: -14.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 25.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 325 (base: 300, trait: +0, luck: 25.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.7%, adjustment: -1.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 79 (base: 80, trait: +0, luck: -1.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.2%, adjustment: -5.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -5.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.2%, adjustment: 8.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 8.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -11.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 118 (base: 130, trait: +0, luck: -11.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.3%, adjustment: -8.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 122 (base: 130, trait: +0, luck: -8.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:05:58] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.5%, adjustment: 6.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.5%, adjustment: 15.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 195 (base: 180, trait: +0, luck: 15.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:58] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:05:59] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/enhancedGroomInteractions.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:01] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:01] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1271MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /grooms/enhanced/interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [ownership] Validated ownership: user 033b9f24-41f0-4cb7-8b03-1302427cc05b owns groom 47399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [ownership] Validated ownership: user 033b9f24-41f0-4cb7-8b03-1302427cc05b owns horse 95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [enhancedGroomController] Getting enhanced interactions for groom 47399 and horse 95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/47399/95585 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/99999/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1280MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /grooms/enhanced/interactions/99999/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /interactions/99999/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [ownership] groom 99999 not found or not owned by user 033b9f24-41f0-4cb7-8b03-1302427cc05b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/99999/95585 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/47399/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /grooms/enhanced/interactions/47399/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /interactions/47399/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [ownership] Validated ownership: user 033b9f24-41f0-4cb7-8b03-1302427cc05b owns groom 47399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [ownership] horse 99999 not found or not owned by user 033b9f24-41f0-4cb7-8b03-1302427cc05b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [GET] /api/grooms/enhanced/interactions/47399/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] warn: [MemoryMonitoring] Memory threshold exceeded: 1283MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [enhancedGroomController] Performing enhanced daily_care interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [ownership] Found owned groom 47399 for user 033b9f24-41f0-4cb7-8b03-1302427cc05b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:01] info: [enhancedGroomInteractions] Calculated effects: +7 bonding, -4 stress, quality: good

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Enhanced interaction completed: +7 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1275MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Performing enhanced enrichment interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [ownership] Found owned groom 47399 for user 033b9f24-41f0-4cb7-8b03-1302427cc05b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomInteractions] Calculated effects: +11 bonding, -6 stress, quality: excellent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Enhanced interaction completed: +11 bonding, -6 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Performing enhanced bonding_time interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [ownership] Found owned groom 47399 for user 033b9f24-41f0-4cb7-8b03-1302427cc05b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomInteractions] Calculated effects: +8 bonding, -4 stress, quality: good

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Enhanced interaction completed: +8 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1285MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Performing enhanced bonding_time interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1274MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","msg":"Invalid value","path":"interactionType","location":"body"},{"type":"field","msg":"Interaction type must be a non-empty string (max 50 characters)","path":"interactionType","location":"body"},{"type":"field","msg":"Invalid value","path":"variation","location":"body"},{"type":"field","msg":"Variation must be a non-empty string (max 100 characters)","path":"variation","location":"body"},{"type":"field","msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1274MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [enhancedGroomController] Performing enhanced invalid_type interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1277MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for POST /interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [enhancedGroomRoutes] Validation errors: [{"type":"field","value":200,"msg":"Duration must be between 5 and 180 minutes","path":"duration","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [POST] /api/grooms/enhanced/interact - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/relationship/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1277MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /grooms/enhanced/relationship/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /relationship/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [ownership] Validated ownership: user 033b9f24-41f0-4cb7-8b03-1302427cc05b owns groom 47399

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [ownership] Validated ownership: user 033b9f24-41f0-4cb7-8b03-1302427cc05b owns horse 95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/relationship/47399/95585 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1283MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /grooms/enhanced/interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 033b9f24-41f0-4cb7-8b03-1302427cc05b for GET /interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/types - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1286MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [auth] Access token is required for GET /grooms/enhanced/interactions/47399/95585 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/47399/95585 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1285MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [auth] Access token is required for GET /grooms/enhanced/interact from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interact - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/relationship/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1283MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [auth] Access token is required for GET /grooms/enhanced/relationship/47399/95585 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/relationship/47399/95585 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/types

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1282MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [auth] Access token is required for GET /grooms/enhanced/interactions/types from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/types - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [MemoryMonitoring] Memory threshold exceeded: 1281MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 9a62b7c2-bb5f-44b9-8dee-1942452bdf49 for GET /grooms/enhanced/interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [auth] Authenticated user 9a62b7c2-bb5f-44b9-8dee-1942452bdf49 for GET /interactions/47399/95585

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] warn: [ownership] groom 47399 not found or not owned by user 9a62b7c2-bb5f-44b9-8dee-1942452bdf49

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [GET] /api/grooms/enhanced/interactions/47399/95585 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/userRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:03] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:03] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1319MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userRoutes] Self-access validated: user f930e61a-f963-4d53-9e16-4802416b3668 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Getting comprehensive progress for user f930e61a-f963-4d53-9e16-4802416b3668

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1767006363509 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users//progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1325MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users//progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users//progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1325MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/a/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1326MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1326MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1327MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userRoutes] Self-access validated: user f930e61a-f963-4d53-9e16-4802416b3668 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Getting comprehensive progress for user f930e61a-f963-4d53-9e16-4802416b3668

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1767006363509 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1330MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /f930e61a-f963-4d53-9e16-4802416b3668/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userRoutes] Self-access validated: user f930e61a-f963-4d53-9e16-4802416b3668 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Getting comprehensive progress for user f930e61a-f963-4d53-9e16-4802416b3668

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1767006363509 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1320MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/user-123_test/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1321MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user 345c2542-0cb6-45b4-9478-a5528659768c for GET /users/345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user 345c2542-0cb6-45b4-9478-a5528659768c for GET /345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userRoutes] Self-access validated: user 345c2542-0cb6-45b4-9478-a5528659768c accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.getUser] Getting user 345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/345c2542-0cb6-45b4-9478-a5528659768c - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1324MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for GET /550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1326MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [userController.createUser] Creating user NewUser_1767006363949

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [createUser] User created: NewUser_1767006363949

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [POST] /api/users - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:03] warn: [MemoryMonitoring] Memory threshold exceeded: 1328MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [POST] /api/users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [PUT] /api/users/345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1326MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user 345c2542-0cb6-45b4-9478-a5528659768c for PUT /users/345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user 345c2542-0cb6-45b4-9478-a5528659768c for PUT /345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userRoutes] Self-access validated: user 345c2542-0cb6-45b4-9478-a5528659768c accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userController.updateUser] Updating user 345c2542-0cb6-45b4-9478-a5528659768c

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [PUT] /api/users/345c2542-0cb6-45b4-9478-a5528659768c - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1328MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for PUT /users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for PUT /550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [DELETE] /api/users/91cce2fb-cc6b-4c42-8280-4b94e74e86f0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1328MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user 91cce2fb-cc6b-4c42-8280-4b94e74e86f0 for DELETE /users/91cce2fb-cc6b-4c42-8280-4b94e74e86f0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user 91cce2fb-cc6b-4c42-8280-4b94e74e86f0 for DELETE /91cce2fb-cc6b-4c42-8280-4b94e74e86f0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userRoutes] Self-access validated: user 91cce2fb-cc6b-4c42-8280-4b94e74e86f0 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userController.deleteUser] Deleting user 91cce2fb-cc6b-4c42-8280-4b94e74e86f0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [DELETE] /api/users/91cce2fb-cc6b-4c42-8280-4b94e74e86f0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1330MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for DELETE /users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for DELETE /550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [POST] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1331MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /users/f930e61a-f963-4d53-9e16-4802416b3668/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /f930e61a-f963-4d53-9e16-4802416b3668/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userRoutes] Self-access validated: user f930e61a-f963-4d53-9e16-4802416b3668 accessing own data

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [userController.addXp] Adding 50 XP to user f930e61a-f963-4d53-9e16-4802416b3668

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [POST] /api/users/f930e61a-f963-4d53-9e16-4802416b3668/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [MemoryMonitoring] Memory threshold exceeded: 1333MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /users/550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [auth] Authenticated user f930e61a-f963-4d53-9e16-4802416b3668 for POST /550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] warn: [userRoutes] Self-access violation: user f930e61a-f963-4d53-9e16-4802416b3668 attempted to access user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 403

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/security/ownership-violations.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:04] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:04] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:05] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:05] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95589

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1369MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 2aedfe1b-97e3-4219-83e5-019079075d6f for GET /horses/95589

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] horse 95589 not found or not owned by user 2aedfe1b-97e3-4219-83e5-019079075d6f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95589 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95590

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1374MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 65a62fa9-d479-49f4-9b18-d89bec120968 for GET /horses/95590

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [ownership] Validated ownership: user 65a62fa9-d479-49f4-9b18-d89bec120968 owns horse 95590

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95590 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [PUT] /api/horses/95593

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1378MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user d509b86f-641a-47af-9d18-806ff77b906b for PUT /horses/95593

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] horse 95593 not found or not owned by user d509b86f-641a-47af-9d18-806ff77b906b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [PUT] /api/horses/95593 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [PUT] /api/horses/95594

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1369MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user f9c339cf-e4c8-41c7-b781-772efba261c9 for PUT /horses/95594

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [ownership] Validated ownership: user f9c339cf-e4c8-41c7-b781-772efba261c9 owns horse 95594

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [horseRoutes] User f9c339cf-e4c8-41c7-b781-772efba261c9 updated horse: Updated Horse Name (ID: 95594)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [PUT] /api/horses/95594 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [DELETE] /api/horses/95597

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1373MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 3c19f7d7-a6ba-45df-8d1c-222963e0ec7f for DELETE /horses/95597

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] horse 95597 not found or not owned by user 3c19f7d7-a6ba-45df-8d1c-222963e0ec7f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [DELETE] /api/horses/95597 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [DELETE] /api/horses/95596

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1372MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 3c19f7d7-a6ba-45df-8d1c-222963e0ec7f for DELETE /horses/95596

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [ownership] Validated ownership: user 3c19f7d7-a6ba-45df-8d1c-222963e0ec7f owns horse 95596

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [horseRoutes] User 3c19f7d7-a6ba-45df-8d1c-222963e0ec7f deleted horse ID: 95596

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [DELETE] /api/horses/95596 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/grooms/47411/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1378MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user ea1112fb-9ee0-46e7-a0ae-176b681278df for GET /grooms/47411/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] groom 47411 not found or not owned by user ea1112fb-9ee0-46e7-a0ae-176b681278df

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/grooms/47411/profile - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/grooms/47412/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1379MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user f33e5530-5620-4121-ac0a-c7619fbfd4ff for GET /grooms/47412/profile

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [ownership] Validated ownership: user f33e5530-5620-4121-ac0a-c7619fbfd4ff owns groom 47412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [groomController.getGroomProfile] Retrieved profile for groom 47412

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/grooms/47412/profile - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/abc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1369MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 774d42b2-eced-4a56-90e9-2b83ddef8aaf for GET /horses/abc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/abc - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1372MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 45155a44-0b1c-4818-a313-692d5fc60b55 for GET /horses/999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] horse 999999 not found or not owned by user 45155a44-0b1c-4818-a313-692d5fc60b55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/999999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95605

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [MemoryMonitoring] Memory threshold exceeded: 1370MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [auth] Authenticated user 45155a44-0b1c-4818-a313-692d5fc60b55 for GET /horses/95605

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] warn: [ownership] horse 95605 not found or not owned by user 45155a44-0b1c-4818-a313-692d5fc60b55

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:05] info: [GET] /api/horses/95605 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/security/rate-limit-enforcement.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:06] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:06] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/legacyScoreTraitIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:07] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:07] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:07] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95606

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 14/30 for horse 95606

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 95607

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95608

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 10/30 for horse 95608

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95609

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 95609

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 95610

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95610

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 95610

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 29/100 (F) for horse 95610

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 95611

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95611

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 0/30 for horse 95611

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 24/100 (F) for horse 95611

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/95612/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1454MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [auth] Authenticated user 3d7cbdfe-f7eb-449c-8097-c87d5bc49127 for GET /horses/95612/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [ownership] Validated ownership: user 3d7cbdfe-f7eb-449c-8097-c87d5bc49127 owns horse 95612

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculating legacy score for horse 95612

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculating trait score for horse 95612

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreTraitCalculator.calculateTraitScore] Calculated trait score 5/30 for horse 95612

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [legacyScoreCalculator.calculateLegacyScore] Calculated legacy score 29/100 (F) for horse 95612

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/95612/legacy-score - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/95613/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1463MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] warn: [auth] Access token is required for GET /horses/95613/legacy-score from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/95613/legacy-score - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/99999/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] warn: [MemoryMonitoring] Memory threshold exceeded: 1464MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [auth] Authenticated user 5554def3-349c-4b0b-948e-a64e364ad58f for GET /horses/99999/legacy-score

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] warn: [ownership] horse 99999 not found or not owned by user 5554def3-349c-4b0b-948e-a64e364ad58f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [GET] /api/horses/99999/legacy-score - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/traitRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:08] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:08] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:09] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1494MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Triggering trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Discovered 1 traits for horse 1 (Test Discovery Horse 1767006369649)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/traits/discover/2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1497MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Triggering trait discovery for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 2: resilient, calm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Discovered 2 traits for horse 2 (Adult Test Horse)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/traits/discover/2 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1495MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Triggering trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.discoverTraits] Discovered 1 traits for horse 1 (Test Discovery Horse 1767006369649)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [POST] /api/trait-discovery/discover/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.getHorseTraits] Getting traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1503MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/horse/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1497MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.getTraitDefinitions] Getting trait definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions?type=positive

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1497MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [traitController.getTraitDefinitions] Getting trait definitions for type: positive

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions?type=positive - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions?type=invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1497MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [traitRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Type must be either \"all\", \"positive\", or \"negative\"","path":"type","location":"query"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/traits/definitions?type=invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] info: [GET] /api/trait-discovery/discovery-status/1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:09] warn: [MemoryMonitoring] Memory threshold exceeded: 1508MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [GET] /api/trait-discovery/discovery-status/1 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [GET] /api/trait-discovery/discovery-status/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1505MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [GET] /api/trait-discovery/discovery-status/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [GET] /api/trait-discovery/discovery-status/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1501MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [GET] /api/trait-discovery/discovery-status/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitController.batchDiscoverTraits] Processing batch discovery for 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [ownership] Found owned horse 1 for user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1502MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1499MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1510MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [MemoryMonitoring] Memory threshold exceeded: 1506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitController.batchDiscoverTraits] Processing batch discovery for 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [ownership] Found owned horse 1 for user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [traitDiscovery.checkDiscoveryConditions] Error checking condition CONSISTENT_TRAINING: Cannot read properties of undefined (reading 'count')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [traitDiscovery.revealTraits] Successfully revealed 1 traits for horse 1: bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] warn: [ownership] horse 99999 not found or not owned by user test@example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [POST] /api/trait-discovery/batch-discover - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/leaderboardRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:11] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:11] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [GET] /api/leaderboards/players/level?limit=10&offset=0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1546MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [auth] Authenticated user 201e1502-b2f3-4a67-a3f5-c36c7257c9b0 for GET /leaderboards/players/level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [auth] Authenticated user 201e1502-b2f3-4a67-a3f5-c36c7257c9b0 for GET /players/level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [GET] /api/leaderboards/players/level?limit=10&offset=0 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [GET] /api/leaderboards/players/level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] warn: [MemoryMonitoring] Memory threshold exceeded: 1553MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] warn: [auth] Access token is required for GET /leaderboards/players/level from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:11] info: [GET] /api/leaderboards/players/level - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/horses/earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user b496bbf7-848b-4699-97e9-2f0f177dab1a for GET /leaderboards/horses/earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user b496bbf7-848b-4699-97e9-2f0f177dab1a for GET /horses/earnings

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/horses/earnings - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1553MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user 5b8481cb-bf2c-4e59-9a40-6c0374c5bc1e for GET /leaderboards/recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user 5b8481cb-bf2c-4e59-9a40-6c0374c5bc1e for GET /recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/recent-winners - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1545MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user 5f9f0a86-4913-4128-a298-63178139d645 for GET /leaderboards/recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user 5f9f0a86-4913-4128-a298-63178139d645 for GET /recent-winners

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/recent-winners?discipline=Dressage - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] warn: [MemoryMonitoring] Memory threshold exceeded: 1553MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user ac876374-c54f-4df4-b907-b7bf384cad88 for GET /leaderboards/stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [auth] Authenticated user ac876374-c54f-4df4-b907-b7bf384cad88 for GET /stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [GET] /api/leaderboards/stats - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomHandlerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:13] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:13] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/horse/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /horse/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [ownership] Validated ownership: user 33551b98-49aa-46d9-a4f9-953a3296a630 owns horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Getting handler for horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95633 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95634

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1592MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/horse/95634

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /horse/95634

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [ownership] Validated ownership: user 33551b98-49aa-46d9-a4f9-953a3296a630 owns horse 95634

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Getting handler for horse 95634

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95634 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95635

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1596MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/horse/95635

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /horse/95635

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [ownership] horse 95635 not found or not owned by user 33551b98-49aa-46d9-a4f9-953a3296a630

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95635 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/eligibility/95633/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1597MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/eligibility/95633/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /eligibility/95633/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [ownership] Validated ownership: user 33551b98-49aa-46d9-a4f9-953a3296a630 owns horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Checking handler eligibility for horse 95633 in conformation class Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/eligibility/95633/Mares - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/eligibility/95633/InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1585MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/eligibility/95633/InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /eligibility/95633/InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [ownership] Validated ownership: user 33551b98-49aa-46d9-a4f9-953a3296a630 owns horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Checking handler eligibility for horse 95633 in conformation class InvalidClass

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/eligibility/95633/InvalidClass - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1588MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Getting handler configuration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/config - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/recommendations/95633?className=Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1594MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /groom-handlers/recommendations/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [auth] Authenticated user 33551b98-49aa-46d9-a4f9-953a3296a630 for GET /recommendations/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [ownership] Validated ownership: user 33551b98-49aa-46d9-a4f9-953a3296a630 owns horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerController] Getting handler recommendations for horse 95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [groomHandlerService] Conformation show detected: Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/recommendations/95633?className=Mares - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] info: [GET] /api/groom-handlers/horse/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:13] warn: [MemoryMonitoring] Memory threshold exceeded: 1586MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [auth] Access token is required for GET /groom-handlers/horse/95633 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/horse/95633 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/eligibility/95633/Mares

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1587MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [auth] Access token is required for GET /groom-handlers/eligibility/95633/Mares from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/eligibility/95633/Mares - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/config

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1587MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [auth] Access token is required for GET /groom-handlers/config from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/config - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/recommendations/95633

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [MemoryMonitoring] Memory threshold exceeded: 1587MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] warn: [auth] Access token is required for GET /groom-handlers/recommendations/95633 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [GET] /api/groom-handlers/recommendations/95633 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitTimeline.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:14] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:14] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:15] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:15] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95636

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 5 events for horse 95636

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95637

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 95637

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95638

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 95638

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95639

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 4 events for horse 95639

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95640

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 0 events for horse 95640

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95641

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 6 events for horse 95641

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:15] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95642

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 4 events for horse 95642

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95643/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1635MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [auth] Authenticated user 0bb2febe-e1c3-47aa-b7dc-de589184bb19 for GET /horses/95643/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [ownership] Validated ownership: user 0bb2febe-e1c3-47aa-b7dc-de589184bb19 owns horse 95643

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95643

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 1 events for horse 95643

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95643/trait-card - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95644/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1640MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [auth] Access token is required for GET /horses/95644/trait-card from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95644/trait-card - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/99999/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1642MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [auth] Authenticated user 58c300bd-e21d-4033-9f29-38995d7aa29e for GET /horses/99999/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [ownership] horse 99999 not found or not owned by user 58c300bd-e21d-4033-9f29-38995d7aa29e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/99999/trait-card - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95646/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] warn: [MemoryMonitoring] Memory threshold exceeded: 1643MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [auth] Authenticated user ea0d947d-f202-43a9-9a5d-cbdb95aecd33 for GET /horses/95646/trait-card

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [ownership] Validated ownership: user ea0d947d-f202-43a9-9a5d-cbdb95aecd33 owns horse 95646

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [traitTimelineService.generateTraitTimeline] Generating trait timeline for horse 95646

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [traitTimelineService.generateTraitTimeline] Generated timeline with 0 events for horse 95646

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [GET] /api/horses/95646/trait-card - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/horseRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:16] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:16] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:17] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:17] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1681MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:17] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 2 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:17] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 2: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1685MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [trainingController.getTrainableHorses] Getting trainable horses for user nonexistent-user-uuid-456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] warn: [trainingController.getTrainableHorses] User nonexistent-user-uuid-456 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/nonexistent-user-uuid-456 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1682MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/ - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:17] warn: [MemoryMonitoring] Memory threshold exceeded: 1693MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [GET] /api/horses/trainable/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [GET] /api/horses/trainable/test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] warn: [MemoryMonitoring] Memory threshold exceeded: 1688MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 1 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:18] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 2 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] error: [trainingModel.getAnyRecentTraining] Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:18] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 2: Database error: Cannot read properties of undefined (reading 'findFirst')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-user-uuid-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:18] info: [GET] /api/horses/trainable/test-user-uuid-123 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/geneticDiversityTracking.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:19] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95668 and mare 95670

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95680 and mare 95676

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95682 and mare 95685

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95684 and mare 95683

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95687 and mare 95683

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95690 and mare 95689

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95691 and mare 95692

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95694 and mare 95689

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95697 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95697 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95697 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95697 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:19] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95697 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95697 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95697 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95697 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95698 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95698 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95698 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95698 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95698 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95698 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95698 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95698 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95700 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95700 and mare 95696

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95700 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95700 and mare 95699

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95700 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95700 and mare 95701

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95700 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95700 and mare 95702

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95705 and mare 95704

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95705 and mare 95704

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95710 and mare 95711

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95712 and mare 95713

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95714 and mare 95711

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.generateGeneticDiversityReport] Generating report for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.analyzeGeneticTrends] Analyzing trends for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.generateOptimalBreedingRecommendations] Generating recommendations for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.trackGeneticDiversityOverTime] Tracking diversity for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95718 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95718 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95718 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95718 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 1 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.trackPopulationGeneticHealth] Tracking health for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateEffectivePopulationSize] Calculating for 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95719 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95719 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95718 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95719 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95719 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95719 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.identifyGeneticFounders] Identifying founders in 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 4)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95721 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95717

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95721 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95721 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95722

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.assessBreedingPairCompatibility] Assessing stallion 95721 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateDetailedInbreedingCoefficient] Analyzing stallion 95721 and mare 95723

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

    console.log
      [2025-12-29 06:06:20] info: [geneticDiversityTrackingService.calculateAdvancedGeneticDiversity] Analyzing 7 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 3)

PASS __tests__/middleware/sessionManagement.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:21] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:21] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:21] error: [Session] Error tracking session activity: Database connection error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:21] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:21] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] error: [Session] Error enforcing concurrent sessions: Database query failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:22] error: [Session] Error fetching active sessions: Database connection lost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:22] info: [Session] Session revoked by user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:22] error: [Session] Error revoking session: 
      Invalid `prisma.refreshToken.deleteMany()` invocation:
      
      {
        where: {
          userId: "invalid-user",
      +   id: {
      +     equals: Int | IntFieldRefInput,
      +     in: Int[] | ListIntFieldRefInput,
      +     notIn: Int[] | ListIntFieldRefInput,
      +     lt: Int | IntFieldRefInput,
      +     lte: Int | IntFieldRefInput,
      +     gt: Int | IntFieldRefInput,
      +     gte: Int | IntFieldRefInput,
      +     not: Int | NestedIntFilter
      +   }
        }
      }
      
      Argument `id` is missing.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/integration/horseOverview.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:23] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:23] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:23] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95724/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1518MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user e7b3141b-2cae-4ca8-bb02-49c6e8547b18 for GET /horses/95724/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [ownership] Validated ownership: user e7b3141b-2cae-4ca8-bb02-49c6e8547b18 owns horse 95724

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Getting overview for horse 95724

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95724 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95724: Mon Dec 22 2025 06:06:24 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 95724)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95724/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/99999/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1516MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user dc465241-0069-4eb4-93fe-3f012264237e for GET /horses/99999/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [ownership] horse 99999 not found or not owned by user dc465241-0069-4eb4-93fe-3f012264237e

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/99999/overview - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/invalid/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1519MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user 7e4a70b4-c5ae-4094-875e-ce1ad396fce4 for GET /horses/invalid/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/invalid/overview - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95727/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1520MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user 18e0add3-29d8-4d48-bd1f-9a0ff5b050df for GET /horses/95727/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [ownership] Validated ownership: user 18e0add3-29d8-4d48-bd1f-9a0ff5b050df owns horse 95727

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Getting overview for horse 95727

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95727 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95727

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 95727)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95727/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95728/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1527MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user dc84b39a-adfa-4ae2-b9f2-3729da18d40d for GET /horses/95728/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [ownership] Validated ownership: user dc84b39a-adfa-4ae2-b9f2-3729da18d40d owns horse 95728

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Getting overview for horse 95728

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95728 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95728: Fri Dec 26 2025 06:06:24 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Nova (ID: 95728)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95728/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95730/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] warn: [MemoryMonitoring] Memory threshold exceeded: 1519MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [auth] Authenticated user 8ede7d23-c317-45c6-96fb-80c6e8c3cd31 for GET /horses/95730/overview

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [ownership] Validated ownership: user 8ede7d23-c317-45c6-96fb-80c6e8c3cd31 owns horse 95730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Getting overview for horse 95730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95730 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [horseController.getHorseOverview] Successfully retrieved overview for horse TestHorse Minimal (ID: 95730)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [GET] /api/horses/95730/overview - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomSalarySystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:25] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:25] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1560MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Getting salary cost for user 73d87646-1d8d-49d0-abc1-a4f4003bc90f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/cost - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Getting salary summary for user 73d87646-1d8d-49d0-abc1-a4f4003bc90f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/summary - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47441/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1567MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/groom/47441/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom/47441/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [ownership] Validated ownership: user 73d87646-1d8d-49d0-abc1-a4f4003bc90f owns groom 47441

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Getting salary for groom 47441

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47441/salary - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1569MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Getting salary history for user 73d87646-1d8d-49d0-abc1-a4f4003bc90f, limit: 50

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/history - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1570MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Getting cron job status for user 73d87646-1d8d-49d0-abc1-a4f4003bc90f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47442/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1561MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom-salaries/groom/47442/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for GET /groom/47442/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [ownership] groom 47442 not found or not owned by user 73d87646-1d8d-49d0-abc1-a4f4003bc90f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47442/salary - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Paid $115 salary to groom Salary Test Groom for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Processed $115 in salaries for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 1, Failed: 0, Total: $115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [groomSalaryService] Started grace period for user salaryTestUser - insufficient funds for groom salaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 0, Failed: 1, Total: $0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [POST] /api/groom-salaries/process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1572MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for POST /groom-salaries/process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [auth] Authenticated user 73d87646-1d8d-49d0-abc1-a4f4003bc90f for POST /process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryController] Manual salary processing triggered by user 73d87646-1d8d-49d0-abc1-a4f4003bc90f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [cronJobService] Manually triggering salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Starting weekly salary processing...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Paid $115 salary to groom Salary Test Groom for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Processed $115 in salaries for user salaryTestUser

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [groomSalaryService] Weekly salary processing complete. Processed: 1, Successful: 1, Failed: 0, Total: $115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [cronJobService] Manual salary processing completed: {"processed":1,"successful":1,"failed":0,"terminated":0,"totalAmount":115,"errors":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [POST] /api/groom-salaries/process - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/cost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [auth] Access token is required for GET /groom-salaries/cost from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/cost - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/summary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [auth] Access token is required for GET /groom-salaries/summary from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/summary - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/history

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [auth] Access token is required for GET /groom-salaries/history from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/history - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47441/salary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1564MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [auth] Access token is required for GET /groom-salaries/groom/47441/salary from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/groom/47441/salary - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] info: [GET] /api/groom-salaries/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:25] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] warn: [auth] Access token is required for GET /groom-salaries/status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] info: [GET] /api/groom-salaries/status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] info: [POST] /api/groom-salaries/process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] warn: [MemoryMonitoring] Memory threshold exceeded: 1565MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] warn: [auth] Access token is required for POST /groom-salaries/process from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] info: [POST] /api/groom-salaries/process - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/ultraRareTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:27] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:27] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:27] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 47443

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [groomRareTraitPerks] Assigned perk: Phoenix Whisperer to groom 47443

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 47443

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1603MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [POST] /api/ultra-rare-traits/evaluate/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1605MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for POST /ultra-rare-traits/evaluate/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for POST /evaluate/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Evaluating ultra-rare triggers for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Ultra-rare trait triggered: Empathic Mirror for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ultraRareTriggerEngine] Evaluating exotic unlocks for horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] error: [ultraRareTriggerEngine] Error evaluating Soulbonded conditions: Cannot read properties of undefined (reading 'map')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:27] info: [POST] /api/ultra-rare-traits/evaluate/95732 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1613MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for GET /ultra-rare-traits/horse/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for GET /horse/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ownership] Validated ownership: user test-ultra-rare-user owns horse 95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95732 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [POST] /api/ultra-rare-traits/groom/47443/assign-perks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for POST /ultra-rare-traits/groom/47443/assign-perks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for POST /groom/47443/assign-perks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [ownership] Validated ownership: user test-ultra-rare-user owns groom 47443

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [groomRareTraitPerks] Assigning rare trait booster perks for groom 47443

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [POST] /api/ultra-rare-traits/groom/47443/assign-perks - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95732

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [auth] Access token is required for GET /ultra-rare-traits/horse/95732 from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95732 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95733

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [MemoryMonitoring] Memory threshold exceeded: 1617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for GET /ultra-rare-traits/horse/95733

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [auth] Authenticated user test-ultra-rare-user for GET /horse/95733

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] warn: [ownership] horse 95733 not found or not owned by user test-ultra-rare-user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:27] info: [GET] /api/ultra-rare-traits/horse/95733 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalEnrichmentIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:28] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:28] warn: [MemoryMonitoring] Memory threshold exceeded: 1649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 54, Stress: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1653MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Halter Introduction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Halter Introduction" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 56, Stress: 20 -> 23

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1658MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1649MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/99999/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1659MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [ownership] foal 99999 not found or not owned by user test-user-id

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/99999/enrichment - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1655MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 0, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] error: [foalModel.completeEnrichmentActivity] Error: Activity "Trailer Exposure" is not appropriate for day 0. Available activities: Gentle Touch, Quiet Presence, Soft Voice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:29] error: [foalRoutes] POST /api/foals/:foalId/enrichment error: Activity "Trailer Exposure" is not appropriate for day 0. Available activities: Gentle Touch, Quiet Presence, Soft Voice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1653MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: leading_practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "leading_practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 55, Stress: 20 -> 21

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1651MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Leading Practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Leading Practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 58, Stress: 20 -> 21

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1663MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: HANDLING EXERCISES

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "HANDLING EXERCISES" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 54, Stress: 20 -> 22

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1660MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Halter Introduction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Halter Introduction" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 55, Stress: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1657MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Leading Practice

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Leading Practice" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 59, Stress: 20 -> 22

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1654MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Handling Exercises

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Handling Exercises" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 58, Stress: 20 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 1 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 52, Stress: 20 -> 23

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1652MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/1/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 1 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 50 -> 54, Stress: 20 -> 22

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/1/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/999/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] warn: [MemoryMonitoring] Memory threshold exceeded: 1664MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalRoutes] POST /api/foals/999/enrichment - Day 3, Activity: Trailer Exposure

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Trailer Exposure" for foal 999 on day 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 95 -> 100, Stress: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [POST] /api/foals/999/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] error: [traitDiscovery.revealTraits] Error revealing traits for horse 999: Horse with ID 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:29] error: [traitDiscoveryMiddleware.triggerAutoDiscovery] Error during auto-discovery for horse 999: Horse with ID 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/competition.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:29] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse CrossCountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:30] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:06:31] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

PASS tests/cronJobsIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:32] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:32] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1728MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for GET /cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] GET /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/cron/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/traits/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1728MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for POST /traits/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/traits/evaluate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1726MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for GET /foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] GET /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/foals/development - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1723MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for GET /traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] GET /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [GET] /api/admin/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1727MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for POST /cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] POST /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/cron/start - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] warn: [MemoryMonitoring] Memory threshold exceeded: 1724MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [auth] Authorized user test@example.com with role 'admin' for POST /cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [adminRoutes] POST /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:32] info: [POST] /api/admin/cron/stop - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/services/cronJobService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:33] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2025-12-29T11:06:34.218Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:34.641Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:34] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 5 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":5,"expired":5,"invalidated":0,"timestamp":"2025-12-29T11:06:35.237Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 2 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":2,"expired":2,"invalidated":0,"timestamp":"2025-12-29T11:06:35.549Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 3 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":3,"expired":3,"invalidated":0,"timestamp":"2025-12-29T11:06:35.655Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:35.674Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:35.712Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2025-12-29T11:06:35.728Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] error: [TokenRotation] Error cleaning up tokens: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:35] error: [cronJobService] Token cleanup error: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"timestamp":"2025-12-29T11:06:35.742Z","error":"Database connection failed"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopped job: weeklySalaries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopped job: tokenCleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:35.788Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 10 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":10,"expired":10,"invalidated":0,"timestamp":"2025-12-29T11:06:35.848Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:35.891Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 1 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":1,"expired":1,"invalidated":0,"timestamp":"2025-12-29T11:06:35.927Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Token cleanup completed. Removed 0 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Manual token cleanup completed: {"removed":0,"expired":0,"invalidated":0,"timestamp":"2025-12-29T11:06:35.941Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:35] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] Manually triggering token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] Starting expired token cleanup...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] Token cleanup completed. Removed 100 expired/invalidated tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] Manual token cleanup completed: {"removed":100,"expired":100,"invalidated":0,"timestamp":"2025-12-29T11:06:36.223Z"}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] Stopping all cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [cronJobService] All cron jobs stopped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/documentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] warn: [auth] Access token is required for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /validation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Validating OpenAPI specification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: POST /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation coverage analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] warn: [auth] Invalid or expired token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] warn: [auth] Access token is required for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: GET /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: POST /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering endpoint: GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering schema: User

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [auth] Authenticated user 4c943e17-0375-493a-9453-064c376e2fad for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 47444) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Hiring new groom Expert Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 47445) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Hiring new groom Novice Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 47446) for 350 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.assignGroom] Assigning groom 47447 to foal 95743

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.assignGroomToFoal] Assigning groom 47447 to foal 95743

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.assignGroom] Assigning groom 47449 to foal 95746

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.assignGroomToFoal] Assigning groom 47449 to foal 95746

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.assignGroom] Assigning groom 47450 to foal 95749

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Recording trust_building interaction for foal 95752

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -3 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47451 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Groom 47451 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Awarded 2 XP to groom 47451 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 95756

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Interaction recorded: 8 bonding, -6 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47452 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Groom 47452 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Awarded 2 XP to groom 47452 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Recording brushing interaction for foal 95760

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -10 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 47453 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomProgressionService.awardGroomXP] Groom 47453 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:38] info: [groomController.recordInteraction] Awarded 2 XP to groom 47453 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/integration/horse-rate-limiting.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:39] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:39] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:39] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:39] warn: [MemoryMonitoring] Memory threshold exceeded: 1819MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/groomRetirementService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:40] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47454 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47455 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47455 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47455 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] error: Error incrementing career weeks for groom 99999: 
      Invalid `prisma.groom.update()` invocation:
      
      
      An operation failed because it depends on one or more records that were required but not found. No record was found for an update.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:40] info: Processed retirement for groom 47463 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Processed retirement for groom 47464 with reason: voluntary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Processed retirement for groom 47465 with reason: voluntary

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] error: Error processing retirement for groom 47466: Groom 47466 is not eligible for retirement

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:40] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47467 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47468 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47470 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47469 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Processed retirement for groom 47469 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Groom Test Groom Near Retirement 1767006400877 (ID: 47469) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47471 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Processed retirement for groom 47471 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Groom Test Groom Level 10 1767006400877 (ID: 47471) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:40] info: Incremented career weeks for groom 47472 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47473 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47474 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47475 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47475 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Near Retirement 1767006400975 (ID: 47475) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47476 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47476 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Level 10 1767006400975 (ID: 47476) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47477 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Weekly career progression completed: 6 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47478 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47479 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47481 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47481 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Near Retirement 1767006401071 (ID: 47481) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47482 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47482 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Level 10 1767006401071 (ID: 47482) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Weekly career progression completed: 4 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Starting weekly career progression processing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47483 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47484 to 11

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47485 to 51

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47486 to 104

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47486 with reason: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Near Retirement 1767006401163 (ID: 47486) retired: mandatory_career_limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Incremented career weeks for groom 47487 to 81

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Processed retirement for groom 47487 with reason: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Groom Test Groom Level 10 1767006401163 (ID: 47487) retired: early_level_cap

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: Weekly career progression completed: 5 processed, 2 retired, 0 errors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalCreationIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:41] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:41] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:42] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:42] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] warn: [MemoryMonitoring] Memory threshold exceeded: 1880MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.createFoal] Creating foal: Test Foal with sire 1 and dam 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.getHorseById] Successfully found horse: Test Sire (ID: 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.getHorseById] Successfully found horse: Test Dam (ID: 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:06:42] info: [horseController.gatherLineage] Gathering lineage for sire 1 and dam 2, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.gatherLineage] Gathered 2 ancestors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.assessFeedQualityFromMare] Mare Test Dam feed quality: 75 (health: Good, bond: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.createFoal] Mare stress: 15, Feed quality: 75, Lineage count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [applyEpigeneticTraitsAtBirth] Mare stress: 15, Feed quality: 75

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 1 and dam 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 1 and dam 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.assessFeedQuality] Mare 2 feed quality: 50

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 15, Feed quality: 50

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 1 and dam 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 1 and dam 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.detectInbreeding] Inbreeding not detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":15,"feedQuality":50,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseModel.createHorse] Successfully created horse: Integration Test Foal (ID: 3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [horseController.createFoal] Successfully created foal: Integration Test Foal (ID: 3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [POST] /api/horses/foals - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/generateMockShows.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseAgingIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:43] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:43] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:43] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/routes/apiOptimizationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] warn: [auth] Access token is required for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting performance metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting performance metrics for timeframe: 1h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting performance metrics for timeframe: 24h

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting performance metrics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting performance metrics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /performance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /compression-stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /compression-stats

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting compression statistics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /cache-analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /cache-analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Getting cache analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing compression with algorithm: brotli

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing compression with algorithm: deflate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing offset pagination with 100 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing cursor pagination with 100 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for GET /recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Generating optimization recommendations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] warn: [auth] Invalid or expired token for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] warn: [auth] Access token is required for GET /metrics from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-compression

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:44] info: [ApiOptimization] Testing compression with algorithm: gzip

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [auth] Authenticated user 2be20056-e716-4a5a-ad20-bbcbad969e9d for POST /test-pagination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [ApiOptimization] Testing offset pagination with 1000 items

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/routes/userDocumentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Loaded 1 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Built search index with 34 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching documentation for: "horse training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting table of contents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting sections for document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Getting sections for document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Searching in document "non-existent" for: "test"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocRoutes] Refreshing documentation cache

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:45] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Searching documentation for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/resourceManagement.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:46] warn: [ResourceManagement] Slow request detected: GET /test-slow took 11ms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1730MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] warn: [MemoryMonitoring] Memory threshold exceeded: 1724MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:46] warn: [DatabaseMonitoring] High query count: 15 queries in 1ms for GET /test-many-queries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] warn: [ResourceManagement] Request timeout: GET /test-timeout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1736MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] warn: [MemoryMonitoring] Memory threshold exceeded: 1729MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] warn: [ResourceManagement] Slow request detected: GET /test-thresholds took 6ms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] warn: [ResourceManagement] High memory usage: GET /test-thresholds used 1MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/horseTemperamentAnalysis.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/advancedLineageAnalysis.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95773 and mare 95774, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95776 and mare 95777, 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 95778 and mare 95779

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 95778 and mare 95779, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 95780 and mare 95781

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 95780 and mare 95781

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 95782 and mare 95783

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 95782 and mare 95783

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomHiringWorkflow.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/groomProgression.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Awarding 20 XP to groom 47518 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Groom 47518 gained 20 XP: 0 ‚Üí 20 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Awarding 10 XP to groom 47519 for trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Groom 47519 gained 10 XP: 0 ‚Üí 10 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Awarding 15 XP to groom 47520 for show_win

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Groom 47520 gained 15 XP: 0 ‚Üí 15 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Awarding 100 XP to groom 47521 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Groom 47521 gained 100 XP: 0 ‚Üí 100 (Level 1 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Awarding 10000 XP to groom 47523 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.awardGroomXP] Groom 47523 gained 10000 XP: 0 ‚Üí 10000 (Level 1 ‚Üí 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47524 and horse 95790: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47525 and horse 95791: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47525 and horse 95791: trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47525 and horse 95791: rare_trait_influenced

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 6 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47526 and horse 95792: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47526 and horse 95792: reassigned_early

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 0 (-5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47527 and horse 95793: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47527 and horse 95793: trait_shaped

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 47528 and horse 95794

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 47529 and horse 95795

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:49] info: [groomProgressionService.logGroomAssignment] Logging assignment unassigned for groom 47529 and horse 95795

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.awardGroomXP] Awarding 150 XP to groom 47530 for milestone_completion

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.awardGroomXP] Groom 47530 gained 150 XP: 0 ‚Üí 150 (Level 1 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47530 and horse 95796: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.logGroomAssignment] Logging assignment assigned for groom 47530 and horse 95796

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.getGroomProfile] Getting profile for groom 47530

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 1 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 2 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 3 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 4 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 5 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 6 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 7 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 8 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 9 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 10 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 11 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 12 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 13 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 14 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 15 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 16 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 17 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 18 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 19 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 20 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 21 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 22 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 23 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 24 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Updating synergy for groom 47531 and horse 95797: milestone_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.updateGroomSynergy] Synergy updated: 25 (+1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [groomProgressionService.getGroomProfile] Getting profile for groom 47531

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/foalAuthRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/foalTaskLogStreakIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/dynamicCompatibilityScoring.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/groomTalentService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:52] info: Groom 47541 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47543 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47544 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47544 selected talent stress_whisperer for tier2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47544 selected talent master_bonding for tier3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] error: Error selecting talent for groom 47545: Invalid talent selection: invalid_talent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:52] error: Error selecting talent for groom 47547: Invalid talent selection: insufficient_level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:52] info: Groom 47548 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47549 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47549 selected talent stress_whisperer for tier2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:52] info: Groom 47551 selected talent gentle_hands for tier1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitMilestoneIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: coat_check, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: presentationBoosted (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: calm (total: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: presentationBoosted (total: 35)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: showCalm (total: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 12

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: bonded (total: 60)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 60 points for trait: resilient (total: 60)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: confident (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: crowdReady (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 65)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 35, total: 45, chance: 45%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: presentationBoosted (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 50, total: 60, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 50, total: 60, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 60, total: 70, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 60, total: 70, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 65, total: 75, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 25, total: 35, chance: 35%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["presentationBoosted","calm","showCalm","bonded","resilient","confident","crowdReady"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: calm (total: 5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 5, total: 5, chance: 5%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 7.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 7.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 7.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 50 points for trait: confident (total: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: crowdReady (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 80)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 80, total: 90, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 40.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 30, total: 40, chance: 40%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 40.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: calm (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 20, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: bonded (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: resilient (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: confident (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 15.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 30, total: 30, chance: 30%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 15.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 30, total: 30, chance: 30%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 15.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 20, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 15.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: calm (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: confident (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: showCalm (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 40, chance: 40%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 40, chance: 40%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 30, total: 30, chance: 30%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["calm","bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/environmentalTriggerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/performance/apiResponseOptimization.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:55] error: [ResponseOptimization] Response size exceeds limit: 12715 bytes for GET /test/oversized

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS __tests__/services/userDocumentation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 1 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 34 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 5 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] warn: [UserDocService] Documentation directory not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 0 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Built search index with 95 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/facilityManagementSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:55] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:55] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getUserFacilities] Getting facilities for user 4aae0f3d-f036-46e9-aebd-79b8b4142511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getUserFacilities] Getting facilities for user d028bc56-c3b2-47a2-b475-07581919a86f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.purchaseFacilityUpgrade] User f30726b8-3f9d-46a2-b1d8-2ab1c0397c9c purchasing automated_care upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.purchaseFacilityUpgrade] User f22ae56a-bb62-42a0-9af4-760482f9df28 purchasing competition_hosting upgrade to level 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.purchaseFacilityUpgrade] User fe93d00c-be89-4eec-b2b0-6e64c6077335 purchasing ventilation upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 6706

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 6708

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 8aba1d1b-eb49-442e-9d1b-d52136a5dc89

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getUserFacilities] Getting facilities for user 8aba1d1b-eb49-442e-9d1b-d52136a5dc89

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user e4ed7673-6d08-4a62-89ad-5a2267b8d6a5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getUserFacilities] Getting facilities for user e4ed7673-6d08-4a62-89ad-5a2267b8d6a5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 6714

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.purchaseFacilityUpgrade] User 46be38c6-3139-48d7-a876-706b8bc3716c purchasing stable_management upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 6716

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 6718

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 6718

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 6720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 6720

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/trainingController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:56] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:56] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95845 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95845 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95845 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95846

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95846 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95846 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95847 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95847 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Getting training status for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95850 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95850 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95850 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] No training records found for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Training status retrieved for horse 95850: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95850 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95850 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 95850)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Horse 95850 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Logging training session for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4937

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 95850 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 95850 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 95850: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Logging XP event: User 2a810363-eb28-4e1f-8db5-5cddbe432d08, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2415, User 2a810363-eb28-4e1f-8db5-5cddbe432d08, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Awarded 5 XP to user 2a810363-eb28-4e1f-8db5-5cddbe432d08 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Successfully trained horse 95850 in Racing (Log ID: 4937, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Getting training status for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95850 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95850: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95850 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95850

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95850 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 95850 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Last training date for horse 95850 in Racing: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95850: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Training status retrieved for horse 95850: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95846

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95846 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95846 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95847 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95847 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95845 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Getting training status for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95845 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95845 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95845 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95845 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] No training records found for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95845 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Training status retrieved for horse 95845: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Getting training status for horse 95847 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95847 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95847 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95847 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95847 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 95847 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Last training date for horse 95847 in Racing: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Training status retrieved for horse 95847: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Getting training status for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainingStatus] Training status retrieved for horse 99999: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user 2a810363-eb28-4e1f-8db5-5cddbe432d081

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.getTrainableHorses] User 2a810363-eb28-4e1f-8db5-5cddbe432d081 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user 2a810363-eb28-4e1f-8db5-5cddbe432d08

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95848 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95848

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95849 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95849

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95850 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95850: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user 2a810363-eb28-4e1f-8db5-5cddbe432d08

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95845 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95845 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95845 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 95845)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Horse 95845 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Logging training session for horse 95845 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4938

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 95845 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 95845 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 95845: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 95845

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Logging XP event: User df712a59-605f-406e-968d-14fae54d011d, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2416, User df712a59-605f-406e-968d-14fae54d011d, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Awarded 5 XP to user df712a59-605f-406e-968d-14fae54d011d for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Successfully trained horse 95845 in Dressage (Log ID: 4938, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainableHorses] Getting trainable horses for user df712a59-605f-406e-968d-14fae54d011d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95845 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95845: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user df712a59-605f-406e-968d-14fae54d011d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainRouteHandler] Training request for horse 95851 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95851 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95851 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95851

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95851 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95851 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] No training records found for horse 95851

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95851 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 95851)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Horse 95851 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Logging training session for horse 95851 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 4939

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 95851 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 95851 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 95851: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 95851

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Logging XP event: User df712a59-605f-406e-968d-14fae54d011d, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 2417, User df712a59-605f-406e-968d-14fae54d011d, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Awarded 5 XP to user df712a59-605f-406e-968d-14fae54d011d for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Successfully trained horse 95851 in Show Jumping (Log ID: 4939, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainRouteHandler] Training request for horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95846 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95846

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95846 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95846 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainRouteHandler] Training request for horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 95847 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 95847

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 95847 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 95847 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 95847: Mon Dec 29 2025 06:06:57 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Horse 95847 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainRouteHandler] Training request for horse 95845 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [trainingController.trainHorse] Attempting to train horse 95845 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:06:57] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS __tests__/unit/auth-rate-limiter.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:57] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:57] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:06:58] info: [rateLimiting] Using in-memory rate limiting for test/disabled Redis environment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] createAuthRateLimiter() is deprecated, using Redis-backed limiter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] warn: [AuthRateLimiter] resetAllAuthRateLimits() is deprecated with Redis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/weeklyFlagEvaluationService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:58] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:58] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:06:59] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag insecure triggered for horse Test Foal Week 1767006419034: Frequent groom changes with declining bond or neglect

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag aloof triggered for horse Test Foal Week 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag skittish triggered for horse Test Foal Week 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Assigned 3 new flags to horse Test Foal Week 1767006419034: insecure, aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Starting weekly flag evaluation process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag aloof triggered for horse Test Foal Month 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag skittish triggered for horse Test Foal Month 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Assigned 2 new flags to horse Test Foal Month 1767006419034: aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag aloof triggered for horse Test Horse 2yo 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Flag skittish triggered for horse Test Horse 2yo 1767006419034: Generic negative flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Assigned 2 new flags to horse Test Horse 2yo 1767006419034: aloof, skittish

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Weekly flag evaluation completed: 4 flags assigned to 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Starting weekly flag evaluation process

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Found 3 horses eligible for flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: Weekly flag evaluation completed: 0 flags assigned to 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskLogStreakData.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:06:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:06:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/developmentalWindowSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/horseAgingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/services/groomPersonalityTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:01] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:01] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:01] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/foalTaskLogStorage.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/enhancedCompetitionIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.4%, adjustment: 9.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +0, luck: 9.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -11.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +5, luck: -11.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 6.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 6.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.0%, adjustment: -5.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -5.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.5%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +0, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.2%, adjustment: 1.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +5, luck: 1.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -6.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +0, luck: -6.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.5%, adjustment: 15.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 195 (base: 175, trait: +5, luck: 15.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.8%, adjustment: -4.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 170 (base: 175, trait: +0, luck: -4.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 7.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 165, trait: +5, luck: 7.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -12.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 152 (base: 165, trait: +0, luck: -12.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.7%, adjustment: -9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 156 (base: 160, trait: +5, luck: -9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.6%, adjustment: 9.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 160, trait: +0, luck: 9.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.8%, adjustment: -11.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 154 (base: 160, trait: +5, luck: -11.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 160

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.2%, adjustment: -8.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 152 (base: 160, trait: +0, luck: -8.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.2%, adjustment: 12.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 175, trait: +0, luck: 12.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 13.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 189 (base: 175, trait: +0, luck: 13.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.8%, adjustment: -13.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 161 (base: 175, trait: +0, luck: -13.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -1.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 175, trait: +0, luck: -1.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -8.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 167 (base: 175, trait: +0, luck: -8.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 0.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 0.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.6%, adjustment: -11.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 163 (base: 175, trait: +0, luck: -11.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.8%, adjustment: -12.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 163 (base: 175, trait: +0, luck: -12.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.2%, adjustment: -5.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 169 (base: 175, trait: +0, luck: -5.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 175, trait: +0, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -8.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 167 (base: 175, trait: +0, luck: -8.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 12.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 175, trait: +0, luck: 12.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -15.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 159 (base: 175, trait: +0, luck: -15.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.1%, adjustment: -8.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -8.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.8%, adjustment: 8.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 175, trait: +0, luck: 8.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.2%, adjustment: 14.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 189 (base: 175, trait: +0, luck: 14.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.3%, adjustment: 2.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 175, trait: +0, luck: 2.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 10.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 175, trait: +0, luck: 10.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.8%, adjustment: 1.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 176 (base: 175, trait: +0, luck: 1.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 175

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.4%, adjustment: -9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 166 (base: 175, trait: +0, luck: -9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.4%, adjustment: 7.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +0, luck: 7.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 6.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 137 (base: 130, trait: +0, luck: 6.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 3.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 3.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +5, luck: -9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.0%, adjustment: 9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 144 (base: 130, trait: +5, luck: 9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.6%, adjustment: -10.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 4.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 4.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.0%, adjustment: 10.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 146 (base: 130, trait: +5, luck: 10.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 3.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 139 (base: 130, trait: +5, luck: 3.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.1%, adjustment: 9.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 9.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.5%, adjustment: 10.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 10.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -10.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -10.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.2%, adjustment: 7.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 142 (base: 130, trait: +5, luck: 7.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 5.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.2%, adjustment: -9.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +5, luck: -9.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.9%, adjustment: -3.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -3.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 6.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +5, luck: 6.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -11.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 118 (base: 130, trait: +0, luck: -11.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.3%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.7%, adjustment: -11.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -11.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.0%, adjustment: 8.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 143 (base: 130, trait: +5, luck: 8.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.8%, adjustment: -5.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 125 (base: 130, trait: +0, luck: -5.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.3%, adjustment: 3.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 3.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.5%, adjustment: 0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +0, luck: 0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.0%, adjustment: 5.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 5.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.8%, adjustment: 5.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.6%, adjustment: 7.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 143 (base: 130, trait: +5, luck: 7.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.5%, adjustment: -9.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 120 (base: 130, trait: +0, luck: -9.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.5%, adjustment: -11.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 123 (base: 130, trait: +5, luck: -11.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.7%, adjustment: 0.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 131 (base: 130, trait: +0, luck: 0.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -2.0%, adjustment: -2.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 132 (base: 130, trait: +5, luck: -2.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.2%, adjustment: 8.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 8.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 11.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 146 (base: 130, trait: +5, luck: 11.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.2%, adjustment: 2.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +5, luck: 2.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.1%, adjustment: -4.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -4.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.5%, adjustment: -4.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 130 (base: 130, trait: +5, luck: -4.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.4%, adjustment: -11.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -11.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 9.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 9.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.1%, adjustment: -7.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 122 (base: 130, trait: +0, luck: -7.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.6%, adjustment: -0.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +5, luck: -0.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.6%, adjustment: 11.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 141 (base: 130, trait: +0, luck: 11.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -1.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 133 (base: 130, trait: +5, luck: -1.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.0%, adjustment: -1.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -1.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.0%, adjustment: -10.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 124 (base: 130, trait: +5, luck: -10.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.1%, adjustment: -10.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 119 (base: 130, trait: +0, luck: -10.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.3%, adjustment: 9.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 145 (base: 130, trait: +5, luck: 9.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 5.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +0, luck: 5.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.1%, adjustment: 1.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 136 (base: 130, trait: +5, luck: 1.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.8%, adjustment: 10.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +0, luck: 10.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.5%, adjustment: 4.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 140 (base: 130, trait: +5, luck: 4.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.0%, adjustment: -3.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [calculateCompetitionScore] Horse Test Horse: Final score: 126 (base: 130, trait: +0, luck: -3.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/competitionController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:03] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:03] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: -3.8%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Final score: 163 (base: 165, trait: +5, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: 3.4%, adjustment: 3.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 119 (base: 115, trait: +0, luck: 3.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Base score for Racing: 165

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Luck modifier: 6.8%, adjustment: 11.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Star: Final score: 182 (base: 165, trait: +5, luck: 11.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Base score for Racing: 115

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Luck modifier: -1.7%, adjustment: -1.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [calculateCompetitionScore] Horse Competition Novice: Final score: 113 (base: 115, trait: +0, luck: -1.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95909 in show 5571 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95909 in show 5571 with score 90

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95910 in show 5571 with score 85

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.getResultsByShow] Found 3 results for show 5571

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95909 in show 5571 with score 88

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.getResultsByShow] Found 0 results for show 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95909 in show 5571 with score 92

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95910 in show 5571 with score 88

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-12-29 06:07:04] info: [resultModel.saveResult] Successfully created new result for horse 95911 in show 5571 with score 84

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 2)

PASS __tests__/middleware/security.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:04] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:04] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: CORS blocked request from origin: https://evil.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:04] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.error
      TypeError: Cannot read properties of undefined (reading 'get')
          at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
          at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
          at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
          at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
          at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\middleware\security.test.mjs:447:7)

    [0m [90m 445 |[39m
     [90m 446 |[39m       [90m// First request should succeed[39m
    [31m[1m>[22m[39m[90m 447 |[39m       [36mawait[39m testLimiter(req[33m,[39m res[33m,[39m next)[33m;[39m
     [90m     |[39m       [31m[1m^[22m[39m
     [90m 448 |[39m       expect(next)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 449 |[39m
     [90m 450 |[39m       [90m// Reset mocks[39m[0m

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5
      at Object.<anonymous> (__tests__/middleware/security.test.mjs:447:7)

    console.log
      [2025-12-29 06:07:04] warn: Rate limit exceeded for IP: 192.168.1.100

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/breedingAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:05] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/middleware/validationErrorHandler.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:05] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:05] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:05] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/traitInteractionMatrix.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/services/apiDocumentation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] error: [ApiDocService] Failed to load specification: OpenAPI specification file not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] warn: [ApiDocService] OpenAPI specification validation found 1 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] Documentation generated for 2 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] warn: [ApiDocService] OpenAPI specification validation found 2 issues

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/groomLegacyService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:08] info: Created legacy prot√©g√© Young Apprentice (ID: 47569) from mentor Retired Master Groom 1767006428149 (ID: 47568)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:08] info: Inherited perk: Gentle Hands

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:08] error: Error generating legacy prot√©g√© for mentor 47571: Mentor groom 47571 is not eligible for legacy creation: insufficient_level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:08] info: Created legacy prot√©g√© History Test Apprentice (ID: 47575) from mentor Retired Master Groom 1767006428254 (ID: 47574)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:08] info: Inherited perk: Patience Mastery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/trainingAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:08] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:08] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:08] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/middleware/ownership.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:09] warn: [ownership] Missing user for horse ownership check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] warn: [ownership] Missing user for horse ownership check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] warn: [ownership] Invalid horse ID: invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] warn: [ownership] horse 1 not found or not owned by user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns foal 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns groom 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns groom-assignment 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns breeding 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns competition-entry 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns training-session 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] error: [ownership] Unexpected error: Database connection error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Found owned horse 1 for user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Batch validation: user user-123 owns 2/2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] warn: [ownership] horse 1 not found or not owned by user user-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [ownership] Validated ownership: user user-123 owns horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/schema-validation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/integration/groomRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/services/personalityEvolutionSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 47579

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 47579

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.evolveGroomPersonality] Starting evolution analysis for groom 47580

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.calculatePersonalityEvolutionTriggers] Analyzing triggers for groom 47579

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 95931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for horse 95931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.evolveHorseTemperament] Starting evolution analysis for horse 95932

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 95931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.predictPersonalityEvolution] Predicting evolution for groom 47579 over 30 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.getPersonalityEvolutionHistory] Getting history for groom 47579

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.applyPersonalityEvolutionEffects] Applying effects for groom 47579

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:10] info: [personalityEvolutionSystem.analyzePersonalityStability] Analyzing stability for horse 95931

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/middleware/security.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:11] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:11] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] warn: CORS blocked request from origin: http://malicious-site.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] warn: Rate limit exceeded for IP: ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/performanceAnalyticsService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:11] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:11] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/horseXpIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 60, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 95935). New XP: 87, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 95935). New XP: 112, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 150 XP to horse XP Test Horse (ID: 95935). New XP: 150, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 200 XP to horse XP Test Horse (ID: 95935). New XP: 200, Stat points gained: 2, Available: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 95935). New speed: 76, Remaining points: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 50 XP to horse XP Test Horse (ID: 95935). New XP: 50, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 80, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 95935). New XP: 105, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.getHorseXpHistory] Retrieved 3 XP events for horse 95935

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 27 XP to horse XP Test Horse (ID: 95935). New XP: 57, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 30 XP to horse XP Test Horse (ID: 95935). New XP: 87, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.addXpToHorse] Added 25 XP to horse XP Test Horse (ID: 95935). New XP: 112, Stat points gained: 1, Available: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.allocateStatPoint] Allocated 1 stat point to speed for horse XP Test Horse (ID: 95935). New speed: 77, Remaining points: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [horseXpModel.getHorseXpHistory] Retrieved 4 XP events for horse 95935

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/flagAssignmentEngineEnhanced.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:12] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:12] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:13] info: Flag brave triggered for horse Test Foal 6mo 1767006433053: Consistent care with good stress management and task diversity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: Flag confident triggered for horse Test Foal 6mo 1767006433053: Strong bond growth with diverse, high-quality experiences

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: Flag resilient triggered for horse Test Foal 6mo 1767006433053: Generic positive flag evaluation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] error: Error evaluating triggers for flag fearful: Cannot read properties of undefined (reading 'length')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:13] error: Error evaluating triggers for flag insecure: Cannot read properties of undefined (reading 'neglectRatio')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS __tests__/unit/security/validation-error-handler.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:13] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:13] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/carePatternAnalyzerEnhanced.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:13] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:13] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:14] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:14] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitMilestoneEvaluation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:14] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: bonded (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: resilient (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: calm (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 20, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 20, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: bonded (total: 100)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 100 points for trait: resilient (total: 100)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 75 points for trait: confident (total: 75)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 100, total: 100, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 50.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 100, total: 100, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 50.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 75, total: 75, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 50.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 90.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 90.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 5, total: 5, chance: 5%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 90.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] No valid task log provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: crowdReady (total: 5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 5 points for trait: confident (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 4.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 5, total: 5, chance: 5%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: crowdReady (rolled: 4.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident","crowdReady"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: bonded (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: resilient (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: calm (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 25, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: calm (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 10 (streak: 7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: bonded (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 40 points for trait: resilient (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 25 points for trait: confident (total: 25)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: showground_exposure, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: crowdReady (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 40)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: early_touch, count: 6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 30 points for trait: calm (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: hoof_handling, count: 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 20 points for trait: showCalm (total: 20)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: sponge_bath, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: showCalm (total: 30)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: presentationBoosted (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 40, total: 50, chance: 50%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 40, total: 50, chance: 50%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 40, total: 50, chance: 50%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: crowdReady, base: 15, total: 25, chance: 25%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: crowdReady (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: calm, base: 30, total: 40, chance: 40%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: calm (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: showCalm, base: 30, total: 40, chance: 40%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: showCalm (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: presentationBoosted, base: 10, total: 20, chance: 20%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: presentationBoosted (rolled: 30.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident","calm","showCalm"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: confident (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 10.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: -5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: -5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: bonded (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: resilient (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 50

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: bonded (total: 250)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 250 points for trait: resilient (total: 250)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 30

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 150 points for trait: confident (total: 150)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 250, total: 250, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 70.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 250, total: 250, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 70.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 150, total: 150, chance: 60%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 70.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: confident (rolled: 5.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient","confident"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: bonded (rolled: 12.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait assigned: resilient (rolled: 12.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 12.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: ["bonded","resilient"]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Evaluating traits from task log with streak: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Streak bonus: 0 (streak: 0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: trust_building, count: 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: bonded (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 15 points for trait: resilient (total: 15)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Processing task: desensitization, count: 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Accumulated 10 points for trait: confident (total: 10)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: bonded, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: bonded (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: resilient, base: 15, total: 15, chance: 15%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: resilient (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait: confident, base: 10, total: 10, chance: 10%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Trait not assigned: confident (rolled: 20.00)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:15] info: [traitEvaluation.evaluateEpigeneticTagsFromFoalTasks] Final assigned traits: []

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

PASS tests/horseModelTask7.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse invalid has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse -1 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 0 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse null has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 1 has trait ''

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 1 has trait 'null'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 1 has trait 'undefined'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 1 has trait '123'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse -1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category 'positive' for horse 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid horse ID provided

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait '' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'null' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait '123' to category 'positive' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Trait name must be a non-empty string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category 'invalid' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid category 'invalid'. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category 'hidden' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid category 'hidden'. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.addTrait] Adding trait 'trait' to category '' for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.addTrait] Error adding trait: Invalid category ''. Must be one of: positive, negative

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.hasTrait] Checking if horse 999999 has trait 'trait'

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.hasTrait] Error checking trait: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getPositiveTraitsArray] Getting positive traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getPositiveTraitsArray] Error getting positive traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:15] info: [horseModel.getNegativeTraitsArray] Getting negative traits for horse 999999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:15] error: [horseModel.getNegativeTraitsArray] Error getting negative traits: Horse with ID 999999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/services/flagEffectIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:16] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:16] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:16] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/lineageTraitCheck.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:16] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:16] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:16] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/data-check.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:17] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:17] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:17] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      Users in database: []

      at Object.<anonymous> (tests/data-check.test.mjs:54:13)

    console.log
      Players in database (from user table): []

      at Object.<anonymous> (tests/data-check.test.mjs:86:13)

    console.log
      Horses in database: []

      at Object.<anonymous> (tests/data-check.test.mjs:113:13)

PASS tests/database.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:17] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:17] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:17] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/integration/competitionWithTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -7.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 3.1% modifier, 2.1 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 3.1% modifier, 2.1 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 11.4% modifier, 7.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Bold Horse: 2 traits applied, 11.4% modifier, 7.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -7.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Nervous Horse: 2 traits applied, -10.4% modifier, -7.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 6.7 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Legendary Horse: 1 traits applied, 10.0% modifier, 6.7 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Regular Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.4% modifier, 12.3 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.4% modifier, 12.3 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -15.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -15.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 10.5% modifier, 9.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 10.5% modifier, 9.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -10.4% modifier, -9.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -10.4% modifier, -9.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 9.5% modifier, 6.4 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Favored Horse: 2 traits applied, 9.5% modifier, 6.4 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 2 traits applied, -13.3% modifier, -8.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Unfavored Horse: 2 traits applied, -13.3% modifier, -8.9 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 13.5% modifier, 9.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 3 traits applied, 13.5% modifier, 9.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 5 traits applied, 16.4% modifier, 11.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 5 traits applied, 16.4% modifier, 11.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 2: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] warn: [traitCompetitionImpact] Unknown trait: unknown_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] warn: [traitCompetitionImpact] Unknown trait: another_unknown

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:18] info: [simulateCompetition] Horse Base Horse: 1 traits applied, 6.0% modifier, 4.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

PASS tests/schema-field-test.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/trainingCooldown.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:18] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/foalTaskLoggingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:19] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

(node:27928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 exit listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:27928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGTERM listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:27928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:27928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
(node:27928) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 unhandledRejection listeners added to [process]. MaxListeners is 10. Use emitter.setMaxListeners() to increase limit
PASS __tests__/services/memoryResourceManagement.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:19] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 2 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 3 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] warn: [MemoryManager] Potential memory leak detected: 2MB per sample

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] warn: [MemoryManager] Memory threshold alert: 90MB used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 1 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Stopping memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Starting resource cleanup

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:19] info: [MemoryManager] Resource cleanup completed: 0 resources cleaned

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/environmentalFactorEngine.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:20] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/xpLogging.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:20] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:20] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseHistory.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/utils/cookieConfig.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/groomSystemLogic.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: strict

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for strict: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task feeding

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task grooming

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task dailyCare

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: invalid_personality

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:21] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for invalid_personality: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/simple-db.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:22] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/unit/security/csrf-validation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:22] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:22] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/unit/cacheHelper.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/task9IntegrationExample.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:23] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:23] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:23] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse JumpSpecialist: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse TraitHorse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_show_jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse RacingSpecialist: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse DressageSpecialist: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse Cross CountrySpecialist: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_cross_country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [simulateCompetition] Horse EnduranceSpecialist: Discipline affinity bonus applied for discipline_affinity_endurance (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:23] warn: [traitCompetitionImpact] Unknown trait: discipline_affinity_racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)
          at Array.map (<anonymous>)

    console.log
      [2025-12-29 06:07:23] info: [traitCompetitionImpact] Horse 1: 0 traits applied, 0.0% modifier, 0.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

PASS tests/atBirthTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS __tests__/unit/security/token-validation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 3692 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 2173 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 1 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 5802 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Token expired (precheck) for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Token expired for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Session expired due to age for GET /api/test from 127.0.0.1 (8 days old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Session expired. Please login again. for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 5109 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Session expired due to age for GET /api/test from 127.0.0.1 (7 days old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Session expired. Please login again. for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Token decode failed for GET /api/test from 127.0.0.1: Unexpected token 'ÔøΩ', "ÔøΩ{⁄ñ'" is not valid JSON

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid or expired token for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid token for GET /api/test from 127.0.0.1: invalid signature

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid or expired token for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid or expired token for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Access token is required for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 12345 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 99999 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 2602 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user 8448 for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid or expired token for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [auth] Authenticated user undefined for GET /api/test

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] warn: [auth] Invalid or expired token for GET /api/test from 127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitEvaluation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/burnoutImmunityGracePeriod.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/unit/featureFlagService.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] warn: [FeatureFlag] Flag overridden at runtime

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] warn: [FeatureFlag] Flag overridden at runtime

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] warn: [FeatureFlag] Flag overridden at runtime

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:25] info: [FeatureFlag] All runtime overrides cleared

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitCalculation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/foalModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS __tests__/unit/security/ownership-checks.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns groom 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns horse 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns horse 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] warn: [ownership] horse 1 not found or not owned by user user-1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] warn: [ownership] groom 5 not found or not owned by user user-1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns training-session 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Validated ownership: user user-1 owns competition-entry 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Found owned horse 1 for user user-1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Found owned groom 5 for user user-1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:26] info: [ownership] Batch validation: user user-1 owns 2/2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/competitionController.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseModelTraitHelpers.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/traitMetadataValidation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:27] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/unit/epigeneticFlagDefinitions.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/applyEpigeneticTraitsAtBirth.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/traitCompetitionImpact.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 2 traits applied, 8.5% modifier, 8.5 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 2 traits applied, -10.4% modifier, -10.4 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 3 traits applied, 4.5% modifier, 4.5 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 2: 5 traits applied, 16.4% modifier, 16.4 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 10.0% modifier, 10.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 5.0% modifier, 5.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] warn: [traitCompetitionImpact] Unknown trait: unknown_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 6.0% modifier, 6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, 7.0% modifier, 7.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -5.0% modifier, -5.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 1 traits applied, -6.0% modifier, -6.0 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:28] warn: [traitCompetitionImpact] Unknown trait: legendary_bloodline

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:28] info: [traitCompetitionImpact] Horse 1: 6 traits applied, 19.6% modifier, 19.6 point adjustment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/dbConnection.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/taskInfluenceConfig.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/milestoneTraitEvaluator.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 3 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 3 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"trusting":3,"brave":3,"nervous":-3}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait trusting (epigenetic: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait brave (epigenetic: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_nervous (epigenetic: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 3 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":2,"aloof":-3,"affectionate":1,"friendly":1,"playful":1,"independent":-1}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait bonded (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":1,"patient":1,"aloof":-1}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse test-horse-milestone at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {"bonded":3,"patient":3,"aloof":-3}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Trait bonded already exists, skipping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait patient (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.applyTraitToHorse] Applied trait resists_aloof (epigenetic: true)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:29] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 2 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomAgeRestrictions.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:30] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:30] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:30] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/utils/validateEnvironment.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:30] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:30] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:30] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/isHorseEligible.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/competitionRewards.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 2nd place winner gained +1 balance (5% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 3rd place winner gained +1 precision (3% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 speed (10% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 stamina (10% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [competitionRewards.calculateStatGains] 1st place winner gained +1 focus (10% chance)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/csrf.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:32] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:32] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] error: [CSRF] Token generation failed: Token generation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:32] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] warn: [CSRF] Invalid token detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:32] info: [CSRF] Token generated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomMarketplace.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/groomConfig.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:33] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:33] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:33] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/utils/epigeneticTraits.comprehensive.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/foalTaskLogManager.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:34] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:34] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:34] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:35] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:35] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:35] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/traitIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:36] info: [bondingModifiers] Bonding change for horse 1: 32 -> 50 (56.3% trait modifier)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 0.8 (-46.7% trait modifier)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [bondingModifiers] Bonding change for horse 1: 6 -> 7.5 (25.0% trait modifier)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [temperamentDrift] Temperament drift suppressed by traits for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] warn: [traitEffects.getTraitEffects] No effects defined for trait: unknown_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:36] warn: [traitEffects.getTraitEffects] No effects defined for trait: another_unknown

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:36] info: [bondingModifiers] Bonding change for horse 1: 17 -> 17 (0.0% trait modifier)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [bondingModifiers] Bonding change for horse 1: 1.5 -> 1.5 (0.0% trait modifier)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] error: [bondingModifiers] Error calculating bonding change: Unknown activity type: invalid_activity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/groomPersonalityEffects.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty, age_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying firm personality effects for task hand_walking

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied firm effects: task_specialty, trait_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying high_energy personality effects for task obstacle_course

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied high_energy effects: task_specialty, extra_trait_points

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying aloof personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied aloof effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:36] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: unknown_personality

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying patient personality effects for task puddle_training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied patient effects: task_specialty, category_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying playful personality effects for task grooming_game

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied playful effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty, trait_match

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalTaskExclusivity.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:37] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:37] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/burnoutImmunityTraitIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/unit/security/validate-environment.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:38] error: ‚ùå Environment validation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:38] error:   - Missing required environment variable: DATABASE_URL

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error:   - Missing required environment variable: JWT_SECRET

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error:   - NODE_ENV must be one of: development, production, test (current: invalid)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error:   - PORT must be a number (current: abc)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error: 
      Please fix the above errors in your .env file and restart.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:38] info: ‚úÖ Environment validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] warn: [validateEnvironment] SECURITY WARNING: ALLOWED_ORIGINS contains HTTP URLs in production

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] warn:   HTTP origins detected: http://example.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] warn:   These should be HTTPS in production to prevent man-in-the-middle attacks

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] warn: [validateEnvironment] SECURITY WARNING: PORT is set to 80 (HTTP) in production

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] warn:   Consider using HTTPS (443) or a reverse proxy with HTTPS termination

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] error: ‚ùå Environment validation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:38] error:   - JWT_SECRET must be at least 32 characters (current: 17)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error:   - JWT_SECRET appears to be a placeholder value. Please generate a real secret.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error:   - DATABASE_URL contains a weak password. Please use a strong password.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:38] error: 
      Please fix the above errors in your .env file and restart.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:38] info: ‚úÖ Environment validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:38] info: ‚úÖ Environment validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:39] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/user.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:39] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:39] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/utils/groomBondingSystem.comprehensive.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:40] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:40] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:40] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/epigeneticFlagInfluence.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:41] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Applied influences from 2 flags to trait weights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] warn: [epigeneticFlagInfluence] Unknown flag: unknown_flag

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Applied influences from 1 flags to trait weights

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 1 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 2 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [epigeneticFlagInfluence] Calculated behavior modifiers from 4 flags

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/ultraRareTraitsCore.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:41] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-12-29 06:07:41] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:41] info: [groomRareTraitPerks] Perk revealed: Phoenix Whisperer for groom 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalEnrichment.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/groomInteractionLimits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/epigeneticTraits.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:42] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseXpSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:43] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:43] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:43] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/middleware/errorHandler.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:43] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:43] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:43] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:43] error: Error Test error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Generic error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Unique constraint failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Record not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Test error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Test error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-12-29 06:07:43] error: Error Test error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

PASS tests/horseModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/groomBondingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:44] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:44] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:44] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/constants/schema.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseModelAtBirth.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseXpController.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/groomSystem.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/training-fixed.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/simulateCompetition.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:47] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:47] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:47] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/taskTraitInfluence.integration.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/horseConformation.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS __tests__/unit/security/security-middleware.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:48] warn: CORS blocked request from origin: http://evil.com

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] warn: [CORS] Request with no origin detected - API key validation required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.error
      TypeError: Cannot read properties of undefined (reading 'get')
          at Object.trustProxy (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:140:21)
          at Object.wrappedValidations.<computed> [as trustProxy] (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:370:22)
          at Object.keyGenerator (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:642:20)
          at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:696:32
          at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\express-rate-limit\dist\index.mjs:676:5

      at Object.wrappedValidations.<computed> [as trustProxy] (node_modules/express-rate-limit/dist/index.mjs:378:21)
      at Object.keyGenerator (node_modules/express-rate-limit/dist/index.mjs:642:20)
      at node_modules/express-rate-limit/dist/index.mjs:696:32
      at node_modules/express-rate-limit/dist/index.mjs:676:5

    console.log
      [2025-12-29 06:07:48] warn: [API Key] API_KEY not configured - requests with no origin are allowed (INSECURE)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] warn: [API Key] Invalid or missing API key

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:48] warn: [HTTPS] Insecure HTTP request detected, redirecting to HTTPS

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/disciplineAffinityBonusTask9.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/traitEffects.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:49] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] Invalid trait name: null

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] Invalid trait name: undefined

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] Invalid trait name:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] Invalid trait name: 123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] No effects defined for trait: nonexistent_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getCombinedTraitEffects] Invalid trait names array

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:49] warn: [traitEffects.getTraitEffects] No effects defined for trait: invalid_trait

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

PASS __tests__/unit/security/session-management.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS models/horseModel.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:50] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:50] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:50] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/errors/AppError.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS __tests__/unit/clusterManager.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/traitDiscovery.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:51] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS __tests__/unit/dbPoolConfig.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9

PASS tests/enhancedCompetitionLogic.test.mjs
  ‚óè Console

    console.log
      [2025-12-29 06:07:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-12-29 06:07:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:53:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:54:9


Summary of all failing tests
FAIL tests/integration/advancedBreedingGeneticsAPI.test.mjs (5.793 s)
  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 241 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 242 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 243 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 244 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 245 |[39m         })[33m;[39m
     [90m 246 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:243:36)

  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 265 |[39m   describe([32m'ÔøΩÔøΩ Genetic Diversity Tracking API'[39m[33m,[39m () [33m=>[39m {
     [90m 266 |[39m     test([32m'POST /api/genetics/population-analysis should analyze population genetics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 267 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 268 |[39m
     [90m 269 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 270 |[39m         [33m.[39mpost([32m'/api/genetics/population-analysis'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:267:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:267:39)

  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 298 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 299 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 300 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 301 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 302 |[39m         })[33m;[39m
     [90m 303 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:300:36)

  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 345 |[39m
     [90m 346 |[39m     test([32m'POST /api/genetics/optimal-breeding should recommend optimal breeding pairs'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 347 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 348 |[39m
     [90m 349 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 350 |[39m         [33m.[39mpost([32m'/api/genetics/optimal-breeding'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:347:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:347:39)

  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 378 |[39m       [36mconst[39m endpoints [33m=[39m [
     [90m 379 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/genetic-probability'[39m }[33m,[39m
    [31m[1m>[22m[39m[90m 380 |[39m         { method[33m:[39m [32m'get'[39m[33m,[39m path[33m:[39m [32m`/api/breeding/lineage-analysis/${testStallion.id}/${testMare.id}`[39m }[33m,[39m
     [90m     |[39m                                                                               [31m[1m^[22m[39m
     [90m 381 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/breeding-recommendations'[39m }[33m,[39m
     [90m 382 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/population-analysis'[39m }[33m,[39m
     [90m 383 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/inbreeding-analysis'[39m }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:380:79)

  ‚óè ÔøΩÔøΩ Advanced Breeding Genetics API Integration ‚Ä∫ ÔøΩÔøΩ API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 451 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${otherToken}`[39m)
     [90m 452 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 453 |[39m           stallionId[33m:[39m testStallion[33m.[39mid[33m,[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 454 |[39m           mareId[33m:[39m testMare[33m.[39mid[33m,[39m
     [90m 455 |[39m         })[33m;[39m
     [90m 456 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:453:36)

FAIL tests/integration/horseBreedingWorkflow.integration.test.mjs
  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should assign specialized foal care groom to newborn

    expect(received).toBe(expected) // Object.is equality

    Expected: "foal_care"
    Received: "foalCare"

    [0m [90m 286 |[39m
     [90m 287 |[39m       expect(dbAssignment)[33m.[39mtoBeTruthy()[33m;[39m
    [31m[1m>[22m[39m[90m 288 |[39m       expect(dbAssignment[33m.[39mgroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 289 |[39m
     [90m 290 |[39m       assignedGroom [33m=[39m dbAssignment[33m.[39mgroom[33m;[39m
     [90m 291 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:288:45)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 4: Groom Assignment & Care ‚Ä∫ should record groom interaction with foal

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 297 |[39m       [36mconst[39m interactionData [33m=[39m {
     [90m 298 |[39m         foalId[33m:[39m foal[33m.[39mid[33m,[39m
    [31m[1m>[22m[39m[90m 299 |[39m         groomId[33m:[39m assignedGroom[33m.[39mid[33m,[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 300 |[39m         interactionType[33m:[39m [32m'daily_care'[39m[33m,[39m
     [90m 301 |[39m         duration[33m:[39m [35m60[39m[33m,[39m [90m// 1 hour[39m
     [90m 302 |[39m         notes[33m:[39m [32m'Initial care for newborn foal'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:299:32)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate complete breeding workflow integrity

    expect(received).toBe(expected) // Object.is equality

    Expected: "foal_care"
    Received: "foalCare"

    [0m [90m 371 |[39m       [90m// Groom care system[39m
     [90m 372 |[39m       expect(foalWithFamily[33m.[39mgroomAssignments)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 373 |[39m       expect(foalWithFamily[33m.[39mgroomAssignments[[35m0[39m][33m.[39mgroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m
     [90m     |[39m                                                                   [31m[1m^[22m[39m
     [90m 374 |[39m       expect(foalWithFamily[33m.[39mgroomInteractions)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m 375 |[39m
     [90m 376 |[39m       [90m// Development tracking[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:373:67)

  ‚óè ÔøΩÔøΩ INTEGRATION: Complete Horse Breeding Workflow ‚Ä∫ ÔøΩÔøΩ STEP 6: End-to-End Workflow Validation ‚Ä∫ should validate business rules are enforced throughout workflow

    TypeError: Cannot read properties of undefined (reading 'speciality')

    [0m [90m 397 |[39m
     [90m 398 |[39m       [90m// Groom specialization rules[39m
    [31m[1m>[22m[39m[90m 399 |[39m       expect(assignedGroom[33m.[39mspeciality)[33m.[39mtoBe([32m'foal_care'[39m)[33m;[39m [90m// Correct specialty for foal[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 400 |[39m
     [90m 401 |[39m       [90m// Data integrity[39m
     [90m 402 |[39m       expect(foal[33m.[39msireId)[33m.[39mtoBe(stallion[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/horseBreedingWorkflow.integration.test.mjs:399:28)

FAIL tests/trainingController.test.mjs
  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible true for horse that meets all requirements

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m  97 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m  98 |[39m
    [31m[1m>[22m[39m[90m  99 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 100 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 101 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 102 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:99:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for horse under 3 years old

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
        "eligible": false,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
      }

    [0m [90m 110 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 111 |[39m
    [31m[1m>[22m[39m[90m 112 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 113 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 114 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 115 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:112:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for horse with recent training in any discipline

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
        "eligible": false,
    -   "reason": "Training cooldown active for this horse",
    +   "reason": "Horse not found",
      }

    [0m [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 127 |[39m
    [31m[1m>[22m[39m[90m 128 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 129 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 130 |[39m         reason[33m:[39m [32m'Training cooldown active for this horse'[39m[33m,[39m
     [90m 131 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:128:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible true for horse with old training (8+ days ago)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m 142 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 143 |[39m
    [31m[1m>[22m[39m[90m 144 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 145 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 146 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 147 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:144:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should return eligible false for non-existent horse

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 999

    Number of calls: 0

    [0m [90m 159 |[39m         reason[33m:[39m [32m'Horse not found'[39m[33m,[39m
     [90m 160 |[39m       })[33m;[39m
    [31m[1m>[22m[39m[90m 161 |[39m       expect(mockGetHorseAge)[33m.[39mtoHaveBeenCalledWith([35m999[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 162 |[39m       expect(mockGetAnyRecentTraining)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 163 |[39m     })[33m;[39m
     [90m 164 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:161:31)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"eligible": false, "reason": "Horse not found"}

    [0m [90m 178 |[39m       mockGetHorseAge[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 179 |[39m
    [31m[1m>[22m[39m[90m 180 |[39m       [36mawait[39m expect(canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training eligibility check failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 181 |[39m     })[33m;[39m
     [90m 182 |[39m
     [90m 183 |[39m     it([32m'should calculate cooldown correctly for edge case (exactly 7 days)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:180:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ canTrain ‚Ä∫ should calculate cooldown correctly for edge case (exactly 7 days)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "eligible": true,
    -   "reason": null,
    +   "eligible": false,
    +   "reason": "Horse not found",
      }

    [0m [90m 190 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Dressage'[39m)[33m;[39m
     [90m 191 |[39m
    [31m[1m>[22m[39m[90m 192 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 193 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 194 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 195 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:192:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should successfully train eligible horse

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 246 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 247 |[39m
    [31m[1m>[22m[39m[90m 248 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 249 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Racing. +5 added.'[39m)[33m;[39m
     [90m 250 |[39m       expect(result[33m.[39mupdatedHorse[33m.[39mname)[33m.[39mtoBe([32m'Test Horse'[39m)[33m;[39m
     [90m 251 |[39m       expect(result[33m.[39mnextEligible)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:248:30)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should reject training for ineligible horse (under age)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "message": "Training not allowed: Horse is under age",
    +   "message": "Training not allowed: Horse not found",
        "nextEligible": null,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
        "success": false,
        "updatedHorse": null,
      }

    [0m [90m 262 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 263 |[39m
    [31m[1m>[22m[39m[90m 264 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 265 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 266 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 267 |[39m         updatedHorse[33m:[39m [36mnull[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:264:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should reject training for horse in cooldown

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
    -   "message": "Training not allowed: Training cooldown active for this horse",
    +   "message": "Training not allowed: Horse not found",
        "nextEligible": null,
    -   "reason": "Training cooldown active for this horse",
    +   "reason": "Horse not found",
        "success": false,
        "updatedHorse": null,
      }

    [0m [90m 279 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 280 |[39m
    [31m[1m>[22m[39m[90m 281 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 282 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 283 |[39m         reason[33m:[39m [32m'Training cooldown active for this horse'[39m[33m,[39m
     [90m 284 |[39m         updatedHorse[33m:[39m [36mnull[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:281:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should handle training log errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"message": "Training not allowed: Horse not found", "nextEligible": null, "reason": "Horse not found", "success": false, "updatedHorse": null}

    [0m [90m 299 |[39m       mockLogTrainingSession[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Failed to log training'[39m))[33m;[39m
     [90m 300 |[39m
    [31m[1m>[22m[39m[90m 301 |[39m       [36mawait[39m expect(trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training failed: Failed to log training'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 302 |[39m     })[33m;[39m
     [90m 303 |[39m
     [90m 304 |[39m     it([32m'should award +5 XP after successful training'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:301:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should award +5 XP after successful training

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 344 |[39m
     [90m 345 |[39m       [90m// Verify training success[39m
    [31m[1m>[22m[39m[90m 346 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 347 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Dressage. +5 added.'[39m)[33m;[39m
     [90m 348 |[39m
     [90m 349 |[39m       [90m// Verify XP award system[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:346:30)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainHorse ‚Ä∫ should handle XP system errors gracefully without breaking training

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 386 |[39m
     [90m 387 |[39m       [90m// Training should still succeed despite XP error[39m
    [31m[1m>[22m[39m[90m 388 |[39m       expect(result[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 389 |[39m       expect(result[33m.[39mmessage)[33m.[39mtoContain([32m'Horse trained successfully in Racing. +5 added.'[39m)[33m;[39m
     [90m 390 |[39m       expect(result[33m.[39mupdatedHorse[33m.[39mname)[33m.[39mtoBe([32m'Error Test Horse'[39m)[33m;[39m
     [90m 391 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:388:30)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for eligible horse with no training history

    expect(received).toEqual(expected) // deep equality

    - Expected  - 3
    + Received  + 3

      Object {
        "cooldown": null,
    -   "eligible": true,
    -   "horseAge": 5,
    +   "eligible": false,
    +   "horseAge": null,
        "lastTrainingDate": null,
    -   "reason": null,
    +   "reason": "Horse not found",
      }

    [0m [90m 409 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 410 |[39m
    [31m[1m>[22m[39m[90m 411 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 412 |[39m         eligible[33m:[39m [36mtrue[39m[33m,[39m
     [90m 413 |[39m         reason[33m:[39m [36mnull[39m[33m,[39m
     [90m 414 |[39m         horseAge[33m:[39m [35m5[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:411:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for horse in active cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: "Training cooldown active for this horse"
    Received: "Horse not found"

    [0m [90m 427 |[39m
     [90m 428 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 429 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 430 |[39m       expect(result[33m.[39mhorseAge)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 431 |[39m       expect(result[33m.[39mlastTrainingDate)[33m.[39mtoBe([36mnull[39m)[33m;[39m [90m// Still null for this specific discipline[39m
     [90m 432 |[39m       expect(result[33m.[39mcooldown[33m.[39mactive)[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:429:29)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return complete status for horse with expired cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 443 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 444 |[39m
    [31m[1m>[22m[39m[90m 445 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 446 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([36mnull[39m)[33m;[39m
     [90m 447 |[39m       expect(result[33m.[39mhorseAge)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 448 |[39m       expect(result[33m.[39mlastTrainingDate)[33m.[39mtoEqual(eightDaysAgo)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:445:31)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should return status for ineligible horse (under age)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Object {
        "cooldown": null,
        "eligible": false,
    -   "horseAge": 2,
    +   "horseAge": null,
        "lastTrainingDate": null,
    -   "reason": "Horse is under age",
    +   "reason": "Horse not found",
      }

    [0m [90m 458 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 459 |[39m
    [31m[1m>[22m[39m[90m 460 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 461 |[39m         eligible[33m:[39m [36mfalse[39m[33m,[39m
     [90m 462 |[39m         reason[33m:[39m [32m'Horse is under age'[39m[33m,[39m
     [90m 463 |[39m         horseAge[33m:[39m [35m2[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:460:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainingStatus ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"cooldown": null, "eligible": false, "horseAge": null, "lastTrainingDate": null, "reason": "Horse not found"}

    [0m [90m 470 |[39m       mockGetHorseAge[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 471 |[39m
    [31m[1m>[22m[39m[90m 472 |[39m       [36mawait[39m expect(getTrainingStatus([35m1[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Training status check failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 473 |[39m     })[33m;[39m
     [90m 474 |[39m   })[33m;[39m
     [90m 475 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:472:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle different disciplines with global cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: "Training cooldown active for this horse"
    Received: "Horse not found"

    [0m [90m 491 |[39m       [90m// Both should be blocked due to global cooldown[39m
     [90m 492 |[39m       expect(racingResult[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 493 |[39m       expect(racingResult[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 494 |[39m
     [90m 495 |[39m       expect(jumpingResult[33m.[39meligible)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 496 |[39m       expect(jumpingResult[33m.[39mreason)[33m.[39mtoBe([32m'Training cooldown active for this horse'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:493:35)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle edge case of exactly 7 days cooldown

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 504 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m canTrain([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
     [90m 505 |[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(result[33m.[39meligible)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 507 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([36mnull[39m)[33m;[39m
     [90m 508 |[39m     })[33m;[39m
     [90m 509 |[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:506:31)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ Integration scenarios ‚Ä∫ should handle complete training workflow

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 542 |[39m
     [90m 543 |[39m       [36mconst[39m trainResult [33m=[39m [36mawait[39m trainHorse([35m1[39m[33m,[39m [32m'Racing'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 544 |[39m       expect(trainResult[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 545 |[39m
     [90m 546 |[39m       [90m// Now mock that the horse has recently trained[39m
     [90m 547 |[39m       [36mconst[39m justNow [33m=[39m [36mnew[39m [33mDate[39m()[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:544:35)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should return trainable horses for user with eligible horses

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

    [0m [90m 577 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 578 |[39m
    [31m[1m>[22m[39m[90m 579 |[39m       expect(result)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 580 |[39m       expect(result[[35m0[39m])[33m.[39mtoEqual({
     [90m 581 |[39m         horseId[33m:[39m [35m1[39m[33m,[39m
     [90m 582 |[39m         name[33m:[39m [32m'Thunder'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:579:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should filter out horses under 3 years old

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 630 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 631 |[39m
    [31m[1m>[22m[39m[90m 632 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 633 |[39m       expect(result[[35m0[39m][33m.[39mname)[33m.[39mtoBe([32m'Adult Horse'[39m)[33m;[39m
     [90m 634 |[39m       expect(result[[35m0[39m][33m.[39mage)[33m.[39mtoBe([35m4[39m)[33m;[39m
     [90m 635 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:632:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should handle database errors gracefully for individual horses

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 668 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getTrainableHorses(playerId)[33m;[39m
     [90m 669 |[39m
    [31m[1m>[22m[39m[90m 670 |[39m       expect(result)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 671 |[39m       expect(result[[35m0[39m][33m.[39mname)[33m.[39mtoBe([32m'Good Horse'[39m)[33m;[39m
     [90m 672 |[39m       expect(result[[35m0[39m][33m.[39mtrainableDisciplines)[33m.[39mtoEqual([
     [90m 673 |[39m         [32m'Racing'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:670:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ getTrainableHorses ‚Ä∫ should handle player model errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 688 |[39m       mockGetUserWithHorses[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Player database error'[39m))[33m;[39m
     [90m 689 |[39m
    [31m[1m>[22m[39m[90m 690 |[39m       [36mawait[39m expect(getTrainableHorses(playerId))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 691 |[39m         [32m'Failed to get trainable horses: Player database error'[39m[33m,[39m
     [90m 692 |[39m       )[33m;[39m
     [90m 693 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingController.test.mjs:690:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return success response with correct format for successful training

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Nova trained in Dressage. +5 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [],
    -     "scoreModifier": 0,
    -     "xpModifier": 0,
    -   },
    -   "updatedScore": 25,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 747 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 748 |[39m
    [31m[1m>[22m[39m[90m 749 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 750 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 751 |[39m         message[33m:[39m [32m'Nova trained in Dressage. +5 added.'[39m[33m,[39m
     [90m 752 |[39m         updatedScore[33m:[39m [35m25[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:749:28)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return failure response for ineligible horse (under age)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Training not allowed: Horse is under age",
    +   "message": "Training not allowed: Horse not found",
        "success": false,
      },

    Number of calls: 1

    [0m [90m 768 |[39m
     [90m 769 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 770 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 771 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 772 |[39m         message[33m:[39m [32m'Training not allowed: Horse is under age'[39m[33m,[39m
     [90m 773 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:770:28)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should return failure response for horse in cooldown

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Training not allowed: Training cooldown active for this horse",
    +   "message": "Training not allowed: Horse not found",
        "success": false,
      },

    Number of calls: 1

    [0m [90m 783 |[39m
     [90m 784 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 785 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 786 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 787 |[39m         message[33m:[39m [32m'Training not allowed: Training cooldown active for this horse'[39m[33m,[39m
     [90m 788 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:785:28)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle missing discipline score gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Nova trained in Dressage. +5 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [],
    -     "scoreModifier": 0,
    -     "xpModifier": 0,
    -   },
    -   "updatedScore": 0,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 825 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 826 |[39m
    [31m[1m>[22m[39m[90m 827 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 828 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 829 |[39m         message[33m:[39m [32m'Nova trained in Dressage. +5 added.'[39m[33m,[39m
     [90m 830 |[39m         updatedScore[33m:[39m [35m0[39m[33m,[39m [90m// Should default to 0 when no scores exist[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:827:28)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle server errors gracefully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 500
    Received: 400

    Number of calls: 1

    [0m [90m 844 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 845 |[39m
    [31m[1m>[22m[39m[90m 846 |[39m       expect(mockRes[33m.[39mstatus)[33m.[39mtoHaveBeenCalledWith([35m500[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 847 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m 848 |[39m         success[33m:[39m [36mfalse[39m[33m,[39m
     [90m 849 |[39m         message[33m:[39m [32m'Failed to train horse'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:846:30)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Controller - Horse Training Business Logic ‚Ä∫ trainRouteHandler ‚Ä∫ should handle trait effects in training

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    -   "message": "Intelligent Horse trained in Dressage. +6 added.",
    -   "nextEligibleDate": Any<String>,
    -   "success": true,
    -   "traitEffects": ObjectContaining {
    -     "appliedTraits": Array [
    -       "intelligent",
    -     ],
    -     "scoreModifier": 1,
    -     "xpModifier": 1,
    -   },
    -   "updatedScore": 6,
    +   "message": "Training not allowed: Horse not found",
    +   "success": false,
      },

    Number of calls: 1

    [0m [90m 889 |[39m       [36mawait[39m trainRouteHandler(mockReq[33m,[39m mockRes)[33m;[39m
     [90m 890 |[39m
    [31m[1m>[22m[39m[90m 891 |[39m       expect(mockRes[33m.[39mjson)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 892 |[39m         success[33m:[39m [36mtrue[39m[33m,[39m
     [90m 893 |[39m         message[33m:[39m [32m'Intelligent Horse trained in Dressage. +6 added.'[39m[33m,[39m
     [90m 894 |[39m         updatedScore[33m:[39m [35m6[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingController.test.mjs:891:28)

FAIL tests/groomBonusTraits.test.mjs
  ‚óè Groom Bonus Traits System ‚Ä∫ Trait Assignment Logic Integration ‚Ä∫ should not apply bonus when coverage is insufficient

    expect(received).toBe(expected) // Object.is equality

    Expected: "Bond score too low"
    Received: "Insufficient assignment coverage"

    [0m [90m 302 |[39m       expect(result[33m.[39mfinalProbability)[33m.[39mtoBe([35m0.1[39m)[33m;[39m [90m// No bonus applied[39m
     [90m 303 |[39m       expect(result[33m.[39mbonusApplied)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(result[33m.[39mreason)[33m.[39mtoBe([32m'Bond score too low'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 305 |[39m     })[33m;[39m
     [90m 306 |[39m   })[33m;[39m
     [90m 307 |[39m[0m

      at Object.<anonymous> (tests/groomBonusTraits.test.mjs:304:29)

FAIL seed/horseSeed.test.mjs
  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should return existing breed if found in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Found existing breed: TestSeed_Thoroughbred (ID: 21162)"

    Number of calls: 0

    [0m [90m 152 |[39m       expect(result[33m.[39mname)[33m.[39mtoBe([32m'TestSeed_Thoroughbred'[39m)[33m;[39m
     [90m 153 |[39m       expect(result[33m.[39mid)[33m.[39mtoBe(testBreed[33m.[39mid)[33m;[39m
    [31m[1m>[22m[39m[90m 154 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 155 |[39m         [32m`[seed] Found existing breed: TestSeed_Thoroughbred (ID: ${testBreed.id})`[39m[33m,[39m
     [90m 156 |[39m       )[33m;[39m
     [90m 157 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:154:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should create new breed if not found in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Breed \"TestSeed_NewArabian\" not found, creating new one."

    Number of calls: 0

    [0m [90m 166 |[39m       expect(result[33m.[39mname)[33m.[39mtoBe([32m'TestSeed_NewArabian'[39m)[33m;[39m
     [90m 167 |[39m       expect(result[33m.[39mdescription)[33m.[39mtoBe([32m'Seed-created TestSeed_NewArabian'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 168 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Breed "TestSeed_NewArabian" not found, creating new one.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 169 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m`[seed] Created breed: TestSeed_NewArabian (ID: ${result.id})`[39m)[33m;[39m
     [90m 170 |[39m
     [90m 171 |[39m       [90m// Verify it was actually created in database[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:168:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ findOrCreateBreed - Real Database Operations ‚Ä∫ should return null for undefined breed name

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Breed name is undefined or null. Skipping breed creation/connection."

    Number of calls: 0

    [0m [90m 182 |[39m
     [90m 183 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m
    [31m[1m>[22m[39m[90m 184 |[39m       expect(mockLogger[33m.[39mwarn)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 185 |[39m         [32m'[seed] Breed name is undefined or null. Skipping breed creation/connection.'[39m[33m,[39m
     [90m 186 |[39m       )[33m;[39m
     [90m 187 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:184:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ ensureReferencedRecordsExist - Real Database Operations ‚Ä∫ should create users and stables if they do not exist in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 220 |[39m       expect(stable2[33m.[39mname)[33m.[39mtoBe([32m'Second Stable'[39m)[33m;[39m
     [90m 221 |[39m
    [31m[1m>[22m[39m[90m 222 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 223 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner2@example.com exists.'[39m)[33m;[39m
     [90m 224 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured Stable ID 1 exists.'[39m)[33m;[39m
     [90m 225 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured Stable ID 2 exists.'[39m)[33m;[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:222:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ ensureReferencedRecordsExist - Real Database Operations ‚Ä∫ should update existing users and stables if they already exist

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 242 |[39m       expect(user2)[33m.[39mtoBeTruthy()[33m;[39m
     [90m 243 |[39m
    [31m[1m>[22m[39m[90m 244 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 245 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner2@example.com exists.'[39m)[33m;[39m
     [90m 246 |[39m     })[33m;[39m
     [90m 247 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:244:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ seedHorses - Real Database Operations ‚Ä∫ should log a warning and return an empty array if no users are provided

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "No users provided for horse seeding. Skipping horse creation."

    Number of calls: 0

    [0m [90m 265 |[39m     it([32m'should log a warning and return an empty array if no users are provided'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 266 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m seedHorses(prisma[33m,[39m [])[33m;[39m
    [31m[1m>[22m[39m[90m 267 |[39m       expect(mockLogger[33m.[39mwarn)[33m.[39mtoHaveBeenCalledWith([32m'No users provided for horse seeding. Skipping horse creation.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 268 |[39m       expect(result)[33m.[39mtoEqual([])[33m;[39m
     [90m 269 |[39m     })[33m;[39m
     [90m 270 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:267:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ seedHorses - Real Database Operations ‚Ä∫ should create breeds and horses for the provided user in database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Created horse:"

    Number of calls: 0

    [0m [90m 302 |[39m
     [90m 303 |[39m       [90m// Verify logging occurred[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 305 |[39m         expect[33m.[39mstringContaining([32m'Created horse:'[39m)[33m,[39m
     [90m 306 |[39m       )[33m;[39m
     [90m 307 |[39m[0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:304:31)

  ‚óè Horse Seed Integration Tests ‚Ä∫ Complete Horse Seeding Integration Test ‚Ä∫ should execute complete seeding workflow with real database operations

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "[seed] Ensured User owner1@example.com exists."

    Number of calls: 0

    [0m [90m 386 |[39m
     [90m 387 |[39m       [90m// Verify logging occurred[39m
    [31m[1m>[22m[39m[90m 388 |[39m       expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([32m'[seed] Ensured User owner1@example.com exists.'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 389 |[39m
     [90m 390 |[39m       [36mif[39m (result[33m.[39mlength [33m>[39m [35m0[39m) {
     [90m 391 |[39m         expect(mockLogger[33m.[39minfo)[33m.[39mtoHaveBeenCalledWith([0m

      at Object.<anonymous> (seed/horseSeed.test.mjs:388:31)

FAIL tests/training-updated.test.mjs
  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Training Status Tests ‚Ä∫ should get training status for a specific horse and discipline

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 163 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m [90m// Ensure auth token is sent[39m
     [90m 164 |[39m
    [31m[1m>[22m[39m[90m 165 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 166 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 167 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'eligible'[39m)[33m;[39m
     [90m 168 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'reason'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:165:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Training Status Tests ‚Ä∫ should get all training status for a horse

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 180 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m [90m// Ensure auth token is sent[39m
     [90m 181 |[39m
    [31m[1m>[22m[39m[90m 182 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 183 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 184 |[39m       expect([36mtypeof[39m response[33m.[39mbody[33m.[39mdata)[33m.[39mtoBe([32m'object'[39m)[33m;[39m [90m// Fixed: API returns object with discipline keys, not array[39m
     [90m 185 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'Racing'[39m)[33m;[39m [90m// Fixed: Check for discipline properties[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:182:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Error Handling Tests ‚Ä∫ should handle invalid horse ID gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 403

    [0m [90m 217 |[39m       })[33m;[39m
     [90m 218 |[39m
    [31m[1m>[22m[39m[90m 219 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 220 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 221 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'not found'[39m)[33m;[39m
     [90m 222 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:219:31)

  ‚óè ÔøΩÔøΩÔ∏è INTEGRATION: Training System Updated - User Model Integration ‚Ä∫ Error Handling Tests ‚Ä∫ should handle invalid discipline gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 403

    [0m [90m 228 |[39m       })[33m;[39m
     [90m 229 |[39m
    [31m[1m>[22m[39m[90m 230 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m [90m// Ownership fails before discipline validation in test mode[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 231 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 232 |[39m     })[33m;[39m
     [90m 233 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (tests/training-updated.test.mjs:230:31)

FAIL tests/resultModel.test.mjs
  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should save a competition result with all required fields

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:105:22)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should save a result without placement (null for non-top-3)

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:146:22)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should handle prizeWon as string and convert to float

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:329:7)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error in saveResult: Database connection failed"
    Received message:   "Database error in saveResult:¬∑
    Invalid `prisma.competitionResult.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`"

        [0m [90m 128 |[39m   } [36mcatch[39m (error) {
         [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
        [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
         [90m     |[39m           [31m[1m^[22m[39m
         [90m 131 |[39m   }
         [90m 132 |[39m }
         [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:352:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/resultModel.test.mjs:352:52)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should update existing placeholder result instead of creating new one

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:390:22)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ saveResult ‚Ä∫ should create new result when no placeholder exists

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at Object.<anonymous> (tests/resultModel.test.mjs:447:22)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByHorse ‚Ä∫ should retrieve all results for a specific horse

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 517 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByHorse(horseId)[33m;[39m
     [90m 518 |[39m
    [31m[1m>[22m[39m[90m 519 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 520 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 521 |[39m         where[33m:[39m { horseId[33m:[39m [35m1[39m }[33m,[39m
     [90m 522 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:519:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByHorse ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 551 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 552 |[39m
    [31m[1m>[22m[39m[90m 553 |[39m       [36mawait[39m expect(getResultsByHorse([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 554 |[39m         [32m'Database error in getResultsByHorse: Database connection failed'[39m[33m,[39m
     [90m 555 |[39m       )[33m;[39m
     [90m 556 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:553:13)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByShow ‚Ä∫ should retrieve all results for a specific show

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 589 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByShow(showId)[33m;[39m
     [90m 590 |[39m
    [31m[1m>[22m[39m[90m 591 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 592 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 593 |[39m         where[33m:[39m { showId[33m:[39m [35m2[39m }[33m,[39m
     [90m 594 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:591:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByShow ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 623 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 624 |[39m
    [31m[1m>[22m[39m[90m 625 |[39m       [36mawait[39m expect(getResultsByShow([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 626 |[39m         [32m'Database error in getResultsByShow: Database connection failed'[39m[33m,[39m
     [90m 627 |[39m       )[33m;[39m
     [90m 628 |[39m     })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:625:13)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultById ‚Ä∫ should retrieve a specific result by ID

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

    [0m [90m 648 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getResultById(resultId)[33m;[39m
     [90m 649 |[39m
    [31m[1m>[22m[39m[90m 650 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledTimes([35m1[39m)[33m;[39m
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 651 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({
     [90m 652 |[39m         where[33m:[39m { id[33m:[39m [35m1[39m }[33m,[39m
     [90m 653 |[39m         include[33m:[39m {[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:650:55)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultById ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 681 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 682 |[39m
    [31m[1m>[22m[39m[90m 683 |[39m       [36mawait[39m expect(getResultById([35m1[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error in getResultById: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 684 |[39m     })[33m;[39m
     [90m 685 |[39m   })[33m;[39m
     [90m 686 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:683:13)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ createResult ‚Ä∫ should be an alias for saveResult and work identically

    Database error in saveResult: 
    Invalid `prisma.competitionResult.create()` invocation:


    Foreign key constraint violated on the constraint: `competition_results_horseId_fkey`

    [0m [90m 128 |[39m   } [36mcatch[39m (error) {
     [90m 129 |[39m     logger[33m.[39merror([32m'[resultModel.saveResult] Database error: %o'[39m[33m,[39m error)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error in saveResult: ${error.message}`[39m)[33m;[39m
     [90m     |[39m           [31m[1m^[22m[39m
     [90m 131 |[39m   }
     [90m 132 |[39m }
     [90m 133 |[39m[0m

      at saveResult (models/resultModel.mjs:130:11)
      at createResult (models/resultModel.mjs:248:10)
      at Object.<anonymous> (tests/resultModel.test.mjs:702:22)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should retrieve results for all user horses with default options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"horse": {"include": {"breed": true}}, "show": true}, "orderBy": {"runDate": "desc"}, "skip": 0, "take": 50, "where": {"horse": {"userId": "user123"}}}

    Number of calls: 0

    [0m [90m 736 |[39m       [36mconst[39m results [33m=[39m [36mawait[39m getResultsByUser(userId)[33m;[39m
     [90m 737 |[39m
    [31m[1m>[22m[39m[90m 738 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 739 |[39m         where[33m:[39m {
     [90m 740 |[39m           horse[33m:[39m {
     [90m 741 |[39m             userId[33m:[39m [32m'user123'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:738:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should handle custom options (limit, offset, discipline)

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": Any<Object>, "orderBy": {"runDate": "desc"}, "skip": 5, "take": 10, "where": {"discipline": "Racing", "horse": {"userId": "user123"}}}

    Number of calls: 0

    [0m [90m 767 |[39m       [36mawait[39m getResultsByUser(userId[33m,[39m options)[33m;[39m
     [90m 768 |[39m
    [31m[1m>[22m[39m[90m 769 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 770 |[39m         where[33m:[39m {
     [90m 771 |[39m           horse[33m:[39m {
     [90m 772 |[39m             userId[33m:[39m [32m'user123'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:769:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should cap limit at 100 and ensure non-negative offset

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"skip": 0, "take": 100}

    Number of calls: 0

    [0m [90m 789 |[39m       [36mawait[39m getResultsByUser(userId[33m,[39m options)[33m;[39m
     [90m 790 |[39m
    [31m[1m>[22m[39m[90m 791 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 792 |[39m         expect[33m.[39mobjectContaining({
     [90m 793 |[39m           take[33m:[39m [35m100[39m[33m,[39m [90m// Capped at 100[39m
     [90m 794 |[39m           skip[33m:[39m [35m0[39m[33m,[39m [90m// Non-negative[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:791:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ getResultsByUser ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: []

    [0m [90m 800 |[39m       mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 801 |[39m
    [31m[1m>[22m[39m[90m 802 |[39m       [36mawait[39m expect(getResultsByUser([32m'user123'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 803 |[39m     })[33m;[39m
     [90m 804 |[39m   })[33m;[39m
     [90m 805 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/resultModel.test.mjs:802:13)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultsByHorse

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"horseId": 123}}

    Number of calls: 0

    [0m [90m 810 |[39m       [36mawait[39m getResultsByHorse([32m'123'[39m)[33m;[39m [90m// String ID[39m
     [90m 811 |[39m
    [31m[1m>[22m[39m[90m 812 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 813 |[39m         expect[33m.[39mobjectContaining({
     [90m 814 |[39m           where[33m:[39m { horseId[33m:[39m [35m123[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 815 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:812:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultsByShow

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"showId": 456}}

    Number of calls: 0

    [0m [90m 822 |[39m       [36mawait[39m getResultsByShow([32m'456'[39m)[33m;[39m [90m// String ID[39m
     [90m 823 |[39m
    [31m[1m>[22m[39m[90m 824 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                     [31m[1m^[22m[39m
     [90m 825 |[39m         expect[33m.[39mobjectContaining({
     [90m 826 |[39m           where[33m:[39m { showId[33m:[39m [35m456[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 827 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:824:53)

  ‚óè ÔøΩÔøΩ UNIT: Result Model - Competition Result Management ‚Ä∫ parseInt conversion edge cases ‚Ä∫ should handle string IDs in getResultById

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"where": {"id": 789}}

    Number of calls: 0

    [0m [90m 834 |[39m       [36mawait[39m getResultById([32m'789'[39m)[33m;[39m [90m// String ID[39m
     [90m 835 |[39m
    [31m[1m>[22m[39m[90m 836 |[39m       expect(mockPrisma[33m.[39mcompetitionResult[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                                       [31m[1m^[22m[39m
     [90m 837 |[39m         expect[33m.[39mobjectContaining({
     [90m 838 |[39m           where[33m:[39m { id[33m:[39m [35m789[39m }[33m,[39m [90m// Should be converted to number[39m
     [90m 839 |[39m         })[33m,[39m[0m

      at Object.<anonymous> (tests/resultModel.test.mjs:836:55)

FAIL tests/unit/carePatternAnalysis.test.mjs
  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze patterns for eligible horse

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:58:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should reject horse too old for evaluation

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:78:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze consistent care patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:123:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze novelty exposure patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:172:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze stress management patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:222:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze bonding patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:263:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze neglect patterns

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:296:22)

  ‚óè Care Pattern Analysis ‚Ä∫ analyzeCarePatterns ‚Ä∫ should analyze environmental factors

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:338:22)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle horse with no interactions

    Horse with ID 1 not found

    [0m [90m 46 |[39m
     [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 49 |[39m     }
     [90m 50 |[39m
     [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:355:22)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database connection failed"
    Received message:   "Horse with ID 1 not found"

        [0m [90m 46 |[39m
         [90m 47 |[39m     [36mif[39m ([33m![39mhorse) {
        [31m[1m>[22m[39m[90m 48 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
         [90m    |[39m             [31m[1m^[22m[39m
         [90m 49 |[39m     }
         [90m 50 |[39m
         [90m 51 |[39m     [90m// Calculate horse age in days[39m[0m

      at analyzeCarePatterns (utils/carePatternAnalysis.mjs:48:13)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:367:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/unit/carePatternAnalysis.test.mjs:367:52)

  ‚óè Care Pattern Analysis ‚Ä∫ Edge Cases ‚Ä∫ should handle invalid evaluation date

    PrismaClientValidationError: 
    Invalid `prisma.horse.findUnique()` invocation:

    {
      where: {
        id: 1
      },
      include: {
        groomInteractions: {
          where: {
            createdAt: {
              gte: new Date("Invalid Date")
                   ~~~~~~~~~~~~~~~~~~~~~~~~
            }
          },
          orderBy: {
            createdAt: "asc"
          }
        }
      }
    }

    Invalid value for argument `gte`: Provided Date object is invalid. Expected Date.

      at kn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:1363)
      at e.throwValidationError (../packages/database/node_modules/@prisma/client/runtime/library.js:29:10051)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:7488)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8272)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Ia (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8272)
      at ka (../packages/database/node_modules/@prisma/client/runtime/library.js:29:8741)
      at Et (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5845)
      at rm (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6654)
      at em (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6300)
      at Xd (../packages/database/node_modules/@prisma/client/runtime/library.js:29:6186)
      at Et (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5863)
      at Nn (../packages/database/node_modules/@prisma/client/runtime/library.js:29:5747)
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10331
      at Object.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1549)
      at Io.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1913)
      at r._executeRequest (../packages/database/node_modules/@prisma/client/runtime/library.js:130:10310)
      at il (../packages/database/node_modules/@prisma/client/runtime/library.js:31:9835)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9784)
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10078
      at ../packages/database/node_modules/@prisma/client/runtime/library.js:130:10058
      at Object.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1549)
      at Io.runInChildSpan (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1913)
      at r._request (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9981)
      at e._createPrismaPromise.action (../packages/database/node_modules/@prisma/client/runtime/library.js:31:5390)
      at o (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1018)
      at Proxy.then (../packages/database/node_modules/@prisma/client/runtime/library.js:121:1114)

FAIL tests/xpLogModel.test.mjs
  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should log XP event successfully

    PrismaClientKnownRequestError: 
    Invalid `prisma.xpEvent.create()` invocation:


    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

    [0m [90m 38 |[39m
     [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
    [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 41 |[39m       data[33m:[39m {
     [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
     [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:98:22)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should handle database errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database connection failed"
    Received message:   "
    Invalid `prisma.xpEvent.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`"

        [0m [90m 38 |[39m
         [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
        [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
         [90m    |[39m                     [31m[1m^[22m[39m
         [90m 41 |[39m       data[33m:[39m {
         [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
         [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:157:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:163:17)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ logXpEvent ‚Ä∫ should handle negative XP amounts

    PrismaClientKnownRequestError: 
    Invalid `prisma.xpEvent.create()` invocation:


    Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

    [0m [90m 38 |[39m
     [90m 39 |[39m     [90m// Insert XP event into database using Prisma[39m
    [31m[1m>[22m[39m[90m 40 |[39m     [36mconst[39m xpEvent [33m=[39m [36mawait[39m prisma[33m.[39mxpEvent[33m.[39mcreate({
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 41 |[39m       data[33m:[39m {
     [90m 42 |[39m         userId[33m,[39m [90m// Changed userId to userId[39m
     [90m 43 |[39m         amount[33m,[39m[0m

      at Zn.handleRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (../packages/database/node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (../packages/database/node_modules/@prisma/client/runtime/library.js:130:9778)
      at logXpEvent (models/xpLogModel.mjs:40:21)
      at Object.<anonymous> (tests/xpLogModel.test.mjs:181:22)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpEvents ‚Ä∫ should retrieve XP events for a user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"timestamp": "desc"}, "skip": 0, "take": 50, "where": {"userId": "user-123"}}

    Number of calls: 0

    [0m [90m 219 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserXpEvents([32m'user-123'[39m)[33m;[39m
     [90m 220 |[39m
    [31m[1m>[22m[39m[90m 221 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 222 |[39m         where[33m:[39m { userId[33m:[39m [32m'user-123'[39m }[33m,[39m
     [90m 223 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 224 |[39m         take[33m:[39m [35m50[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:221:42)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpEvents ‚Ä∫ should handle date filters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"timestamp": "desc"}, "skip": 5, "take": 10, "where": {"timestamp": {"gte": 2024-01-01T00:00:00.000Z, "lte": 2024-01-02T00:00:00.000Z}, "userId": "user-123"}}

    Number of calls: 0

    [0m [90m 245 |[39m       })[33m;[39m
     [90m 246 |[39m
    [31m[1m>[22m[39m[90m 247 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 248 |[39m         where[33m:[39m {
     [90m 249 |[39m           userId[33m:[39m [32m'user-123'[39m[33m,[39m
     [90m 250 |[39m           timestamp[33m:[39m {[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:247:42)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpSummary ‚Ä∫ should calculate XP summary correctly

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 4

      Object {
    -   "netTotal": 45,
    -   "totalEvents": 5,
    -   "totalGained": 50,
    -   "totalLost": 5,
    +   "netTotal": 0,
    +   "totalEvents": 0,
    +   "totalGained": 0,
    +   "totalLost": 0,
      }

    [0m [90m 268 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserXpSummary([32m'user-123'[39m)[33m;[39m
     [90m 269 |[39m
    [31m[1m>[22m[39m[90m 270 |[39m       expect(result)[33m.[39mtoEqual({
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 271 |[39m         totalGained[33m:[39m [35m50[39m[33m,[39m [90m// 20 + 15 + 5 + 10[39m
     [90m 272 |[39m         totalLost[33m:[39m [35m5[39m[33m,[39m [90m// abs(-5)[39m
     [90m 273 |[39m         netTotal[33m:[39m [35m45[39m[33m,[39m [90m// 20 + 15 + 5 - 5 + 10[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:270:22)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getUserXpSummary ‚Ä∫ should handle date filters in summary

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"select": {"amount": true}, "where": {"timestamp": {"gte": 2024-01-01T00:00:00.000Z, "lte": 2024-01-02T00:00:00.000Z}, "userId": "user-123"}}

    Number of calls: 0

    [0m [90m 302 |[39m       [36mawait[39m getUserXpSummary([32m'user-123'[39m[33m,[39m startDate[33m,[39m endDate)[33m;[39m
     [90m 303 |[39m
    [31m[1m>[22m[39m[90m 304 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 305 |[39m         where[33m:[39m {
     [90m 306 |[39m           userId[33m:[39m [32m'user-123'[39m[33m,[39m
     [90m 307 |[39m           timestamp[33m:[39m {[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:304:42)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getRecentXpEvents ‚Ä∫ should retrieve recent XP events across all users

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"user": {"select": {"id": true, "username": true}}}, "orderBy": {"timestamp": "desc"}, "skip": 0, "take": 10}

    Number of calls: 0

    [0m [90m 338 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getRecentXpEvents({ limit[33m:[39m [35m10[39m[33m,[39m offset[33m:[39m [35m0[39m })[33m;[39m
     [90m 339 |[39m
    [31m[1m>[22m[39m[90m 340 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 341 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 342 |[39m         take[33m:[39m [35m10[39m[33m,[39m
     [90m 343 |[39m         skip[33m:[39m [35m0[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:340:42)

  ‚óè ÔøΩÔøΩ UNIT: XP Log Model - Experience Point Event Tracking ‚Ä∫ getRecentXpEvents ‚Ä∫ should use default options

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"include": {"user": {"select": {"id": true, "username": true}}}, "orderBy": {"timestamp": "desc"}, "skip": 0, "take": 100}

    Number of calls: 0

    [0m [90m 363 |[39m       [36mawait[39m getRecentXpEvents()[33m;[39m
     [90m 364 |[39m
    [31m[1m>[22m[39m[90m 365 |[39m       expect(mockPrismaXpEvent[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 366 |[39m         orderBy[33m:[39m { timestamp[33m:[39m [32m'desc'[39m }[33m,[39m
     [90m 367 |[39m         take[33m:[39m [35m100[39m[33m,[39m
     [90m 368 |[39m         skip[33m:[39m [35m0[39m[33m,[39m[0m

      at Object.<anonymous> (tests/xpLogModel.test.mjs:365:42)

FAIL tests/unit/flagEvaluationEngine.test.mjs
  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should evaluate and assign flags for eligible horse

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:124:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should reject horse outside age range

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:147:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should reject horse with maximum flags

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:162:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should not assign duplicate flags

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:180:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should respect flag limit during assignment

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:210:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should handle care analysis ineligibility

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:224:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ evaluateHorseFlags ‚Ä∫ should handle database errors

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error"
    Received message:   "Horse with ID 1 not found"

        [0m [90m 49 |[39m
         [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
        [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
         [90m    |[39m             [31m[1m^[22m[39m
         [90m 52 |[39m     }
         [90m 53 |[39m
         [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:241:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:241:51)

  ‚óè Flag Evaluation Engine ‚Ä∫ Flag Trigger Evaluation ‚Ä∫ should trigger brave flag with correct conditions

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:278:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ Flag Trigger Evaluation ‚Ä∫ should trigger fearful flag with correct conditions

    Horse with ID 1 not found

    [0m [90m 49 |[39m
     [90m 50 |[39m     [36mif[39m ([33m![39mhorse) {
    [31m[1m>[22m[39m[90m 51 |[39m       [36mthrow[39m [36mnew[39m [33mError[39m([32m`Horse with ID ${horseId} not found`[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 52 |[39m     }
     [90m 53 |[39m
     [90m 54 |[39m     [90m// Check age eligibility[39m[0m

      at evaluateHorseFlags (utils/flagEvaluationEngine.mjs:51:13)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:318:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ batchEvaluateFlags ‚Ä∫ should evaluate multiple horses

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 348 |[39m
     [90m 349 |[39m       expect(results)[33m.[39mtoHaveLength([35m3[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 350 |[39m       expect(results[33m.[39mevery(r [33m=>[39m r[33m.[39msuccess))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 351 |[39m     })[33m;[39m
     [90m 352 |[39m
     [90m 353 |[39m     test([32m'should handle mixed success/failure in batch'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:350:45)

  ‚óè Flag Evaluation Engine ‚Ä∫ batchEvaluateFlags ‚Ä∫ should handle mixed success/failure in batch

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 373 |[39m
     [90m 374 |[39m       expect(results)[33m.[39mtoHaveLength([35m2[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 375 |[39m       expect(results[[35m0[39m][33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 376 |[39m       expect(results[[35m1[39m][33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 377 |[39m       expect(results[[35m1[39m][33m.[39merror)[33m.[39mtoContain([32m'Horse with ID 2 not found'[39m)[33m;[39m
     [90m 378 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:375:34)

  ‚óè Flag Evaluation Engine ‚Ä∫ getEligibleHorses ‚Ä∫ should return eligible horses within age range

    expect(received).toEqual(expected) // deep equality

    - Expected  - 2
    + Received  + 2

      Array [
    -   1,
    -   2,
    +   95353,
    +   95354,
      ]

    [0m [90m 390 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getEligibleHorses()[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(result)[33m.[39mtoEqual([[35m1[39m[33m,[39m [35m2[39m])[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 393 |[39m       expect(mockPrisma[33m.[39mhorse[33m.[39mfindMany)[33m.[39mtoHaveBeenCalledWith({
     [90m 394 |[39m         where[33m:[39m {
     [90m 395 |[39m           dateOfBirth[33m:[39m {[0m

      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:392:22)

  ‚óè Flag Evaluation Engine ‚Ä∫ getEligibleHorses ‚Ä∫ should handle database errors in getEligibleHorses

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: [95353, 95354]

    [0m [90m 410 |[39m       mockPrisma[33m.[39mhorse[33m.[39mfindMany[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database error'[39m))[33m;[39m
     [90m 411 |[39m
    [31m[1m>[22m[39m[90m 412 |[39m       [36mawait[39m expect(getEligibleHorses())[33m.[39mrejects[33m.[39mtoThrow([32m'Database error'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 413 |[39m     })[33m;[39m
     [90m 414 |[39m   })[33m;[39m
     [90m 415 |[39m })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/unit/flagEvaluationEngine.test.mjs:412:13)

FAIL tests/trainingModel.test.mjs
  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ logTrainingSession ‚Ä∫ should log a training session with all required fields

    Database error: 
    Invalid `prisma.trainingLog.create()` invocation:


    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

    [0m [90m 47 |[39m   } [36mcatch[39m (error) {
     [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 50 |[39m   }
     [90m 51 |[39m }
     [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:86:22)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ logTrainingSession ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error: Database connection failed"
    Received message:   "Database error:¬∑
    Invalid `prisma.trainingLog.create()` invocation:¬∑¬∑
    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`"

        [0m [90m 47 |[39m   } [36mcatch[39m (error) {
         [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
        [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
         [90m    |[39m           [31m[1m^[22m[39m
         [90m 50 |[39m   }
         [90m 51 |[39m }
         [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:123:7)
      at Object.toThrow (node_modules/expect/build/index.js:218:22)
      at Object.<anonymous> (tests/trainingModel.test.mjs:123:86)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getLastTrainingDate ‚Ä∫ should return the most recent training date for horse and discipline

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"orderBy": {"trainedAt": "desc"}, "where": {"discipline": "Show Jumping", "horseId": 5}}

    Number of calls: 0

    [0m [90m 136 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getLastTrainingDate([35m5[39m[33m,[39m [32m'Show Jumping'[39m)[33m;[39m
     [90m 137 |[39m
    [31m[1m>[22m[39m[90m 138 |[39m       expect(mockTrainingLogFindFirst)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 139 |[39m         where[33m:[39m {
     [90m 140 |[39m           horseId[33m:[39m [35m5[39m[33m,[39m
     [90m 141 |[39m           discipline[33m:[39m [32m'Show Jumping'[39m[33m,[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:138:40)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getLastTrainingDate ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 173 |[39m       mockTrainingLogFindFirst[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 174 |[39m
    [31m[1m>[22m[39m[90m 175 |[39m       [36mawait[39m expect(getLastTrainingDate([35m5[39m[33m,[39m [32m'Racing'[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 176 |[39m     })[33m;[39m
     [90m 177 |[39m   })[33m;[39m
     [90m 178 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingModel.test.mjs:175:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getHorseAge ‚Ä∫ should return horse age from database

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"select": {"age": true}, "where": {"id": 10}}

    Number of calls: 0

    [0m [90m 186 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getHorseAge([35m10[39m)[33m;[39m
     [90m 187 |[39m
    [31m[1m>[22m[39m[90m 188 |[39m       expect(mockHorseFindUnique)[33m.[39mtoHaveBeenCalledWith({
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 189 |[39m         where[33m:[39m { id[33m:[39m [35m10[39m }[33m,[39m
     [90m 190 |[39m         select[33m:[39m { age[33m:[39m [36mtrue[39m }[33m,[39m
     [90m 191 |[39m       })[33m;[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:188:35)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ getHorseAge ‚Ä∫ should handle database errors gracefully

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: null

    [0m [90m 212 |[39m       mockHorseFindUnique[33m.[39mmockRejectedValue([36mnew[39m [33mError[39m([32m'Database connection failed'[39m))[33m;[39m
     [90m 213 |[39m
    [31m[1m>[22m[39m[90m 214 |[39m       [36mawait[39m expect(getHorseAge([35m5[39m))[33m.[39mrejects[33m.[39mtoThrow([32m'Database error: Database connection failed'[39m)[33m;[39m
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 215 |[39m     })[33m;[39m
     [90m 216 |[39m   })[33m;[39m
     [90m 217 |[39m[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (tests/trainingModel.test.mjs:214:13)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ Integration scenarios ‚Ä∫ should handle multiple training sessions for same horse different disciplines

    Database error: 
    Invalid `prisma.trainingLog.create()` invocation:


    Foreign key constraint violated on the constraint: `training_logs_horseId_fkey`

    [0m [90m 47 |[39m   } [36mcatch[39m (error) {
     [90m 48 |[39m     logger[33m.[39merror([32m`[trainingModel.logTrainingSession] Database error: ${error.message}`[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 49 |[39m     [36mthrow[39m [36mnew[39m [33mError[39m([32m`Database error: ${error.message}`[39m)[33m;[39m
     [90m    |[39m           [31m[1m^[22m[39m
     [90m 50 |[39m   }
     [90m 51 |[39m }
     [90m 52 |[39m[0m

      at logTrainingSession (models/trainingModel.mjs:49:11)
      at Object.<anonymous> (tests/trainingModel.test.mjs:228:7)

  ‚óè ÔøΩÔøΩÔ∏è UNIT: Training Model - Training Session Logging & Horse Data ‚Ä∫ Integration scenarios ‚Ä∫ should validate horse age before allowing training

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: null

    [0m [90m 237 |[39m
     [90m 238 |[39m       [36mconst[39m age [33m=[39m [36mawait[39m getHorseAge([35m5[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 239 |[39m       expect(age)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 240 |[39m
     [90m 241 |[39m       [90m// In the actual training logic, this would prevent training[39m
     [90m 242 |[39m       [90m// since horse is under 3 years old[39m[0m

      at Object.<anonymous> (tests/trainingModel.test.mjs:239:19)

FAIL models/userModel.test.mjs
  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should create a user successfully

    TypeError: mockPrisma.user.create.mockResolvedValue is not a function

    [0m [90m 122 |[39m       }[33m;[39m
     [90m 123 |[39m
    [31m[1m>[22m[39m[90m 124 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockResolvedValue(mockCreatedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 125 |[39m
     [90m 126 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m createUser(baseUserData)[33m;[39m
     [90m 127 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:124:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw error on unique constraint violation for username

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 154 |[39m     it([32m'should throw error on unique constraint violation for username'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 155 |[39m       [36mconst[39m dbError [33m=[39m { code[33m:[39m [32m'P2002'[39m[33m,[39m meta[33m:[39m { target[33m:[39m [[32m'username'[39m] } }[33m;[39m
    [31m[1m>[22m[39m[90m 156 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 157 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow([32m'Duplicate value for username.'[39m)[33m;[39m
     [90m 158 |[39m     })[33m;[39m
     [90m 159 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:156:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw error on unique constraint violation for email

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 160 |[39m     it([32m'should throw error on unique constraint violation for email'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 161 |[39m       [36mconst[39m dbError [33m=[39m { code[33m:[39m [32m'P2002'[39m[33m,[39m meta[33m:[39m { target[33m:[39m [[32m'email'[39m] } }[33m;[39m
    [31m[1m>[22m[39m[90m 162 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 163 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow([32m'Duplicate value for email.'[39m)[33m;[39m
     [90m 164 |[39m     })[33m;[39m
     [90m 165 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:162:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ createUser ‚Ä∫ should throw DatabaseError for other Prisma errors

    TypeError: mockPrisma.user.create.mockRejectedValue is not a function

    [0m [90m 166 |[39m     it([32m'should throw DatabaseError for other Prisma errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 167 |[39m       [36mconst[39m dbError [33m=[39m [36mnew[39m [33mError[39m([32m'Some other DB error'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 168 |[39m       mockPrisma[33m.[39muser[33m.[39mcreate[33m.[39mmockRejectedValue(dbError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 169 |[39m       [36mawait[39m expect(createUser(baseUserData))[33m.[39mrejects[33m.[39mtoThrow(
     [90m 170 |[39m         [36mnew[39m [33mDatabaseError[39m([32m'Create user failed: Some other DB error'[39m)[33m,[39m
     [90m 171 |[39m       )[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:168:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserById ‚Ä∫ should return user if found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 175 |[39m     it([32m'should return user if found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 176 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m[33m,[39m email[33m:[39m [32m'test@example.com'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 177 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 178 |[39m
     [90m 179 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserById([35m1[39m)[33m;[39m
     [90m 180 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({ where[33m:[39m { id[33m:[39m [35m1[39m } })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:177:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserById ‚Ä∫ should return null if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 183 |[39m
     [90m 184 |[39m     it([32m'should return null if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 185 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 186 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m getUserById([35m99[39m)[33m;[39m
     [90m 187 |[39m       expect(user)[33m.[39mtoBeNull()[33m;[39m
     [90m 188 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:185:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserByEmail ‚Ä∫ should return user by email (case insensitive)

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 197 |[39m     it([32m'should return user by email (case insensitive)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 198 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m email[33m:[39m [32m'test@example.com'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 199 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 200 |[39m
     [90m 201 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m getUserByEmail([32m'TEST@EXAMPLE.COM'[39m)[33m;[39m
     [90m 202 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:199:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserWithHorses ‚Ä∫ should return user with horses if found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 215 |[39m     it([32m'should return user with horses if found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 216 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m horses[33m:[39m [{ id[33m:[39m [35m101[39m[33m,[39m name[33m:[39m [32m'Spirit'[39m }] }[33m;[39m
    [31m[1m>[22m[39m[90m 217 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 218 |[39m
     [90m 219 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserWithHorses([35m1[39m)[33m;[39m
     [90m 220 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mfindUnique)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:217:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should update user successfully

    TypeError: mockPrisma.user.update.mockResolvedValue is not a function

    [0m [90m 235 |[39m     it([32m'should update user successfully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 236 |[39m       [36mconst[39m mockUpdatedUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m[33m,[39m [33m...[39mupdateData }[33m;[39m
    [31m[1m>[22m[39m[90m 237 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(mockUpdatedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 238 |[39m
     [90m 239 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m updateUser([35m1[39m[33m,[39m updateData)[33m;[39m
     [90m 240 |[39m       expect(mockPrisma[33m.[39muser[33m.[39mupdate)[33m.[39mtoHaveBeenCalledWith({[0m

      at Object.<anonymous> (models/userModel.test.mjs:237:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should handle Prisma update errors (user not found)

    TypeError: mockPrisma.user.update.mockRejectedValue is not a function

    [0m [90m 253 |[39m     it([32m'should handle Prisma update errors (user not found)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 254 |[39m       [36mconst[39m prismaError [33m=[39m { code[33m:[39m [32m'P2025'[39m[33m,[39m message[33m:[39m [32m'Record to update not found.'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 255 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 256 |[39m
     [90m 257 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m updateUser([35m1[39m[33m,[39m updateData)[33m;[39m
     [90m 258 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m [90m// Returns null when user not found[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:255:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ updateUser ‚Ä∫ should handle general update errors

    TypeError: mockPrisma.user.update.mockRejectedValue is not a function

    [0m [90m 261 |[39m     it([32m'should handle general update errors'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 262 |[39m       [36mconst[39m prismaError [33m=[39m { message[33m:[39m [32m'Some other update error'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 263 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 264 |[39m
     [90m 265 |[39m       [36mawait[39m expect(updateUser([35m1[39m[33m,[39m updateData))[33m.[39mrejects[33m.[39mtoThrow(
     [90m 266 |[39m         [36mnew[39m [33mDatabaseError[39m([32m'Update failed: Some other update error'[39m)[33m,[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:263:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ deleteUser ‚Ä∫ should delete user successfully

    TypeError: mockPrisma.user.delete.mockResolvedValue is not a function

    [0m [90m 272 |[39m     it([32m'should delete user successfully'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 273 |[39m       [36mconst[39m deletedUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m username[33m:[39m [32m'testuser'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 274 |[39m       mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m[33m.[39mmockResolvedValue(deletedUser)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 275 |[39m
     [90m 276 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m deleteUser([35m1[39m)[33m;[39m
     [90m 277 |[39m       expect(mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m)[33m.[39mtoHaveBeenCalledWith({ where[33m:[39m { id[33m:[39m [35m1[39m } })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:274:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ deleteUser ‚Ä∫ should handle Prisma delete errors (user not found)

    TypeError: mockPrisma.user.delete.mockRejectedValue is not a function

    [0m [90m 285 |[39m     it([32m'should handle Prisma delete errors (user not found)'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 286 |[39m       [36mconst[39m prismaError [33m=[39m { code[33m:[39m [32m'P2025'[39m[33m,[39m message[33m:[39m [32m'Record to delete not found.'[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 287 |[39m       mockPrisma[33m.[39muser[33m.[39m[36mdelete[39m[33m.[39mmockRejectedValue(prismaError)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 288 |[39m
     [90m 289 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m deleteUser([35m99[39m)[33m;[39m
     [90m 290 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m [90m// Returns null when user not found[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:287:30)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should add XP without leveling up

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 296 |[39m
     [90m 297 |[39m     it([32m'should add XP without leveling up'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 298 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(baseUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 299 |[39m       [36mconst[39m updatedUser [33m=[39m { [33m...[39mbaseUser[33m,[39m xp[33m:[39m [35m70[39m[33m,[39m level[33m:[39m [35m1[39m }[33m;[39m
     [90m 300 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(updatedUser)[33m;[39m
     [90m 301 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:298:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should add XP and level up

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 313 |[39m
     [90m 314 |[39m     it([32m'should add XP and level up'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 315 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(baseUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 316 |[39m       [36mconst[39m updatedUser [33m=[39m { [33m...[39mbaseUser[33m,[39m xp[33m:[39m [35m200[39m[33m,[39m level[33m:[39m [35m2[39m }[33m;[39m
     [90m 317 |[39m       mockPrisma[33m.[39muser[33m.[39mupdate[33m.[39mmockResolvedValue(updatedUser)[33m;[39m
     [90m 318 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:315:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error for invalid XP amount

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 337 |[39m         })[33m,[39m
     [90m 338 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 339 |[39m       expect(mockLogger[33m.[39merror)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 340 |[39m         expect[33m.[39mstringContaining([32m'Error: XP amount must be a positive number.'[39m)[33m,[39m
     [90m 341 |[39m       )[33m;[39m
     [90m 342 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:339:32)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error for invalid user ID

    expect(received).toHaveBeenCalledWith(...expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function anonymous]

    [0m [90m 350 |[39m         })[33m,[39m
     [90m 351 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 352 |[39m       expect(mockLogger[33m.[39merror)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mstringContaining([32m'Error: User ID is required.'[39m))[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 353 |[39m     })[33m;[39m
     [90m 354 |[39m
     [90m 355 |[39m     it([32m'should return error if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (models/userModel.test.mjs:352:32)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ addXpToUser ‚Ä∫ should return error if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 354 |[39m
     [90m 355 |[39m     it([32m'should return error if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 356 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 357 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m addXpToUser([35m99[39m[33m,[39m [35m20[39m)[33m;[39m
     [90m 358 |[39m       expect(result)[33m.[39mtoEqual(
     [90m 359 |[39m         expect[33m.[39mobjectContaining({[0m

      at Object.<anonymous> (models/userModel.test.mjs:356:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserProgress ‚Ä∫ should return user progress

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 369 |[39m     it([32m'should return user progress'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 370 |[39m       [36mconst[39m mockUser [33m=[39m { id[33m:[39m [35m1[39m[33m,[39m level[33m:[39m [35m1[39m[33m,[39m xp[33m:[39m [35m50[39m }[33m;[39m
    [31m[1m>[22m[39m[90m 371 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 372 |[39m
     [90m 373 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserProgress([35m1[39m)[33m;[39m
     [90m 374 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:371:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserProgress ‚Ä∫ should throw DatabaseError if user not found

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 389 |[39m
     [90m 390 |[39m     it([32m'should throw DatabaseError if user not found'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 391 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 392 |[39m       [36mawait[39m expect(getUserProgress([35m99[39m))[33m.[39mrejects[33m.[39mtoThrow([36mnew[39m [33mDatabaseError[39m([32m'Progress fetch failed: User not found.'[39m))[33m;[39m
     [90m 393 |[39m     })[33m;[39m
     [90m 394 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:391:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should return user stats with horses

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 409 |[39m       }[33m;[39m
     [90m 410 |[39m
    [31m[1m>[22m[39m[90m 411 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 412 |[39m
     [90m 413 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m1[39m)[33m;[39m
     [90m 414 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:411:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should handle user with no horses

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 442 |[39m       }[33m;[39m
     [90m 443 |[39m
    [31m[1m>[22m[39m[90m 444 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 445 |[39m
     [90m 446 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m2[39m)[33m;[39m
     [90m 447 |[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:444:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should handle user with null horses array

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 468 |[39m       }[33m;[39m
     [90m 469 |[39m
    [31m[1m>[22m[39m[90m 470 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue(mockUser)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 471 |[39m
     [90m 472 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m3[39m)[33m;[39m
     [90m 473 |[39m       expect(result)[33m.[39mtoEqual([0m

      at Object.<anonymous> (models/userModel.test.mjs:470:34)

  ‚óè ÔøΩÔøΩ UNIT: User Model - Database Operations & Business Logic ‚Ä∫ getUserStats ‚Ä∫ should return null for non-existent user

    TypeError: mockPrisma.user.findUnique.mockResolvedValue is not a function

    [0m [90m 480 |[39m
     [90m 481 |[39m     it([32m'should return null for non-existent user'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 482 |[39m       mockPrisma[33m.[39muser[33m.[39mfindUnique[33m.[39mmockResolvedValue([36mnull[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 483 |[39m
     [90m 484 |[39m       [36mconst[39m result [33m=[39m [36mawait[39m getUserStats([35m999[39m)[33m;[39m
     [90m 485 |[39m       expect(result)[33m.[39mtoBeNull()[33m;[39m[0m

      at Object.<anonymous> (models/userModel.test.mjs:482:34)


Test Suites: 12 failed, 1 skipped, 200 passed, 212 of 213 total
Tests:       139 failed, 18 skipped, 3225 passed, 3382 total
Snapshots:   0 total
Time:        304.304 s
Ran all test suites.
üßπ Running global teardown...
[Teardown] Disconnecting Prisma instances...
[Teardown] ‚úÖ Prisma instances disconnected
‚úÖ Global teardown completed successfully

Jest has detected the following 2 open handles potentially keeping Jest from exiting:

  ‚óè  TCPSERVERWRAP

    [0m [90m 237 |[39m     test([32m'POST /api/breeding/breeding-recommendations should generate comprehensive recommendations'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 238 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 239 |[39m         [33m.[39mpost([32m'/api/breeding/breeding-recommendations'[39m)
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 240 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 241 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 242 |[39m         [33m.[39msend({[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:239:10)


  ‚óè  TCPSERVERWRAP

    [0m [90m 294 |[39m     test([32m'POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 295 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 296 |[39m         [33m.[39mpost([32m'/api/genetics/inbreeding-analysis'[39m)
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 297 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 298 |[39m         [33m.[39m[36mset[39m([32m'x-test-skip-csrf'[39m[33m,[39m [32m'true'[39m)
     [90m 299 |[39m         [33m.[39msend({[0m

      at Test.serverAddress (node_modules/supertest/lib/test.js:63:35)
      at new Test (node_modules/supertest/lib/test.js:49:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:39:18)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:296:10)

