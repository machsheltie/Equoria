# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
# SECURITY: Use strong passwords (32+ characters, mix of letters/numbers/symbols)
# Generate with: openssl rand -base64 32
DATABASE_URL="postgresql://postgres:REPLACE_WITH_STRONG_PASSWORD@localhost:5432/equoria"

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis is used for two purposes:
# 1. Distributed rate limiting (production-ready)
# 2. Query caching (implemented but not enabled - awaiting performance testing)
#
# ARCHITECTURE:
# - Rate limiting uses 'redis' package via REDIS_URL
# - Cache helper uses 'ioredis' package via REDIS_HOST/PORT/DB
# - Both clients close gracefully in server.mjs shutdown handler
#
# LOCAL DEVELOPMENT:
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_TLS=false
#
# PRODUCTION EXAMPLES:
# AWS ElastiCache:
# REDIS_URL=rediss://your-elasticache-endpoint.cache.amazonaws.com:6380
# REDIS_PASSWORD=your-redis-password
# REDIS_TLS=true
#
# Redis Cloud / Upstash:
# REDIS_URL=redis://default:your-password@your-host:6379
# REDIS_PASSWORD=your-password
# REDIS_TLS=false
#
# Railway Redis:
# REDIS_URL=redis://default:password@host:port
#
# NOTE: If both REDIS_URL and REDIS_HOST are set, cacheHelper uses REDIS_HOST
# RECOMMENDATION: Use REDIS_URL for consistency across both clients

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# JWT Authentication
# SECURITY: REQUIRED - minimum 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# Example: 84a261776495d2d6284513e6c24970bd424d9a4982d2c634c63a4e9d0cd49bb3
JWT_SECRET=REPLACE_WITH_STRONG_RANDOM_SECRET_MIN_32_CHARS

# Cookie Configuration (CWE-384, CWE-613)
# COOKIE_DOMAIN: Domain for cookie sharing across subdomains
# - Leave empty (default) for same-domain cookies (app and API on same domain)
# - Set to '.yourdomain.com' for subdomain sharing (app.yourdomain.com, api.yourdomain.com)
# Examples:
# - Same domain: COOKIE_DOMAIN= (empty, default)
# - Subdomain sharing: COOKIE_DOMAIN=.equoria.com
# SECURITY: Never set to top-level domain (.com) - security risk
COOKIE_DOMAIN=

# Optional: Logging Configuration
LOG_LEVEL=info

# Optional: Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Optional: Security Configuration
BCRYPT_SALT_ROUNDS=12
JWT_ACCESS_TOKEN_EXPIRY=24h
JWT_REFRESH_TOKEN_EXPIRY=7d

# Session Management (CWE-384, CWE-613)
SESSION_TIMEOUT_MS=900000
# Default: 900000 (15 minutes of inactivity)
MAX_CONCURRENT_SESSIONS=5
# Default: 5 (maximum active sessions per user)

# API Key for Mobile App (CWE-942: CORS Bypass Prevention)
# SECURITY: REQUIRED for production - minimum 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Example: 7a8f3e4c2b1d9f6e5a4c3b2d1f0e9a8b7c6d5e4f3a2b1c0d9e8f7a6b5c4d3e2f
API_KEY=REPLACE_WITH_STRONG_RANDOM_API_KEY_MIN_32_CHARS

# ============================================
# Feature Flags Configuration
# ============================================
# Naming Convention: FF_<SCOPE>_<FEATURE_NAME>
# Types: Boolean (true/false), Percentage (0-100), String (variant)

# Authentication Flags
FF_AUTH_PASSWORDLESS_LOGIN=false
FF_AUTH_MFA_ENABLED=false
FF_AUTH_SOCIAL_LOGIN=false

# Breeding System Flags
FF_BREEDING_EPIGENETICS=true
FF_BREEDING_NEW_UI=0
FF_BREEDING_RARE_TRAITS=true

# Competition System Flags
FF_COMPETITION_TEAM_EVENTS=false
FF_COMPETITION_LIVE_SCORING=false
FF_COMPETITION_SEASONAL=false

# Training System Flags
FF_TRAINING_NEW_ALGORITHM=0
FF_TRAINING_MINI_GAMES=false

# Groom System Flags
FF_GROOM_SPECIALIZATION=true
FF_GROOM_LEVELING=true

# UI/UX Flags
FF_UI_DARK_MODE=false
FF_UI_ANIMATIONS=true
FF_UI_NEW_DASHBOARD=0

# Marketplace Flags
FF_MARKETPLACE_ENABLED=false
FF_MARKETPLACE_AUCTIONS=false

# Beta/Labs Flags
FF_BETA_FEATURES=
FF_LABS_ENABLED=true

# Performance/Debug Flags
FF_DEBUG_LOGGING=false
FF_PERFORMANCE_TRACING=false

# A/B Test Flags
FF_AB_LANDING_PAGE=control
FF_AB_ONBOARDING_FLOW=control
