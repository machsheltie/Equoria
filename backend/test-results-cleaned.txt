
> equoria-backend@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js

(node:27824) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS tests/trainingController.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.canTrain] Horse 999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (4 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Training failed: Failed to log training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User xp-test-player, Amount: 5, Reason: Trained horse XP Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: XP system unavailable

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.getTrainingStatus] Error getting training status: Training eligibility check failed: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Racing (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Getting training status for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainingStatus] Training status retrieved for horse 1: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] User test-player-123 has no horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user non-existent-player

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.getTrainableHorses] User non-existent-player not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.getTrainableHorses] Error checking training eligibility for horse 1: Database error for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Found 1 trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.getTrainableHorses] Error getting trainable horses: User ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.getTrainableHorses] Getting trainable horses for user test-player-123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.getTrainableHorses] Error getting trainable horses: Player database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 still in cooldown for any training (5 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 5, Reason: Trained horse Nova in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.canTrain] Error checking training eligibility: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainRouteHandler] Training request for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Attempting to train horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Checking training eligibility for horse 1 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.canTrain] Horse 1 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Horse 1 has traits: intelligent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Trait XP modifier applied: 25.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Stat gain chance modified by traits: 30.0%

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [xpLogModel.logXpEvent] Logging XP event: User test-player-123, Amount: 6, Reason: Trained horse Intelligent Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] error: [xpLogModel.logXpEvent] Error logging XP event: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] error: [trainingController.trainHorse] Failed to award training XP: 
      Invalid `prisma.xpEvent.create()` invocation:
      
      
      Foreign key constraint violated on the constraint: `xp_events_userId_fkey`

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Training cooldown reduced by trait effects to 6 days

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [trainingController.trainHorse] Successfully trained horse 1 in Dressage (Log ID: 1, Score +6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/atBirthTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:24] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:24] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/resultModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully created new result for horse 3 in show 2 with score 65.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] error: [resultModel.saveResult] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:350:61)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully updated placeholder result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByHorse] Found 2 results for horse 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByHorse] Found 0 results for horse 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] error: [resultModel.getResultsByHorse] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:551:63)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByShow] Found 2 results for show 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByShow] Found 0 results for show 999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] error: [resultModel.getResultsByShow] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:623:63)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultById] Successfully found result: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] error: [resultModel.getResultById] Database error: Error: Database connection failed
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\resultModel.test.mjs:681:65)
          at Promise.then.completed (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\utils.js:231:10)
          at _callCircusTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:316:40)
          at _runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:252:3)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:126:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at _runTestsForDescribeBlock (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:121:9)
          at run (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\run.js:71:3)
          at runAndTransformResultsToJestFormat (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
          at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
          at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
          at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34) {
        [stack]: [Getter/Setter],
        [message]: 'Database connection failed'
      }

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.saveResult] Successfully created new result for horse 1 in show 2 with score 85.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByUser] Retrieved 1 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByUser] Retrieved 0 results for user user123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] error: [resultModel.getResultsByUser] Error getting results for user user123: Database error

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByHorse] Found 0 results for horse 123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [resultModel.getResultsByShow] Found 0 results for show 456

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/groomHiringWorkflow.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:25] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:25] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.error
      Error testing speciality foalCare: JestAssertionError: expect(jest.fn()).toHaveBeenCalledWith(...expected)
      
      Expected: 201
      Received: 400
      
      Number of calls: 1
          at Object.<anonymous> (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\tests\groomHiringWorkflow.test.mjs:347:30) {
        matcherResult: {
          message: 'expect(jest.fn()).toHaveBeenCalledWith(...expected)\n' +
            '\n' +
            'Expected: 201\n' +
            'Received: 400\n' +
            '\n' +
            'Number of calls: 1',
          pass: false
        }
      }

    [0m [90m 355 |[39m           )[33m;[39m
     [90m 356 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 357 |[39m           console[33m.[39merror([32m`Error testing speciality ${speciality}:`[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 358 |[39m         }
     [90m 359 |[39m       }
     [90m 360 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/groomHiringWorkflow.test.mjs:357:19)

PASS tests/competitionScore.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:26] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 5.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 216 (base: 210, trait: +0, luck: 5.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.8%, adjustment: 10.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 220 (base: 210, trait: +0, luck: 10.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 12.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 222 (base: 210, trait: +0, luck: 12.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 210

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.4%, adjustment: 17.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 228 (base: 210, trait: +0, luck: 17.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.8%, adjustment: 20.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 321 (base: 300, trait: +0, luck: 20.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.9%, adjustment: 2.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 303 (base: 300, trait: +0, luck: 2.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.5%, adjustment: 19.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 19.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.8%, adjustment: -14.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 286 (base: 300, trait: +0, luck: -14.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.5%, adjustment: -4.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 296 (base: 300, trait: +0, luck: -4.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.6%, adjustment: -1.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 298 (base: 300, trait: +0, luck: -1.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.0%, adjustment: -15.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -15.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.6%, adjustment: -4.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 295 (base: 300, trait: +0, luck: -4.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.1%, adjustment: 18.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 18.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.5%, adjustment: 4.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 4.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.9%, adjustment: -26.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -26.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.9%, adjustment: -5.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -5.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.4%, adjustment: 19.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 19.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 8.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 8.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.1%, adjustment: -3.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 297 (base: 300, trait: +0, luck: -3.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.3%, adjustment: 16.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 316 (base: 300, trait: +0, luck: 16.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -4.9%, adjustment: -14.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 285 (base: 300, trait: +0, luck: -14.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.5%, adjustment: 4.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 4.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -20.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -20.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.4%, adjustment: -22.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -22.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.5%, adjustment: 4.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 304 (base: 300, trait: +0, luck: 4.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 7.9%, adjustment: 23.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 324 (base: 300, trait: +0, luck: 23.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.5%, adjustment: 13.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 313 (base: 300, trait: +0, luck: 13.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.1%, adjustment: 24.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 324 (base: 300, trait: +0, luck: 24.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.4%, adjustment: 1.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 301 (base: 300, trait: +0, luck: 1.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -20.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -20.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.1%, adjustment: 9.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 9.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 8.6%, adjustment: 25.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 326 (base: 300, trait: +0, luck: 25.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.0%, adjustment: -18.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 282 (base: 300, trait: +0, luck: -18.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.1%, adjustment: 18.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 318 (base: 300, trait: +0, luck: 18.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.1%, adjustment: 6.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 306 (base: 300, trait: +0, luck: 6.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.9%, adjustment: -11.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 288 (base: 300, trait: +0, luck: -11.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.9%, adjustment: -20.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 279 (base: 300, trait: +0, luck: -20.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.7%, adjustment: -11.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -11.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.9%, adjustment: -5.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 294 (base: 300, trait: +0, luck: -5.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.9%, adjustment: 14.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 315 (base: 300, trait: +0, luck: 14.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.6%, adjustment: -25.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -25.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.7%, adjustment: 5.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 305 (base: 300, trait: +0, luck: 5.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.4%, adjustment: -1.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 299 (base: 300, trait: +0, luck: -1.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.9%, adjustment: 8.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 309 (base: 300, trait: +0, luck: 8.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 6.2%, adjustment: 18.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 319 (base: 300, trait: +0, luck: 18.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -10.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 289 (base: 300, trait: +0, luck: -10.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -7.3%, adjustment: -22.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 278 (base: 300, trait: +0, luck: -22.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -8.6%, adjustment: -25.9

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 274 (base: 300, trait: +0, luck: -25.9)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -1.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 298 (base: 300, trait: +0, luck: -1.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 2.7%, adjustment: 8.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 308 (base: 300, trait: +0, luck: 8.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 80

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.3%, adjustment: -1.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 79 (base: 80, trait: +0, luck: -1.1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.3%, adjustment: 4.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 134 (base: 130, trait: +0, luck: 4.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 4.2%, adjustment: 5.4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 135 (base: 130, trait: +0, luck: 5.4)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 5.9%, adjustment: 7.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 138 (base: 130, trait: +0, luck: 7.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 130

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -0.5%, adjustment: -0.6

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 129 (base: 130, trait: +0, luck: -0.6)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse undefined: Horse object is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] error: [calculateCompetitionScore] Error calculating score for horse Test Horse: Event type is required and must be a string

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:26] warn: [calculateCompetitionScore] Unknown event type: Unknown Event, using default calculation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Unknown Event: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -6.6%, adjustment: -11.8

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 168 (base: 180, trait: +0, luck: -11.8)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -5.7%, adjustment: -10.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 170 (base: 180, trait: +0, luck: -10.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:26] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 178 (base: 180, trait: +5, luck: -6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.7

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 192 (base: 180, trait: +5, luck: 6.7)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -3.6%, adjustment: -6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 174 (base: 180, trait: +0, luck: -6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 182 (base: 180, trait: +5, luck: -3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 188 (base: 180, trait: +5, luck: 3.3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 3.6%, adjustment: 6.5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 186 (base: 180, trait: +0, luck: 6.5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Luck modifier: 1.8%, adjustment: 3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse No Modifiers Horse: Final score: 183 (base: 180, trait: +0, luck: 3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -1.8%, adjustment: -3.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 177 (base: 180, trait: +0, luck: -3.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: -9.0%, adjustment: -27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 273 (base: 300, trait: +0, luck: -27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 300

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 9.0%, adjustment: 27.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 327 (base: 300, trait: +0, luck: 27.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_racing (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_show_jumping (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Show Jumping: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_dressage (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Dressage: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Discipline affinity bonus applied for discipline_affinity_cross_country (+5 points)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 185 (base: 180, trait: +5, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Cross Country: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Base score for Racing: 180

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Luck modifier: 0.0%, adjustment: 0.0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:27] info: [calculateCompetitionScore] Horse Test Horse: Final score: 180 (base: 180, trait: +0, luck: 0.0)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/foalModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/training.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:28] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:28] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:28] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:29] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:29] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11424 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11424 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11424 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11424

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11424 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11424 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11423 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11423 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11423 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11423

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11423 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11423 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11423

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11423 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Test Adult Horse (ID: 11423)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11423 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11423 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 869

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11423 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11423 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11423: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11423

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Test Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 644, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11423 in Dressage (Log ID: 869, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11426 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11426 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11426 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11426

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11426 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11426 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11426

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11426 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Score Test Horse (ID: 11426)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11426 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11426 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 870

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateHorseStat] Updating intelligence by 3 for horse 11426

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateHorseStat] Updated intelligence for horse 11426: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Stat gain: intelligence +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11426 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11426 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11426: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11426

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Score Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 645, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11426 in Show Jumping (Log ID: 870, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11427 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11427 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11427 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11427

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11427 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11427 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11427

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11427 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Accumulation Test Horse 1 (ID: 11427)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11427 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11427 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 871

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 11427 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 11427 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 11427: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 11427

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Accumulation Test Horse 1 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 646, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11427 in Cross Country (Log ID: 871, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11425 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11425 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11425 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11425

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11425 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11425 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11425: Fri Nov 21 2025 17:58:29 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11425 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11429 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11429 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11429 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11429 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11429 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11429: Thu Nov 13 2025 17:58:30 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11429 is eligible to train in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Old Trained Horse (ID: 11429)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11429 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11429 in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 873

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateHorseStat] Updating endurance by 2 for horse 11429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateHorseStat] Updated endurance for horse 11429: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Stat gain: endurance +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Endurance score for horse 11429 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Endurance score for horse 11429 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Endurance score for horse 11429: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Endurance score for horse 11429

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Old Trained Horse in Endurance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 647, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11429 in Endurance (Log ID: 873, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11430 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11430 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11430 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11430

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11430 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11430 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11430

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11430 is eligible to train in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: XP Test Horse (ID: 11430)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11430 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11430 in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 874

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Trail score for horse 11430 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Trail score for horse 11430 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Trail score for horse 11430: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Trail score for horse 11430

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse XP Test Horse in Trail

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 648, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11430 in Trail (Log ID: 874, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11431 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11431 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11431 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11431

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11431 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11431 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11431

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11431 is eligible to train in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Log Test Horse (ID: 11431)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11431 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11431 in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 875

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Reining score for horse 11431 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Reining score for horse 11431 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Reining score for horse 11431: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Reining score for horse 11431

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Log Test Horse in Reining

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 649, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11431 in Reining (Log ID: 875, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] warn: [trainingRoutes] Validation errors: [{"type":"field","value":"invalid","msg":"Horse ID must be a positive integer","path":"horseId","location":"body"},{"type":"field","value":"","msg":"Discipline is required","path":"discipline","location":"body"},{"type":"field","value":"","msg":"Discipline must be between 1 and 50 characters","path":"discipline","location":"body"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainRouteHandler] Training request for horse 11432 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Attempting to train horse 11432 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Checking training eligibility for horse 11432 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Getting age for horse 11432

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getHorseAge] Horse 11432 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11432 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11432

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.canTrain] Horse 11432 is eligible to train in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.getHorseById] Successfully found horse: Date Test Horse (ID: 11432)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Horse 11432 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Logging training session for horse 11432 in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 876

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Incrementing Driving score for horse 11432 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Updating Driving score for horse 11432 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.updateDisciplineScore] Successfully updated Driving score for horse 11432: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [horseModel.incrementDisciplineScore] Successfully incremented Driving score for horse 11432

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Logging XP event: User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5, Reason: Trained horse Date Test Horse in Driving

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 650, User f9bac3ef-3d0e-4be0-afc6-277ede5ace0e, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Awarded 5 XP to user f9bac3ef-3d0e-4be0-afc6-277ede5ace0e for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [trainingController.trainHorse] Successfully trained horse 11432 in Driving (Log ID: 876, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/applyEpigeneticTraitsAtBirthTask8.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:30] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:30] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/trainingController-business-logic.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11433 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11433 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11433 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11434

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11434 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11434 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11435 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11435 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.canTrain] Error checking training eligibility: Horse ID must be a positive integer

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.canTrain] Error checking training eligibility: Horse ID is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Getting training status for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11438 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11438 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11438 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] No training records found for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11438: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11438 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11438 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.getHorseById] Successfully found horse: Workflow Test Horse (ID: 11438)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Horse 11438 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Logging training session for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 878

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11438 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11438 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11438: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Logging XP event: User f7f65b4c-174f-4e29-bea9-7a1b289d6a1d, Amount: 5, Reason: Trained horse Workflow Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 651, User f7f65b4c-174f-4e29-bea9-7a1b289d6a1d, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Awarded 5 XP to user f7f65b4c-174f-4e29-bea9-7a1b289d6a1d for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Successfully trained horse 11438 in Racing (Log ID: 878, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Getting training status for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11438 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11438: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11438 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11438 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11438 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Last training date for horse 11438 in Racing: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11438: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11438: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11434

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11434 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11434 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11435 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11435 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11433 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Getting training status for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11433 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11433 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11433 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11433 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] No training records found for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11433 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11433: eligible=true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Getting training status for horse 11435 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11435 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11435 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11435 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11435 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 11435 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Last training date for horse 11435 in Racing: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 11435: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Getting training status for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] Checking last training date for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getLastTrainingDate] No training records found for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 99999 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainingStatus] Training status retrieved for horse 99999: eligible=false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user f7f65b4c-174f-4e29-bea9-7a1b289d6a1d1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.getTrainableHorses] User f7f65b4c-174f-4e29-bea9-7a1b289d6a1d1 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user f7f65b4c-174f-4e29-bea9-7a1b289d6a1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11436 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11436

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11437 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11437

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11438 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11438: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainableHorses] Found 2 trainable horses for user f7f65b4c-174f-4e29-bea9-7a1b289d6a1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11433 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11433 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11433 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.getHorseById] Successfully found horse: Controller Adult Horse (ID: 11433)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Horse 11433 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Logging training session for horse 11433 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 879

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11433 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11433 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11433: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11433

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Logging XP event: User c75e3e33-33e5-4627-a2de-24270ff8e055, Amount: 5, Reason: Trained horse Controller Adult Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 652, User c75e3e33-33e5-4627-a2de-24270ff8e055, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Awarded 5 XP to user c75e3e33-33e5-4627-a2de-24270ff8e055 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Successfully trained horse 11433 in Dressage (Log ID: 879, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainableHorses] Getting trainable horses for user c75e3e33-33e5-4627-a2de-24270ff8e055

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11433 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11433: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.getTrainableHorses] Found 0 trainable horses for user c75e3e33-33e5-4627-a2de-24270ff8e055

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainRouteHandler] Training request for horse 11439 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11439 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11439 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11439

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11439 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11439 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11439

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11439 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.getHorseById] Successfully found horse: Fresh Route Test Horse (ID: 11439)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Horse 11439 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Logging training session for horse 11439 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 880

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateHorseStat] Updating precision by 3 for horse 11439

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateHorseStat] Updated precision for horse 11439: 0 -> 3 (+3)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Stat gain: precision +3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11439 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11439 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11439: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11439

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Logging XP event: User c75e3e33-33e5-4627-a2de-24270ff8e055, Amount: 5, Reason: Trained horse Fresh Route Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 653, User c75e3e33-33e5-4627-a2de-24270ff8e055, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Awarded 5 XP to user c75e3e33-33e5-4627-a2de-24270ff8e055 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Successfully trained horse 11439 in Show Jumping (Log ID: 880, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainRouteHandler] Training request for horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11434 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11434

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11434 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11434 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainRouteHandler] Training request for horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 11435 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 11435

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 11435 is 5 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11435 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11435: Fri Nov 21 2025 17:58:31 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Horse 11435 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainRouteHandler] Training request for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.canTrain] Checking training eligibility for horse 99999 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Getting age for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingModel.getHorseAge] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.canTrain] Horse 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] warn: [trainingController.trainHorse] Training rejected: Horse not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainRouteHandler] Training request for horse 11433 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [trainingController.trainHorse] Attempting to train horse 11433 in

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.canTrain] Error checking training eligibility: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.trainHorse] Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:31] error: [trainingController.trainRouteHandler] Error: Training failed: Training eligibility check failed: Discipline is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

FAIL __tests__/integration/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:31] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:31] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:32] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:32] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:32] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:32] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:32] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:33] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:34] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [authController.refreshToken] Token rotation failed:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] error: [authController.refreshToken] Error refreshing token: Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: Error Invalid refresh token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/logout

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [auth] Missing token for POST /logout from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/logout - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [authController.refreshToken] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/cleanup-tokens

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: 404 - Route not found: POST /api/auth/cleanup-tokens from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/cleanup-tokens - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] warn: [authController.refreshToken] Token family invalidated due to reuse detection

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] error: [authController.refreshToken] Error refreshing token: Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: Error Token reuse detected - please login again

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:35] error: [authController.refreshToken] Error refreshing token: Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: [POST] /api/auth/refresh-token - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] error: Error Refresh token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:35] info: [POST] /api/auth/refresh-token - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Basic Token Rotation ‚Ä∫ should_invalidate_old_refresh_token_after_rotation

    expect(received).toContain(expected) // indexOf

    Expected substring: "Invalid refresh token"
    Received string:    "Token reuse detected - please login again"

    [0m [90m 140 |[39m
     [90m 141 |[39m       expect(replayResponse[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 142 |[39m       expect(replayResponse[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Invalid refresh token'[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 143 |[39m     })[33m;[39m
     [90m 144 |[39m
     [90m 145 |[39m     it([32m'should_track_token_families_in_database'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:142:43)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_handle_concurrent_refresh_requests_gracefully

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 5
    Received array:  [[Object], [Object], [Object], [Object], [Object]]

    [0m [90m 352 |[39m       [36mconst[39m failureResponses [33m=[39m responses[33m.[39mfilter(r [33m=>[39m r[33m.[39mstatus [33m===[39m [35m401[39m)[33m;[39m
     [90m 353 |[39m
    [31m[1m>[22m[39m[90m 354 |[39m       expect(successResponses)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 355 |[39m       expect(failureResponses)[33m.[39mtoHaveLength([35m4[39m)[33m;[39m
     [90m 356 |[39m
     [90m 357 |[39m       [90m// All failures should indicate token was already used[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:354:32)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Concurrent Token Usage ‚Ä∫ should_prevent_race_conditions_in_token_rotation

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 3

    [0m [90m 389 |[39m       [90m// Verify only one succeeded[39m
     [90m 390 |[39m       [36mconst[39m successCount [33m=[39m statuses[33m.[39mfilter(s [33m=>[39m s [33m===[39m [35m200[39m)[33m.[39mlength[33m;[39m
    [31m[1m>[22m[39m[90m 391 |[39m       expect(successCount)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 392 |[39m     })[33m;[39m
     [90m 393 |[39m   })[33m;[39m
     [90m 394 |[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:391:28)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Token Expiration and Cleanup ‚Ä∫ should_reject_expired_refresh_tokens

    expect(received).toContain(expected) // indexOf

    Expected substring: "expired"
    Received string:    "Invalid refresh token"

    [0m [90m 504 |[39m
     [90m 505 |[39m       expect(expiredResponse[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(expiredResponse[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'expired'[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 507 |[39m     })[33m;[39m
     [90m 508 |[39m
     [90m 509 |[39m     it([32m'should_clean_up_invalidated_token_families'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:506:44)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Token Expiration and Cleanup ‚Ä∫ should_clean_up_invalidated_token_families

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 550 |[39m         [33m.[39msend({ olderThanDays[33m:[39m [35m0[39m })[33m;[39m [90m// Clean immediately for test[39m
     [90m 551 |[39m
    [31m[1m>[22m[39m[90m 552 |[39m       expect(cleanupResponse[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 553 |[39m
     [90m 554 |[39m       [90m// Verify invalidated tokens are removed[39m
     [90m 555 |[39m       [36mconst[39m remainingTokens [33m=[39m [36mawait[39m prisma[33m.[39mrefreshToken[33m.[39mfindMany({[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:552:38)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_enforce_unique_constraints_on_token_families

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"createdAt": 2025-11-21T22:58:35.557Z, "expiresAt": 2025-11-22T22:58:35.553Z, "familyId": "test-family-1763765915553", "id": 13208, "isActive": true, "isInvalidated": false, "lastActivityAt": null, "token": "test-token-2", "updatedAt": 2025-11-21T22:58:35.557Z, "userId": "730b8f39-d3ce-4bfe-a687-120adc8285e9"}

    [0m [90m 583 |[39m
     [90m 584 |[39m       [90m// Second token with same family should fail if constraint exists[39m
    [31m[1m>[22m[39m[90m 585 |[39m       [36mawait[39m expect(
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 586 |[39m         prisma[33m.[39mrefreshToken[33m.[39mcreate({
     [90m 587 |[39m           data[33m:[39m { [33m...[39mtokenData[33m,[39m token[33m:[39m [32m'test-token-2'[39m }
     [90m 588 |[39m         })[0m

      at expect (node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:585:13)

  ‚óè Token Rotation and Reuse Detection System ‚Ä∫ Database Constraints and Security ‚Ä∫ should_validate_token_structure_and_signatures

    expect(received).toBe(expected) // Object.is equality

    Expected: 401
    Received: 400

    [0m [90m 605 |[39m           [33m.[39m[36mset[39m([32m'Cookie'[39m[33m,[39m [32m`refreshToken=${token}`[39m)[33m;[39m
     [90m 606 |[39m
    [31m[1m>[22m[39m[90m 607 |[39m         expect(response[33m.[39mstatus)[33m.[39mtoBe([35m401[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 608 |[39m       }
     [90m 609 |[39m     })[33m;[39m
     [90m 610 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (__tests__/integration/token-rotation.test.mjs:607:33)

PASS tests/groomSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/services/traitInteractionMatrix.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS __tests__/integration/crossSystemValidation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:36] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:37] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/horses/foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /foals

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.createFoal] Creating foal: Trait Test Foal with sire 11445 and dam 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 0)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.all (index 1)

    console.log
      [2025-11-21 17:58:37] info: [horseController.gatherLineage] Gathering lineage for sire 11445 and dam 11445, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.gatherLineage] Gathered 1 ancestors

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.assessFeedQualityFromMare] Mare Cross System Test Horse feed quality: 75 (health: Good, bond: 50)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.createFoal] Mare stress: 50, Feed quality: 75, Lineage count: 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [applyEpigeneticTraitsAtBirth] Starting trait assignment at birth

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 75

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [applyEpigeneticTraitsAtBirth] Final traits assigned: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.createFoal] Applied epigenetic traits: {"positive":[],"negative":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.createHorse] Applying at-birth traits for newborn with sire 11445 and dam 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Applying at-birth traits for sire 11445 and dam 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.assessFeedQuality] Mare 11445 feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Mare stress: 50, Feed quality: 70

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.analyzeLineage] Analyzing lineage for sire 11445 and dam 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.analyzeLineage] Found 0 ancestors, 0 competitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.detectInbreeding] Checking for inbreeding between sire 11445 and dam 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.detectInbreeding] Inbreeding not detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Breeding conditions: {"mareStress":50,"feedQuality":70,"disciplineSpecialization":false,"inbreedingDetected":false,"noInbreeding":true}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [atBirthTraits.applyEpigeneticTraitsAtBirth] Final traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.createHorse] Applied at-birth traits: {"positive":[],"negative":[],"hidden":[]}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.createHorse] Breeding analysis - Lineage specialization: false, Inbreeding: false

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.createHorse] Successfully created horse: Trait Test Foal (ID: 11446)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseController.createFoal] Successfully created foal: Trait Test Foal (ID: 11446)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/horses/foals - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/foals/11446/enrichment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [foalRoutes] POST /api/foals/11446/enrichment - Day 1, Activity: Feeding Assistance

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [foalModel.completeEnrichmentActivity] Processing enrichment activity "Feeding Assistance" for foal 11446 on day 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [foalModel.completeEnrichmentActivity] Activity completed successfully. Bond: 0 -> 4, Stress: 0 -> 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/foals/11446/enrichment - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/traits/discover/11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitController.discoverTraits] Triggering trait discovery for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/traits/discover/11446 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/traits/discovery-status/11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [traitController.getDiscoveryStatus] Getting discovery status for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/traits/discovery-status/11446 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/milestones/evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /evaluate-milestone

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedMilestoneController.evaluateMilestone] Evaluating milestone imprinting for horse 11446

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Starting evaluation for horse 11446, milestone imprinting

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedMilestoneEvaluationSystem] No personality effects applied - missing groom personality or horse temperament

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedMilestoneEvaluationSystem.evaluateEnhancedMilestone] Completed evaluation for horse 11446: withdrawn (score: -5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/milestones/evaluate-milestone - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /horses/11445/environmental-analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: Environmental analysis generated for horse 11445 by user ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/environmental-analysis - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /horses/11445/trait-matrix

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: Trait interaction matrix generated for horse 11445 by user ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/trait-matrix - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.trainRouteHandler] Training request for horse 11445 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.trainHorse] Attempting to train horse 11445 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.canTrain] Checking training eligibility for horse 11445 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.getHorseAge] Getting age for horse 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.getHorseAge] Horse 11445 is 28 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11445 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.canTrain] Horse 11445 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.trainHorse] Horse 11445 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.logTrainingSession] Logging training session for horse 11445 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 881

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11445 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11445 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11445: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [xpLogModel.logXpEvent] Logging XP event: User ee795b8c-8442-41b4-a4c4-1a90c840a438, Amount: 5, Reason: Trained horse Cross System Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 654, User ee795b8c-8442-41b4-a4c4-1a90c840a438, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.trainHorse] Awarded 5 XP to user ee795b8c-8442-41b4-a4c4-1a90c840a438 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [trainingController.trainHorse] Successfully trained horse 11445 in Racing (Log ID: 881, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/competition/eligibility/11445/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /eligibility/11445/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.GET /eligibility] Checking eligibility for horse 11445 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.GET /eligibility] Horse 11445 eligibility checked for Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/competition/eligibility/11445/Racing - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.POST /enter] User ee795b8c-8442-41b4-a4c4-1a90c840a438 entering horse 11445 in show 550

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseModel.getHorseById] Successfully found horse: Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.POST /enter] Successfully entered horse 11445 in show 550

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/competition/enter - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/competition/execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /execute

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.POST /execute] User ee795b8c-8442-41b4-a4c4-1a90c840a438 executing competition for show 550

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.POST /execute] Executing competition with 1 entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedCompetitionSimulation] Executing competition: Cross System Test Show 1763765917600 (Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [calculateCompetitionScore] Horse Cross System Test Horse: Base score for Racing: 240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:58:37] info: [calculateCompetitionScore] Horse Cross System Test Horse: Luck modifier: 0.1%, adjustment: 0.2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:58:37] info: [calculateCompetitionScore] Horse Cross System Test Horse: Final score: 240 (base: 240, trait: +0, luck: 0.2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:58:37] info: [enhancedCompetitionSimulation] Horse Cross System Test Horse (ID: 11445) scored 240 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.map (<anonymous>)

    console.log
      [2025-11-21 17:58:37] info: [resultModel.saveResult] Successfully updated placeholder result for horse 11445 in show 550 with score 240

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseXpModel.addXpToHorse] Added 30 XP to horse Cross System Test Horse (ID: 11445). New XP: 30, Stat points gained: 0, Available: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedCompetitionSimulation] Awarded 30 Horse XP to Cross System Test Horse for 1st place

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [enhancedCompetitionSimulation] Competition completed. 1 entries processed.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [competitionRoutes.POST /execute] Competition executed successfully for show 550

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/competition/execute - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /11445/xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [horseXpController.getHorseXpStatus] Retrieved XP status for horse Cross System Test Horse (ID: 11445)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/horses/11445/xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [leaderboardRoutes.GET /competition] Getting competition leaderboard: discipline=Racing, period=all, metric=wins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [leaderboardRoutes.GET /competition] Retrieved 0 leaderboard entries

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/leaderboards/competition?discipline=Racing&timeframe=all - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/user/ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.getUserGrooms] Getting grooms for user ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/user/ee795b8c-8442-41b4-a4c4-1a90c840a438 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/grooms/interact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.recordInteraction] Recording brushing interaction for foal 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] warn: [groomPersonalityEffects.calculatePersonalityEffects] Unknown personality: methodical

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for methodical: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4801 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomProgressionService.awardGroomXP] Groom 4801 gained 2 XP: 200 ‚Üí 202 (Level 4 ‚Üí 2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.recordInteraction] Awarded 2 XP to groom 4801 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/grooms/interact - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/user/ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.getUserGrooms] Getting grooms for user ee795b8c-8442-41b4-a4c4-1a90c840a438

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/user/ee795b8c-8442-41b4-a4c4-1a90c840a438 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/4801/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /4801/retirement/eligibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/4801/retirement/eligibility - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/grooms/assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /assign

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.assignGroom] Assigning groom 4801 to foal 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomSystem.assignGroomToFoal] Assigning groom 4801 to foal 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomSystem.assignGroomToFoal] Successfully assigned Cross System Test Groom to foal Cross System Test Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [POST] /api/grooms/assign - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/assignments/11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [groomController.getFoalAssignments] Getting assignments for foal 11445

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/grooms/assignments/11445 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:37] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/memory/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [MemoryManagement] Getting memory status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/memory/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [POST] /api/memory/gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for POST /gc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [MemoryManagement] Manual GC trigger requested (force: false)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [POST] /api/memory/gc - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses?page=1&limit=5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/horses?page=1&limit=5 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api-docs/swagger.json - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/search?q=competition

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/search?q=competition - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/feature-guide - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/analytics - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /ping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /ping - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/memory/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [auth] Authenticated user ee795b8c-8442-41b4-a4c4-1a90c840a438 for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [MemoryManagement] Getting system health assessment

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/memory/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [GET] /api/user-docs/health - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL __tests__/integration/email-verification.test.mjs (6.193 s)
  ‚óè Console

    console.log
      [2025-11-21 17:58:38] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:38] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:39] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser_1763765919455@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bc269baae0890cf196168780a2104f843f8296f91317cb8e54972e18d882320e

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:39] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:39] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: newuser2_1763765919876@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8cdd5a5dbcecab9dfee61214b4a89c4250d1f598046c28eaf8ecea462d5de3f1

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: devuser_1763765920258@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=61bbe971d6b463575b6613bf0bb7ed9507b516140256ea77eb48d0c6a5b091ab

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:40] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=67ead0ab015dd89f1fa42f7c076949c8a91cae6664abf36e2aec2f292fa99388

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=67ead0ab015dd89f1fa42f7c076949c8a91cae6664abf36e2aec2f292fa99388 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=0daa76a18d3037a2c1675b385e30ea3bba7756d538c87ad1ef77ced033cda43b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=0daa76a18d3037a2c1675b385e30ea3bba7756d538c87ad1ef77ced033cda43b - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=137c67a8e1ffa1031fe5aae6e856a0efbc07201ed50db7be5d6036e5707f3c18

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email?token=137c67a8e1ffa1031fe5aae6e856a0efbc07201ed50db7be5d6036e5707f3c18 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:40] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:40] error: [GET] /api/auth/verify-email - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:40] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:40] info: [GET] /api/auth/verify-email - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=invalid_token_here

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: [GET] /api/auth/verify-email?token=invalid_token_here - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=invalid_token_here - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=2d867d01231ee98e8001f32dbcc6289bb83060e85dea60228beb8e5ce9e37e18

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] error: [authController.verifyEmail] Error verifying email: Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: [GET] /api/auth/verify-email?token=2d867d01231ee98e8001f32dbcc6289bb83060e85dea60228beb8e5ce9e37e18 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: Error Verification token has expired

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=2d867d01231ee98e8001f32dbcc6289bb83060e85dea60228beb8e5ce9e37e18 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=65395f6a11a0d92ef53810de0e7e184ea0bd29f0d149a2acc9f4bdbfd29ba45f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=65395f6a11a0d92ef53810de0e7e184ea0bd29f0d149a2acc9f4bdbfd29ba45f - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=65395f6a11a0d92ef53810de0e7e184ea0bd29f0d149a2acc9f4bdbfd29ba45f

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: [GET] /api/auth/verify-email?token=65395f6a11a0d92ef53810de0e7e184ea0bd29f0d149a2acc9f4bdbfd29ba45f - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=65395f6a11a0d92ef53810de0e7e184ea0bd29f0d149a2acc9f4bdbfd29ba45f - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=850c4979e8bc1310fbcd8379c496d824146e1fda49b92b5ed3fb06a8d02eca68

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [GET] /api/auth/verify-email?token=850c4979e8bc1310fbcd8379c496d824146e1fda49b92b5ed3fb06a8d02eca68 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [auth] Authenticated user 12ec50df-edb0-4631-880e-817c5295f30f for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765921508@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=556badedc8304e1d9b3502534e7929bb6453197e329ed3d6bdc117c3cb03227c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] warn: [auth] Missing token for POST /resend-verification from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/resend-verification - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:41] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user 6d230127-c554-4d10-827d-a44cb720e53a for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] error: [EmailVerification] Error resending verification email: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: [authController.resendVerification] Error resending verification: Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: Error Email is already verified

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user 8adad380-1a55-4fad-a915-3f5b199e5480 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765922071@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=b08941bc9ea1820d06431157cdabaa6fb770e3c05d2c9302f2c3412641517c19

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user 8adad380-1a55-4fad-a915-3f5b199e5480 for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] error: [EmailVerification] Error creating verification token: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: [EmailVerification] Error resending verification email: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: [authController.resendVerification] Error resending verification: Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: [POST] /api/auth/resend-verification - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] error: Error Please wait 300 seconds before requesting another verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user 5265848e-808d-43be-a565-ac68bc96ad3d for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765922289@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=48ef3c5d96e3a612848e181fa0f6a25b2582b777fa74481ea749954ed56b38ea

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user 4921b456-1834-4467-a81e-84f814a9bb22 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [auth] Authenticated user a65ce2d8-de64-4f2d-8e5d-68d520c611b2 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:42] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] warn: [auth] Missing token for GET /verification-status from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [auth] Authenticated user 8023d27d-7947-45cf-8a50-2564ddff5b56 for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: workflow_1763765923282@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=de14f0ee11dbff55361e0f1ea781700562926c6d25d70aa83b5d87306a2a5a8b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:43] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=de14f0ee11dbff55361e0f1ea781700562926c6d25d70aa83b5d87306a2a5a8b

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=de14f0ee11dbff55361e0f1ea781700562926c6d25d70aa83b5d87306a2a5a8b - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [auth] Authenticated user efae4349-1fd1-47a1-a391-39b2e920516d for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [auth] Authenticated user efae4349-1fd1-47a1-a391-39b2e920516d for POST /resend-verification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Resent verification email

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: emailint_1763765923610@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=ad0917ce7aa52e583b839142404b0ba15d15eb504356158f093e3bc7bd901511

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:43] info: [POST] /api/auth/resend-verification - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=ad0917ce7aa52e583b839142404b0ba15d15eb504356158f093e3bc7bd901511

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=ad0917ce7aa52e583b839142404b0ba15d15eb504356158f093e3bc7bd901511 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [auth] Authenticated user efae4349-1fd1-47a1-a391-39b2e920516d for GET /verification-status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Verification status check

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verification-status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=f9da5d7b24cbe0d5b831a8843d3249e24cd1e5bc55839798c794ede1a55b5427

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=f9da5d7b24cbe0d5b831a8843d3249e24cd1e5bc55839798c794ede1a55b5427 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=f9da5d7b24cbe0d5b831a8843d3249e24cd1e5bc55839798c794ede1a55b5427

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:43] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:43] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:43] error: [GET] /api/auth/verify-email?token=f9da5d7b24cbe0d5b831a8843d3249e24cd1e5bc55839798c794ede1a55b5427 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:43] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:43] info: [GET] /api/auth/verify-email?token=f9da5d7b24cbe0d5b831a8843d3249e24cd1e5bc55839798c794ede1a55b5427 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=145ad6448f979165273154ea8464cdbd07d248b1aec46bdd75901b3daa0b8683

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=145ad6448f979165273154ea8464cdbd07d248b1aec46bdd75901b3daa0b8683

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [EmailVerification] Email verified successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [EmailService] Welcome email (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=145ad6448f979165273154ea8464cdbd07d248b1aec46bdd75901b3daa0b8683 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [EmailVerification] Error verifying email token: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token=145ad6448f979165273154ea8464cdbd07d248b1aec46bdd75901b3daa0b8683 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Verification token has already been used

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=145ad6448f979165273154ea8464cdbd07d248b1aec46bdd75901b3daa0b8683 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=definitely_invalid_token_123 - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=%3Cscript%3Ealert(%22xss%22)%3C/script%3E - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20--

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Invalid or expired verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=%27;%20DROP%20TABLE%20users;%20-- - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token=

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:44] error: [authController.verifyEmail] Error verifying email: Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: [GET] /api/auth/verify-email?token= - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] error: Error Verification token is required

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:44] info: [GET] /api/auth/verify-email?token= - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_missing_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 189 |[39m
     [90m 190 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 191 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'Verification token is required'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 192 |[39m     })[33m;[39m
     [90m 193 |[39m
     [90m 194 |[39m     it([32m'should_reject_invalid_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:191:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_invalid_token

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 198 |[39m
     [90m 199 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 200 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 201 |[39m     })[33m;[39m
     [90m 202 |[39m
     [90m 203 |[39m     it([32m'should_reject_expired_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:200:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_expired_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 214 |[39m
     [90m 215 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 216 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'expired'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 217 |[39m     })[33m;[39m
     [90m 218 |[39m
     [90m 219 |[39m     it([32m'should_reject_already_used_token'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:216:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ GET /api/auth/verify-email ‚Ä∫ should_reject_already_used_token

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 234 |[39m
     [90m 235 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 236 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 237 |[39m     })[33m;[39m
     [90m 238 |[39m
     [90m 239 |[39m     it([32m'should_be_publicly_accessible_without_authentication'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:236:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_reject_if_email_already_verified

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 307 |[39m
     [90m 308 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 309 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already verified'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 310 |[39m     })[33m;[39m
     [90m 311 |[39m
     [90m 312 |[39m     it([32m'should_enforce_rate_limiting'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:309:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ POST /api/auth/resend-verification ‚Ä∫ should_enforce_rate_limiting

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 322 |[39m
     [90m 323 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 324 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'wait'[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 325 |[39m     })[33m;[39m
     [90m 326 |[39m
     [90m 327 |[39m     it([32m'should_cleanup_expired_tokens'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:324:35)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Complete Email Verification Workflow ‚Ä∫ should_prevent_multiple_verification_attempts

    expect(received).toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 519 |[39m       )[33m;[39m
     [90m 520 |[39m       expect(response2[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 521 |[39m       expect(response2[33m.[39mbody[33m.[39merror)[33m.[39mtoContain([32m'already been used'[39m)[33m;[39m
     [90m     |[39m                                    [31m[1m^[22m[39m
     [90m 522 |[39m
     [90m 523 |[39m       [90m// Third verification attempt[39m
     [90m 524 |[39m       [36mconst[39m response3 [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:521:36)

  ‚óè Email Verification System - Integration Tests ‚Ä∫ Security and Edge Cases ‚Ä∫ should_sanitize_error_messages_to_prevent_enumeration

    expect(received).not.toContain(expected) // indexOf

    Matcher error: received value must not be null nor undefined

    Received has value: undefined

    [0m [90m 562 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m 563 |[39m       [90m// Should not reveal whether user exists or not[39m
    [31m[1m>[22m[39m[90m 564 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'user'[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 565 |[39m       expect(response[33m.[39mbody[33m.[39merror)[33m.[39mnot[33m.[39mtoContain([32m'email'[39m)[33m;[39m
     [90m 566 |[39m     })[33m;[39m
     [90m 567 |[39m[0m

      at Object.<anonymous> (__tests__/integration/email-verification.test.mjs:564:39)

PASS tests/services/developmentalWindowSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/unit/facilityManagementSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:45] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.getUserFacilities] Getting facilities for user 80530774-b555-45e2-911a-3745926bd116

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.getUserFacilities] Getting facilities for user 6fd05d0a-ce05-4442-b3ac-afc14b40549d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for invalid_upgrade upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] error: [facilityManagementService.calculateUpgradeCost] Error: Invalid upgrade type: invalid_upgrade

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 5 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] error: [facilityManagementService.calculateUpgradeCost] Error: Target level must be higher than current level

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.purchaseFacilityUpgrade] User b468264a-512b-4409-8bcb-ea0d970c36af purchasing automated_care upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.purchaseFacilityUpgrade] User 8ab60eb9-fe03-49f9-84cc-61b322ba43ff purchasing competition_hosting upgrade to level 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.purchaseFacilityUpgrade] User bae88a8b-e652-45aa-bddd-ae7dff764d07 purchasing ventilation upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 946

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.assessFacilityEffectiveness] Assessing facility 948

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 717d2969-85b0-4345-943b-42d95930d6e3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.getUserFacilities] Getting facilities for user 717d2969-85b0-4345-943b-42d95930d6e3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.generateFacilityRecommendations] Generating recommendations for user 76766d83-d848-46f6-861e-e2ea9dccccca

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.getUserFacilities] Getting facilities for user 76766d83-d848-46f6-861e-e2ea9dccccca

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for advanced_training upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for recovery_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for specialized_grounds upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for automated_care upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for medical_center upgrade from 2 to 3

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:45] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for feed_laboratory upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for breeding_optimization upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for genetic_analysis upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for foal_development upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 3 to 4

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for competition_hosting upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for prestige_stable upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for tack_workshop upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for visitor_center upgrade from 0 to 1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateMaintenanceCosts] Calculating maintenance for facility 954

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.purchaseFacilityUpgrade] User 8a191a33-ecde-4573-baf4-818ea5784efe purchasing stable_management upgrade to level 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateUpgradeCost] Calculating cost for stable_management upgrade from 1 to 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 955

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 958

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 958

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.calculateFacilityROI] Calculating ROI for facility 960

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [facilityManagementService.getFacilityUpgradeHistory] Getting history for facility 960

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/api-response-integration.test.mjs (6.526 s)
  ‚óè Console

    console.log
      [2025-11-21 17:58:46] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:46] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=acc6db1b98d3f99a266f7c64b8b3f3cabafcbaea89b1f562e5f7053e1360d219

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:46] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:46] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=746c5ece88aaf017412d98ec273b855eb7c89b29c7c850328ba860e87b402aaf

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:47] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] warn: [auth] Invalid token for GET /api/test/error from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c66d5d709db4c25eb01b97a1b02a075021c2b23a6bc138a1f87cd6277d640158

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:47] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] warn: [auth] Invalid token for GET /api/test/not-found from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=411a6b9077301adb87029250085935f3fa4f19c14080af34dfc6ee9c91454ffd

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:47] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:47] warn: [auth] Invalid token for GET /api/test/validation-error from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=d257a0e3b9115429f46aa26b153cf46c6e2350d41a389c93be86cb5b845a096a

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:48] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] warn: [auth] Invalid token for GET /api/test/paginated from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=f56a23da49e9ef75db524a20069c4a48d2f3bcf10fe8acf3e1f508c1bf99603b

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:48] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] warn: [auth] Invalid token for GET /api/test/paginated from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=a50380b725ceb073fc6cb81bfe1b52410aec599aaf949400564e245ebf1b43d7

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:48] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:48] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5c306ff5afbedf8c83e335015548a87e7df974f0e9755dd59df6359707376e0d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:49] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] warn: [auth] Invalid token for GET /api/test/large-data from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5339d448724d92abccd1cb6d9026a2379b0c691f2c41e1d4e01e7d56943d6b87

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:49] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] warn: [auth] Invalid token for GET /api/test/field-selection from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=816bf88c2aef0e7f7eb0e184654756b5f0011eef6cde91d4c7ead04025bc57b2

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:49] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:49] warn: [auth] Invalid token for GET /api/test/field-selection from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=535cbbdc22838e19f6066ac300a55a168fd207b4dc28c1d5bb6f0a6bb2d9aff0

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:50] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] warn: [auth] Invalid token for GET /api/test/etag from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=bccd2491b1633914687ec91ee6f5167b21bcd21b5fda04f26d04a65c30043a7d

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:50] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:50] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=1a9ffa0556c9a958694f2757679778d360f1b5ad81c8a86c741ce15d1b2319d3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:50] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [health] Health check passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=59ec42ce3272fc86d1602b301c89f68c85ddaeb00421048bf76d1031fc22a934

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:51] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] warn: [auth] Missing token for GET /api/test/success from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] warn: [auth] Missing token for GET /api/test/error from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] warn: [auth] Missing token for GET /api/test/large-data from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=01d09398b4093809e63ef48c4ead4e24677c43bb801ea57c047ee04779ba3a90

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:51] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=3a28ea8115f11d6f14479d0ab43a40cf81d800319102d3766b5abcf501cff1c9

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:51] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:51] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=c98e118251c72e29e457e4fe6f1cd58bb98cbd69a5d401752f3bad90c41da86c

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:52] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] warn: [auth] Invalid token for GET /api/test/success from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: apiresponseintegration@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=e00bc590e171961a611360e244c8a3320f233ca4d1d5f87803b4ea034c04db98

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:52] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] warn: [auth] Invalid token for GET /api/test/large-data from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent success response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 243 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 244 |[39m
    [31m[1m>[22m[39m[90m 245 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 246 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 247 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 248 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:245:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent error response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 256 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 257 |[39m
    [31m[1m>[22m[39m[90m 258 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 259 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 260 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 261 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:258:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent not found response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

    [0m [90m 269 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 270 |[39m
    [31m[1m>[22m[39m[90m 271 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 272 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 273 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m[33m,[39m [32m'Test resource not found'[39m)[33m;[39m
     [90m 274 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'timestamp'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:271:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìã Response Format Standardization ‚Ä∫ should provide consistent validation error response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 280 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 281 |[39m
    [31m[1m>[22m[39m[90m 282 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 283 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 284 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m[33m,[39m [32m'Test validation failed'[39m)[33m;[39m
     [90m 285 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'meta'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:282:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìä Pagination Response Validation ‚Ä∫ should provide consistent paginated response format

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 295 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 296 |[39m
    [31m[1m>[22m[39m[90m 297 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 298 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 299 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'message'[39m)[33m;[39m
     [90m 300 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:297:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìä Pagination Response Validation ‚Ä∫ should handle pagination edge cases correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 316 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 317 |[39m
    [31m[1m>[22m[39m[90m 318 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 319 |[39m       [36mconst[39m { pagination } [33m=[39m response[33m.[39mbody[33m.[39mmeta[33m;[39m
     [90m 320 |[39m       expect(pagination[33m.[39mpage)[33m.[39mtoBe([35m20[39m)[33m;[39m
     [90m 321 |[39m       expect(pagination[33m.[39mhasNext)[33m.[39mtoBe([36mfalse[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:318:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ ‚ö° Performance Monitoring Integration ‚Ä∫ should include performance headers in responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 330 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 331 |[39m
    [31m[1m>[22m[39m[90m 332 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 333 |[39m       expect(response[33m.[39mheaders[[32m'x-processing-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 334 |[39m       expect(response[33m.[39mheaders[[32m'x-response-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 335 |[39m       expect(response[33m.[39mheaders[[32m'x-timestamp'[39m])[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:332:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ ‚ö° Performance Monitoring Integration ‚Ä∫ should monitor large response performance

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 341 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 342 |[39m
    [31m[1m>[22m[39m[90m 343 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 344 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveLength([35m1000[39m)[33m;[39m
     [90m 345 |[39m       expect(response[33m.[39mheaders[[32m'x-processing-time'[39m])[33m.[39mtoBeDefined()[33m;[39m
     [90m 346 |[39m       expect(response[33m.[39mheaders[[32m'x-response-size'[39m])[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:343:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should support field selection optimization

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 357 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 358 |[39m
    [31m[1m>[22m[39m[90m 359 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 360 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'id'[39m)[33m;[39m
     [90m 361 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'name'[39m)[33m;[39m
     [90m 362 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mnot[33m.[39mtoHaveProperty([32m'description'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:359:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should support field exclusion optimization

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 369 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 370 |[39m
    [31m[1m>[22m[39m[90m 371 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 372 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'id'[39m)[33m;[39m
     [90m 373 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'name'[39m)[33m;[39m
     [90m 374 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'description'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:371:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîß Response Optimization Features ‚Ä∫ should generate and validate ETags correctly

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 383 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 384 |[39m
    [31m[1m>[22m[39m[90m 385 |[39m       expect(response1[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 386 |[39m       expect(response1[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 387 |[39m       expect(response1[33m.[39mbody[33m.[39mdata)[33m.[39mtoBeDefined()[33m;[39m
     [90m 388 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:385:32)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üîó Cross-System Response Consistency ‚Ä∫ should maintain consistent response format across auth endpoints

    expect(received).toHaveProperty(path)

    Expected path: "token"
    Received path: []

    Received value: {"user": {"email": "apiresponseintegration@test.com", "id": "1bbec17d-e874-431f-a249-fe7f5799cff1", "username": "apiresponseintegrationuser"}}

    [0m [90m 422 |[39m       expect(loginResponse[33m.[39mbody)[33m.[39mtoHaveProperty([32m'data'[39m)[33m;[39m
     [90m 423 |[39m       [90m// Auth endpoints may not have timestamp in root, check for consistent structure[39m
    [31m[1m>[22m[39m[90m 424 |[39m       expect(loginResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'token'[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 425 |[39m       expect(loginResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'user'[39m)[33m;[39m
     [90m 426 |[39m     })[33m;[39m
     [90m 427 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:424:39)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìà Response Performance Benchmarking ‚Ä∫ should meet performance benchmarks for simple responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 504 |[39m       [36mconst[39m responseTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 505 |[39m
    [31m[1m>[22m[39m[90m 506 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 507 |[39m       expect(responseTime)[33m.[39mtoBeLessThan([35m1000[39m)[33m;[39m [90m// Should respond within 1 second[39m
     [90m 508 |[39m     })[33m;[39m
     [90m 509 |[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:506:31)

  ‚óè üîÑ API Response Integration Tests ‚Ä∫ üìà Response Performance Benchmarking ‚Ä∫ should meet performance benchmarks for large responses

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 517 |[39m       [36mconst[39m responseTime [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m startTime[33m;[39m
     [90m 518 |[39m
    [31m[1m>[22m[39m[90m 519 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 520 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveLength([35m1000[39m)[33m;[39m
     [90m 521 |[39m       expect(responseTime)[33m.[39mtoBeLessThan([35m5000[39m)[33m;[39m [90m// Should respond within 5 seconds[39m
     [90m 522 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/api-response-integration.test.mjs:519:31)

PASS tests/unit/enhancedGeneticProbabilityCalculator.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:52] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:52] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Simulating breeding outcomes

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating multi-generational predictions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating genetic diversity impact

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: Calculating enhanced genetic probabilities

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/utils/milestoneTraitEvaluator.comprehensive.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 6 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 7 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 8 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 9 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 10 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 11 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 12 at age 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 13 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Milestone age_1 already evaluated, skipping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 14 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 15 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 16 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 17 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 18 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 19 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 20 at age 730

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_2, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 21 at age 1095

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_3, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at Array.forEach (<anonymous>)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Starting evaluation for horse 22 at age 365

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Calculated trait scores: {}

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [milestoneTraitEvaluator.evaluateTraitMilestones] Completed milestone age_1, applied 0 traits

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS __tests__/middleware/sessionManagement.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:53] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:53] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:53] warn: [Session] Session expired due to inactivity

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] warn: [Session] Too many concurrent sessions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] info: [Session] Removed oldest sessions to enforce limit

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] error: [Session] Error fetching active sessions: Database connection lost

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:58:54] info: [Session] Session revoked by user

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] error: [Session] Error revoking session: 
      Invalid `prisma.refreshToken.deleteMany()` invocation:
      
      {
        where: {
          userId: "invalid-user",
      +   id: {
      +     equals: Int | IntFieldRefInput,
      +     in: Int[] | ListIntFieldRefInput,
      +     notIn: Int[] | ListIntFieldRefInput,
      +     lt: Int | IntFieldRefInput,
      +     lte: Int | IntFieldRefInput,
      +     gt: Int | IntFieldRefInput,
      +     gte: Int | IntFieldRefInput,
      +     not: Int | NestedIntFilter
      +   }
        }
      }
      
      Argument `id` is missing.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

FAIL __tests__/unit/token-rotation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:54] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:54] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:55] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token reuse detected

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token reuse detected during rotation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 0)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 1)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Token rotation successful

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)
          at async Promise.allSettled (index 2)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] warn: [TokenRotation] Token family invalidated

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:56] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [TokenRotation] Token cleanup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] error: [TokenRotation] Error creating token pair: Database connection failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

  ‚óè Token Rotation Service - Unit Tests ‚Ä∫ rotateRefreshToken() ‚Ä∫ should_handle_concurrent_rotation_attempts

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 3
    Received array:  [{"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU5MzY1ODItNTc3NTI5NzIwMDU0NDAwLTE3MWY2YTM0NDcyNjNkM2U3NjA1MGY3YjBiYjMzZDc4IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjM3NjY4MzZ9.pdN5l2tlevzqvSkc6hGYaOrx8PBCYeaS2Nwth3PCFWg", "familyId": "mi9gp6lx_4904632e638fd36d365e1b52f5df604c", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z3A2bHhfNDkwNDYzMmU2MzhmZDM2ZDM2NWUxYjUyZjVkZjYwNGMiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU5MzY1ODItNTc3NTI5NzIwMDU0NDAwLTE3MWY2YTM0NDcyNjNkM2U3NjA1MGY3YjBiYjMzZDc4IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjQzNzA3MzZ9.FxvVngsDFN9FE6ao4d6af4RwaSe5i-xxmRTuzu3RqSE"}, "success": true}}, {"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU5MzY1ODgtNTc3NTI5NzI2MzUzNDAwLWRjMDZhMGNlNzVmMWUwODY5ZTYyMzcxN2Y4NTFmMzU1IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjM3NjY4MzZ9.KEXkgE_OAQHfG1zm0_NFRdGShIVQ6QLXHoQnJAoPD-c", "familyId": "mi9gp6lx_4904632e638fd36d365e1b52f5df604c", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z3A2bHhfNDkwNDYzMmU2MzhmZDM2ZDM2NWUxYjUyZjVkZjYwNGMiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU5MzY1ODgtNTc3NTI5NzI2MzUzNDAwLWRjMDZhMGNlNzVmMWUwODY5ZTYyMzcxN2Y4NTFmMzU1IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjQzNzA3MzZ9.WT7y7WlFPwS8UMPKBErstwNcvK1hHcddudc2Yyw1TQ0"}, "success": true}}, {"status": "fulfilled", "value": {"error": null, "familyInvalidated": false, "newTokenPair": {"accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoiYWNjZXNzIiwianRpIjoiYWNjZXNzLTE3NjM3NjU5MzY1OTUtNTc3NTI5NzMyODg0ODAwLTFiODk4OWQ4YTNkN2RhMDE2NGJlYmJkMzEzZGExYTA5IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjM3NjY4MzZ9.79jYVzPaKjema-HnY5CrNj25ktGMyPDTVGnUUU8j7NE", "familyId": "mi9gp6lx_4904632e638fd36d365e1b52f5df604c", "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI0YmQ3YzM0Yy1kYmQ2LTQyYmEtODMwYy01OWFiOWFkYWI1MmIiLCJ0eXBlIjoicmVmcmVzaCIsImZhbWlseUlkIjoibWk5Z3A2bHhfNDkwNDYzMmU2MzhmZDM2ZDM2NWUxYjUyZjVkZjYwNGMiLCJqdGkiOiJyZWZyZXNoLTE3NjM3NjU5MzY1OTUtNTc3NTI5NzMyODg0ODAwLTFiODk4OWQ4YTNkN2RhMDE2NGJlYmJkMzEzZGExYTA5IiwiaWF0IjoxNzYzNzY1OTM2LCJleHAiOjE3NjQzNzA3MzZ9.8D3gAI8CEWBPZFU4B7dZho9mfTetF0uRZS99UV5AMBE"}, "success": true}}]

    [0m [90m 345 |[39m
     [90m 346 |[39m       [90m// Only one should succeed[39m
    [31m[1m>[22m[39m[90m 347 |[39m       expect(successfulResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 348 |[39m     })[33m;[39m
     [90m 349 |[39m   })[33m;[39m
     [90m 350 |[39m[0m

      at Object.<anonymous> (__tests__/unit/token-rotation.test.mjs:347:33)

  ‚óè Token Rotation Service - Unit Tests ‚Ä∫ invalidateTokenFamily() ‚Ä∫ should_log_invalidation_for_security_audit

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: StringContaining "Token family invalidated", ObjectContaining {"familyId": "mi9gp6tr_0acb9e0435b24f7791c33795e38e4c12", "reason": Any<String>, "userId": "3f3e4300-c6d5-4b2d-986e-47a509b6c0d1"}

    Number of calls: 0

    [0m [90m 390 |[39m       [36mawait[39m invalidateTokenFamily(familyId)[33m;[39m
     [90m 391 |[39m
    [31m[1m>[22m[39m[90m 392 |[39m       expect(mockLogger)[33m.[39mtoHaveBeenCalledWith(
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 393 |[39m         expect[33m.[39mstringContaining([32m'Token family invalidated'[39m)[33m,[39m
     [90m 394 |[39m         expect[33m.[39mobjectContaining({
     [90m 395 |[39m           familyId[33m:[39m familyId[33m,[39m[0m

      at Object.<anonymous> (__tests__/unit/token-rotation.test.mjs:392:26)

PASS tests/unit/environmentalFactorEngine.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:57] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-10-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-07-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-01T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-02T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-03T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-04T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-05T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-06T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-07T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-08T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-09T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-10T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-11T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-12T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-13T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-14T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-29T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-30T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-04-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-16T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-17T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-18T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-19T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-20T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-21T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-22T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-23T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-24T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-25T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-26T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-27T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-01-28T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [environmentalFactorEngineService.calculateCurrentWeather] Calculating weather for 2024-06-15T00:00:00.000Z

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

FAIL tests/integration/competitionWorkflow.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:57] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:57] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:58] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: competition-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=0891ac5e7d6330952c537ecdfee85fb8bf51667c7c3b34ff3b17fb65ece38aa0

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:58:58] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [GET] /api/competition/eligibility/11452/Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] warn: [auth] Invalid token for GET /eligibility/11452/Racing from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [GET] /api/competition/eligibility/11452/Racing - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [POST] /api/competition/enter

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] warn: [auth] Invalid token for POST /enter from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [POST] /api/competition/enter - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [GET] /api/leaderboards/competition?metric=wins&limit=10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] warn: [auth] Invalid token for GET /competition from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:58] info: [GET] /api/leaderboards/competition?metric=wins&limit=10 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìù STEP 3: Competition Entry & Validation ‚Ä∫ should validate horse meets competition requirements using API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 179 |[39m         [33m.[39m[36mget[39m([32m`/api/competition/eligibility/${competitionHorse.id}/${testShow.discipline}`[39m)
     [90m 180 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 181 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 182 |[39m
     [90m 183 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 184 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mhorseId)[33m.[39mtoBe(competitionHorse[33m.[39mid)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:181:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìù STEP 3: Competition Entry & Validation ‚Ä∫ should successfully enter horse in competition using API endpoint

    expected 201 "Created", got 401 "Unauthorized"

    [0m [90m 218 |[39m           showId[33m:[39m testShow[33m.[39mid[33m,[39m
     [90m 219 |[39m         })
    [31m[1m>[22m[39m[90m 220 |[39m         [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 221 |[39m
     [90m 222 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 223 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoBe([32m'Horse successfully entered in competition'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:220:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üèÅ STEP 4: Competition Execution & Scoring ‚Ä∫ should execute competition and calculate results

    expect(received).toBeTruthy()

    Received: null

    [0m [90m 270 |[39m       })[33m;[39m
     [90m 271 |[39m
    [31m[1m>[22m[39m[90m 272 |[39m       expect(existingResult)[33m.[39mtoBeTruthy()[33m;[39m [90m// Should exist from entry step[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 273 |[39m
     [90m 274 |[39m       [90m// Update with actual competition results[39m
     [90m 275 |[39m       competitionResult [33m=[39m [36mawait[39m prisma[33m.[39mcompetitionResult[33m.[39mupdate({[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:272:30)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üí∞ STEP 5: Prize Distribution & XP Awards ‚Ä∫ should award prize money and XP for competition performance

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 296 |[39m
     [90m 297 |[39m       [90m// Award prize money[39m
    [31m[1m>[22m[39m[90m 298 |[39m       [36mconst[39m prizeAmount [33m=[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                    [31m[1m^[22m[39m
     [90m 299 |[39m       [36mconst[39m updatedUser [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mupdate({
     [90m 300 |[39m         where[33m:[39m { id[33m:[39m testUser[33m.[39mid }[33m,[39m
     [90m 301 |[39m         data[33m:[39m {[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:298:52)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìä STEP 6: Leaderboard & Rankings ‚Ä∫ should update leaderboards with competition results using API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 350 |[39m         [33m.[39m[36mget[39m([32m'/api/leaderboards/competition?metric=wins&limit=10'[39m)
     [90m 351 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 352 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 353 |[39m
     [90m 354 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 355 |[39m       expect(response[33m.[39mbody[33m.[39mdata[33m.[39mleaderboard)[33m.[39mtoBeInstanceOf([33mArray[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:352:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üìä STEP 6: Leaderboard & Rankings ‚Ä∫ should track historical performance

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 370 |[39m       })[33m;[39m
     [90m 371 |[39m
    [31m[1m>[22m[39m[90m 372 |[39m       expect(competitionHistory)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                  [31m[1m^[22m[39m
     [90m 373 |[39m       expect(competitionHistory[[35m0[39m][33m.[39mshow[33m.[39mname)[33m.[39mtoBe(testShow[33m.[39mname)[33m;[39m
     [90m 374 |[39m       expect([33mNumber[39m(competitionHistory[[35m0[39m][33m.[39mscore))[33m.[39mtoBe([33mNumber[39m(competitionResult[33m.[39mscore))[33m;[39m
     [90m 375 |[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:372:34)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéØ STEP 7: Performance Impact on Horse Value ‚Ä∫ should increase horse value based on competition success

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

    [0m [90m 393 |[39m       })[33m;[39m
     [90m 394 |[39m
    [31m[1m>[22m[39m[90m 395 |[39m       expect(horseWithResults[33m.[39mcompetitionResults)[33m.[39mtoHaveLength([35m1[39m)[33m;[39m
     [90m     |[39m                                                   [31m[1m^[22m[39m
     [90m 396 |[39m
     [90m 397 |[39m       [90m// Calculate estimated value based on performance[39m
     [90m 398 |[39m       [36mconst[39m baseValue [33m=[39m [35m10000[39m[33m;[39m [90m// Base horse value[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:395:51)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate complete competition workflow integrity

    expect(received).toBeGreaterThan(expected)

    Expected: > 100
    Received:   0

    [0m [90m 455 |[39m
     [90m 456 |[39m       [90m// User progression[39m
    [31m[1m>[22m[39m[90m 457 |[39m       expect(finalUser[33m.[39mxp)[33m.[39mtoBeGreaterThan([35m100[39m)[33m;[39m [90m// Started with 100, gained more[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 458 |[39m       expect(finalUser[33m.[39mmoney)[33m.[39mtoBeGreaterThan([35m15000[39m [33m-[39m testShow[33m.[39mentryFee)[33m;[39m [90m// Prize money added[39m
     [90m 459 |[39m
     [90m 460 |[39m       [90m// Horse competition record[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:457:28)

  ‚óè üèÜ INTEGRATION: Complete Competition Workflow ‚Ä∫ üéä STEP 9: End-to-End Competition Workflow Validation ‚Ä∫ should validate all business rules enforced throughout competition

    TypeError: Cannot read properties of undefined (reading 'prizeWon')

    [0m [90m 484 |[39m       [90m// Financial transactions accurate[39m
     [90m 485 |[39m       [36mconst[39m user [33m=[39m [36mawait[39m prisma[33m.[39muser[33m.[39mfindUnique({ where[33m:[39m { id[33m:[39m testUser[33m.[39mid } })[33m;[39m
    [31m[1m>[22m[39m[90m 486 |[39m       [36mconst[39m expectedMoney [33m=[39m [35m15000[39m [33m-[39m testShow[33m.[39mentryFee [33m+[39m [33mNumber[39m(competitionResult[33m.[39mprizeWon)[33m;[39m
     [90m     |[39m                                                                                  [31m[1m^[22m[39m
     [90m 487 |[39m       expect(user[33m.[39mmoney)[33m.[39mtoBe(expectedMoney)[33m;[39m
     [90m 488 |[39m
     [90m 489 |[39m       [90m// Competition results realistic[39m[0m

      at Object.<anonymous> (tests/integration/competitionWorkflow.integration.test.mjs:486:82)

PASS tests/applyEpigeneticTraitsAtBirthUnit.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/unit/advancedLineageAnalysis.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 11453 and mare 11454, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 11456 and mare 11457, 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 3 horses across 2 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 999 and mare 998, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] warn: [advancedLineageAnalysisService.generateLineageTree] Missing parent horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 1 and mare 2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.createVisualizationData] Creating visualization for stallion 11458 and mare 11459

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generating tree for stallion 11458 and mare 11459, 3 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateLineageTree] Generated tree with 2 horses across 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 11460 and mare 11461

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 11460 and mare 11461

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.generateBreedingRecommendations] Generating recommendations for stallion 11462 and mare 11463

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateGeneticDiversityMetrics] Calculating diversity for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Calculating for stallion 11462 and mare 11463

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.calculateInbreedingCoefficient] Found 0 common ancestors, coefficient: 0

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [advancedLineageAnalysisService.analyzeLineagePerformance] Analyzing performance for 1 generations

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/traitCalculation.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:58:59] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

FAIL tests/cronJobsIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:00] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] GET /api/admin/cron/status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/cron/status - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/traits/evaluate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] POST /api/admin/traits/evaluate - Manual trait evaluation triggered

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/traits/evaluate - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] GET /api/admin/foals/development

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] error: [adminRoutes] GET /api/admin/foals/development error: Cannot read properties of undefined (reading 'length')

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/foals/development - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] GET /api/admin/traits/definitions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [GET] /api/admin/traits/definitions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] POST /api/admin/cron/start

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/cron/start - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [adminRoutes] POST /api/admin/cron/stop

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [POST] /api/admin/cron/stop - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè ‚è∞ INTEGRATION: Cron Jobs System - Automated Trait Evaluation & Admin API ‚Ä∫ Admin API Endpoints ‚Ä∫ should get foals in development

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 446 |[39m       mockPrisma[33m.[39mhorse[33m.[39mfindMany[33m.[39mmockResolvedValueOnce(mockFoals)[33m;[39m
     [90m 447 |[39m
    [31m[1m>[22m[39m[90m 448 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)[33m.[39m[36mget[39m([32m'/api/admin/foals/development'[39m)[33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                                                                               [31m[1m^[22m[39m
     [90m 449 |[39m
     [90m 450 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 451 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'foals'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/cronJobsIntegration.test.mjs:448:79)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/integration/groomWorkflowIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:00] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:00] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Hiring new groom Sarah Johnson for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Successfully hired groom Sarah Johnson (ID: 4803) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Hiring new groom Invalid Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Hiring new groom Expert Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Successfully hired groom Expert Groom (ID: 4804) for 750 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Hiring new groom Novice Groom for user test-user-groom-integration

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.hireGroom] Successfully hired groom Novice Groom (ID: 4805) for 350 coins

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.assignGroom] Assigning groom 4806 to foal 11473

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.assignGroomToFoal] Assigning groom 4806 to foal 11473

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.assignGroomToFoal] Successfully assigned Test Assignment Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.assignGroom] Assigning groom 4808 to foal 11476

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.assignGroomToFoal] Assigning groom 4808 to foal 11476

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.assignGroomToFoal] Successfully assigned Second Test Groom to foal Test Foal

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.assignGroom] Assigning groom 4809 to foal 11479

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Recording trust_building interaction for foal 11482

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task trust_building

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -1 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4810 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Groom 4810 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Awarded 2 XP to groom 4810 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Recording hoof_handling interaction for foal 11486

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task hoof_handling

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: none

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Interaction recorded: 7 bonding, -4 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4811 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Groom 4811 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Awarded 2 XP to groom 4811 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Recording brushing interaction for foal 11490

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applying gentle personality effects for task brushing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomPersonalityEffects.calculatePersonalityEffects] Applied gentle effects: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomSystem.calculateGroomInteractionEffects] Applied personality effects for gentle: task_specialty

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Interaction recorded: 10 bonding, -6 stress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Personality effects applied (gentle): task_specialty - 10% increased success rate on nervous or timid horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Awarding 2 XP to groom 4812 for interaction_completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomProgressionService.awardGroomXP] Groom 4812 gained 2 XP: 0 ‚Üí 2 (Level 1 ‚Üí 1)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [groomController.recordInteraction] Awarded 2 XP to groom 4812 for interaction

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/services/environmentalTriggerSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:01] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:01] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS tests/epigeneticTraits.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS __tests__/utils/validateEnvironment.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS __tests__/routes/userDocumentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Built search index with 1244 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocService] Documentation system initialized successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting all documentation list

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Searching documentation for: "horse training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Searching documentation for: "nonexistentterm12345"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting table of contents

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:02] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting sections for document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting sections for document: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching in document "feature-guide" for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching in document "feature-guide" for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching in document "non-existent" for: "test"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] warn: [UserDocService] Document not found: non-existent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Refreshing documentation cache

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocService] Loaded 4 documentation files

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocService] Built search index with 111 terms

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocService] Documentation refreshed successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching documentation for: "horse"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching documentation for: "training"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Searching documentation for: "competition"

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: strategy-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting documentation analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [UserDocRoutes] Getting document: feature-guide

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS seed/horseSeed.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:03] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:03] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

FAIL tests/integration/userProgressAPI.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:04] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:04] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: progress-test@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=5ef39d538a93c428b08f3a2030cfb34c55c8e2b81f953c69ce21dd1e8f52f8d6

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:59:04] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:04] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 882

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11505: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 656, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Racing (Log ID: 882, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 883

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11505: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 657, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Dressage (Log ID: 883, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 884

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11505: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 658, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Show Jumping (Log ID: 884, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 885

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11505: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 659, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Dressage (Log ID: 885, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 886

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11505: 5 -> 10

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 660, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Show Jumping (Log ID: 886, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 887

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11505: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 661, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Dressage (Log ID: 887, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 888

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11505: 10 -> 15

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 662, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Show Jumping (Log ID: 888, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 889

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11505: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 663, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Dressage (Log ID: 889, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 890

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11505: 15 -> 20

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 664, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Show Jumping (Log ID: 890, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 891

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11505: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 665, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Dressage (Log ID: 891, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Dressage)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 892

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Show Jumping score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Show Jumping score for horse 11505: 20 -> 25

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Show Jumping score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Show Jumping

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 666, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Show Jumping (Log ID: 892, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainRouteHandler] Training request for horse 11505 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Attempting to train horse 11505 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Checking training eligibility for horse 11505 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Getting age for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getHorseAge] Horse 11505 is 6 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11505 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11505: Thu Nov 13 2025 17:59:05 GMT-0500 (Eastern Standard Time) (discipline: Show Jumping)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.canTrain] Horse 11505 is eligible to train in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.getHorseById] Successfully found horse: Progress Test Horse (ID: 11505)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Horse 11505 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Logging training session for horse 11505 in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 893

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Incrementing Cross Country score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Updating Cross Country score for horse 11505 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.updateDisciplineScore] Successfully updated Cross Country score for horse 11505: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [horseModel.incrementDisciplineScore] Successfully incremented Cross Country score for horse 11505

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Logging XP event: User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5, Reason: Trained horse Progress Test Horse in Cross Country

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 667, User 96ce15db-f98e-4a57-9397-664f374c2b06, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Awarded 5 XP to user 96ce15db-f98e-4a57-9397-664f374c2b06 for training - LEVEL UP to undefined!

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [trainingController.trainHorse] Successfully trained horse 11505 in Cross Country (Log ID: 893, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/dashboard/96ce15db-f98e-4a57-9397-664f374c2b06

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /dashboard/96ce15db-f98e-4a57-9397-664f374c2b06 from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/dashboard/96ce15db-f98e-4a57-9397-664f374c2b06 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/999999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] warn: [auth] Invalid token for GET /999999/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:05] info: [GET] /api/users/999999/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/invalid/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] warn: [auth] Invalid token for GET /invalid/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/invalid/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] warn: [auth] Missing token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] warn: [auth] Invalid token for GET /96ce15db-f98e-4a57-9397-664f374c2b06/progress from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [GET] /api/users/96ce15db-f98e-4a57-9397-664f374c2b06/progress - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîê STEP 1: User Setup & Initial Progress State ‚Ä∫ should return correct initial progress data via API

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 151 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 152 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 153 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 154 |[39m
     [90m 155 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 156 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:153:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should gain XP from training and update progress correctly

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 229 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 230 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 231 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 232 |[39m
     [90m 233 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 234 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:231:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üèãÔ∏è STEP 3: XP Gain Through Training & Progress Updates ‚Ä∫ should handle multiple training sessions and XP accumulation

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 280 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 281 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 282 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 283 |[39m
     [90m 284 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata[33m.[39mlevel)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m 285 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata[33m.[39mxp)[33m.[39mtoBe([35m55[39m)[33m;[39m [90m// 5 + (10 * 5) = 55[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:282:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should level up when reaching XP threshold

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 328 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 329 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 330 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 331 |[39m
     [90m 332 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 333 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:330:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéØ STEP 4: Level-Up Detection & Multi-Level Progression ‚Ä∫ should handle multiple level gains in single XP award

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 358 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 359 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 360 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 361 |[39m
     [90m 362 |[39m       expect(progressResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({
     [90m 363 |[39m         userId[33m:[39m testUser[33m.[39mid[33m,[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:360:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üìä STEP 5: Dashboard Data Integration ‚Ä∫ should return comprehensive dashboard data with progress integration

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 379 |[39m         [33m.[39m[36mget[39m([32m`/api/users/dashboard/${testUser.id}`[39m)
     [90m 380 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 381 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 382 |[39m
     [90m 383 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 384 |[39m       expect(dashboardResponse[33m.[39mbody[33m.[39mdata)[33m.[39mtoEqual({[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:381:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîç STEP 6: API Consistency & Edge Cases ‚Ä∫ should handle invalid user ID gracefully

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 411 |[39m         [33m.[39m[36mget[39m([32m'/api/users/999999/progress'[39m)
     [90m 412 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 413 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m [90m// UUID validation fails before user lookup[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 414 |[39m
     [90m 415 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 416 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Validation failed'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:413:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üîç STEP 6: API Consistency & Edge Cases ‚Ä∫ should validate user ID format

    expected 400 "Bad Request", got 401 "Unauthorized"

    [0m [90m 421 |[39m         [33m.[39m[36mget[39m([32m'/api/users/invalid/progress'[39m)
     [90m 422 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 423 |[39m         [33m.[39mexpect([35m400[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 424 |[39m
     [90m 425 |[39m       expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 426 |[39m       expect(response[33m.[39mbody[33m.[39mmessage)[33m.[39mtoContain([32m'Validation failed'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:423:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

  ‚óè üéØ INTEGRATION: User Progress API - Complete Progress Tracking ‚Ä∫ üéä STEP 7: End-to-End Progress Validation ‚Ä∫ should validate complete progress tracking integrity

    expected 200 "OK", got 401 "Unauthorized"

    [0m [90m 453 |[39m         [33m.[39m[36mget[39m([32m`/api/users/${testUser.id}/progress`[39m)
     [90m 454 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
    [31m[1m>[22m[39m[90m 455 |[39m         [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m          [31m[1m^[22m[39m
     [90m 456 |[39m
     [90m 457 |[39m       [36mconst[39m progressData [33m=[39m progressResponse[33m.[39mbody[33m.[39mdata[33m;[39m
     [90m 458 |[39m[0m

      at Object.<anonymous> (tests/integration/userProgressAPI.integration.test.mjs:455:10)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:267:14)
      at node_modules/supertest/lib/test.js:323:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:300:13)
      at Test.assert (node_modules/supertest/lib/test.js:179:23)
      at Server.localAssert (node_modules/supertest/lib/test.js:135:14)

PASS tests/traitDiscoveryIntegration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:06] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:06] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:06] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 507MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 11506: bold, athletic, calm

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Discovered 3 traits for horse 11506 (High Bond Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11507 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 513MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11508 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 512MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/invalid

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [Validation] Input validation failed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/invalid - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 505MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] GET /progress/11506 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 505MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] GET /progress/99999 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscoveryRoutes] GET /progress/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Batch test foal IDs: [ 11506, 11507 ]

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:263:15)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 518MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 2 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 2 hidden traits for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Successfully revealed 2 traits for horse 11506: resilient, intelligent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 3 hidden traits for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] No discovery conditions met for horse 11507

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] POST /discover/batch - Processing 3 horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscovery.revealTraits] Error revealing traits for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscovery.batchRevealTraits] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 0 hidden traits for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] No hidden traits to reveal for horse 11508

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 515MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/batch - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 510MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] GET /conditions - Getting discovery conditions

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/conditions - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/11506

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 513MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] POST /check-conditions/11506 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/11506 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/99999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] POST /check-conditions/99999 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscovery.getDiscoveryProgress] Error for horse 99999: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] error: [traitDiscoveryRoutes] POST /check-conditions/99999 error: Horse with ID 99999 not found

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/99999 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 515MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] GET /progress/11509 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11509 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Initial hidden count: 5

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:440:15)

    console.log
      Progress response: {
        "horseId": 11509,
        "horseName": "Fresh Workflow Foal",
        "discoveredTraits": 5,
        "totalPossibleTraits": 7,
        "progressPercentage": 71,
        "traits": [
          "intelligent",
          "calm",
          "athletic",
          "resilient",
          "bold"
        ],
        "hiddenTraitsCount": 5,
        "visibleTraitsCount": 0,
        "currentStats": {
          "bondScore": 85,
          "stressLevel": 15,
          "developmentDay": 3
        },
        "conditions": {
          "high_bond": {
            "name": "High Bond",
            "description": "Strong bond formed",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "loyal",
              "trusting",
              "calm"
            ]
          },
          "excellent_bond": {
            "name": "Excellent Bond",
            "description": "Exceptional bond achieved",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "devoted",
              "empathetic",
              "intuitive"
            ]
          },
          "low_stress": {
            "name": "Low Stress",
            "description": "Stress levels minimized",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "calm",
              "relaxed",
              "confident"
            ]
          },
          "minimal_stress": {
            "name": "Minimal Stress",
            "description": "Perfect stress management",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "zen",
              "unflappable",
              "serene"
            ]
          },
          "perfect_care": {
            "name": "Perfect Care",
            "description": "Perfect care conditions achieved",
            "met": true,
            "progress": 100,
            "revealableTraits": [
              "exceptional",
              "thriving",
              "balanced"
            ]
          },
          "mature_bond": {
            "name": "Mature Bond",
            "description": "Mature relationship developed with adult horse",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "resilient",
              "calm",
              "confident",
              "bonded"
            ]
          },
          "consistent_training": {
            "name": "Consistent Training",
            "description": "Consistent training regimen maintained",
            "met": false,
            "progress": 0,
            "revealableTraits": [
              "disciplined",
              "focused",
              "trainable"
            ]
          }
        }
      }

      at Object.<anonymous> (tests/traitDiscoveryIntegration.test.mjs:441:15)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] POST /check-conditions/11509 - Checking conditions without discovery

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/check-conditions/11509 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 511MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Triggering trait discovery for horse 11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Starting trait discovery for horse 11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Found 5 hidden traits for horse 11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscovery.revealTraits] Successfully revealed 3 traits for horse 11509: resilient, athletic, bold

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitController.discoverTraits] Discovered 3 traits for horse 11509 (Fresh Workflow Foal)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [POST] /api/trait-discovery/discover/11509 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11509

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] warn: [MemoryMonitoring] Memory threshold exceeded: 514MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [traitDiscoveryRoutes] GET /progress/11509 - Getting discovery progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [GET] /api/trait-discovery/progress/11509 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/userRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:07] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:07] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:08] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 544MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765948262 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 546MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /550e8400-e29b-41d4-a716-446655440999/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440999

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440999/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users//progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 549MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"progress","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users//progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 546MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /a/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"a","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/a/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 544MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 544MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /550e8400-e29b-41d4-a716-446655440998/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 550e8400-e29b-41d4-a716-446655440998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] error: [userController.getUserProgressAPI] Error getting user progress: Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] error: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - ERROR

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] error: Error Progress fetch failed: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440998/progress - 500

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 547MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765948262 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 547MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Getting comprehensive progress for user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUserProgressAPI] Successfully retrieved progress for user userroutes_1763765948262 (Level 2, XP: 100/300, -100% progress)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/92e21e4d-7779-451a-b542-dd8bd5b1d1f1/progress - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 548MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [auth] Authenticated user 92e21e4d-7779-451a-b542-dd8bd5b1d1f1 for GET /user-123_test/progress

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [userRoutes] Validation errors for /:id: [{"type":"field","value":"user-123_test","msg":"User ID must be a valid UUID","path":"id","location":"params"}]

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/user-123_test/progress - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 549MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUser] Getting user d59f860e-52b0-43bc-a0d4-a6b45d2ee763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 545MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.getUser] Getting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [GET] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 557MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.createUser] Creating user NewUser_1763765948613

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [createUser] User created: NewUser_1763765948613

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 555MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [PUT] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 550MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.updateUser] Updating user d59f860e-52b0-43bc-a0d4-a6b45d2ee763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [PUT] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 547MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.updateUser] Updating user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] error: [updateUser] User not found for update: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] info: [PUT] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [DELETE] /api/users/e4e9c6a7-5b4a-4df8-9bd1-6ea90b36d293

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 558MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.deleteUser] Deleting user e4e9c6a7-5b4a-4df8-9bd1-6ea90b36d293

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [DELETE] /api/users/e4e9c6a7-5b4a-4df8-9bd1-6ea90b36d293 - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 554MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.deleteUser] Deleting user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] error: [deleteUser] User not found for deletion: ID 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] info: [DELETE] /api/users/550e8400-e29b-41d4-a716-446655440001 - 404

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 553MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.addXp] Adding 50 XP to user d59f860e-52b0-43bc-a0d4-a6b45d2ee763

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users/d59f860e-52b0-43bc-a0d4-a6b45d2ee763/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] warn: [MemoryMonitoring] Memory threshold exceeded: 551MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] info: [userController.addXp] Adding 50 XP to user 550e8400-e29b-41d4-a716-446655440001

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:08] error: [addXpToUser] Error: User not found.

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:08] info: [POST] /api/users/550e8400-e29b-41d4-a716-446655440001/add-xp - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/horseAgingSystem.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

PASS models/userModel.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

PASS tests/taskInfluenceConfig.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:09] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

FAIL tests/integration/advancedBreedingGeneticsAPI.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:10] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:10] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] warn: [MemoryMonitoring] Memory threshold exceeded: 609MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: genetics@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=8db83c5edcb20a92560f25285042f976040e54af51f37c739af80e7e0be1f0d0

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:59:10] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:10] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 622MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 610MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 611MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 612MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 613MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 613MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 625MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 625MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 624MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [GET] /api/breeding/lineage-analysis/99999/99998

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for GET /breeding/lineage-analysis/99999/99998 from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [GET] /api/breeding/lineage-analysis/99999/99998 - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 614MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 615MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 616MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 616MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 616MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:11] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 628MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 617MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 618MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [GET] /api/genetics/diversity-report/aedd85d5-033d-4940-8306-14a1902bd8fc

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for GET /genetics/diversity-report/aedd85d5-033d-4940-8306-14a1902bd8fc from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [GET] /api/genetics/diversity-report/aedd85d5-033d-4940-8306-14a1902bd8fc - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 629MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 627MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 622MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 623MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 619MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 620MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 620MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 621MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 632MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/breeding/genetic-probability

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 633MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST /breeding/genetic-probability from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/breeding/genetic-probability - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 632MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 631MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 630MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 626MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [auth] Invalid token for POST / from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/horses - 401

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 626MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: other@test.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=37f6d5a9c2573698fb3709f0532374a2cc69c7441aa1642e8050c71ab3906026

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:59:12] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] info: [POST] /api/auth/login

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:12] warn: [MemoryMonitoring] Memory threshold exceeded: 628MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:13] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:13] info: [POST] /api/auth/login - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should calculate breeding probabilities

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 131 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 132 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 133 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 134 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 135 |[39m           includeLineage[33m:[39m [36mtrue[39m[33m,[39m
     [90m 136 |[39m         })[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:133:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should calculate breeding probabilities

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should handle invalid horse IDs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 160 |[39m         [33m.[39msend({
     [90m 161 |[39m           stallionId[33m:[39m [35m99999[39m[33m,[39m
    [31m[1m>[22m[39m[90m 162 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                 [31m[1m^[22m[39m
     [90m 163 |[39m         })[33m;[39m
     [90m 164 |[39m
     [90m 165 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:162:33)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should handle invalid horse IDs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 172 |[39m         [33m.[39mpost([32m'/api/breeding/genetic-probability'[39m)
     [90m 173 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 174 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 175 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 176 |[39m         })[33m;[39m
     [90m 177 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:174:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üéØ Enhanced Genetic Probability API ‚Ä∫ POST /api/breeding/genetic-probability should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 183 |[39m     test([32m'GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 184 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 185 |[39m         [33m.[39m[36mget[39m([32m`/api/breeding/lineage-analysis/${testStallion.data.id}/${testMare.data.id}`[39m)
     [90m     |[39m                                                                  [31m[1m^[22m[39m
     [90m 186 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 187 |[39m         [33m.[39mquery({ generations[33m:[39m [35m3[39m })[33m;[39m
     [90m 188 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:185:66)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis/:stallionId/:mareId should generate lineage tree

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis should handle missing horses gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 401

    [0m [90m 210 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 211 |[39m
    [31m[1m>[22m[39m[90m 212 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 213 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mfalse[39m)[33m;[39m
     [90m 214 |[39m     })[33m;[39m
     [90m 215 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:212:31)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ GET /api/breeding/lineage-analysis should handle missing horses gracefully

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 219 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 220 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 221 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 222 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 223 |[39m         })[33m;[39m
     [90m 224 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:221:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üå≥ Advanced Lineage Analysis API ‚Ä∫ POST /api/breeding/breeding-recommendations should generate comprehensive recommendations

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 243 |[39m   describe([32m'üìä Genetic Diversity Tracking API'[39m[33m,[39m () [33m=>[39m {
     [90m 244 |[39m     test([32m'POST /api/genetics/population-analysis should analyze population genetics'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 245 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 246 |[39m
     [90m 247 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 248 |[39m         [33m.[39mpost([32m'/api/genetics/population-analysis'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:245:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:245:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/population-analysis should analyze population genetics

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 274 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)
     [90m 275 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 276 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 277 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 278 |[39m         })[33m;[39m
     [90m 279 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:276:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/inbreeding-analysis should calculate detailed inbreeding

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ GET /api/genetics/diversity-report/:userId should generate comprehensive report

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 401

    [0m [90m 300 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 301 |[39m
    [31m[1m>[22m[39m[90m 302 |[39m       expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 303 |[39m       expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'success'[39m[33m,[39m [36mtrue[39m)[33m;[39m
     [90m 304 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'executiveSummary'[39m)[33m;[39m
     [90m 305 |[39m       expect(response[33m.[39mbody[33m.[39mdata)[33m.[39mtoHaveProperty([32m'currentStatus'[39m)[33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:302:31)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ GET /api/genetics/diversity-report/:userId should generate comprehensive report

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 320 |[39m
     [90m 321 |[39m     test([32m'POST /api/genetics/optimal-breeding should recommend optimal breeding pairs'[39m[33m,[39m [36masync[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 322 |[39m       [36mconst[39m horseIds [33m=[39m testPopulation[33m.[39mmap(h [33m=>[39m h[33m.[39mid)[33m;[39m
     [90m     |[39m                                                  [31m[1m^[22m[39m
     [90m 323 |[39m
     [90m 324 |[39m       [36mconst[39m response [33m=[39m [36mawait[39m request(app)
     [90m 325 |[39m         [33m.[39mpost([32m'/api/genetics/optimal-breeding'[39m)[0m

      at tests/integration/advancedBreedingGeneticsAPI.test.mjs:322:50
          at Array.map (<anonymous>)
      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:322:39)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üìä Genetic Diversity Tracking API ‚Ä∫ POST /api/genetics/optimal-breeding should recommend optimal breeding pairs

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 352 |[39m       [36mconst[39m endpoints [33m=[39m [
     [90m 353 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/genetic-probability'[39m }[33m,[39m
    [31m[1m>[22m[39m[90m 354 |[39m         { method[33m:[39m [32m'get'[39m[33m,[39m path[33m:[39m [32m`/api/breeding/lineage-analysis/${testStallion.data.id}/${testMare.data.id}`[39m }[33m,[39m
     [90m     |[39m                                                                                    [31m[1m^[22m[39m
     [90m 355 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/breeding/breeding-recommendations'[39m }[33m,[39m
     [90m 356 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/population-analysis'[39m }[33m,[39m
     [90m 357 |[39m         { method[33m:[39m [32m'post'[39m[33m,[39m path[33m:[39m [32m'/api/genetics/inbreeding-analysis'[39m }[33m,[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:354:84)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ All genetic endpoints should require authentication

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should validate input parameters

    expect(received).toBe(expected) // Object.is equality

    Expected: 400
    Received: 401

    [0m [90m 373 |[39m         [33m.[39msend({})[33m;[39m
     [90m 374 |[39m
    [31m[1m>[22m[39m[90m 375 |[39m       expect(response1[33m.[39mstatus)[33m.[39mtoBe([35m400[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 376 |[39m
     [90m 377 |[39m       [90m// Test invalid horse IDs[39m
     [90m 378 |[39m       [36mconst[39m response2 [33m=[39m [36mawait[39m request(app)[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:375:32)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should validate input parameters

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 421 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${otherToken}`[39m)
     [90m 422 |[39m         [33m.[39msend({
    [31m[1m>[22m[39m[90m 423 |[39m           stallionId[33m:[39m testStallion[33m.[39mdata[33m.[39mid[33m,[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 424 |[39m           mareId[33m:[39m testMare[33m.[39mdata[33m.[39mid[33m,[39m
     [90m 425 |[39m         })[33m;[39m
     [90m 426 |[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:423:41)

  ‚óè üß¨ Advanced Breeding Genetics API Integration ‚Ä∫ üîí API Security and Validation ‚Ä∫ Genetic endpoints should handle ownership validation

    TypeError: Cannot read properties of undefined (reading 'id')

    [0m [90m 112 |[39m     [36mfor[39m ([36mconst[39m horse [36mof[39m testPopulation) {
     [90m 113 |[39m       [36mawait[39m request(app)
    [31m[1m>[22m[39m[90m 114 |[39m         [33m.[39m[36mdelete[39m([32m`/api/horses/${horse.id}`[39m)
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 115 |[39m         [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m [32m`Bearer ${authToken}`[39m)[33m;[39m
     [90m 116 |[39m     }
     [90m 117 |[39m     testPopulation [33m=[39m [][33m;[39m[0m

      at Object.<anonymous> (tests/integration/advancedBreedingGeneticsAPI.test.mjs:114:38)

PASS __tests__/routes/documentationRoutes.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:13] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:13] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:13] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /health

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation health status

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /validation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Validating OpenAPI specification

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] Documentation generated for 1 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: POST /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: GET /api/test-get

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: POST /api/test-post

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: PUT /api/test-put

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: DELETE /api/test-delete

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: PATCH /api/test-patch

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /coverage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation coverage analysis

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 1d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 7d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation analytics for timeframe: 30d

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification validation passed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /analytics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] warn: [auth] Invalid token for GET /health from ::ffff:127.0.0.1: jwt malformed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] warn: [auth] Missing token for GET /health from ::ffff:127.0.0.1

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: GET /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: POST /api/users

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering endpoint: GET /api/horses

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for GET /metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Getting documentation metrics

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering schema: User

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /schemas

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Registering schema: Horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [auth] Authenticated user 677e452c-97df-477a-b9ee-60cfe12cc08b for POST /generate

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [DocumentationRoutes] Generating API documentation

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] OpenAPI specification saved successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:14] info: [ApiDocService] Documentation generated for 0 endpoints

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/integration/trainingProgression.integration.test.mjs
  ‚óè Console

    console.log
      [2025-11-21 17:59:15] info: [envValidator] Validating test environment configuration...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [envValidator] ‚úÖ All 5 required environment variables are present

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [envValidator] Test environment validation complete. Success: true

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      üß™ Test environment loaded

      at tests/setup.mjs:37:9

    console.log
      üìä Database: postgresql://postgres:***@localhost:5432/equoria_test

      at tests/setup.mjs:38:9

    console.info
      [PrismaClient] Jest cleanup registered successfully.

      at ../packages/database/prismaClient.mjs:55:13

    console.log
      [2025-11-21 17:59:15] info: [SwaggerSetup] OpenAPI specification loaded successfully

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [SwaggerSetup] API documentation setup completed

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [SwaggerSetup] Interactive docs available at: /api-docs

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [SwaggerSetup] OpenAPI JSON available at: /api-docs/swagger.json

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [SwaggerSetup] OpenAPI YAML available at: /api-docs/swagger.yaml

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [cronJobService] Initializing cron jobs...

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [cronJobService] All cron jobs initialized and started

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [MemoryManager] Starting memory and resource monitoring

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [POST] /api/auth/register

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] warn: [MemoryMonitoring] Memory threshold exceeded: 512MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [TokenRotation] Created new token pair

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [EmailVerification] Created verification token

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [EmailService] Email verification (DEV MODE - not sent)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      
      === EMAIL VERIFICATION (DEV MODE) ===

      at sendVerificationEmail (utils/emailService.mjs:227:15)

    console.log
      To: training-integration@example.com

      at sendVerificationEmail (utils/emailService.mjs:228:15)

    console.log
      Subject: Verify Your Email Address - Equoria

      at sendVerificationEmail (utils/emailService.mjs:229:15)

    console.log
      Verification URL: http://localhost:3000/verify-email?token=683541c08f3dde19266681f79f912aad5ad9e597eff056482df137cbf8e991d3

      at sendVerificationEmail (utils/emailService.mjs:230:15)

    console.log
      =====================================

      at sendVerificationEmail (utils/emailService.mjs:231:15)

    console.log
      [2025-11-21 17:59:15] info: [authController.register] Verification email sent

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [POST] /api/auth/register - 201

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] warn: [MemoryMonitoring] Memory threshold exceeded: 506MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingController.trainRouteHandler] Training request for horse 11519 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingController.trainHorse] Attempting to train horse 11519 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingController.canTrain] Checking training eligibility for horse 11519 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingModel.getHorseAge] Getting age for horse 11519

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingModel.getHorseAge] Horse 11519 is 2 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [trainingController.canTrain] Horse 11519 is too young (2 years old)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] warn: [trainingController.trainHorse] Training rejected: Horse is under age

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:15] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [MemoryMonitoring] Memory threshold exceeded: 509MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainRouteHandler] Training request for horse 11520 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Attempting to train horse 11520 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Checking training eligibility for horse 11520 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Getting age for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Horse 11520 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11520 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] No training records found for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Horse 11520 is eligible to train in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 11520)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Horse 11520 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.logTrainingSession] Logging training session for horse 11520 in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 894

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateHorseStat] Updating stamina by 1 for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] error: [horseModel.updateHorseStat] Error updating stat: Invalid stat name: stamina. Valid stats: speed, agility, endurance, strength, precision, balance, coordination, intelligence, focus, obedience, boldness, flexibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:16] error: [trainingController.trainHorse] Failed to update stat: Invalid stat name: stamina. Valid stats: speed, agility, endurance, strength, precision, balance, coordination, intelligence, focus, obedience, boldness, flexibility

      at Console.log (node_modules/winston/lib/winston/transports/console.js:59:25)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.incrementDisciplineScore] Incrementing Racing score for horse 11520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateDisciplineScore] Updating Racing score for horse 11520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateDisciplineScore] Successfully updated Racing score for horse 11520: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.incrementDisciplineScore] Successfully incremented Racing score for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [xpLogModel.logXpEvent] Logging XP event: User 9110bc64-a45f-4bd4-bec7-da6cacb1f070, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Racing

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 668, User 9110bc64-a45f-4bd4-bec7-da6cacb1f070, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Awarded 5 XP to user 9110bc64-a45f-4bd4-bec7-da6cacb1f070 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Successfully trained horse 11520 in Racing (Log ID: 894, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [MemoryMonitoring] Memory threshold exceeded: 512MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainRouteHandler] Training request for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Attempting to train horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Checking training eligibility for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Getting age for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Horse 11520 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11520 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11520: Fri Nov 21 2025 17:59:16 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Horse 11520 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [MemoryMonitoring] Memory threshold exceeded: 516MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainRouteHandler] Training request for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Attempting to train horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Checking training eligibility for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Getting age for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Horse 11520 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11520 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11520: Fri Nov 21 2025 17:59:16 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Horse 11520 still in cooldown for any training (7 days remaining)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [trainingController.trainHorse] Training rejected: Training cooldown active for this horse

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train - 400

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] warn: [MemoryMonitoring] Memory threshold exceeded: 518MB

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainRouteHandler] Training request for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Attempting to train horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Checking training eligibility for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Getting age for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getHorseAge] Horse 11520 is 4 years old

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Checking most recent training date for horse 11520 across all disciplines

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.getAnyRecentTraining] Most recent training date for horse 11520: Thu Nov 13 2025 17:59:16 GMT-0500 (Eastern Standard Time) (discipline: Racing)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.canTrain] Horse 11520 is eligible to train in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.getHorseById] Successfully found horse: Training Integration Mature Horse (ID: 11520)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Horse 11520 has traits:

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.logTrainingSession] Logging training session for horse 11520 in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingModel.logTrainingSession] Successfully logged training session: ID 895

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateHorseStat] Updating precision by 2 for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateHorseStat] Updated precision for horse 11520: 0 -> 2 (+2)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Stat gain: precision +2

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.incrementDisciplineScore] Incrementing Dressage score for horse 11520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateDisciplineScore] Updating Dressage score for horse 11520 by +5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.updateDisciplineScore] Successfully updated Dressage score for horse 11520: 0 -> 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [horseModel.incrementDisciplineScore] Successfully incremented Dressage score for horse 11520

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [xpLogModel.logXpEvent] Logging XP event: User 9110bc64-a45f-4bd4-bec7-da6cacb1f070, Amount: 5, Reason: Trained horse Training Integration Mature Horse in Dressage

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [xpLogModel.logXpEvent] Successfully logged XP event: ID 669, User 9110bc64-a45f-4bd4-bec7-da6cacb1f070, Amount: 5

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Awarded 5 XP to user 9110bc64-a45f-4bd4-bec7-da6cacb1f070 for training

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [trainingController.trainHorse] Successfully trained horse 11520 in Dressage (Log ID: 895, Score +5)

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      [2025-11-21 17:59:16] info: [POST] /api/training/train - 200

      at Console.log (node_modules/winston/lib/winston/transports/console.js:87:23)

C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:132
    docService.contentCache.clear();
               ^

TypeError: Cannot read properties of undefined (reading 'contentCache')
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:132:16
    at global.afterEach (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\jest.setup.mjs:46:13)
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:119:3
    at _dispatchDescribe (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\index.js:91:26)
    at describe (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\index.js:55:5)
    at C:\Users\heirr\OneDrive\Desktop\Equoria\backend\__tests__\services\userDocumentation.test.mjs:34:1
    at SourceTextModule.evaluate (node:internal/vm/module:227:23)
    at Runtime.linkAndEvaluateModule (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runtime\build\index.js:710:20)
    at jestAdapter (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:75:5)
    at runTestInternal (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\heirr\OneDrive\Desktop\Equoria\backend\node_modules\jest-runner\build\runTest.js:444:34)

Node.js v22.13.0
